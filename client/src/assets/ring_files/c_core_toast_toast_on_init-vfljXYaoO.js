define(["require","exports","./c_tslib","./c_core_notify","./c_browser_cookies","./c_security_csrf_hmac","./c_csrf","./e_edison","./c_apex-metrics_src_types","./c_lodash-es_lodash","./c_security_crypto","./c_core_browser_detection"],(function(e,t,o,i,s,r,n,c,u,a,_,d){"use strict";const f="toast";function l(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=yield r.readHmacCookieToken(e,t);if(null==o)return null;if(o.startsWith("er:"))return[!0,o.substring(3)];if(o.startsWith("ok:"))return[!1,o.substring(3)];throw new Error("unrecognized format of message in toast cookie")}))}t.decodeToastCookie=l,t.showToastFromCookie=function(){var t;return o.__awaiter(this,void 0,void 0,(function*(){const o=s.Cookies.read(f);if(o){const r=yield l(o,null!==(t=n.readCsrfToken())&&void 0!==t?t:void 0);if(null!=r){const t=i.require_css("/static/metaserver/static/css/notify-vfl4oJv2S.css"),[o,n]=r,{default:c}=yield new Promise((function(t,o){e(["./c_core_notify"],t,o)})).then((function(e){return e.purify_es})),u=c.sanitize(n),a=document.getElementById("flash");null!=a&&(a.innerHTML=u,a.style.display="block");setTimeout((()=>s.Cookies.delete(f)),2e3),yield t,o?i.Notify.error(new i.HTML(u),10):i.Notify.success(new i.HTML(u),10)}}}))}}));
//# sourceMappingURL=c_core_toast_toast_on_init.js-vflc07zMW.map

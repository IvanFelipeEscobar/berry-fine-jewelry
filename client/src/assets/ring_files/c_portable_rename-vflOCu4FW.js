define(["exports","./c_tslib","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_form_row_index","./c_file_actions_strings","./c_action_bar_action_bar_strings","metaserver/static/js/modules/constants/files_spa","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/core/langpack"],(function(e,t,s,a,n,r,c,o,i,l,m,u,d,_,v,R,g,f,p,E,$,j,h,x,w,y,b,M,N,I,C,k,T,F,S,O){"use strict";const q=({currentName:e,onConfirm:t})=>{const i=a.React$1.useRef(null),[l,m]=a.React$1.useState(!0),[u,d]=a.React$1.useState(e);a.React$1.useEffect((()=>{window.requestAnimationFrame((()=>{if(!i.current)return;i.current.focus();const t=e;let s=t.lastIndexOf(".");s<0&&(s=t.length),i.current.setSelectionRange(0,s)}))}),[]);const _=()=>m(!1),v=e=>-1===e.indexOf("/"),R=v(u),g=()=>{t(u),_()};return a.React$1.createElement(a.React$1.Fragment,null,a.React$1.createElement(s.Modal$1,{open:l,isCentered:!0,onRequestClose:_},a.React$1.createElement(s.Modal$1.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},a.React$1.createElement(s.Title,null,n.intl.formatMessage(o.RENAME_ACTION_STRING))),a.React$1.createElement(s.Modal$1.Body,null,a.React$1.createElement("div",{style:{height:"80px"}},a.React$1.createElement(r.FormRow,null,a.React$1.createElement(s.TextInput,{ref:i,type:"text",id:"create-rename-modal-input",autoFocus:!0,value:u,isInvalid:!R,onChange:e=>{d(e.currentTarget.value),v(e.currentTarget.value)},"aria-describedby":"rename-modal-input-helper",onKeyDown:e=>{e.key===s.Key_enum.Key.Enter&&g()}}),!R&&a.React$1.createElement(r.FormHelperText,{id:"rename-modal-input-helper",variant:"alert"},a.React$1.createElement(s.UIIcon,{src:s.WarningLine,size:"small"})," ",n.intl.formatMessage(c.renameErrorInvalidName))))),a.React$1.createElement(s.Modal$1.Footer,null,a.React$1.createElement(s.Button$1,{variant:"opacity",onClick:_},n.intl.formatMessage({id:"OHzWOE",defaultMessage:"Cancel"})),a.React$1.createElement(s.Button$1,{variant:"primary",disabled:!R,onClick:g},n.intl.formatMessage(o.RENAME_ACTION_STRING)))))};e.portableRename=({currentName:e,fq_path:n,user:r},{onSuccess:o,onError:i,onNetworkRequest:l})=>{var m;m={currentName:e,onConfirm:e=>t.__awaiter(void 0,void 0,void 0,(function*(){null==l||l();const t=yield c.renameFile(n,e,r.id,{checkFSWs:!0});t.isError||"success"!==t.result.entries[0][".tag"]?null==i||i(t.isError?t:c.createUndefinedRpcResult()):null==o||o(t.result.entries[0].success)}))},s.Modal.showInstance(a.React$1.createElement(q,Object.assign({},m)))}}));
//# sourceMappingURL=c_portable_rename.js-vflW199UK.map

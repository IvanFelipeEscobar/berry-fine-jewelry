define(["exports","./c_lodash-es_lodash","./e_edison"],(function(e,t,n){"use strict";var r={},o="a menu outside a mounted Wrapper with an id, or a menu that does not exist";var i={registerManager:function(e,t){r[e]=t},unregisterManager:function(e){delete r[e]},openMenu:function(e,t){var n=r[e];if(!n)throw new Error("Cannot open "+o);n.openMenu(t)},closeMenu:function(e,t){var n=r[e];if(!n)throw new Error("Cannot close "+o);n.closeMenu(t)}},s={exports:{}},a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",c=a;function u(){}function p(){}p.resetWarningCache=u;var f=function(){function e(e,t,n,r,o,i){if(i!==c){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:p,resetWarningCache:u};return n.PropTypes=n,n};s.exports=f();var h=s.exports;function d(e){var t,n,r=(e=e||{}).keybindings||{};for(t in this._settings={keybindings:{next:r.next||{keyCode:40},prev:r.prev||{keyCode:38},first:r.first,last:r.last},wrap:e.wrap,stringSearch:e.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[],this._settings.keybindings)(n=this._settings.keybindings[t])&&[].concat(n).forEach(function(e){e.metaKey=e.metaKey||!1,e.ctrlKey=e.ctrlKey||!1,e.altKey=e.altKey||!1,e.shiftKey=e.shiftKey||!1,this._keybindingsLookup.push({action:t,eventMatcher:e})}.bind(this));this._searchString="",this._members=[],e.members&&this.setMembers(e.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}function l(e){e&&e.focus&&(e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}d.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},d.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},d.prototype._handleKeydownEvent=function(e){if(-1!==this._getActiveElementIndex()){var t=!1;this._keybindingsLookup.forEach(function(n){if(function(e,t){for(var n in e)if(void 0!==t[n]&&e[n]!==t[n])return!1;return!0}(n.eventMatcher,e))switch(t=!0,e.preventDefault(),n.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}.bind(this)),t||this._handleUnboundKey(e)}},d.prototype.moveFocusForward=function(){var e,t=this._getActiveElementIndex();return e=t<this._members.length-1?t+1:this._settings.wrap?0:t,this.focusNodeAtIndex(e),e},d.prototype.moveFocusBack=function(){var e,t=this._getActiveElementIndex();return e=t>0?t-1:this._settings.wrap?this._members.length-1:t,this.focusNodeAtIndex(e),e},d.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},d.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},d.prototype._handleUnboundKey=function(e){if(this._settings.stringSearch){if(""!==this._searchString&&(" "===e.key||32===e.keyCode))return e.preventDefault(),-1;if(!((t=e.keyCode)>=65&&t<=90))return-1;var t;if(e.ctrlKey||e.metaKey||e.altKey)return-1;e.preventDefault(),this._addToSearchString(String.fromCharCode(e.keyCode)),this._runStringSearch()}},d.prototype._clearSearchString=function(){this._searchString=""},d.prototype._addToSearchString=function(e){this._searchString+=e.toLowerCase()},d.prototype._startSearchStringRefreshTimer=function(){var e=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout((function(){e._clearSearchString()}),this._settings.stringSearchDelay)},d.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},d.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},d.prototype.moveFocusByString=function(e){for(var t,n=0,r=this._members.length;n<r;n++)if((t=this._members[n]).text&&0===t.text.indexOf(e))return l(t.node)},d.prototype._findIndexOfNode=function(e){for(var t=0,n=this._members.length;t<n;t++)if(this._members[t].node===e)return t;return-1},d.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},d.prototype.focusNodeAtIndex=function(e){var t=this._members[e];return t&&l(t.node),this},d.prototype.addMember=function(e,t){var n=e.node||e,r=e.text||n.getAttribute("data-focus-group-text")||n.textContent||"";this._checkNode(n);var o={node:n,text:r.replace(/[\W_]/g,"").toLowerCase()};return null!=t?this._members.splice(t,0,o):this._members.push(o),this},d.prototype.removeMember=function(e){var t="number"==typeof e?e:this._findIndexOfNode(e);if(-1!==t)return this._members.splice(t,1),this},d.prototype.clearMembers=function(){return this._members=[],this},d.prototype.setMembers=function(e){this.clearMembers();for(var t=0,n=e.length;t<n;t++)this.addMember(e[t]);return this},d.prototype.getMembers=function(){return this._members},d.prototype._checkNode=function(e){if(!e.nodeType||e.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return e};var m=function(e){return new d(e)},y=m,b=i,v={wrap:!0,stringSearch:!0},g={init:function(e){this.updateOptions(e),this.handleBlur=w.bind(this),this.handleSelection=_.bind(this),this.handleMenuKey=M.bind(this),this.focusGroup=y(v),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(e){var t=this.options;this.options=e||this.options||{},void 0===this.options.closeOnSelection&&(this.options.closeOnSelection=!0),void 0===this.options.closeOnBlur&&(this.options.closeOnBlur=!0),this.options.id&&b.registerManager(this.options.id,this),t&&t.id&&t.id!==this.options.id&&b.unregisterManager(this.options.id,this)},focusItem:function(e){this.focusGroup.focusNodeAtIndex(e)},addItem:function(e){this.focusGroup.addMember(e)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(e){this.focusGroup._handleUnboundKey(e)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(e){if(!this.isOpen&&(void 0===(e=e||{}).focusMenu&&(e.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),e.focusMenu)){var t=this;this.moveFocusTimer=setTimeout((function(){t.focusItem(0)}),0)}},closeMenu:function(e){this.isOpen&&(e=e||{},this.isOpen=!1,this.update(),e.focusButton&&this.button.ref.current.focus())},toggleMenu:function(e,t){e=e||{},t=t||{},this.isOpen?this.closeMenu(e):this.openMenu(t)}};function w(){var e=this;e.blurTimer=setTimeout((function(){if(e.button){var t=e.button.ref.current;if(t){var n=t.ownerDocument.activeElement;if(!t||n!==t){var r=e.menu.ref.current;r!==n?r&&r.contains(n)||e.isOpen&&e.closeMenu({focusButton:!1}):e.focusItem(0)}}}}),0)}function _(e,t){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(e,t)}function M(e){if(this.isOpen)switch(e.key){case"Escape":e.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":e.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":e.preventDefault(),this.focusGroup.moveFocusToLast()}}var O=function(e){var t=Object.create(g);return t.init(e),t},E=n.reactExports.createContext(),T=h,R={refType:T.oneOfType([T.func,T.shape({current:T.elementType})])},S=function(e,t,n){for(var r in n=n||{},t)t.hasOwnProperty(r)&&(n[r]||(e[r]=t[r]))};var x=n.reactExports,k=h,C=O,L=E,I=R.refType,K=S,D={children:k.node.isRequired,forwardedRef:I,onMenuToggle:k.func,onSelection:k.func,closeOnSelection:k.bool,closeOnBlur:k.bool,tag:k.string},B=function(e){return{onMenuToggle:e.onMenuToggle,onSelection:e.onSelection,closeOnSelection:e.closeOnSelection,closeOnBlur:e.closeOnBlur,id:e.id}},j=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.manager=C(B(n)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},t.prototype.render=function(){var e={};return K(e,this.props,D),x.createElement(L.Provider,{value:this.manager},x.createElement(this.props.tag,e,this.props.children))},t}(x.Component);j.propTypes=D,j.defaultProps={tag:"div"};var F=x.forwardRef((function(e,t){var n={forwardedRef:t};return K(n,e,{children:D.children,forwardedRef:D.forwardedRef}),K(n,{forwardedRef:t}),x.createElement(j,n,e.children)}));function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var A=n.reactExports,N=h,G=E,U=R.refType,q=S,W={ambManager:N.object.isRequired,children:N.node.isRequired,disabled:N.bool,forwardedRef:U,tag:N.string},H=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=P(this,e.call.apply(e,[this].concat(i))),r.ref=A.createRef(),r.handleKeyDown=function(e){if(!r.props.disabled){var t=r.props.ambManager;switch(e.key){case"ArrowDown":e.preventDefault(),t.isOpen?t.focusItem(0):t.openMenu();break;case"Enter":case" ":e.preventDefault(),t.toggleMenu();break;case"Escape":t.handleMenuKey(e);break;default:t.handleButtonNonArrowKey(e)}}},r.handleClick=function(){r.props.disabled||r.props.ambManager.toggleMenu({},{focusMenu:!1})},r.setRef=function(e){r.ref.current=e,"function"==typeof r.props.forwardedRef?r.props.forwardedRef(e):r.props.forwardedRef&&(r.props.forwardedRef.current=e)},P(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.ambManager.button=this},t.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},t.prototype.render=function(){var e=this.props,t=this.props.ambManager,n={role:"button",tabIndex:e.disabled?"":"0","aria-haspopup":!0,"aria-expanded":t.isOpen,"aria-disabled":e.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},r={};return q(r,W),["button","fieldset","input","optgroup","option","select","textarea"].indexOf(e.tag)>=0&&delete r.disabled,t.options.closeOnBlur&&(n.onBlur=t.handleBlur),q(n,e,r),q(n,{ref:this.setRef}),A.createElement(e.tag,n,e.children)},t}(A.Component);H.propTypes=W,H.defaultProps={tag:"span"};var Y=A.forwardRef((function(e,t){return A.createElement(G.Consumer,null,(function(n){var r={ambManager:n,forwardedRef:t};return q(r,e,{ambManager:W.ambManager,children:W.children,forwardedRef:W.forwardedRef}),A.createElement(H,r,e.children)}))})),X=function(e,t,n){var r=0,o=0,i=!1,s=!1,a=!1;function c(e){a||t(e)}function u(t){a=!0,i||(i=!0,e.addEventListener("touchmove",p,n),e.addEventListener("touchend",f,n),e.addEventListener("touchcancel",h,n),s=!1,r=t.touches[0].clientX,o=t.touches[0].clientY)}function p(e){s||Math.abs(e.touches[0].clientX-r)<=10&&Math.abs(e.touches[0].clientY-o)<=10||(s=!0)}function f(e){i=!1,d(),s||t(e)}function h(){i=!1,s=!1,r=0,o=0}function d(){e.removeEventListener("touchmove",p,n),e.removeEventListener("touchend",f,n),e.removeEventListener("touchcancel",h,n)}return e.addEventListener("click",c,n),e.addEventListener("touchstart",u,n),{remove:function(){e.removeEventListener("click",c,n),e.removeEventListener("touchstart",u,n),d()}}};function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var z=n.reactExports,J=h,Q=X,Z=E,$=R.refType,ee=S,te={ambManager:J.object.isRequired,children:J.oneOfType([J.func,J.node]).isRequired,forwardedRef:$,tag:J.string},ne=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=V(this,e.call.apply(e,[this].concat(i))),r.ref=z.createRef(),r.addTapListener=function(){var e=r.ref.current;if(e){var t=e.ownerDocument;t&&(r.tapListener=Q(t.documentElement,r.handleTap))}},r.handleTap=function(e){r.ref.current.contains(e.target)||r.props.ambManager.button.ref.current.contains(e.target)||r.props.ambManager.closeMenu()},r.setRef=function(e){r.ref.current=e,"function"==typeof r.props.forwardedRef?r.props.forwardedRef(e):r.props.forwardedRef&&(r.props.forwardedRef.current=e)},V(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.ambManager.menu=this},t.prototype.componentDidUpdate=function(){var e=this.props.ambManager;e.options.closeOnBlur&&(e.isOpen&&!this.tapListener?this.addTapListener():!e.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),e.isOpen||e.clearItems())},t.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},t.prototype.render=function(){var e=this.props,t=this.props.ambManager,n="function"==typeof e.children?e.children({isOpen:t.isOpen}):!!t.isOpen&&e.children;if(!n)return!1;var r={onKeyDown:t.handleMenuKey,role:"menu",tabIndex:-1};return t.options.closeOnBlur&&(r.onBlur=t.handleBlur),ee(r,e,te),ee(r,{ref:this.setRef}),z.createElement(e.tag,r,n)},t}(z.Component);ne.propTypes=te,ne.defaultProps={tag:"div"};var re=z.forwardRef((function(e,t){return z.createElement(Z.Consumer,null,(function(n){var r={ambManager:n,forwardedRef:t};return ee(r,e,{ambManager:te.ambManager,children:te.children,forwardedRef:te.forwardedRef}),z.createElement(ne,r,e.children)}))}));function oe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ie=n.reactExports,se=h,ae=E,ce=R.refType,ue=S,pe={ambManager:se.object.isRequired,children:se.node.isRequired,forwardedRef:ce,tag:se.string,text:se.string,value:se.any},fe=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=oe(this,e.call.apply(e,[this].concat(i))),r.ref=ie.createRef(),r.handleKeyDown=function(e){"Enter"!==e.key&&" "!==e.key||"a"===r.props.tag&&r.props.href||(e.preventDefault(),r.selectItem(e))},r.selectItem=function(e){var t=void 0!==r.props.value?r.props.value:r.props.children;r.props.ambManager.handleSelection(t,e)},r.setRef=function(e){r.ref.current=e,"function"==typeof r.props.forwardedRef?r.props.forwardedRef(e):r.props.forwardedRef&&(r.props.forwardedRef.current=e)},oe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},t.prototype.render=function(){var e={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return ue(e,this.props,pe),ie.createElement(this.props.tag,e,this.props.children)},t}(ie.Component);fe.propTypes=pe,fe.defaultProps={tag:"div"};var he=ie.forwardRef((function(e,t){return ie.createElement(ae.Consumer,null,(function(n){var r={ambManager:n,forwardedRef:t};return ue(r,e,{ambManager:pe.ambManager,children:pe.children,forwardedRef:pe.forwardedRef}),ie.createElement(fe,r,e.children)}))})),de={Wrapper:F,Button:Y,Menu:re,MenuItem:he,openMenu:i.openMenu,closeMenu:i.closeMenu};e.dist=de}));
//# sourceMappingURL=c_prop-types_index.js-vflXV4fHm.map

define(["require","exports","./c_tslib","./e_ui_page_files_router","./c_files_view_file_actions_file_from_metadata","./c_history","./c_data_action_creators_index","./c_file_actions_strings","./c_src_sink_index","./c_action_bar_file_actions_logging","./c_files_view_file_actions_snackbars","./c_core_i18n","./c_sync_everything_hive_logger","./c_pap-events_previews_rename_file","./c_sharing_async_share_modal_util","./c_flows_utils_async_modal_launchers","metaserver/static/js/modules/constants/global_file_upload"],(function(e,t,s,r,o,a,i,n,l,c,d,u,h,_,S,f,p){"use strict";const m=({state:e,eventName:t,num_files_selected:s,num_folders_selected:o,batch_success_count:a,batch_fail_count:i,lookup_error_type:n,error_summary:l})=>{r.logBrowseAction({uid:r.user$1(e).id,action:t,num_files_selected:s,num_folders_selected:o,view_type:r.selectViewType(e,{instanceId:r.BROWSE_FILES_VIEW_ID}),batch_success_count:a,batch_fail_count:i,lookup_error_type:n,error_summary:l})},F=({files:e,checkFSWs:t})=>(a,S)=>s.__awaiter(void 0,void 0,void 0,(function*(){const f=r.user$1(S()),p=r.path$1(S()),g=r.shouldShowDeletedFiles(S()),E=l.getMetricsReporter(),w=0!==e.length?r.backupInfoByFile(S())(e[0]):void 0,v="cb"===(null==w?void 0:w.type)&&w.usesAnchors,{expEnabledBackupWebDoNotBackup:A}=r.browsePostTTIExperiments(S()),b="cb"===(null==w?void 0:w.type)&&w.usesAnchors&&A,T={surface:"browse",batchSizeBucket:o.bucketForBatchSize(e.length),contentType:o.batchContentType(e)},P=e.reduce(((e,t)=>e+(t.is_dir?0:1)),0),y=e.reduce(((e,t)=>e+(t.is_dir?1:0)),0),x=c.startFileActionLogging(_.PAP_Delete_File,{actionSurface:T.surface,numFiles:P,numFolders:y});e.forEach((t=>{r.logFileAction({uid:f.id,action:r.WebUserActionLogEvent.DELETE_ITEM_ATTEMPT,num_files_selected:e.length,num_folders_selected:0,item_id:t.file_id,extra:{action_id:x.actionId}})}));const N=E.createTimer({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"delete/batch/latency_total_ms"},T),C=Date.now(),I=E.createStats({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"delete/batch/latency_average_ms"},T),M=E.createStats({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"delete/batch/completed"},T);if(r.Snackbar.sync(u.intl.formatMessage(n.deleteSnackbarProgressMessage,{count:e.length}),!0,"browse-action"),1!==e.length||g||a(i.pushBoltIgnore({removed:new Set([e[0].fq_path])})),m({state:S(),eventName:r.WebUserActionLogEvent.DELETE_REQUEST_ATTEMPT,num_files_selected:e.length,num_folders_selected:0}),w&&v&&h.logEvent({action_surface:"browse_delete_modal",event:"click_delete",page_source:"browse",extra:{id:w.id,backup_type:r.BackupType.COMPUTER}}),b){const t=yield n.doNotBackupFiles(e,f.id);if(t.isError){const s=n.createUndefinedRpcResult();return r.Snackbar.fail(d.deleteError(e.length,s.error),"browse-action"),void x.failed(t.error[".tag"])}}const R=yield n.deleteFiles(e,f.id,t);if(R.isError&&x.failed(R.error_summary),R.isError&&"path"===R.error[".tag"]&&"file_system_warnings"===R.error.path[".tag"])return void a((({files:e,details:t})=>(o,a)=>s.__awaiter(void 0,void 0,void 0,(function*(){r.Snackbar.close("browse-action"),r.showFileSystemWarningsModal({fsws:t,onFinalAccept:()=>{o(F({files:e,checkFSWs:!1}))},confirmText:u.intl.formatMessage(n.deleteFswConfirmText)})})))({files:e,details:R.error.path.details}));if(N.record(),I.record((Date.now()-C)/e.length),R.isError)return a((({files:e,result:t})=>(o,a)=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=r.shouldShowDeletedFiles(a());1!==e.length||s||o(i.popBoltIgnore({removed:new Set([e[0].fq_path])})),r.Snackbar.fail(d.deleteError(e.length,t.error),"browse-action");const n=r.selectedFiles$1(a()),{num_files_selected:l,num_folders_selected:c}=r.countFilesAndFolders(n);m({state:a(),eventName:r.WebUserActionLogEvent.DELETE_REQUEST_FAIL,num_files_selected:l,num_folders_selected:c,batch_success_count:0,batch_fail_count:e.length,error_summary:t.error_summary})})))({files:e,result:R})),void M.record(0);const U=R.result.entries.filter((e=>"success"===e[".tag"])),k=R.result.entries.filter(n.isFailure),q=k.reduce(((e,t)=>{var s;return(e=null!=e?e:{})[t.failure[".tag"]]=(null!==(s=e[t.failure[".tag"]])&&void 0!==s?s:0)+1,e}),void 0);x.success(q),a((({pathAtRequestTime:e,successEntries:t})=>(o,a)=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=r.shouldShowDeletedFiles(a());if(!r.paths_are_equal(r.path$1(a()),e))return;const n=t.map((e=>e.metadata.path_display)),l=r.unsortedFiles(a()),c=n.reduce(((e,t)=>{if(void 0===t)return e;const o=l.get(t);return s&&void 0!==o?e.set(t,new r.File(Object.assign(Object.assign({},o),{isDeleted:!0}))):e.delete(t)}),l);o(i.setUnsortedFiles({unsortedFiles:c}))})))({pathAtRequestTime:p,successEntries:U}));const L=((e,t)=>()=>s.__awaiter(void 0,void 0,void 0,(function*(){r.Snackbar.close("browse-action"),m({state:e,eventName:r.WebUserActionLogEvent.DELETE_UNDO,num_files_selected:t.result.changeset_data.length,num_folders_selected:0}),c.rollback({changeset_data:t.result.changeset_data,userId:r.user$1(e).id,onSuccess:()=>{r.Snackbar.complete(u.intl.formatMessage(n.deleteUndoSnackbarMessage),"browse-action"),m({state:e,eventName:r.WebUserActionLogEvent.DELETE_UNDO_REQUEST_SUCCESS,num_files_selected:t.result.changeset_data.length,num_folders_selected:0})}})})))(S(),R);r.setHandleUndo(L);const B=k[0];let O,D;if(void 0!==B){const e=B.failure;O=e[".tag"],n.isPathLookupFailure(e)&&(D=e.path_lookup[".tag"])}const W=R.result.entries.filter((e=>n.isFailure(e)&&!n.isPathLookupFailure(e.failure))).length;M.record(W>0?0:1),o.recordPathLookupErrors(k,"delete",T),k.length===R.result.entries.length?(r.Snackbar.fail(d.deleteCompleteError(k),"browse-action"),m({state:S(),eventName:r.WebUserActionLogEvent.DELETE_REQUEST_FAIL,num_files_selected:R.result.changeset_data.length,num_folders_selected:0,batch_success_count:R.result.entries.length-k.length,batch_fail_count:k.length,error_summary:O,lookup_error_type:D}),w&&v&&h.logEvent({action_surface:"browse_delete_modal",event:"delete_failure",page_source:"browse",extra:{id:w.id,backup_type:r.BackupType.COMPUTER}})):(r.publishEvent(r.CampaignEvents.DELETE_SUCCESS),r.Snackbar.completeWithUndo(d.deleteCompleteSuccess(e.length,U.length),L,"browse-action"),m({state:S(),eventName:r.WebUserActionLogEvent.DELETE_REQUEST_SUCCESS,num_files_selected:R.result.changeset_data.length,num_folders_selected:0,batch_success_count:R.result.entries.length,batch_fail_count:0,error_summary:O,lookup_error_type:D}),w&&v&&h.logEvent({action_surface:"browse_delete_modal",event:"delete_success",page_source:"browse",extra:{id:w.id,backup_type:r.BackupType.COMPUTER}}))})),g=(e,t,s,o)=>{const a=r.selectedFiles$1(e),{num_files_selected:i,num_folders_selected:n}=r.countFilesAndFolders(a);r.logRenameFiles({uid:r.user$1(e).id,num_files_selected:i,num_folders_selected:n,view_type:r.selectViewType(e,{instanceId:r.BROWSE_FILES_VIEW_ID}),result:s},t,o)},E=({file:e,name:t,checkFSWs:a,onSuccessSnackbarClose:h})=>(S,f)=>s.__awaiter(void 0,void 0,void 0,(function*(){const p=r.user$1(f()),m=r.path$1(f()),F=l.getMetricsReporter(),w={surface:"browse",contentType:e.is_dir?"folders":"files"},v=e.is_dir?0:1,A=e.is_dir?1:0,b=c.startFileActionLogging(_.PAP_Rename_File,{actionSurface:w.surface,numFiles:v,numFolders:A}),T={latency:F.createTimer({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"rename/latency_ms"},w),completed:F.createStats({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"rename/completed"},w)};if(-1!==t.indexOf("/"))return r.Snackbar.fail(u.intl.formatMessage(n.renameErrorInvalidName),"browse-action"),S(r.setFileRename({file:e,renameState:null})),void b.failed("client.disallowed_name");S(r.setFileRename({file:e,renameState:r.RenameState.SAVING_INPUT})),r.Snackbar.sync(u.intl.formatMessage(n.renameSnackbarProgressMessage),!1,"browse-action");const P=yield n.renameFile(e.fq_path,t,p.id,{checkFSWs:a});if(P.isError&&b.failed(P.error_summary),P.isError&&"to"===P.error[".tag"]&&"file_system_warnings"===P.error.to[".tag"])return void S((({file:e,name:t,details:o})=>(a,l)=>s.__awaiter(void 0,void 0,void 0,(function*(){r.Snackbar.close("browse-action"),r.showFileSystemWarningsModal({fsws:o,onFinalAccept:()=>{a(E({file:e,name:t,checkFSWs:!1}))},onAbortAction:()=>{a(r.setFileRename({file:e,renameState:null})),a(i.pushBoltIgnore({moved:new Set([e.fq_path])}))},confirmText:u.intl.formatMessage(n.renameFswConfirmText)})})))({file:e,name:t,details:P.error.to.details}));if(T.latency.record(),P.isError||"success"!==P.result.entries[0][".tag"]){const t=P.isError?P:n.createUndefinedRpcResult();return S((({file:e,result:t})=>(o,a)=>s.__awaiter(void 0,void 0,void 0,(function*(){o(i.pushBoltIgnore({moved:new Set([e.fq_path])})),o(r.setFileRename({file:e,renameState:null})),r.Snackbar.fail(d.renameError(t.error,e.fq_path),"browse-action"),g(a(),r.WebUserActionLogEvent.RENAME_REQUEST_FAIL,e,t.error_summary)})))({file:e,result:t})),T.completed.record(0),void F.createStats({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"rename/error"},Object.assign(Object.assign({},w),{error:t.error[".tag"]})).record(1)}b.success();const y=P.result.entries[0],x=o.fileFromMetadata(e,y.success);r.paths_are_equal(r.path$1(f()),m)&&(S(i.setUnsortedFiles({unsortedFiles:r.unsortedFiles(f()).remove(e.fq_path).set(x.fq_path,x)})),S(r.fileRename({file:e,newFile:x})),S(i.fileRename({file:e,newFile:x})),S(i.refreshPinnedItems())),S(i.selectFilesByFqPath({fqPathsToSelect:[x.fq_path]})),S(r.setFileRename({file:e,renameState:null})),T.completed.record(1);const N=()=>{S((({file:e,pathAtRequestTime:t,resultEntry:a,changeset:c})=>(d,h)=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=r.user$1(h()),_=o.fileFromMetadata(e,a.success),S=l.getMetricsReporter(),f={surface:"browse",contentType:e.is_dir?"folders":"files",batchSizeBucket:"single"},p={latency:S.createTimer({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"undo/latency_ms"},f),completed:S.createStats({ns:o.FILE_ACTIONS_AMP_NAMESPACE,name:"undo/completed"},f)};r.Snackbar.sync(u.intl.formatMessage(n.renameUndoSnackbarProgressMessage),!1,"browse-action"),d(i.pushBoltIgnore({added:new Set([e.fq_path]),removed:new Set([_.fq_path])})),g(h(),r.WebUserActionLogEvent.RENAME_UNDO,e);const m=yield n.undo(c,s);m.isError?(r.Snackbar.fail(u.intl.formatMessage(n.renameUndoSnackbarErrorMessage),"browse-action"),d(i.popBoltIgnore({added:new Set([e.fq_path]),removed:new Set([_.fq_path])})),g(h(),r.WebUserActionLogEvent.RENAME_UNDO_REQUEST_FAIL,e,m.error_summary),p.completed.record(0)):(r.Snackbar.complete(u.intl.formatMessage(n.renameUndoSnackbarSuccessMessage),"browse-action"),r.paths_are_equal(r.path$1(h()),t)&&(d(i.setUnsortedFiles({unsortedFiles:r.unsortedFiles(h()).remove(_.fq_path).set(e.fq_path,e)})),d(i.refreshPinnedItems())),d(i.selectFilesByFqPath({fqPathsToSelect:[e.fq_path]})),g(h(),r.WebUserActionLogEvent.RENAME_UNDO_REQUEST_SUCCESS,e),p.completed.record(1)),p.latency.record()})))({file:e,resultEntry:y,pathAtRequestTime:m,changeset:P.result.changeset_data}))};r.setHandleUndo(N),r.Snackbar.completeWithUndo(u.intl.formatMessage(n.renameSnackbarSuccessMessage),N,"browse-action",{onClosed:()=>{null==h||h(x)}}),g(f(),r.WebUserActionLogEvent.RENAME_REQUEST_SUCCESS,x)}));const w=new class{constructor(){this.totalNumFiles=-1,this.initializeEverything=({path:t,files:o,paginatedTotalNumFiles:a,context:n,mountPoints:l,fqPathsToSelect:c,loadingState:d,teamFolders:u,currentFolderInfo:h})=>s.__awaiter(this,void 0,void 0,(function*(){this.reduxStore.dispatch(i.setPath({path:t})),this.reduxStore.dispatch(i.appendFiles({path:t,files:[...o,...u],currentFolderInfo:h})),this.totalNumFiles!==a&&(this.totalNumFiles=a,this.reduxStore.dispatch(i.setPaginatedTotalNumFiles({paginatedTotalNumFiles:a}))),this.reduxStore.dispatch(i.setMountPoints({mountPoints:l})),this.reduxStore.dispatch(i.setLoadingState({loadingState:d,path:t})),d===r.LoadingState.LOADED?this.reduxStore.dispatch(i.selectFilesByFqPath({fqPathsToSelect:c})):this.reduxStore.dispatch(i.setFilePathsToSelectOnNextUpdate({filePathsToSelectOnNextUpdate:r.immutableExports.Set(c)})),this.reduxStore.dispatch(i.setContext({context:n})),this.reduxStore.dispatch(i.setCurrentFolderInfo({currentFolderInfo:h}));const _={path:t,hasPermissionToUploadToFolder:n.isCurrentPathWriteable(),isMovingIntoVault:n.isInsideVaultFolder};new Promise((function(t,s){e(["./c_data_slice"],t,s)})).then((function(e){return e.slice_esnext})).then((({uploadActionCreators:e})=>{this.reduxStore.dispatch(e.setPath(_))}));const{ActionsAdapter:S}=yield new Promise((function(t,s){e(["./c_file_uploader_actions_adapter"],t,s)}));S.on("uploadComplete",(({filesAdded:e})=>s.__awaiter(this,void 0,void 0,(function*(){if(!e||0===e.length)return;const t=e.map((e=>r.normalize(e.path)+r.normalize(e.name)));p.WEB_UPLOAD_OPTIMISTIC_UPDATES||this.selectFilesAfterUpload({fqPathsToSelect:t})}))))})),this.addFilesAndSetLoadingState=({path:e,loadingState:t,files:s,paginatedTotalNumFiles:r})=>{this.reduxStore.dispatch(i.appendFiles({path:e,files:s})),this.totalNumFiles!==r&&(this.totalNumFiles=r,this.reduxStore.dispatch(i.setPaginatedTotalNumFiles({paginatedTotalNumFiles:r}))),this.reduxStore.dispatch(i.setLoadingState({loadingState:t,path:e}))},this.setUrl=({path:e,qargs:t,expandedBlade:s,forceExpandRightRail:r})=>{this.reduxStore.dispatch(i.setUrl({path:e,qargs:t,expandedBlade:s,forceExpandRightRail:r}))},this.nameNewFolder=()=>{this.reduxStore.dispatch(i.setNewFolderCreationState({newFolderCreationState:r.NewFolderCreationState.PENDING_INPUT}))},this.createFolderPending=()=>{o.logCreateFolderPending(),this.reduxStore.dispatch(i.setNewFolderCreationState({newFolderCreationState:r.NewFolderCreationState.SAVING_INPUT}))},this.cancelCreateFolder=e=>{o.logCreateFolderCancel(e),this.reduxStore.dispatch(i.setNewFolderCreationState({newFolderCreationState:r.NewFolderCreationState.CREATE_FOLDER_INACTIVE}))},this.createFolderComplete=()=>{o.logCreateFolderSuccess(),this.reduxStore.dispatch(i.setNewFolderCreationState({newFolderCreationState:r.NewFolderCreationState.CREATE_FOLDER_INACTIVE})),r.Snackbar.complete(u.intl.formatMessage({id:"a26imc",defaultMessage:"Folder created."}),"browse-action")},this.createFolder=e=>{this.reduxStore.dispatch(i.createFolder(e))},this.createFolderInNewFolderModal=({folderName:e,isConfidential:t,user:s,context:r,redirectOnSuccess:o,redirectOnCancel:a,fqPath:i,selectCreatedFolder:n,origin:l,shouldSuppressRedirectToBrowse:c,handleSuccessSharing:d,handleCancelSharing:u,shouldLaunchAutomationModal:h,defaultRecipientAccessLevel:_})=>{const f=r?r.currentFQPath:i,p=r?r.rootNSID:s.root_ns_id;if(t&&r&&!r.isInsideTeamFolderTree)S.asyncShowNewFolderShareModal({defaultBasePath:f,initialContentName:e,onCancel:u,onSuccessSharing:d,setUrl:this.setUrl,shouldSuppressRedirectToBrowse:c,user:s,automationOptionChecked:h,defaultRecipientAccessLevel:_});else{const i=(s.is_cdm_member||t)&&!!r&&r.isInsideTeamFolderTree;w.createFolder({pathName:f,folderName:e,nsId:p,checkFSWs:!1,showShareModalOnSuccess:i?this.handleShowShareModal:null,redirectOnSuccess:o,redirectOnCancel:a,selectCreatedFolder:n,origin:l,user:s})}},this.handleNewFolderRedirectOnSuccess=e=>{this.setUrl({path:e})},this.handleNewFolderAutomationRedirect=(e,t,s,r)=>{this.setUrl({path:e}),f.asyncLaunchAddOrEditAutoFolderModal({fqPath:e,nsId:s,user:t,entryPoint:r,source:"add_from_folder_creation"})},this.doDeleteFilesWithModal=({files:e})=>{const t=r.user$1(this.reduxStore.getState()),o=r.context(this.reduxStore.getState());r.showDelete(t,e,o,r.filename(o.currentFQPath),(()=>s.__awaiter(this,void 0,void 0,(function*(){this.reduxStore.dispatch(F({files:[...e],checkFSWs:!0}))}))))},this.openBackupDeleteDeviceFolderModal=e=>{const t=r.folderBackupInfoByPath(this.reduxStore.getState())(e[0]);r.showBackupDeleteDeviceFolderModal(t,e)},this.purgeSuccessCallback=e=>{w.reloadCurrentPath()},this.onPurgeBatch=(t,s)=>{new Promise((function(t,s){e(["./c_trash_actions"],t,s)})).then((function(e){return e.actions_esnext})).then((({purgeByPathBatch:e})=>{var o;const a=r.isBackupBrowse()?null===(o=r.context(this.reduxStore.getState()))||void 0===o?void 0:o.rootNSID:void 0;e(t,s,this.purgeSuccessCallback,void 0,null!=a?a:void 0)}))},this.doPermanentDeleteWithModal=e=>{const t=r.user$1(this.reduxStore.getState()),s=r.context(this.reduxStore.getState());r.showPurgeModal({userId:t.id,context:s,files:e,onPurge:this.onPurgeBatch})},this.onRestore=(e,t,s,o)=>{r.restoreFiles({files:t,userId:e,onSuccess:()=>{r.notifyRestoreSuccess(t)},isSearchMode:s,rootNsId:o})},this.doRestoreFilesWithUnifiedTrashModal=({files:e})=>{const t=r.user$1(this.reduxStore.getState()),s=r.context(this.reduxStore.getState());r.showUnifiedTrashModal({userId:t.id,context:s,files:e,onRestore:(e,t)=>{var r;this.onRestore(e,t,!1,null!==(r=s.rootNSID)&&void 0!==r?r:void 0)}})},this.handleShowRewindPanel=()=>{a.DBHistory.update_query_param(r.BrowseQueryArg.rewind,"true"),this.reduxStore.dispatch(i.showRewind())},this.fetchFolderSizes=({file:e})=>s.__awaiter(this,void 0,void 0,(function*(){const t=r.user$1(this.reduxStore.getState());let s=r.MAX_FOLDER_SIZE_ITERATIONS;try{this.reduxStore.dispatch(i.requestFolderSizes({fqPath:e.fq_path}));const o=yield r.fetchSharedFolderSizes(t.id,{fq_path:e.fq_path});this.reduxStore.dispatch(i.setFolderSizesPending({fetchFolderSizesResp:o}));let a=[],n=yield this.fetchAndSetSameNamespaceFolderSize(t.id,e.file_id,{fq_path:e.fq_path,folder_limit:r.MAX_FOLDERS_PER_CALL});for(n.queue&&(a=[...a,...n.queue]);a.length>0&&s>0;){s--;const o=Math.min(r.MAX_FOLDER_SIZE_QUEUE_SIZE,a.length),i=a.splice(0,o);n=yield this.fetchAndSetSameNamespaceFolderSize(t.id,e.file_id,{fq_path:e.fq_path,folder_limit:r.MAX_FOLDERS_PER_CALL,queue:i}),n.queue&&a&&(a=[...a,...n.queue])}const l=0!==s&&n.queue&&0===n.queue.length?r.FetchFolderSizeState.COMPLETE:r.FetchFolderSizeState.ERROR;this.reduxStore.dispatch(i.completeFolderSizes({fetchFolderSizeState:l}))}catch(t){this.reduxStore.dispatch(i.setFolderSizesPending({fetchFolderSizesResp:{sizes_dict:[{fq_path:e.fq_path,size:0}],queue:[]}})),this.reduxStore.dispatch(i.completeFolderSizes({fetchFolderSizeState:r.FetchFolderSizeState.ERROR}))}})),this.fetchMultipleFolderSizes=({files:e})=>s.__awaiter(this,void 0,void 0,(function*(){for(const t of e.toArray())yield this.fetchFolderSizes({file:t})})),this.handleShowShareModal=(e,t,s=!1)=>{const o=r.user$1(this.reduxStore.getState()),a=r.context(this.reduxStore.getState());S.asyncShowShareModal(o,e,{browseContext:a,origin:t,automationOptionChecked:s},this.setUrl)},this.reduxStore=r.getStoreForBrowse()}reloadCurrentPath(){this.setUrl({path:r.path$1(this.reduxStore.getState()),qargs:{reload:!0}})}selectRowsFromBoltClient(e=[]){this.reduxStore.dispatch(i.setFilePathsToSelectOnNextUpdate({filePathsToSelectOnNextUpdate:r.immutableExports.Set(e.map((e=>e.fq_path)))}))}selectFilesAfterUpload({fqPathsToSelect:e}){const t=r.unsortedFilesWithFolderSizes(this.reduxStore.getState());e.every((e=>t.has(e)))?this.reduxStore.dispatch(i.selectFilesByFqPath({fqPathsToSelect:e})):this.reduxStore.dispatch(i.setFilePathsToSelectOnNextUpdate({filePathsToSelectOnNextUpdate:r.immutableExports.Set(e)}))}selectFilesByFqPath({fqPathsToSelect:e}){this.reduxStore.dispatch(i.selectFilesByFqPath({fqPathsToSelect:e}))}setShouldShowDeletedFiles({shouldShowDeletedFiles:e}){e?a.DBHistory.update_query_param(r.BrowseQueryArg.d,"1"):a.DBHistory.remove_query_param(r.BrowseQueryArg.d)}fetchAndSetSameNamespaceFolderSize(e,t,o){return s.__awaiter(this,void 0,void 0,(function*(){const s=r.user$1(this.reduxStore.getState()),{rootNSID:a}=r.context(this.reduxStore.getState()),n=!!a&&r.isUnmountedBackupBrowse(s,a)?yield r.fetchUnmountedBackupFolderSizes(e,t,o):yield r.fetchSameNamespaceFolderSizes(e,o);return this.reduxStore.dispatch(i.setFolderSizesPending({fetchFolderSizesResp:n})),n}))}};t.browseActions=w,t.renameFile=E}));
//# sourceMappingURL=c_browse_actions.js-vflZOgeHp.map

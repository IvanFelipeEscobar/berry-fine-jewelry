define(["exports","./e_edison","./e_ui_page_files_router","./c_file_store_utils","./c_flows_components_error_boundary","./c_flows_constants","./c_flows_utils_file_utils","./c_flows_lib_api","./c_flows_redux_actions","./c_flows_redux_reducer","./c_flows_redux_selectors","./c_flows_redux_store","./c_tslib","./c_apex-metrics_src_types","./c_lodash-es_lodash","metaserver/static/js/modules/constants/files_spa","./c_core_i18n","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","./c_flows_utils_bolt","./c_flows_logging_flows_loggers","./c_flows_utils_notifications","./c_flows_utils_browse_logger","./c_src_common_constants","./c_flows_hooks_workflow_builder_hooks","./c_data_action_creators_index","./c_files_view_file_actions_file_from_metadata","./c_file_actions_strings","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","./c_workflow_builder_workflow_actions_action_ui_config","./c_truncate_index","./c_form_row_index","./c_ui_tree_view","./c_icon_folder_icon","./c_components_spacer_index","./c_naming_conventions_utils","./c_tagging_components_tags_container","./c_components_item_truncation_container","./c_hooks_resize_observer","./c_resize-observer-polyfill_dist_ResizeObserver","./c_tagging_components_tags_search","./c_typeahead_index","./c_modal_filters_view_tidy_filters","./c_folder_dialog_folder_picker_dig","./c_table_columns_file_name_column","./c_src_table","./c_react-table_index","./c_src_icons_file_icon","./c_src_icons_file_icon_extensions","./c_combinations_index","./c_spectrum_icon_arrow_index","./c_icon_templates_stateless_index","./c_spectrum_svg_icon_bundle","./c_keymaster","./c_browse_interface","./c_breadcrumb_index","./c_ui_hoc","./c_plugin_utils_tilingFunc","./c_plugin_utils_getImageDefaultSizes"],(function(e,t,s,o,c,r,_,n,i,a,l,u,d,m,f,g,h,p,b,w,v,x,S,E,F,k,R,j,B,T,I,A,y,O,q,U,C,D,G,P,W,z,N,L,X,H,J,K,M,Q,V,Y,Z,$,ee,te,se,oe,ce,re,_e,ne,ie,ae,le,ue,de,me,fe,ge,he,pe,be,we,ve,xe,Se,Ee,Fe,ke,Re,je,Be,Te){"use strict";const Ie={getFolderRulesConfig:i.getWorkflowStepsConfig,getUserExperiments:i.getUserExperiments,setShouldSubscribeToBolt:i.setShouldSubscribeToBolt,mergeUserAutomations:i.mergeUserAutomations,getSavedWorkflowTemplates:i.getSavedWorkflowTemplates,setInheritanceBlockingFqPaths:i.setInheritanceBlockingFqPaths},Ae=({unsortedFiles:e,path:c,getFolderRulesConfig:r,getUserExperiments:i,shouldSubscribeToBolt:l,setShouldSubscribeToBolt:d,setInheritanceBlockingFqPaths:m,mergeUserAutomations:f,currentNSID:g,shouldSeeSubfolderInheritance:h,getSavedWorkflowTemplates:p,currentAutomation:b})=>{const w=s.usePrevious(e),v=s.usePrevious(c);return t.reactExports.useEffect((()=>{b&&d(!0)}),[b,d]),t.reactExports.useEffect((()=>{if(h)return;const t=[];e.forEach(((e,s)=>{if(_.isEligibleForAutomation(e))if(w){const c=w.get(s);c&&o.getFileRevisionId(c)===o.getFileRevisionId(e)||t.push(e.fq_path)}else t.push(e.fq_path)})),t.length>0&&n.getFolderRulesBatch(t).then((e=>{const t=a.buildAutomationDataFromGetRuleBatchResult(e);f(t),t.length>0&&d(!0)}))}),[e]),t.reactExports.useEffect((()=>{h||"/"!==c&&""!==c&&n.getFolderRules(c).then((e=>{const t=a.buildAutomationDataFromGetRuleResult(e,c,g);f(t),t.length>0&&d(!0)}),(e=>{}))}),[c]),t.reactExports.useEffect((()=>{h&&v!==c&&n.getSubfolderRules(c,h).then((e=>{const t=a.convertSubfolderRulesResultToAutomations(e,g);f(t),m(a.getInheritanceBlockingFqPathResult(e)),t.length>0&&d(!0)}))}),[c,v,g,f,h,d]),t.reactExports.useEffect((()=>{h&&m(e.filter((e=>_.shouldBlockInheritance(e))).map(((e,t)=>t)).toArray())}),[e,h,m]),_.useFlowsBolt({shouldSubscribeToBolt:l}),t.reactExports.useEffect((()=>{u.getStoreForAutomations(),r(),i(),p()}),[]),null};Ae.displayName="FlowsRootComponentInternal";const ye=s.connect(((e,t)=>({unsortedFiles:s.unsortedFiles(e),shouldSubscribeToBolt:l.shouldSubscribeToBolt(e),shouldSeeSubfolderInheritance:l.shouldSeeSubfolderInheritance(e),currentNSID:s.context(e).currentNSID,currentAutomation:l.getUserAutomation(t.path)(e)})),Ie)(Ae),Oe=c.withFlowsErrorBoundary(ye,{excTags:[r.EXCLOG_TAG_BROWSE_ROOT],ampTags:{surface:r.EXCLOG_TAG_BROWSE_ROOT}});e.FlowsRoot=Oe}));
//# sourceMappingURL=c_flows_components_flows_browse_root.js-vflIuv-oG.map

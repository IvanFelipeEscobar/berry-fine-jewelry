define(["exports","./c_tslib","./c_portable_delete_snackbars","./c_file_store_utils","./c_action_plugins_open_in_action_hooks","./c_file_actions_portable_copy","./c_file_actions_portable_move","./c_portable_rename","./c_unity_features","./c_ui_async_overquota_modal_controller","./c_publish_publish_modal","./c_core_types_preview_type","./c_pap-events_publish_modal_select_publish_entrypoint","./e_ui_page_files_router","./c_pap-events_enums_file_type-utils","./c_core_data_preview_key","./c_core_logging_constants","./c_file_actions_portable_select_destination","./e_edison","./c_apex-metrics_src_types","./c_lodash-es_lodash","./c_core_i18n","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","./c_action_bar_action_bar_strings","./c_portable_delete_strings","./c_file_actions_strings","./c_files_view_file_actions_snackbars","./c_extensions_cloud_docs_compat","./c_integrations_data_selectors","./c_downloads","./c_core_notify","metaserver/static/js/modules/constants/files_spa","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","./c_share_download_ui_api","./c_files_view_file_actions_file_from_metadata","./c_ui_fileops_actions","./c_data_action_creators_index","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","./c_action_bar_file_actions_logging","./c_sharing_async_share_modal_util","./c_form_row_index","metaserver/static/js/modules/constants/unity","./c_table_index","./c_combinations_index","./c_profile_services_profile_services_constants","metaserver/static/js/modules/constants/publish","./c_carousel_index","./c_profile_services_profile_services_link","metaserver/static/js/modules/constants/login_and_register","./c_hooks_lib_index","./c_preview_audio_video_helper_image_size","./c_hive_schemas_web-modal-activity"],(function(e,t,s,i,o,n,a,_,r,c,l,d,p,u,m,v,f,g,h,y,b,w,P,S,A,E,I,x,k,j,T,R,F,q,C,D,N,B,O,U,V,W,K,M,Q,z,L,Y,G,H,$,J,X,Z,ee,te,se,ie,oe,ne,ae,_e,re,ce,le,de,pe,ue,me,ve,fe,ge,he,ye,be,we){"use strict";e.copyAction=(e,s,a,_,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){const t={fq_path:e.fq_path,is_dir:e.is_dir,file_id:e.file_id};if(r&&r.isOverFreeQuota&&!r.hasExcludedNsIds){const t=e.ns_id,i=s.id;return void c.showOverquota("wb_oq_mv_cp",t,i,u.SHARE_ACTION_ORIGIN_TYPE.BROWSE_COPY_ACTION)}a.logUserAction("copy","overflow_menu");const l=o.getPapPreviewType(a.getPluginData().previewType),d=v.isRedesign2023Enabled(a.sdkConfig)?f.UserActionContext.PreviewTitlebar:void 0,p=yield g.selectDestination({user:s,filesPath:[t],currentFQPath:_,operationType:"COPY"});n.portableCopy({newPath:p,user:s,source:"preview",filesPath:[t],extraForLogging:{fileSize:e.bytes,fileType:m.getFileTypeFromString(i.getExtension(e)),actionElement:d,previewType:l}},{})})),e.deleteAction=(e,t,i,n,a,_,r)=>{const c={file_id:e.file_id,is_dir:e.is_dir};s.portableDelete({user:t,filesPath:[c],fq_path:e.fq_path},{onNetworkRequest:()=>s.deleteSnackBarInProgress(o.PREVIEWS_SNACKBAR_ID),onSuccess:()=>{s.deleteCompleteSnackBar(o.PREVIEWS_SNACKBAR_ID),null==_||_(e),null==i||i()},onError:e=>{s.deleteFailedSnackBar(e,o.PREVIEWS_SNACKBAR_ID),null==n||n()},setDeleteFileModalOpen:r,onRequestClose:()=>null==a?void 0:a()})},e.goToFolderAction=(e,t)=>{c.handleShowInFolder({fqPaths:[e.fq_path],user:t})},e.moveAction=(e,s,n,_,r,c)=>t.__awaiter(void 0,void 0,void 0,(function*(){let t;const c=o.getPapPreviewType(n.getPluginData().previewType),l=v.isRedesign2023Enabled(n.sdkConfig)?f.UserActionContext.PreviewTitlebar:void 0,d=yield g.selectDestination({user:s,filesPath:[e],currentFQPath:_,operationType:"MOVE"});a.portableMove({newPath:d,user:s,source:"preview",filesPath:[e],currentFQPath:_,extraForLogging:{fileSize:e.bytes,fileType:m.getFileTypeFromString(i.getExtension(e)),actionElement:null!=l?l:void 0,previewType:c}},{onSuccess:s=>{r&&s&&(t=s[0],r(e,s[0]))},onUndo:s=>{r&&s&&t&&r(t,e)}})})),e.openInDesktopAction=(e,t,s,i)=>{s.logUserAction("open_desktop_click","open_dropdown");const o=e.ns_id||(null==i?void 0:i.currentNSID);!function({nsId:e,nsPath:t,user:s},{onSuccess:i,onError:o}){r.UnityFeatures.open_file(e||null,t||"/",s.id,(e=>(null==i||i(e),r.UnityFeatures.standard_open_file_handler(e))),(e=>{null==o||o(e),r.UnityFeatures.standard_open_file_handler(!1)}),!0)}({user:t,nsPath:"ns_path"in e?e.ns_path:null==i?void 0:i.currentNSPath,nsId:o},{})},e.openInReplayAction=(e,t)=>{t.logUserAction("open_replay_click");const s=e?`https://replay.dropbox.com/project/creating/${e.file_id}?creationSource=dropbox_previews_action_bar`:"https://replay.dropbox.com/?login=true";window.open(s)},e.publishAction=({file:e,user:t,context:s})=>{const i=s.getPluginData(),o=null==i?void 0:i.previewType;!i||o!==d.PreviewType.Image&&o!==d.PreviewType.Video||(u.logEvent(p.PAP_Select_PublishEntrypoint({publishItemType:o===d.PreviewType.Image?"image":"video",publishEntrypointLocation:"previews_action_bar"})),l.showPublishModal(t,e))},e.renameAction=(e,t,s,n,a)=>{_.portableRename({currentName:i.getFilename(e),user:t,fq_path:e.fq_path},{onNetworkRequest:()=>o.renameSnackBarInProgress(o.PREVIEWS_SNACKBAR_ID),onSuccess:t=>{o.renameCompleteSnackBar(o.PREVIEWS_SNACKBAR_ID),a&&t&&"file"===t[".tag"]&&a(e,{fq_path:t.path_display||e.fq_path,revision_id:t.rev,file_id:t.id}),null==s||s()},onError:t=>{o.renameFailedSnackBar(t,e.fq_path,o.PREVIEWS_SNACKBAR_ID),null==n||n()}})}}));
//# sourceMappingURL=c_sdk_file_viewer_action_plugins_file_actions.js-vflcBtbvc.map

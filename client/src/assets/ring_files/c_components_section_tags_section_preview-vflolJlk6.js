define(["exports","./e_edison","./e_ui_page_files_router","./c_lodash-es_lodash","./c_tagging_components_tags_search","./c_tagging_components_tags_container","./c_core_i18n"],(function(e,t,a,s,r,n,i){"use strict";const o=t.React$1.createContext({onSelection:e=>{},onTagDelete:e=>{},fetchAllTagsSuggestions:e=>{},allTagsSuggestions:void 0}),l=t.reactExports.memo((({id:e,title:s})=>{const[r,i]=t.reactExports.useState(!1),o=t.reactExports.useRef(null);return t.reactExports.createElement(t.reactExports.Fragment,null,t.reactExports.createElement(a.IconButton,{id:e,size:"small",variant:"transparent",ref:o,onClick:()=>i(!r)},t.reactExports.createElement(a.UIIcon,{className:n.classes.tagSectionTooltip,src:a.HelpLine,size:"small","aria-label":"Who can see my tags?"})),t.reactExports.createElement(a.Tooltip.Control,{open:r,triggerRef:o,auto:!0,placement:"top"},t.reactExports.createElement(a.Text,{tagName:"p",color:"standard",inverse:!0},s)))}));l.displayName="Toggletip";const g=t.reactExports.memo((()=>t.reactExports.createElement("div",{className:n.classes.tgTitle},t.reactExports.createElement(a.Text,{variant:"paragraph",size:"small",isBold:!0},i.intl.formatMessage({id:"itCJSp",defaultMessage:"Tags"})),t.reactExports.createElement(a.Text,{variant:"paragraph",size:"xsmall",color:"faint"},i.intl.formatMessage({id:"P4Onh/",defaultMessage:"Who can see my tags?"}),t.reactExports.createElement(l,{id:"toggletip-button",title:i.intl.formatMessage({id:"yDMC43",defaultMessage:"Tags appear when people are signed in. Anyone with edit access to the file can edit its tags."})})))));g.displayName="TagsSectionHeader";const c=({files:e,user:l,tags:c,actionSurface:d,userSurveyEventSurface:m})=>{const{onTagDelete:p,onSelection:u,allTagsSuggestions:E,fetchAllTagsSuggestions:_}=t.reactExports.useContext(o),x=null!=c?c:s.intersectionBy(...e.map((e=>e.tags?e.tags.map((e=>e.value)):[])),"tag_text"),f=x.filter(a.isUserGeneratedTag).map((e=>e.tag_text)),h=1===e.length&&!a.canEditOverviewForFile(e[0]);return t.reactExports.createElement("div",{className:"tg-typeahead"},t.reactExports.createElement(g,null),t.reactExports.createElement(r.TagsSearch,{user:l,maxTagsReached:f.length>=a.MAX_TAGS_PER_ITEM,getStrings:t.reactExports.useCallback((()=>{return t=e.length>1,{addTypeaheadEmptyState:i.intl.formatMessage({id:"HXMCAM",defaultMessage:"Use words that will help you or teammates find this file"}),addTag:t?i.intl.formatMessage({id:"JVJ1Cl",defaultMessage:"Add a tag to these items"}):i.intl.formatMessage({id:"EKsLMI",defaultMessage:"Add a tag"}),invalidCharsError:i.intl.formatMessage({id:"gXZd4i",defaultMessage:"Use letters (a-z), scripts, numbers (0-9), and underscores ( _ )"}),maxTagsReachedError:i.intl.formatMessage({id:"Rsy4dh",defaultMessage:"{maxTags} tags is the maximum. Remove existing tags to add new tags."},{maxTags:a.MAX_TAGS_PER_ITEM}),tooLongError:i.intl.formatMessage({id:"l83VsE",defaultMessage:"32 characters is the maximum"}),alreadyExistsError:i.intl.formatMessage({id:"PPUctr",defaultMessage:"That tag is already here"}),createTagPrefix:i.intl.formatMessage({id:"/bryMC",defaultMessage:"Create tag:"}),readOnlyError:i.intl.formatMessage({id:"ijHzJJ",defaultMessage:"Only the editors of this file can add tags"})};var t}),[e.length]),readOnly:h,excludeResults:f,onSelection:u,onInputFocus:()=>{a.logSelectTagBar(l,e,d)},onStartTyping:()=>{a.logStartTypingTag(l,e,d)},onInputBlur:e=>{0===e.length&&a.UserSurvey.trackEvent("click_on_tag_file_and_does_not_add_tag",m)},allTagsSuggestions:E,fetchAllTagsSuggestions:_}),t.reactExports.createElement(n.TagsContainer,{tags:x,onTagClick:t=>{a.logTagClick(l,e,d,t),a.redirectToSearchByTag(l,t.tag_text)},onTagDelete:h?void 0:p,containerClassName:"right-rail-tags-container",chipClassName:"right-rail-tag-chip",showMoreClassName:"right-rail-tag-chip"}))};c.displayName="TagsSection";a.injectInternalStyle("metaserver/static/js/tagging/components/section/tags_section_preview.module.out.css",(e=>"._previews-container_15gac_1{padding:0 0 24px}._redux-container_15gac_5{margin-top:20px}"));e.TagsContext=o,e.TagsSection=c,e.classes={previewsContainer:"_previews-container_15gac_1",reduxContainer:"_redux-container_15gac_5"}}));
//# sourceMappingURL=c_components_section_tags_section_preview.js-vflQdEXdP.map

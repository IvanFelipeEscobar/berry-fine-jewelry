define(["exports","./e_edison","./e_ui_page_files_router","./c_action_bar_file_actions","./c_history","./c_core_i18n","./c_tslib","./c_apex-metrics_src_types","./c_lodash-es_lodash","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","./c_src_simple-action-bar_action_bar_types","./c_sharing_gating_util","./c_unity_check_file_cache","./c_unity_features","metaserver/static/js/modules/constants/unity","metaserver/static/js/modules/core/langpack","./c_browse_file_actions_action_handlers","./c_views_copy_link_mini_modal","./c_share_modal_evolution_utils_logging","./c_src_utils_logging","./c_components_sharing_spinner","./c_truncate_index","./c_clipboard_v3","./c_sharing_ui_util","./c_contacts_contact_token_state","./c_icon_icon_helper","./c_sharing_settings_utils_sharing_settings_util","./c_udcl_index","./c_downloads","./c_extensions_cloud_docs_compat","./c_integrations_data_selectors","./c_share_download_ui_api","./c_browse_interface","./c_ui_async_overquota_modal_controller","./c_browse_actions","./c_files_view_file_actions_file_from_metadata","./c_file_actions_strings","./c_data_action_creators_index","./c_browse_crypto_subtle_digest","./c_action_bar_file_actions_logging","./c_files_view_file_actions_snackbars","./c_sync_everything_hive_logger","./c_pap-events_previews_rename_file","./c_sharing_async_share_modal_util","./c_flows_utils_async_modal_launchers","metaserver/static/js/modules/constants/global_file_upload","./c_file_viewer_async_controller","./c_file_viewer_logging_performance","./c_cloud_docs_gdd_migration_gdd_ui_blocking","./c_plusplus_file_actions","./c_vault_constants","./c_file_viewer_file_extension_extension_constants","./c_gdd_migration_ui_utils","./c_profile_services_profile_services_link","./c_profile_services_profile_services_constants","metaserver/static/js/modules/constants/login_and_register","./c_file_imports_gdrive_file_picker","./c_components_modals_show_modal","./c_spectrum_modal_utility_modal","./c_spectrum_tertiary_link_tertiary_list","./c_icon_templates_actionable_index","./c_spectrum_svg_icon_bundle","./c_spectrum_icon_form_index","./c_icon_templates_stateless_index","./c_exenv_index","./c_ux_analytics_modal_tracking","./c_file_transfers_async_browse_entry_point_onboarding_modal_async","./c_starred_actions","./c_starred_constants","./c_starred_star","./c_common_uuid","./c_files_view_files_view_logging","./c_sharing_browse_exports","./c_file_store_utils","./c_file_transfers_lib_urls","./c_src_common_constants2","./c_browse_tts","./c_pap-events_navigation_navigate_to_edit","./c_action_bar_action_bar_strings","./c_flows_redux_store","./c_flows_redux_reducer","./c_flows_lib_api","./c_flows_logging_flows_loggers","./c_src_common_constants","./c_flows_constants","./c_flows_redux_selectors","./c_action_bar_action_bar_constants","./c_file_actions_portable_copy","./c_ui_fileops_actions","./c_ux_analytics_dispatch_custom_event","./c_file_actions_portable_select_destination","./c_hive_schemas_web-modal-activity","./c_flows_conversions_conversion_actions","./c_flows_conversions_convert","./c_file_viewer_sdk_file_viewer_experiments","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/file_viewer_flows_experiments","./c_flows_utils_browse_logger","./c_flows_redux_actions","./c_workflow_builder_workflow_actions_action_ui_config","./c_form_row_index","./c_ui_tree_view","./c_icon_folder_icon","./c_components_spacer_index","./c_naming_conventions_utils","./c_tagging_components_tags_container","./c_components_item_truncation_container","./c_hooks_resize_observer","./c_resize-observer-polyfill_dist_ResizeObserver","./c_tagging_components_tags_search","./c_typeahead_index","./c_modal_filters_view_tidy_filters","./c_folder_dialog_folder_picker_dig","./c_table_columns_file_name_column","./c_src_table","./c_react-table_index","./c_src_icons_file_icon","./c_src_icons_file_icon_extensions","./c_combinations_index","./c_spectrum_icon_arrow_index","./c_keymaster","./c_breadcrumb_index","./c_ui_hoc","./c_plugin_utils_tilingFunc","./c_plugin_utils_getImageDefaultSizes","./c_flows_flows_client","./c_spectrum_icon_partners_index","./c_icon_shortcuts_icon","./c_icon_file_icon","./c_ui_title_bubble","./c_ui_overlay","./c_raf_throttle","./c_file_uploader_utils","./c_pap-events_enums_file_type-utils","./c_base64","./c_upload_kit_lib_types","./c_growth_ui_teams_web_actions_logger_events","./c_sharing_wizard_async_wizard_modals","./c_file_actions_portable_move","./c_extensions_extensions_menu_component_v2","./c_spectrum_tooltip","./c_spectrum_positioned_portal","./c_extensions_extensions_utils","metaserver/static/js/modules/constants/payments","./c_account_email","./c_account_email_verify_reasons","./c_ui_modal_dig","./c_ui_input_dig","metaserver/static/js/modules/constants/reel","./c_components_approval-forms_url_utils","./c_components_approval-forms_gating_utils","./c_flows_approval_approval_io_client","./c_contacts_data_v2","./c_contacts_bloodhound","metaserver/static/js/modules/constants/contacts","./c_components_approval-forms_approval_checkbox_in_share","./c_pap-events_previews_select_share_menu","./c_extensions_split_share_button","./c_shallow_equal","./c_flows_approval_approval_request_modal","./c_components_saver_modal_index","./c_collections_utils_file_identifier","./c_collections_utils_thumbnails","./c_collections_lib_survey","./c_sync_everything_strings","./c_conversions_actions_unzip","./c_utils_contacts_tokenizer_contacts_tokenizer_util"],(function(e,t,s,a,i,o,c,n,_,r,l,d,u,m,p,f,g,v,b,h,y,w,R,E,S,x,F,$,N,M,k,C,z,j,O,A,L,q,I,T,D,B,U,W,H,P,Y,G,J,Q,X,V,Z,K,ee,te,se,ae,ie,oe,ce,ne,_e,re,le,de,ue,me,pe,fe,ge,ve,be,he,ye,we,Re,Ee,Se,xe,Fe,$e,Ne,Me,ke,Ce,ze,je,Oe,Ae,Le,qe,Ie,Te,De,Be,Ue,We,He,Pe,Ye,Ge,Je,Qe,Xe,Ve,Ze,Ke,et,tt,st,at,it,ot,ct,nt,_t,rt,lt,dt,ut,mt,pt,ft,gt,vt,bt,ht,yt,wt,Rt,Et,St,xt,Ft,$t,Nt,Mt,kt,Ct,zt,jt,Ot,At,Lt,qt,It,Tt,Dt,Bt,Ut,Wt,Ht,Pt,Yt,Gt,Jt,Qt,Xt,Vt,Zt,Kt,es,ts,ss,as,is,os,cs,ns,_s,rs,ls,ds,us,ms,ps,fs,gs,vs,bs,hs,ys,ws,Rs,Es,Ss,xs,Fs,$s,Ns,Ms){"use strict";const ks=({children:e,path:a,param:i})=>{const o=s.normalize(a)+s.normalize(i);return t.React$1.cloneElement(e,{fqpath:o})};ks.displayName="ParamPathJoiner",a.getStoreForFolderSubscriptions();const Cs=({path:e,requestFlightStatus:s,folderSubscription:i,fetchFolderSubscription:o,createFolderSubscription:c,deleteFolderSubscription:n,editFolderSubscription:_,logAction:r,currentNSID:l,children:d})=>{t.React$1.useEffect((()=>{o(e)}),[e,o]);const u=t.reactExports.useCallback(((t,s)=>c(e,t,{ns_id:l,origin:s})),[e,c,l]),m=t.reactExports.useCallback((t=>n(e,{ns_id:l,origin:t})),[e,n,l]),p=t.reactExports.useCallback((t=>_(e,t,{ns_id:l})),[e,_,l]),f=t.reactExports.useCallback((e=>r(e,{ns_id:l})),[l,r]);return t.React$1.cloneElement(d,{loading:s===a.RequestFlightStatus.INFLIGHT||s===a.RequestFlightStatus.IDLE,error:s===a.RequestFlightStatus.ERROR,folderSubscription:i,createFolderSubscription:u,deleteFolderSubscription:m,editFolderSubscription:p,logAction:f,path:e})};Cs.displayName="FolderSubscriptionLoaderInner";const zs=s.connect(((e,{path:t})=>({requestFlightStatus:a.getRequestState(e,t).status,folderSubscription:a.folderSubscription(e,t),currentNSID:s.context(e).currentNSID,logAction:(s,i)=>a.logAction(s,e,t,i)})),{fetchFolderSubscription:a.fetchFolderSubscription,createFolderSubscription:a.createFolderSubscription,deleteFolderSubscription:a.deleteFolderSubscription,editFolderSubscription:a.editFolderSubscription})(Cs),js=({children:e})=>{const[s,o]=t.reactExports.useState(i.DBHistory.deconstruct_url().qargs[a.FOLLOW_MODAL_QUERY_PARAM]);return t.reactExports.useEffect((()=>{function e(e,t){o(t[a.FOLLOW_MODAL_QUERY_PARAM])}const t="/"+i.DBHistory.get_url().split(/[/?]/)[1];return i.DBHistory.add_callback(t,e),()=>{i.DBHistory.remove_callback(t,e)}}),[s]),void 0===s||Array.isArray(s)?null:t.React$1.cloneElement(e,{param:s})};js.displayName="QueryParamFilter";const Os=e=>{const{multi:a,groupLabelId:i,name:o,value:c,onChange:n,checked:_,children:r}=e,l=a?s.Checkbox:s.RadioButton,d=`folder-subscription-customization-modal__${o}-${c}`;return t.React$1.createElement(s.Text,{tagName:"label",id:d},t.React$1.createElement(l,{"aria-labelledby":[i,d].join(" "),name:o,value:c,onChange:n,checked:_}),r)};Os.displayName="ToggleInput";const As=({value:e,onUpdate:a})=>{const i="folder-subscription-customization-modal__activity-group";return t.React$1.createElement("div",{className:"folder-subscription-customization-modal__fieldset"},t.React$1.createElement(s.Text,{id:i,className:"folder-subscription-customization-modal__question",isBold:!0},o.intl.formatMessage({id:"YkAOU3",defaultMessage:"What should we notify you about?"})),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__answers"},t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(Os,{multi:!0,groupLabelId:i,name:"activity",value:"file_added",onChange:()=>a(Object.assign(Object.assign({},e),{file_added:!e.file_added})),checked:e.file_added}),t.React$1.createElement(s.Text,null,o.intl.formatMessage({id:"h+RmaB",defaultMessage:"Files added"}))),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(Os,{multi:!0,groupLabelId:i,name:"activity",value:"file_deleted",onChange:()=>a(Object.assign(Object.assign({},e),{file_deleted:!e.file_deleted})),checked:e.file_deleted}),t.React$1.createElement(s.Text,null,o.intl.formatMessage({id:"J5BuTc",defaultMessage:"Files deleted"})))))};As.displayName="ActivityFieldset";const Ls=({value:e,onUpdate:i})=>{const c="folder-subscription-customization-modal__frequency-group";return t.React$1.createElement("div",{className:"folder-subscription-customization-modal__fieldset"},t.React$1.createElement(s.Text,{id:c,className:"folder-subscription-customization-modal__question",isBold:!0},o.intl.formatMessage({id:"MJgs6m",defaultMessage:"How often should we email you?"})),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__answers folder-subscription-customization-modal__frequency-answers"},t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(Os,{multi:!1,groupLabelId:c,name:"frequency",value:"instant",onChange:()=>i(a.Frequencies.INSTANT),checked:"instant"===e[".tag"]}),t.React$1.createElement(s.Text,null,o.intl.formatMessage({id:"pU/As6",defaultMessage:"As activity occurs"}))),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(Os,{multi:!1,groupLabelId:c,name:"frequency",value:"daily",onChange:()=>i(a.Frequencies.DAILY),checked:"daily"===e[".tag"]}),t.React$1.createElement(s.Text,null,o.intl.formatMessage({id:"0X+Fnj",defaultMessage:"Once a day"})))))};Ls.displayName="FrequencyFieldset";const qs=({onCancel:e,onConfirm:a,canConfirm:i})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(s.Button$1,{type:"button",variant:"opacity",onClick:e},o.intl.formatMessage({id:"2hfya7",defaultMessage:"Cancel"})),t.React$1.createElement(s.Button$1,{type:"button",variant:"primary",onClick:a,disabled:!i,autoFocus:!0},o.intl.formatMessage({id:"dB+YMZ",defaultMessage:"Confirm"})));qs.displayName="Footer";const Is=({folderName:e,subscriptionState:i})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(s.Title,{size:"standard",className:"folder-subscription-customization-modal__title"},o.intl.formatMessage({id:"VJewNj",defaultMessage:"Set notification options"})," "),t.React$1.createElement(s.Text,{size:"standard"},i===a.FolderSubscriptionState.FOLLOWING?o.intl.formatMessage({id:"5nBf6U",defaultMessage:"You are following {folderName}."},{folderName:t.React$1.createElement("strong",{key:"folderName"},e)}):o.intl.formatMessage({id:"NvBP0X",defaultMessage:"You are about to follow {folderName}."},{folderName:t.React$1.createElement("strong",{key:"folderName"},e)})));Is.displayName="Header";const Ts={file_added:!0,file_deleted:!0};class Ds extends t.React$1.PureComponent{constructor(){var e,t,s,o,c,n;super(...arguments),this.state={frequency:null!==(s=null===(t=null===(e=this.props.folderSubscription)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.frequency)&&void 0!==s?s:a.Frequencies.INSTANT,activity_types:null!==(n=null===(c=null===(o=this.props.folderSubscription)||void 0===o?void 0:o.settings)||void 0===c?void 0:c.activity_types)&&void 0!==n?n:Ts},this.cancel=()=>{this.close(),this.props.onClose()},this.close=()=>{i.DBHistory.remove_query_param(a.FOLLOW_MODAL_QUERY_PARAM)},this.confirm=()=>{const e=this.state;this.props.onSave(e,a.FolderSubscriptionOrigin.SideMenu),this.close()},this.updateFrequency=e=>{this.setState({frequency:e})},this.updateActivities=e=>{this.setState({activity_types:e})}}render(){const{path:e,folderSubscription:a}=this.props,i=this.state.activity_types.file_added||this.state.activity_types.file_deleted;return t.React$1.createElement(s.Modal$1,{open:!0,isCentered:!0,ariaHideApp:!1,width:500,overlayClassName:"folder-subscription-customization-modal",onAfterOpen:this.props.onOpen,onRequestClose:this.cancel,withCloseButton:o.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},t.React$1.createElement(s.Modal$1.Header,{hasBottomSpacing:"title-standard"},t.React$1.createElement(Is,{folderName:s.filename(e),subscriptionState:null==a?void 0:a.subscriptionState})),t.React$1.createElement(s.Modal$1.Body,{className:"folder-subscription-customization-modal__body"},t.React$1.createElement(As,{onUpdate:this.updateActivities,value:this.state.activity_types}),t.React$1.createElement(Ls,{onUpdate:this.updateFrequency,value:this.state.frequency})),t.React$1.createElement(s.Modal$1.Footer,null,t.React$1.createElement(qs,{onCancel:this.cancel,onConfirm:this.confirm,canConfirm:i})))}}Ds.displayName="UnstyledCustomizationModal";const Bs=s.requireCssWithComponent(Ds,["/static/metaserver/static/css/folder_subscriptions/customize-vflMf7jTO.css"]),Us=e=>{if(!("loading"in e)||e.loading)return null;const{createFolderSubscription:i,editFolderSubscription:o,folderSubscription:c,logAction:n,path:_}=e,r=(null==c?void 0:c.subscriptionState)===a.FolderSubscriptionState.FOLLOWING?o:i;return t.React$1.createElement(Bs,{path:_,folderSubscription:c,onSave:r,onOpen:()=>n(s.WebUserActionLogEvent.OPEN_FOLDER_FOLLOW_SETTINGS_MODAL),onClose:()=>n(s.WebUserActionLogEvent.CLOSE_FOLDER_FOLLOW_SETTINGS_MODAL)})};Us.displayName="ModalFormAdapter",Us.displayName="ModalFormAdapter";const Ws=({fqpath:e})=>void 0===e?null:t.React$1.createElement(zs,{path:e},t.React$1.createElement(Us,null));Ws.displayName="InnerCustomizationModalController";const Hs=({path:e})=>t.React$1.createElement(js,null,t.React$1.createElement(ks,{path:e},t.React$1.createElement(Ws,null)));Hs.displayName="CustomizationModalController",Hs.displayName="CustomizationModalController",e.CustomizationModalController=Hs}));
//# sourceMappingURL=c_folder_subscriptions_customization_customization_modal_controller.js-vflyv9bIy.map

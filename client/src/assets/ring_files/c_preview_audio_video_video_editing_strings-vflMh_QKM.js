define(["exports","./c_tslib","./e_edison","./c_core_i18n","./e_ui_page_files_router","./c_core_data_utils","./c_file_viewer_file_viewer_components","./c_core_logging_constants"],(function(e,t,a,n,o,i,s,r){"use strict";o.injectInternalStyle("js/file_viewer/toolbar_v2/previews_controls.module.out.css",(e=>'._separator_1o91t_1{border-right:1px solid var(--dig-color__border__subtle);height:var(--spacing__unit--3);margin:0 var(--spacing__unit--1);width:0}._left-spacing_1o91t_8{margin-left:var(--spacing__unit--1)}._page-display_1o91t_12,._page-display-padding_1o91t_13{font-feature-settings:"tnum"}._page-display-padding_1o91t_13{opacity:0}'));const l="_separator_1o91t_1",c="_left-spacing_1o91t_8",d="_page-display_1o91t_12",g="_page-display-padding_1o91t_13",u=()=>a.React$1.createElement("div",{className:l}),p=({fileViewerId:e,previewKey:t,breakpoint:l})=>{var c,d,g;const p=o.useDispatch(),f=n.useIntl(),b=null===(c=i.useFileViewerSelector(i.getFileViewerUi,e))||void 0===c?void 0:c.isDocSidebarOpen,M=i.filterDocFilePreviewUiState(i.useParameterizedSelector(i.getFilePreviewUi,e,t)),R=null===(g=null===(d=i.filterDocPreviewRivieraData(i.usePreviewKeySelector(i.getRivieraData,t)))||void 0===d?void 0:d.metadata)||void 0===g?void 0:g.page_count,_=s.useStabilizedCallback((()=>{p(b?s.closeDocSidebar({fileViewerId:e,sourceContext:r.UserActionContext.Toolbar}):s.openDocSidebar({fileViewerId:e,sourceContext:r.UserActionContext.Toolbar}))}));if(!M)return null;const h=b?f.formatMessage({id:"0r5Vny",defaultMessage:"Hide sidebar"}):f.formatMessage({id:"FyinXl",defaultMessage:"Show sidebar"}),v=b?o.SidebarHideLine:o.SidebarShowLine;return a.React$1.createElement(a.React$1.Fragment,null,l!==i.ToolbarBreakpoint.Small&&a.React$1.createElement(i.ToolbarIcon,{onClick:_,label:h,icon:v}),a.React$1.createElement(m,{pageCount:R,currentPage:M.currentPageIndex,breakpoint:l}),a.React$1.createElement(u,null))};p.displayName="DocControls";const f=e=>a.React$1.createElement("span",{className:d},e),m=({pageCount:e,currentPage:t,breakpoint:s})=>{const r=n.useIntl(),{showInverse:l}=i.useToolbarControlsConfig(),d=t+1,u=e?e.toString().length-d.toString().length:0,p="".padEnd(u,"0");return e?a.React$1.createElement(o.Text,{"data-testid":"page-count",className:c,inverse:l},s===i.ToolbarBreakpoint.Large?r.formatMessage({id:"R9Qzvb",defaultMessage:"Page <page>{currentPage, number}</page> of {totalPages, number}"},{currentPage:d,totalPages:e,page:f}):r.formatMessage({id:"sDSg9c",defaultMessage:"<page>{currentPage, number}</page> of {totalPages, number}"},{currentPage:d,totalPages:e,page:f}),a.React$1.createElement("span",{className:g,"aria-hidden":!0},p)):null};m.displayName="PageCountDisplay";o.injectInternalStyle("js/file_viewer/toolbar_v2/action_bar.module.out.css",(e=>"._action-bar_7panj_1{align-items:center;display:flex;flex:1 1 0;min-width:0}._action-bar_7panj_1>*{flex-grow:0;flex-shrink:0}"));const b="_action-bar_7panj_1",M=e=>(t,a)=>a?[...t,a.offsetLeft+a.offsetWidth-e]:t,R=(e,t)=>(a,n,o)=>n>e||!t(o)&&n+48>e?a:a+1,_=a.React$1.memo((({actions:e})=>{if(!e)return null;const t=[],n=({handler:e})=>{"click"===e.type&&e.keyboardBinding&&t.push(s.getKeyboardBinding(Object.assign(Object.assign({},e.keyboardBinding),{callback:e.handler})))};return e.editActions.forEach(n),e.fileActions.forEach(n),a.React$1.createElement(s.KeyboardBindingConnector,{name:"action_bar",keyboardBindings:t})}));_.displayName="ActionBarKeyboardBindings";const h=({actions:e,fileViewerId:t,logAction:n})=>{const o=i.useFileViewerSelector(s.isPluginEditMode,t),r=i.useFileViewerSelector(i.getIsPreviewLoading,t),l=o||r,{isFullScreen:c}=i.useToolbarControlsConfig(),{containerRef:d,editActions:g,getEditButtonRef:p,fileActions:f,getFileButtonRef:m,overflowActions:h}=(e=>{const{editActions:t=[],fileActions:n=[]}=null!=e?e:{},[o,s]=a.React$1.useState(),[r,l]=a.React$1.useState(),[c,d]=a.React$1.useState(),{nodeRef:g,node:u}=i.useContentRect(),p=a.React$1.useRef([]),f=a.React$1.useRef([]);e!==o&&(p.current=new Array(t.length),f.current=new Array(n.length)),a.React$1.useLayoutEffect((()=>{var t;s(e);const a=null!==(t=null==u?void 0:u.offsetLeft)&&void 0!==t?t:0;l(p.current.reduce(M(a),[])),d(f.current.reduce(M(a),[]))}),[e]);const m=u?u.offsetWidth:0,{shownEditActions:b,shownFileActions:_,overflowActions:h}=a.React$1.useMemo((()=>{if(e!==o||!m||!r||!c)return{shownEditActions:t,shownFileActions:n,overflowActions:[]};const a=!!n.length,i=r.reduce(R(m,(e=>!a&&e===r.length-1)),0);if(i<t.length)return{shownEditActions:t.slice(0,i),shownFileActions:[],overflowActions:t.slice(i).concat(n)};const s=c.reduce(R(m,(e=>e===c.length-1)),0);return{shownEditActions:t,shownFileActions:n.slice(0,s),overflowActions:n.slice(s)}}),[t,n,e,o,r,c,m]),v=a.React$1.useCallback((e=>t=>p.current[e]=t),[]),y=a.React$1.useCallback((e=>t=>f.current[e]=t),[]);return{containerRef:g,editActions:b,getEditButtonRef:v,fileActions:_,getFileButtonRef:y,overflowActions:h}})(e),y=g.length>0&&f.length>0;return c?a.React$1.createElement("div",{className:b}):a.React$1.createElement("div",{className:b,ref:d},a.React$1.createElement(_,{actions:e}),g.map(((t,o)=>a.React$1.createElement(v,{action:t,key:o,disabled:l,buttonRef:p(o),iconOnly:null==e?void 0:e.hideEditButtonText,logAction:n}))),y&&a.React$1.createElement(u,null),f.map(((t,o)=>a.React$1.createElement(v,{action:t,key:o,disabled:l,buttonRef:m(o),iconOnly:null==e?void 0:e.hideFileButtonText,logAction:n}))),a.React$1.createElement(E,{actions:h,logAction:n}))};h.displayName="ActionBar";const v=e=>{var{action:n}=e,o=t.__rest(e,["action"]);const i=n.handler;return"click"===i.type?a.React$1.createElement(w,Object.assign({action:Object.assign(Object.assign({},n),{handler:i})},o)):a.React$1.createElement($,Object.assign({action:Object.assign(Object.assign({},n),{handler:i})},o))};v.displayName="ToolbarAction";const y=a.React$1.forwardRef(((e,s)=>{var{action:r,iconOnly:l}=e,c=t.__rest(e,["action","iconOnly"]);const d=n.useIntl(),{showInverse:g}=i.useToolbarControlsConfig(),u={variant:"borderless",inverse:g,ref:s},{label:p,icon:f,tooltip:m,campaignElementId:b}=r,M="string"==typeof p?p:d.formatMessage(p),R=a.React$1.createElement(o.UIIcon,{src:f}),_=l?a.React$1.createElement(o.IconButton,Object.assign({},u,c,{"aria-label":M,"data-campaigns-element-id":b}),R):a.React$1.createElement(o.Button$1,Object.assign({},u,c,{"data-campaigns-element-id":b,withIconLeft:R}),M),h=l&&!m?{text:M}:m;if(!h)return _;const v="string"==typeof h.text?h.text:d.formatMessage(h.text),y=h.keyboardShortcut?" "+h.keyboardShortcut:"";return a.React$1.createElement(o.Tooltip,{title:v+y,shouldCloseOnClick:!0,placement:"bottom",inverse:!g},a.React$1.createElement("span",null,_))}));y.displayName="ActionButton";const w=({action:e,disabled:t,iconOnly:n,buttonRef:o,logAction:i})=>{const r=s.useStabilizedCallback((()=>{e.handler.handler(),i(e.actionType,!1)}));return a.React$1.createElement(y,{action:e,iconOnly:n,onClick:r,disabled:t,ref:o})};w.displayName="ClickAction";const A=e=>{var t,a,n;(null==e?void 0:e.menuItem)&&"dropdown"===(null==e?void 0:e.nodeType)?null===(a=(t=e.menuItem).handler)||void 0===a||a.call(t):null===(n=null==e?void 0:e.handler)||void 0===n||n.call(e)},$=({action:e,disabled:t,iconOnly:n,buttonRef:i,logAction:s})=>a.React$1.createElement(o.Menu.Wrapper,{onSelection:A},(({getContentProps:r,getTriggerProps:l})=>a.React$1.createElement(a.React$1.Fragment,null,a.React$1.createElement("span",{ref:i},a.React$1.createElement(y,Object.assign({action:e,disabled:t,iconOnly:n,withDropdownIcon:!0},l()))),a.React$1.createElement(o.Menu.Content,Object.assign({},r(),{onContentOpened:()=>s(e.actionType,!1)}),e.handler.menu))));$.displayName="MenuAction";const E=({actions:e,logAction:t})=>{const i=n.useIntl();return e.length?a.React$1.createElement(o.Menu.Wrapper,{onSelection:A},(({getTriggerProps:n,getContentProps:s})=>a.React$1.createElement(a.React$1.Fragment,null,a.React$1.createElement(o.IconButton,Object.assign({variant:"borderless",withDropdownIcon:!0},n()),a.React$1.createElement(o.UIIcon,{src:o.MoreHorizontalLine,"aria-label":i.formatMessage({id:"CkWL4V",defaultMessage:"More"})})),a.React$1.createElement(o.Menu.Content,Object.assign({},s()),a.React$1.createElement(S,{actions:e,logAction:t,isOverflowMenu:!0}))))):null};E.displayName="OverflowMenu";const S=({actions:e,logAction:t,isOverflowMenu:i})=>{const s=n.useIntl();return a.React$1.createElement(o.Menu.Segment,null,e.map((e=>{const{label:n,icon:r,handler:l,actionType:c}=e,d="string"==typeof n?n:s.formatMessage(n),g=a.React$1.createElement(o.UIIcon,{src:r});return"click"===l.type?a.React$1.createElement(o.Menu.ActionItem,{key:d,value:{handler:()=>{l.handler(),t(c,i)}},withLeftAccessory:g},d):a.React$1.createElement(o.Menu.Submenu,{key:d,withTriggerContent:d,withLeftAccessory:g,onSubmenuOpened:()=>t(c,i)},l.menu)})))};S.displayName="ActionMenuItems";const C={span:([e])=>a.React$1.createElement(o.Text,{size:"small",color:"standard",key:e},e)},T=e=>((null==e?void 0:e.toString())||"").split(",")[0].trim();e.ActionBar=h,e.ActionMenuItems=S,e.DocControls=p,e.ToolbarAction=v,e.ToolbarSeparator=u,e.useStrings=()=>{const e=n.useIntl();return a.React$1.useMemo((()=>{const t=e.formatMessage({id:"EC7glm",defaultMessage:"Cancel"}),a=e.formatMessage({id:"XyKAut",defaultMessage:"Save"}),n=e.formatMessage({id:"PAYmUy",defaultMessage:"Save a copy"}),o=e.formatMessage({id:"uZ3zJr",defaultMessage:"Replace original"}),i=e.formatMessage({id:"fascrS",defaultMessage:"Undo"}),s=e.formatMessage({id:"jxFvAv",defaultMessage:"Undo <span>(Cmd+Z)</span>"},C),r=e.formatMessage({id:"t/M1tq",defaultMessage:"Undo <span>(Ctrl+Z)</span>"},C),l=e.formatMessage({id:"cKqMnZ",defaultMessage:"Redo"}),c=e.formatMessage({id:"6Zq2Zb",defaultMessage:"Redo <span>(Cmd+Shift+Z)</span>"},C),d=e.formatMessage({id:"WZ84Gg",defaultMessage:"Redo <span>(Ctrl+Y)</span>"},C),g=e.formatMessage({id:"7aw+Po",defaultMessage:"Canâ€˜t edit original file"}),u=e.formatMessage({id:"uOI2Jj",defaultMessage:"Rotate right <span>(R)</span>"},C),p=e.formatMessage({id:"gdluqV",defaultMessage:"Rotate left <span>(L)</span>"},C),f=e.formatMessage({id:"7ytn9Q",defaultMessage:"Pause <span>(Spacebar)</span>"},C),m=e.formatMessage({id:"Gy3vv2",defaultMessage:"Play <span>(Spacebar)</span>"},C),b=e.formatMessage({id:"0c76Q7",defaultMessage:"Flip horizontal"}),M=e.formatMessage({id:"vD6c5O",defaultMessage:"Flip vertical"}),R=e.formatMessage({id:"BMDf8I",defaultMessage:"Flip horizontally"}),_=e.formatMessage({id:"FrFlZp",defaultMessage:"Flip vertically"}),h=e.formatMessage({id:"R/NK7Q",defaultMessage:"Crop"}),v=e.formatMessage({id:"JZ4ppi",defaultMessage:"Trim"}),y=e.formatMessage({id:"19KWhz",defaultMessage:"Transcript"}),w=e.formatMessage({id:"3KFaoZ",defaultMessage:"Save or discard changes to transcribe"}),A=e.formatMessage({id:"o0EWb8",defaultMessage:"Dropbox AI"}),$=e.formatMessage({id:"NO5UIk",defaultMessage:"Save or discard changes to use Dropbox AI"});return{cancelMessage:t,saveMessage:a,saveACopyMessage:n,replaceOriginalMessage:o,undoMessage:i,undoShortcutWin:"(Ctrl+Z)",undoShortcutMac:"(Cmd+Z)",undoTooltipWin:r,undoTooltipMac:s,redoMessage:l,redoShortcutWin:"(Ctrl+Y)",redoShortcutMac:"(Cmd+Shift+Z)",redoTooltipWin:d,redoTooltipMac:c,replaceOriginalDisabledTooltip:g,rotateRightTooltip:u,rotateLeftTooltip:p,pauseButtonTooltip:f,playButtonTooltip:m,playLabel:T(m),pauseLabel:T(f),rotateLeftLabel:T(p),rotateRightLabel:T(u),flipHorizontallyTootltip:R,flipVerticallyTooltip:_,cropTooltip:h,cropLabel:T(h),flipHorizontalLabel:b,flipVerticalLabel:M,trimTooltip:v,trimLabel:T(v),transcribeLabel:y,transcibeTooltip:w,dropboxAiLabel:A,dropboxAiTooltip:$}}),[e])}}));
//# sourceMappingURL=c_preview_audio_video_video_editing_strings.js-vflY4gxqZ.map

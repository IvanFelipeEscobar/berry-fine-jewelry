define(["exports","./e_ui_page_files_router","./e_edison","./c_spectrum_tooltip","./c_src_highlighted-truncated-string_em-string"],(function(t,r,e,n,i){"use strict";r.injectInternalStyle("typescript/component_libraries/retrieval-components/src/highlighted-truncated-string/index.module.out.css",(t=>":root{--color_blue_sixteen:#d6e8fa}._rc-hl-truncated-string__highlight_q1a4g_8{background-color:var(--color_blue_sixteen);box-shadow:0 0 0 1px var(--color_blue_sixteen),0 2px 0 1px var(--color_blue_sixteen)}.dig2--enabled ._rc-hl-truncated-string__highlight_q1a4g_8{background-color:var(--color__attention__background);box-shadow:0 0 0 1px var(--color__attention__background),0 2px 0 1px var(--color__attention__background)}._rc-hl-truncated-string__tooltip-highlight_q1a4g_28{background-color:var(--color__faint__text);box-shadow:0 0 0 1px var(--color__faint__text),0 2px 0 1px var(--color__faint__text)}._rc-hl-truncated-string__container_q1a4g_36{display:block;overflow:hidden;text-overflow:ellipsis}._rc-hl-truncated-string__container-bold_q1a4g_42{font-weight:700}._rc-hl-truncated-string__tooltip_q1a4g_28{max-width:100%}"));const a={rcHlTruncatedStringHighlight:"_rc-hl-truncated-string__highlight_q1a4g_8",rcHlTruncatedStringTooltipHighlight:"_rc-hl-truncated-string__tooltip-highlight_q1a4g_28",rcHlTruncatedStringContainer:"_rc-hl-truncated-string__container_q1a4g_36",rcHlTruncatedStringContainerBold:"_rc-hl-truncated-string__container-bold_q1a4g_42",rcHlTruncatedStringTooltip:"_rc-hl-truncated-string__tooltip_q1a4g_28"};function o(t,r,e,n){if(e||(e=0),void 0===n&&(n=t.length),!r||!function(t,r){const e=r.map((t=>t.string)).join("");return t===e}(t,r))return[{isHighlighted:!1,text:t.substring(e,n)}];const i=[];let a=0;for(const o of r){const r=t.indexOf(o.string,a),c=r+o.string.length;if(a=c,!(r<e&&c<=e||r>=n)){let t=o.string;r<e&&(t=t.slice(e-r)),n<c&&(t=t.slice(0,-(c-n))),i.push({text:t,isHighlighted:o.isHighlighted})}}return i}function c(t,n,i,c){return l=o(t,n,i,c),e.reactExports.createElement("span",null,l.map(((t,n)=>e.reactExports.createElement("span",{className:r.cx({[a.rcHlTruncatedStringHighlight]:t.isHighlighted}),key:n},t.text))));var l}function l(t,r,e){if(!e)return!1;let n=0;for(let i of e){const e=n+i.string.length-1;if(i.isHighlighted&&e>=t&&n<=r)return!0;n=e+1}return!1}const s=({text:t,className:c,ariaLabel:l,highlightSpans:s,tooltipId:_,fontSize:h,availableWidth:u,tooltipPosition:d="above",cellBuffer:p=1,variant:x=i.HighlightedTruncatedStringVariant.HIGHLIGHTED_TRUNCATED_STRING_MIDDLE,isBold:f=!1})=>{const H=e.reactExports.useRef(null),[b,m]=e.reactExports.useState(t),[E,T]=e.reactExports.useState(u),[S,v]=e.reactExports.useState(!1);e.reactExports.useEffect((()=>{H.current&&q()}),[t,h,x,u]);const q=()=>{if(H.current){const r=H.current,e=u||r.getBoundingClientRect().width;e!==E&&T(e);const n=e/h-p,a=i.Emstring.em_snippet(t,n,.5,x);b!==a&&m(a),k(a,t)}},k=(t,r)=>{b&&r&&v(t!==r)};return e.reactExports.createElement(n.Tooltip,{id:_,positioning:d,tooltipContent:s?(w=o(t,s),e.reactExports.createElement("span",null,w.map(((t,n)=>e.reactExports.createElement("span",{className:r.cx({[a.rcHlTruncatedStringTooltipHighlight]:t.isHighlighted}),key:n},t.text))))):t,showOnMouseMove:S,wrapperClassName:a.rcHlTruncatedStringTooltip},e.reactExports.createElement("span",{className:r.cx(c,a.rcHlTruncatedStringContainer,{[a.rcHlTruncatedStringContainerBold]:f}),"aria-label":l,ref:H,style:{display:"block"}},s?g(b,t,s):b));var w};s.displayName="HighlightedTruncatedString";const g=(t,n,i)=>{const o=((t,r)=>{let e=0;for(;e<t.length&&t.charAt(e)===r.charAt(e);)++e;return e===t.length||"…"!==t.charAt(e)?[t]:[t.substring(0,e),t.substring(e+1)]})(t,n);if(1===o.length)return c(t,i);const s=c(n,i,0,o[0].length),g=c(n,i,n.lastIndexOf(o[1])),_=function(t,n,i){return e.reactExports.createElement("span",{className:r.cx({[a.rcHlTruncatedStringHighlight]:l(t,n,i)})},"…")}(o[0].length+1,n.lastIndexOf(o[1])-1,i);return e.reactExports.createElement("span",null,s,_,g)};t.HighlightedTruncatedString=s}));
//# sourceMappingURL=c_src_highlighted-truncated-string_index.js-vflMJav1y.map

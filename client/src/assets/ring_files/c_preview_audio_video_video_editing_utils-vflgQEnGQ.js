define(["exports","./c_file_viewer_file_viewer_components"],(function(e,t){"use strict";var r;e.VideoPreviewEvent=void 0,(r=e.VideoPreviewEvent||(e.VideoPreviewEvent={})).PlayerRendered="player_rendered",r.FirstClickPlay="first_click_play",r.MediaError="media_error",r.ChangePlaybackRate="change_playback_rate",r.ChangeVideoQuality="change_video_quality",r.ClosePreview="close_preview",r.TimeToBuffer="time_to_buffer",r.TimeToLoad="time_to_load",r.SeekVideo="seek_video",r.VideoStartsPlaying="video_starts_playing",r.VideoResumesPlaying="video_resumes_playing",r.VideoStalled="video_stalled",r.VideoStalledResume="video_stalled_resume",r.VideoPaused="video_paused",r.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",r.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",r.HoverScrubberThumbnailsSucceeded="hover_scrubber_thumbnails_succeeded",r.HoverScrubberThumbnailsFailed="hover_scrubber_thumbnails_failed",r.AudioWaveformLoaded="audio_waveform_loaded",r.AudioWaveformFailed="audio_waveform_failed",r.MediaEnded="media_ended",r.VideoPlaybackSmoothness="video_playback_smoothness",r.SlowConnectionBannerShown="slow_connection_banner_shown",r.VideoMetadataLoaded="video_metadata_loaded",r.TimeToFirstFrame="time_to_first_frame",r.StallsPerSecondOfPlayback="num_stalls_per_second_playback",r.TotalStallDurationOverTotalPlaybackDuration="total_stall_duration_over_total_playback_duration",r.DroppedVideoFrames="dropped_video_frames",r.VideoProgress2Percent="video_progress_2_percent",r.VideoProgress1Second="video_progress_1_second",r.DroppedVideoFramesOverTotalVideoFrames="dropped_video_frames_over_total_video_frames",r.NetworkBandwidthBytesPerSecond="network_bandwidth_bytes_per_second",r.PlayDurationMs="play_duration_ms",r.HasMultipleAudioTracks="has_multiple_audio_tracks";const n=e=>e&&e.current?e.current.getBoundingClientRect().left:null,o=(e,t,r)=>e>r?r:e<t?t:e,i=(e,t,r,n)=>o(t,r,n)-e,a=(e,t,r,n)=>{const o=n-r;return Math.floor(r+e/t*o)},l=(e,t,r,n)=>n*(r-e)/(t-e),d=(e,t,r=1e-6)=>Math.abs(e-t)<r,s=(e,t)=>!(null==t||d(e.start,0)&&d(e.end,t)),u=["h264"],c=[...u,"hevc","mjpeg","av1"];e.LEFT_BORDER_ADJUSTMENT=4,e.RIGHT_BORDER_ADJUSTMENT=6,e.TOOLTIP_TIMEOUT=1e3,e.TRIM_BAR_HEIGHT=60,e.TRIM_BAR_HORIZONTAL_PADDING=26,e.TRIM_BORDER_ADJUSTMENT=4,e.calculateLeftHandlePosition=(e,t,r,o)=>{const a=n(t);if(null==a)return;if(null==e||0===e)return;const{trackLeftOuterBound:l}=r;return i(l,e-a,l,o-8-2-8)},e.calculatePlaybackTimeMarkerPosition=(e,t,r,o,a)=>{const l=n(t);if(null==l)return;const{trackLeftOuterBound:d}=r;return i(d,e.clientX-l,o+4,a-4-2)},e.calculateRightHandlePosition=(e,t,r,o)=>{const a=n(t);if(null==a)return;if(null==e||0===e)return;const{trackLeftOuterBound:l,trackEnd:d}=r;return i(l,e-a,o+8+2,d)},e.calculateTimeFromPosition=(e,t,r)=>t/e*r,e.checkHasAnyChange=(e,t)=>(0!==e.counts.crop||0!==e.counts.flip||0!==e.counts.rotate||0!==e.counts.trim)&&!!(s(e.trim,t)||0!==e.rotate||e.crop||e.horizontalFlip),e.checkHasCropCoordChange=(e,t)=>!(d(e.height,t.height)&&d(e.width,t.width)&&d(e.top,t.top)&&d(e.left,t.left)),e.checkHasTrimChange=s,e.checkHasTrimRangeChange=(e,t)=>!d(e.start,t.start)||!d(e.end,t.end),e.clamp=o,e.createInitialVideoEditState=(e,t)=>{var r,n,o;return{rotate:0,trim:{start:null!==(r=null==t?void 0:t.start)&&void 0!==r?r:0,end:null!==(o=null!==(n=null==t?void 0:t.end)&&void 0!==n?n:e)&&void 0!==o?o:0},crop:void 0,horizontalFlip:!1,counts:{trim:0,crop:0,rotate:0,flip:0}}},e.getArrowKeyTimeDelta=(e,t)=>{if(0===t)return 0;const r=Math.max(.01*t,1),n=.1*r;let o=0;return"ArrowLeft"===e.key?o=e.shiftKey?-n:-r:"ArrowRight"===e.key&&(o=e.shiftKey?n:r),o},e.getContainerLeft=n,e.getElementLeft=e=>{var t,r;return null==(null===(r=null===(t=null==e?void 0:e.current)||void 0===t?void 0:t.style)||void 0===r?void 0:r.left)?null:parseInt(e.current.style.left,10)},e.getEmptyDragImage=()=>{const e=new Image(0,0);return e.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",e},e.getHoverTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return l(n,o-2,e,t)},e.getLeftPositionFromTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return a(e,t,n,o)-4},e.getLeftTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return l(n,o,e+4,t)},e.getNextFlip=(e,t,r)=>"horizontal"===r?[!e,t]:[!e,(t+180)%360],e.getNextRotation=(e,t,r)=>(e+(r!==t?90:270))%360,e.getPlaybackTimeMarkerPositionFromTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return a(e,t,n,o-2)},e.getPlaybackTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return l(n,o-2,e,t)},e.getRightPositionFromTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return a(e,t,n,o)+4},e.getRightTimestamp=(e,t,r)=>{const{trackLeftInnerBound:n,trackRightInnerBound:o}=r;return l(n,o,e-4,t)},e.getTrimAccuracyThresholdMsec=e=>{const t=Math.round(100*(e.end-e.start));return Math.min(t>0?t:0,500)},e.getVideoEditLoggingExtras=(e,r)=>{if(!r)return null;const n="video"===r[".tag"]?r:null;if(!n)return null;const{resolution_width:o,resolution_height:i,frame_rate:a,duration:l,codec:d}=n;let s;return o&&i&&a&&l&&(s=o*i*a*l),{resolution_width:o?String(o):"",resolution_height:i?String(i):"",frame_rate:a?String(a):"",codec:d||"",total_size:s?String(s):"",extension:t.getWhitelistedFileExtension(t.getFileExtension(e))}},e.getWrapperBounds=e=>({trackStart:0,trackEnd:e,trackLeftOuterBound:0,trackRightOuterBound:e,trackLeftInnerBound:4,trackRightInnerBound:e-4}),e.isChangingCodecDuringEdit=e=>e&&!u.includes(e),e.isCodecSupported=e=>e&&c.includes(e),e.isDurationTooLongForEdit=e=>e&&e>300,e.isDurationTooShortForEdit=e=>e&&e<=1,e.isFileTooBigForEdit=e=>e&&void 0!==e.size&&e.size>t.VIDEO_EDITING_SIZE_LIMIT,e.isOver4k=e=>{if(e&&e.resolution_height&&e.resolution_width){const t=e.resolution_width,r=e.resolution_height;if(Math.max(t,r)>3840||Math.min(t,r)>2160)return!0}return!1},e.shouldAutoSnapHandle=(e,t)=>Math.abs(e-t)<20,e.updateElementVisibility=(e,t)=>{e.current&&(e.current.style.visibility=t?"hidden":"visible")},e.updatePositionStyle=(e,t)=>{e.current&&(null!=t.left&&(e.current.style.left=`${t.left}px`),null!=t.width&&(e.current.style.width=`${t.width}px`),null!=t.right&&(e.current.style.right=`${t.right}px`),null!=t.top&&(e.current.style.top=`${t.top}px`),null!=t.height&&(e.current.style.height=`${t.height}px`))}}));
//# sourceMappingURL=c_preview_audio_video_video_editing_utils.js-vfldg-yFQ.map

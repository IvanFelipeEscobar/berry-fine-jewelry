define(["exports","./c_core_i18n","./c_file_actions_strings","./c_files_view_file_actions_snackbars","./e_ui_page_files_router","./c_core_types_preview_type","./c_pap-events_enums_file_type-utils","./c_file_store_utils","./e_edison","./c_core_data_preview_key","./c_extensions_cloud_docs_compat"],(function(e,r,_,i,S,I,a,N,O,c,n){"use strict";const E="COPY_ACTION",o="DOWNLOAD_ACTION",s="DELETE_ACTION",T="MOVE_ACTION",t="RENAME_ACTION",D=[o],P=[T,E,t,s];var A;e.SDKPreviewSurface=void 0,(A=e.SDKPreviewSurface||(e.SDKPreviewSurface={})).BROWSE="browse",A.SEARCH="search",A.INBAND_SHARE="inband-share",A.SHARED_LINK="shared-link",A.SHARED_CONTENT_LINK="shared-content-link",A.SHARED_LINK_EMBED="shared-link-embed",A.VERSION_HISTORY="version-history",A.HOME="home",A.HELLOSIGN="hellosign",A.RECENTS="recents",A.STARRED="starred",A.STANDALONE_PREVIEW="standalone-previews",A.PHOTOS="photos",A.COLLECTIONS="collections",A.SHARED_COLLECTION="shared-collection",A.COMMERCE="commerce",A.CLIENT_PORTAL="client-portal",A.TRANSFER="transfer",A.FILE_LOCKING="file-locking",A.BACKUP="backup",A.UNKNOWN="unknown",A.VIDEO_SYNTHESIS="video-synthesis",A.VIDEO_HOME="video-home";const l=[e.SDKPreviewSurface.SEARCH,e.SDKPreviewSurface.STANDALONE_PREVIEW,e.SDKPreviewSurface.FILE_LOCKING,e.SDKPreviewSurface.RECENTS,e.SDKPreviewSurface.STARRED,e.SDKPreviewSurface.HOME],u=e=>l.includes(e),R=[e.SDKPreviewSurface.BROWSE,e.SDKPreviewSurface.HOME,e.SDKPreviewSurface.RECENTS,e.SDKPreviewSurface.STARRED,e.SDKPreviewSurface.SEARCH,e.SDKPreviewSurface.INBAND_SHARE,e.SDKPreviewSurface.STANDALONE_PREVIEW,e.SDKPreviewSurface.COLLECTIONS,e.SDKPreviewSurface.VIDEO_SYNTHESIS,e.SDKPreviewSurface.VIDEO_HOME],d=[e.SDKPreviewSurface.SHARED_CONTENT_LINK,e.SDKPreviewSurface.SHARED_LINK],v=e=>!("isDeleted"in e)||!("is_unmounted"in e)||!e.isDeleted&&!e.is_unmounted,C=e=>"is_in_vault_folder"in e&&e.is_in_vault_folder,L=e=>{var r;return"per_node_metadata"in e&&!!(null===(r=e.per_node_metadata)||void 0===r?void 0:r.link_node)},w=e=>S.Snackbar.sync(r.intl.formatMessage(_.renameSnackbarProgressMessage),!1,e),f=e=>S.Snackbar.complete(r.intl.formatMessage(_.renameSnackbarSuccessMessage),e),p=(e,r,_)=>S.Snackbar.fail(i.renameError(e.error),_);var K=Object.freeze({__proto__:null,renameCompleteSnackBar:f,renameFailedSnackBar:p,renameSnackBarInProgress:w});const U=()=>!0,m=e=>e?{user:e}:void 0,G=e=>r=>e.includes(r),F=e=>G(e),h={shouldShowForPreviewSurface:r=>r!==e.SDKPreviewSurface.VERSION_HISTORY,shouldShowForPreviewType:U,filterValidUser:m,filterValidFile:e=>(e=>N.isBrowseFile(e)&&!L(e)&&v(e))(e)?e:void 0};const y={filterValidFile:e=>!v(e)||C(e)||L(e)?void 0:e,filterValidUser:m,shouldShowForPreviewSurface:F([e.SDKPreviewSurface.BACKUP,e.SDKPreviewSurface.BROWSE,e.SDKPreviewSurface.COLLECTIONS,e.SDKPreviewSurface.FILE_LOCKING,e.SDKPreviewSurface.HELLOSIGN,e.SDKPreviewSurface.HOME,e.SDKPreviewSurface.INBAND_SHARE,e.SDKPreviewSurface.PHOTOS,e.SDKPreviewSurface.RECENTS,e.SDKPreviewSurface.SEARCH,e.SDKPreviewSurface.SHARED_CONTENT_LINK,e.SDKPreviewSurface.SHARED_LINK,e.SDKPreviewSurface.STANDALONE_PREVIEW,e.SDKPreviewSurface.STARRED,e.SDKPreviewSurface.VIDEO_HOME,e.SDKPreviewSurface.VIDEO_SYNTHESIS]),shouldShowForPreviewType:U};e.ADD_TO_COLLECTION_ACTION_PLUGIN_ID="ADD_TO_COLLECTION_ACTION",e.CONVERSION_ACTION_PLUGIN_ID="CONVERSION_ACTION",e.COPY_ACTION_PLUGIN_ID=E,e.DEFAULT_ACTION_IDS=D,e.DELETE_ACTION_PLUGIN_ID=s,e.DOCSEND_ANALYTICS_ADD_ON_ACTION_PLUGIN_ID="DOCSEND_ANALYTICS_ADD_ON_ACTION",e.DOWNLOAD_ACTION_PLUGIN_ID=o,e.DROPBOX_BROWSE_SURFACES=R,e.DYNAMIC_FILE_ACTION_PLUGIN_IDS=P,e.FVSDK_MOUNT_POINT="fvsdk-mount-point",e.GO_TO_FOLDER_PLUGIN_ID="GO_TO_FOLDER_PLUGIN",e.MOVE_ACTION_PLUGIN_ID=T,e.MULTI_VIDEO_EDITOR_PLUGIN="MULTI_VIDEO_EDITOR_PLUGIN",e.OPEN_DROPDOWN_ACTION_PLUGIN_ID="OPEN_DROPDOWN_ACTION",e.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID="OPEN_IN_DESKTOP_ACTION",e.OPEN_IN_REPLAY_ACTION_PLUGIN_ID="OPEN_REPLAY_ACTION",e.PREVIEWS_SNACKBAR_ID="preview-action",e.PUBLISH_ACTION_PLUGIN_ID="PUBLISH_ACTION",e.RENAME_ACTION_PLUGIN_ID=t,e.REQUEST_APPROVAL_ACTION_PLUGIN_ID="REQUEST_APPROVAL_ACTION",e.RESTORE_ACTION_PLUGIN_ID="RESTORE_ACTION",e.SELF_SIGN_ACTION_PLUGIN_ID="SELF_SIGN_ACTION",e.SEND_FOR_SIGNATURE_ACTION_PLUGIN_ID="SEND_FOR_SIGNATURE_ACTION",e.SHARING_SURFACES=d,e.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID="SIGNATURES_ACTIONBAR_DROPDOWN",e.STARRED_ACTION_PLUGIN_ID="STARRED_ACTION",e.STAR_TOOLBAR_PLUGIN_ID="STAR_TOOLBAR_BUTTON",e.TRANSFER_ACTION_PLUGIN_ID="TRANSFER_ACTION",e.UNZIP_ACTION_PLUGIN_ID="UNZIP_ACTION",e.VERSION_HISTORY_ACTION_PLUGIN_ID="VERSION_HISTORY_ACTION",e.VIDEO_EDIT_PLUGIN_ID="VIDEO_EDIT_PLUGIN",e.VOICE_OVER_PLUGIN_ID="VOICE_OVER_PLUGIN",e.WATERMARKING_ACTION_PLUGIN_ID="watermarking_overflow_action",e.allowAllFiles=e=>e,e.alwaysShow=U,e.fileActionCondition=h,e.filterLoggedInUser=m,e.filterPreviewTypeIn=e=>G(e),e.filterSurfaceIn=F,e.getActionCondition=(e,r)=>{const{previewType:_,previewSurface:i,file:S,user:I,sharePermission:a,previewKey:N}=e,{shouldShowForPreviewType:O,shouldShowForPreviewSurface:n,filterValidUser:E,filterValidFile:o}=r,s=!!N&&c.isNestedArchiveFilePreviewKey(N),T=E(I),t=o(S,a,s);if(O(_)&&n(i)&&T&&t)return{user:T,file:t}},e.getPapFileType=function(e){return e?a.getFileTypeFromString(e):void 0},e.getPapFilterElement=function(e){switch(e){case"added":case"viewed":case"moved":case"renamed":case"edited":case"shared":case"commented":return e;default:return}},e.getPapPreviewType=function(e){switch(e){case I.PreviewType.Image:case I.PreviewType.Doc:case I.PreviewType.Video:case I.PreviewType.Audio:case I.PreviewType.Archive:case I.PreviewType.CloudDoc:case I.PreviewType.Linkfile:case I.PreviewType.Error:case I.PreviewType.Excel:case I.PreviewType.HTML:return e;case I.PreviewType.SsrDoc:case I.PreviewType.Text:return"doc";case I.PreviewType.RawHTML:return"html";case I.PreviewType.Photo:return"image";default:return}},e.getType=e=>"type"in e?e.type:S.FileTypes.FILE,e.isCloudDoc=e=>"is_cloud_doc"in e&&e.is_cloud_doc,e.isDynamicFileActionSurface=u,e.isInsideVaultFolder=C,e.isLiveFile=v,e.isPnmLinkNodeSelected=L,e.isPnmSuppressMoveSelected=e=>{var r;return"per_node_metadata"in e&&!!(null===(r=e.per_node_metadata)||void 0===r?void 0:r.suppress_move)},e.makeMenuActionItem=({id:e,icon:r,onClick:_,label:i})=>O.React$1.createElement(S.Menu.ActionItem,{role:"menuitem",key:e,withLeftAccessory:O.React$1.createElement(S.UIIcon,{src:r}),value:{handler:_}},i),e.openInActionConditions=y,e.renameCompleteSnackBar=f,e.renameFailedSnackBar=p,e.renameSnackBarInProgress=w,e.shouldUseDynamicFileAction=(e,r)=>P.includes(e)&&u(r),e.snackbars_esnext=K,e.useShouldRenderOpen=(e,r,_)=>{const i=S.useSelector((r=>n.getOpenActionsForFile(r,e)),S.shallowEqual),I=O.React$1.useMemo((()=>n.partitionActions(i).cloudEditors),[i]);if(N.isSharedFile(e)){if(0===I.length)return!1;if((e=>(null==e?void 0:e.linkType)===S.SharedLinkType.Shmodel)(r))return!1}return!_||0!==i.length}}));
//# sourceMappingURL=c_action_plugins_open_in_action_hooks.js-vflFf47n0.map

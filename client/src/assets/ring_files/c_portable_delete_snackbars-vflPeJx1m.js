define(["exports","./c_tslib","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_action_bar_action_bar_strings","./c_core_browser_detection","./c_portable_delete_strings","./c_file_actions_strings","./c_files_view_file_actions_snackbars"],(function(e,t,a,l,n,o,r,s,i,c){"use strict";const d=({user:e,fq_path:t,totalFilesCount:i,onConfirm:c,onRequestClose:d,setDeleteFileModalOpen:u})=>{const[_,m]=l.React$1.useState(!0),f=()=>{m(!1),null==d||d()},E=e.is_cdm_member,p=n.intl.formatMessage({id:"FMtrmh",defaultMessage:"{fileCount, plural, one {# file} few {# files} many {# files} other {# files}}"},{fileCount:i}),g=1===i?a.filename(t):p,C=a.isBackupBrowse()&&!a.isInsideEDB(t),b={filename:g,b:e=>l.React$1.createElement(a.Text,{isBold:!0},e),u:e=>l.React$1.createElement("span",{style:{textDecoration:"underline"}},e)},M=n.intl.formatMessage({id:"yDuoGW",defaultMessage:"Cancel"}),R=n.intl.formatMessage(o.DELETE_ACTION_STRING);return l.React$1.createElement(a.Modal$1,{open:_,isCentered:!0,onRequestClose:f,onAfterOpen:()=>null==u?void 0:u(!0),onAfterClose:()=>null==u?void 0:u(!1)},l.React$1.createElement(a.Modal$1.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},l.React$1.createElement(a.Title,null,C?n.intl.formatMessage(s.BACKUP_DELETE_TITLE,b):n.intl.formatMessage(o.DELETE_ACTION_STRING))),l.React$1.createElement(a.Modal$1.Body,{hasVerticalSpacing:!1,className:"uxa-modal",id:"delete-file-modal"},l.React$1.createElement(a.Text,null,C?r.mac?n.intl.formatMessage(s.BACKUP_DELETE_CONTENT_MAC,b):n.intl.formatMessage(s.BACKUP_DELETE_CONTENT_WIN,b):E?n.intl.formatMessage({id:"emsobI",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your team member folder?"},b):n.intl.formatMessage({id:"8TOnv7",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your Dropbox?"},b))),l.React$1.createElement(a.Modal$1.Footer,null,l.React$1.createElement(a.Button$1,{variant:"opacity",onClick:f},M),l.React$1.createElement(a.Button$1,{variant:"primary",autoFocus:!0,onClick:()=>{c(),m(!1)}},R)))};const u=({user:e,filesPath:n,fq_path:o},{onSuccess:r,onError:s,onNetworkRequest:c,onRequestClose:u,setDeleteFileModalOpen:_,onSuccessResult:m})=>{var f;f={onConfirm:()=>t.__awaiter(void 0,void 0,void 0,(function*(){null==c||c();const t=yield i.deleteFiles(n,e.id,!0),a=t.isError?[]:t.result.entries.filter((e=>"success"===e[".tag"]));if(t.isError||0===a.length)return void(null==s||s(t.isError?t:i.createUndefinedRpcResult()));const l=new Set;a.forEach((e=>{e.metadata.path_lower&&l.add(e.metadata.path_lower)})),null==r||r(l),null==m||m(t)})),fq_path:o,totalFilesCount:n.length,user:e,onRequestClose:u,setDeleteFileModalOpen:_},a.Modal.showInstance(l.React$1.createElement(d,Object.assign({},f)))};var _=Object.freeze({__proto__:null,portableDelete:u});const m=(e,t=1)=>a.Snackbar.sync(c.deleteInProgress(t),!1,e),f=(e,t=1)=>a.Snackbar.complete(c.deleteCompleteSuccess(t,t),e),E=(e,t,l=1)=>{e.error&&a.Snackbar.fail(c.deleteError(l,e.error),t)};var p=Object.freeze({__proto__:null,deleteCompleteSnackBar:f,deleteFailedSnackBar:E,deleteSnackBarInProgress:m});e.deleteCompleteSnackBar=f,e.deleteFailedSnackBar=E,e.deleteSnackBarInProgress=m,e.delete_esnext=_,e.portableDelete=u,e.snackbars_esnext=p}));
//# sourceMappingURL=c_portable_delete_snackbars.js-vflPxmPcl.map

define(["exports","./e_edison","./e_ui_page_files_router","./c_core_i18n","./c_file_store_utils","./c_sdk_file_viewer_action_plugins_action_plugin_menu_item","./c_common_logging_uxa","./c_file_viewer_sdk_file_viewer_file_viewer","./c_flows_conversions_conversion_actions","./c_file_viewer_utils","./c_flows_conversions_convert","./c_workflow_builder_workflow_actions_action_ui_config"],(function(e,i,n,t,o,s,c,r,a,l,_,u){"use strict";const g=({file:e,user:i,action:n,encryptionOptions:t,logUserAction:o,context:s,shareToken:a})=>{if(o("convert_file",s,{conversion_type:n.actionText}),i)n.convert([e],i,{shareToken:a,source:"preview"});else{const i=new URL(window.location.href);i.searchParams.set("save_as","true"),i.searchParams.set("save_as_action",n.actionText),window.history.replaceState(i.href,"",i.href),r.showAuthModal({mode:r.AuthMode.REGISTER,sharedLinkUrl:i.href,kind:r.LoginOrRegisterKind.POSTSAVEAS,encryptionOptions:t,loggingExtra:{signup_source:"save_as"},signupTag:c.RegistrationSource.SHMODEL_SAVE_AS_REGISTER,webSignInTag:l.getWebSignInTag(!1,e.is_dir)})}};e.FileConversionMenuSegment=e=>{const{conversionActions:c,file:r,isLegacyPlugin:a=!1}=e;return i.React$1.createElement(n.Menu.Segment,null,c.map((c=>{const l=r.bytes/Math.pow(1024,2),_=u.getConversionFileSizeLimitMB([n.file_extension(o.getFilename(r))],c.actionText),f=l>_,d=t.intl.formatMessage({id:"0vePbC",defaultMessage:"File is larger than the {fileSizeLimitMB}MB limit"},{fileSizeLimitMB:_}),v=a?i.React$1.createElement(s.ActionPluginMenuItem,{key:c.actionText,onAction:()=>g(Object.assign(Object.assign({},e),{action:c})),disabled:f,withLeftAccessory:i.React$1.createElement(n.UIIcon,{src:c.actionIcon})},c.actionText):i.React$1.createElement(n.Menu.ActionItem,{key:c.actionText,disabled:f,value:{handler:()=>g(Object.assign(Object.assign({},e),{action:c}))},withLeftAccessory:i.React$1.createElement(n.UIIcon,{src:c.actionIcon})},c.actionText);return f?i.React$1.createElement(n.Tooltip,{key:c.actionText,title:d,placement:"left",id:"flows-disabled-menu-item-tooltip"},i.React$1.createElement("div",null,v)):v})))},e.validateFileConversionProps=function({context:e,encryptionOptions:i,getActiveFile:n,user:t}){if(!e||!n)return;const{file:o,shareToken:s}=n(),c=function({getActiveFile:e,user:i}){const{file:n,sharedLinkInfo:t,sharePermission:o}=e();if(!_.canConvertFile(n,o)||!r.canDownloadFile(t,o))return[];const s={expFlowsManualVideoGifUi:_.isManualVideoGifEnabled(i)};return a.getConversionActionsForFiles([n],s)}({getActiveFile:n,user:t});return c.length?{conversionActions:c,encryptionOptions:i,file:o,logUserAction:e.logUserAction,shareToken:s,user:t}:void 0}}));
//# sourceMappingURL=c_action_plugins_file_conversion_action_shared_components.js-vflyf2Eqo.map

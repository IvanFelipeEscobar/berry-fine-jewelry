define(["exports","./c_tslib","./e_edison","./e_ui_page_files_router","./c_form_row_index","./c_typeahead_index","./c_tagging_components_tags_container"],(function(e,t,a,r,s,l,o){"use strict";const c=({placeholderText:e})=>a.reactExports.createElement("div",{className:o.classes.tgEmptyState},a.reactExports.createElement(r.Text,{variant:"label",size:"small",color:"faint",tagName:"p"},e));c.displayName="EmptyState";const n=e=>{var{disabled:s,children:l}=e,o=t.__rest(e,["disabled","children"]);return s?a.reactExports.createElement(a.reactExports.Fragment,null,l):a.reactExports.createElement(r.Tooltip,Object.assign({},o),l)};n.displayName="Tooltip";const i=({hasFocus:e})=>a.reactExports.createElement(r.Text,{size:"small",color:e?"standard":"faint",className:o.classes.tgInputHashtagAccessory},"#");i.displayName="LeftAccessory";const p=({user:e,maxTagsReached:t,readOnly:p=!1,excludeResults:m,onSelection:E,onInputFocus:d,onStartTyping:g,onInputBlur:u,getStrings:x,allTagsSuggestions:h,fetchAllTagsSuggestions:T})=>{const[y,f]=a.reactExports.useState(""),[_,S]=a.reactExports.useState([]),[v,b]=a.reactExports.useState(!1),{addTypeaheadEmptyState:w,createTagPrefix:F,addTag:I,invalidCharsError:N,maxTagsReachedError:R,tooLongError:C,alreadyExistsError:L,readOnlyError:z}=x();a.reactExports.useEffect((()=>{T({user:e})}),[]),a.reactExports.useEffect((()=>{const e=y.toLowerCase();if(P(e)||void 0===h)return void S([]);const t=r.trimHashtags(e),a=r.getTagsSuggestions(t,h).filter(r.isUserGeneratedTag).map((e=>e.tag_text)).filter((e=>!m.includes(e)));S(a)}),[y,h,m]);const O=e=>a.reactExports.createElement(l.Typeahead.Row,{key:`@${e}`,id:`@${e}`,value:e,withTitle:a.reactExports.createElement(r.Text,{size:"small"},r.formatTag(e))}),H=e=>a.reactExports.createElement(l.Typeahead.Row,{key:e,value:e,withTitle:F?a.reactExports.createElement(r.Text,{size:"small"},F+" ",a.reactExports.createElement(r.Text,{size:"small",isBold:!0},r.formatTag(e))):a.reactExports.createElement(r.Text,{size:"small"},r.formatTag(e)),id:e}),P=e=>!(/^#*[\p{L}0-9_]+$/iu.test(e)&&e.length<=32||/^\#*$/i.test(e)),A=({currentTarget:{value:e}})=>{0===y.length&&1===e.length&&(null==g||g()),f(e)},$=t?R:p?z:void 0,j=y.toLowerCase(),k=r.trimHashtags(j),B=""!==k&&0===_.length&&m.includes(k),K=P(j)||B,U=K||m.includes(k)||_.includes(k)||""===k?[]:[j],G=p||t;return a.reactExports.createElement(l.Typeahead.Wrapper,{onSelection:e=>{f(""),E(e)},onFocus:()=>{null==d||d(),b(!0)},onBlur:()=>{null==u||u(y),b(!1)},className:o.classes.tgSearch},(({getTriggerProps:e,getContentProps:t,closeMenu:p})=>a.reactExports.createElement(a.reactExports.Fragment,null,a.reactExports.createElement(n,{disabled:!G,id:"more-button-tooltip",title:$},a.reactExports.createElement(r.TextInput,Object.assign({id:"trigger"},e({onChange:A}),{value:y,"aria-label":I,placeholder:I,disabled:G,withLeftAccessory:a.reactExports.createElement(i,{hasFocus:v||y.length>0}),autoComplete:"off",isInvalid:K,className:r.cx(o.classes.tgInput,o.classes.tgInputSmallFontOverride),onKeyPress:e=>((e,t)=>{if(e.key===r.Key_enum.Key.Enter&&""!==y){if(P(y)||m.includes(k))return;const e=r.trimHashtags(y).toLowerCase();E(e),f(""),t({})}})(e,p)}))),K&&a.reactExports.createElement(s.FormHelperText,{variant:"alert",id:"bad-parms-input-helper"},a.reactExports.createElement(r.UIIcon,{src:r.FailLine,size:"small"}),y.length>=32?C:B?L:N),a.reactExports.createElement(l.Typeahead.Container,Object.assign({},t(),{auto:!1,isEmptyQuery:0===y.length,placement:"bottom-start",emptyPrompt:a.reactExports.createElement(c,{placeholderText:w})}),a.reactExports.createElement(l.Typeahead.Results,{results:_.slice(0,3),renderRow:O}),a.reactExports.createElement(l.Typeahead.Results,{results:U,renderRow:H})))))};p.displayName="TagsSearch",e.TagsSearch=p}));
//# sourceMappingURL=c_tagging_components_tags_search.js-vflBCkjgy.map

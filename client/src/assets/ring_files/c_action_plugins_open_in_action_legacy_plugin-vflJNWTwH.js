define(["exports","./e_edison","./e_ui_page_files_router","./c_action_bar_action_bar_strings","./c_core_i18n","./c_action_plugins_open_in_action_utils","./c_action_plugins_open_in_action_hooks","./c_core_logging_constants","./c_file_store_utils","./c_extensions_extensions_menu_component_v2","./c_tslib","./c_apex-metrics_src_types","./c_lodash-es_lodash","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/core/langpack","./c_sdk_file_viewer_action_plugins_file_actions","./c_portable_delete_snackbars","./c_portable_delete_strings","./c_file_actions_strings","./c_files_view_file_actions_snackbars","./c_file_actions_portable_copy","./c_files_view_file_actions_file_from_metadata","./c_ui_fileops_actions","./c_data_action_creators_index","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","./c_action_bar_file_actions_logging","./c_sharing_async_share_modal_util","./c_file_actions_portable_move","./c_portable_rename","./c_form_row_index","./c_unity_features","metaserver/static/js/modules/constants/unity","./c_ui_async_overquota_modal_controller","./c_publish_publish_modal","./c_table_index","./c_combinations_index","./c_profile_services_profile_services_constants","metaserver/static/js/modules/constants/publish","./c_carousel_index","./c_profile_services_profile_services_link","metaserver/static/js/modules/constants/login_and_register","./c_hooks_lib_index","./c_preview_audio_video_helper_image_size","./c_core_types_preview_type","./c_pap-events_publish_modal_select_publish_entrypoint","./c_pap-events_enums_file_type-utils","./c_core_data_preview_key","./c_file_actions_portable_select_destination","./c_hive_schemas_web-modal-activity","./c_extensions_cloud_docs_compat","./c_integrations_data_selectors","./c_downloads","./c_share_download_ui_api","./c_unity_check_file_cache","./c_spectrum_tooltip","./c_spectrum_positioned_portal","./c_extensions_extensions_utils","./c_spectrum_modal_utility_modal","./c_spectrum_tertiary_link_tertiary_list","./c_icon_templates_actionable_index","./c_spectrum_svg_icon_bundle","./c_spectrum_icon_form_index","./c_icon_templates_stateless_index","./c_exenv_index","./c_ux_analytics_modal_tracking","metaserver/static/js/modules/constants/payments","./c_account_email","./c_account_email_verify_reasons","./c_ui_modal_dig","./c_ui_input_dig","./c_file_viewer_sdk_file_viewer_experiments","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/file_viewer_flows_experiments"],(function(e,t,s,n,_,c,o,i,a,r,l,m,u,d,p,v,f,g,b,h,w,j,x,y,k,O,I,R,A,E,T,$,N,D,P,S,C,B,M,U,H,L,W,q,F,G,z,J,K,Q,V,X,Y,Z,ee,te,se,ne,_e,ce,oe,ie,ae,re,le,me,ue,de,pe,ve,fe,ge,be,he,we,je,xe,ye,ke,Oe,Ie,Re,Ae,Ee,Te,$e,Ne,De,Pe,Se,Ce,Be,Me,Ue,He,Le,We,qe,Fe,Ge){"use strict";const ze=({file:e,shareToken:n,icon:_,label:c,content:i,hideIcon:a,handleSelection:r,onToggle:l})=>o.useShouldRenderOpen(e,n,!1)?t.React$1.createElement(s.Menu.Wrapper,{onSelection:r,onToggle:l},(({getTriggerProps:e,getContentProps:n})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(s.Button$1,Object.assign({},e(),{variant:"opacity",withIconLeft:a?null:_,withDropdownIcon:!0}),c),t.React$1.createElement(s.Menu.Content,Object.assign({},n()),i)))):null;ze.displayName="OpenButton";const Je=e=>{const{context:l,file:m,user:u,shareToken:d}=e;let p;const v=a.isBrowseFile(m);p=v?t.React$1.createElement(r.WithUnity,{key:"open-in-action-btn-unity",file:m,user:u,render:s=>t.React$1.createElement(c.OpenMenuContent,Object.assign({},e,{unityInfo:s,isInActionBar:!0,openDesktopActionHandler:c.makeOpenInDesktopHandler(m,u,l)}))}):t.React$1.createElement(c.OpenMenuContent,Object.assign({},e,{isInActionBar:!0,openDesktopActionHandler:c.makeOpenInDesktopHandler(m,u,l)}));const f=_.intl.formatMessage(n.OPEN_IN_ACTION_STRING),g=e=>{e.menuItem.handler(),l.logUserAction(e.menuItem.userAction||"unknown",i.UserActionContext.Toolbar,Object.assign({},e.menuItem.actionName&&{app_action_name:e.menuItem.actionName}))},b=e=>{e.isOpen&&l.logUserAction(i.UserAction.OpenInMenu)};return{renderButton:e=>t.React$1.createElement(s.Provider,{store:s.getStore()},t.React$1.createElement(ze,{icon:c.icon,content:p,file:m,shareToken:d,handleSelection:g,onToggle:b,hideIcon:e,label:f})),overflowItem:t.React$1.createElement(s.Provider,{store:s.getStore()},t.React$1.createElement(c.OpenOverflow,{icon:c.icon,content:p,file:m,shareToken:d,label:f,isRedesign:!1})),id:o.OPEN_DROPDOWN_ACTION_PLUGIN_ID}};Je.displayName="OpenDropdownPreview";e.makeOpenDropdownAction=e=>({actionDefinitions:()=>{const t=c.validateOpenInActionProps(e);if(!t)return{};const s=Je(t);return{atTopLevelIfSpace:[s],alwaysInOverflow:[[s]]}}})}));
//# sourceMappingURL=c_action_plugins_open_in_action_legacy_plugin.js-vflEnpwre.map

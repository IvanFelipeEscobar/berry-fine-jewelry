define(["require","exports","./c_tslib","./e_edison","./c_core_i18n","./e_ui_page_files_router","./c_bug_reporting_routing","./c_lodash-es_lodash","./c_core_notify","./c_history","./c_pagelet_logger","./c_pagination_manager","./c_browse_actions","./c_browse_file_actions_action_handlers","./c_src_sink_index","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/web_experience_constants","./c_file_uploader_upload_kit_provider","./c_file_uploader_utils","./c_resize-observer-polyfill_dist_ResizeObserver","./c_src_simple-action-bar_inline_action_bar","./c_src_simple-action-bar_action_bar_types","./c_src_highlighted-truncated-string_em-string","./c_action_bar_file_actions","./c_components_add-content-menu_index","./c_action_bar_action_bar_strings","./c_cloud_docs_create_api","./c_pap-events_navigation_select_create_menu","./c_file_uploader_types","./e_core_exception","./c_browse_tts","./c_core_exception_info","./c_flows_utils_async_modal_launchers","./c_capture_async_recorder","./c_flows_utils_exposure_logger","./c_capture_redux_selectors","./c_cloud_docs_gdd_migration_gdd_ui_blocking","./c_data_action_creators_index","./c_file_actions_portable_select_destination","./c_naming_conventions_utils","./c_flows_redux_selectors","./c_modal_filters_view_tidy_filters","./c_components_loading_indicator","./c_sharing_share_modal_util","./c_hooks_resize_observer","./c_truncate_index","./c_integrations_profile_card_popover","./c_sharing_member_avatars","./c_utils_contacts_tokenizer_contacts_tokenizer_util","./c_src_utils_logging","./c_collections_utils_file","./c_onboarding_checklist_async_share_button_tooltip","./c_tabs_index","./c_jquery","metaserver/static/js/modules/constants/viewer","./c_Key","./c_ui_input_dig","./c_growth_ui_send_app_link_form","./c_auth_authenticator","./c_ui_modal_dig","./c_account_email","./c_account_email_verify_reasons","./c_experiments_provider","./c_file_info_utils","./c_browse_selection_indicator","./c_capture_api","./c_pap-events_enums_file_type-utils","./c_browse_element_width","./c_data_slice","./c_core_browser_detection","./c_content_suggestions_suggest_nonempty","./c_content_suggestions_suggested_file_card","./c_api_v2_team_client","./c_error_boundary","./c_campaigns_campaigns_element_id_enum","./c_file_actions_portable_copy","./c_file_uploader_add_more_files_menu","metaserver/static/js/modules/constants/files_spa","./c_api_v2_redux_files","./c_right_rail_file_activity_file_activity_blade","./c_sharing_ui_util","./c_trash_constants","./c_icon_folder_icon","./c_proto_edison_redirect_messages_pb","./c_hooks_use_stabilized_callback","./c_maestro_layout_search","./c_edison_ui_spa_chrome","./c_sharing_async_share_modal_util","./c_onboarding_checklist_constants","./c_security_csrf_hmac","./c_folder_dialog_folder_picker_dig","./c_sync_everything_strings","./c_sync_everything_utils_deep_link_utils","./c_sync_everything_hive_logger","./c_gdd_migration_ui_utils","./c_file_viewer_async_controller","./c_vault_constants","./c_starred_actions","./c_starred_constants","./c_starred_star","./c_data_store","./c_contacts_data_v2","./c_sharing_ui_notifications_util"],(function(e,t,o,s,a,i,n,r,l,c,d,u,p,g,m,h,_,f,E,v,A,S,R,y,w,T,b,M,I,F,C,O,N,D,P,L,x,k,B,U,$,V,G,W,j,H,Y,q,z,K,Q,X,J,Z,ee,te,oe,se,ae,ie,ne,re,le,ce,de,ue,pe,ge,me,he,_e,fe,Ee,ve,Ae,Se,Re,ye,we,Te,be,Me,Ie,Fe,Ce,Oe,Ne,De,Pe,Le,xe,ke,Be,Ue,$e,Ve,Ge,We,je,He,Ye,qe,ze){"use strict";function Ke(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var Qe=Ke(ee);class Xe{init(e){try{const t=JSON.parse(e),o=new et;o.init(t),this.browseContextResponse=o}catch(t){Ze(e)}}isError(){return!this.browseContextResponse}fromServerBrowseContext(){return this.browseContextResponse.fromServerBrowseContext()}fromServerNsidToMountPoint(){return this.browseContextResponse.fromServerNsidToMountPoint()}fromTeamFolders(){return this.browseContextResponse.fromTeamFolders()}fromCurrentFolderFile(){return this.browseContextResponse.fromCurrentFolderFile()}fromPreviewFileInfo(){return this.browseContextResponse.fromPreviewFileInfo()}fromCurrentFolderOverview(){return this.browseContextResponse.fromCurrentFolderOverview()}}class Je{init(e){try{const t=JSON.parse(e);let o=new tt;o.init(t),this.browseGetNextResponse=o}catch(t){Ze(e)}}isError(){return!this.browseGetNextResponse}fromPrefetchFiles(){return this.browseGetNextResponse.fromPrefetchFiles()}fromPaginatedTotalNumFiles(){return this.browseGetNextResponse.fromPaginatedTotalNumFiles()}fromLoadingState(){return this.browseGetNextResponse.fromLoadingState()}fromNextRequestVoucher(){return this.browseGetNextResponse.fromNextRequestVoucher()}fromNextRequestVoucherParsed(){return this.browseGetNextResponse.fromNextRequestVoucherParsed()}}function Ze(e){const t="err:";if(0===e.indexOf(t)){const t=e.substr(4);l.Notify.error(t)}}class et{init(e){this.browseContextResponse=e}fromServerBrowseContext(){const e=this.browseContextResponse.context;return i.BrowseContext.fromApiV2Object(e)}fromServerNsidToMountPoint(){let e={};const t=this.browseContextResponse.context;if(t.ns_id_infos){e=t.ns_id_infos.filter((e=>!!e&&!!e.mount_point&&!!e.ns_id)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.ns_id.toString()]:t.mount_point})),{})}return e}fromTeamFolders(){let e=[];const t=this.browseContextResponse.context;return t.team_folders_js_info&&(e=t.team_folders_js_info.map(i.File.fromApiV2Object)),e}fromCurrentFolderFile(){var e;const t=null!==(e=this.browseContextResponse.folder_info)&&void 0!==e?e:void 0;if(t&&t.file_info)return i.File.fromApiV2Object(t.file_info)}fromPreviewFileInfo(){const e=this.browseContextResponse.context;return(null==e?void 0:e.preview_file_info)?i.File.fromApiV2Object(null==e?void 0:e.preview_file_info):null}fromCurrentFolderOverview(){var e;return null!==(e=this.browseContextResponse.folder_overview)&&void 0!==e?e:void 0}}class tt{init(e){this.browseGetNextResponse=e}fromPrefetchFiles(){let e;return e=this.browseGetNextResponse.paginated_file_info.map((e=>e.file_info)).filter((e=>!!e)),e.map(i.File.fromApiV2Object)}fromPaginatedTotalNumFiles(){var e;return null!==(e=this.browseGetNextResponse.total_count)&&void 0!==e?e:0}fromLoadingState(){return this.browseGetNextResponse.has_more?i.LoadingState.LOADING_REMAINING_PAGES:i.LoadingState.LOADED}fromNextRequestVoucher(){var e;return null!==(e=this.browseGetNextResponse.next_request_voucher)&&void 0!==e?e:""}fromNextRequestVoucherParsed(){const e=this.fromNextRequestVoucher();if(""===e)return;let t;try{const o=JSON.parse(e);t=JSON.parse(o.prog)}catch(e){if(e instanceof SyntaxError)return;throw e}return void 0!==t.sort_type&&void 0!==t.sort_is_ascending?t:void 0}}const ot="web_browse",st=m.getMetricsReporter(),at=(e,t)=>st.createCounter({ns:ot,name:e},t),it=(e,t)=>st.createStats({ns:ot,name:e},t),nt=at("browse_web/bolt_client/number_refreshes_triggered"),rt=at("browse_web/bolt_client/number_refreshes_completed"),lt={newRefreshTriggered:()=>{nt.increment(),nt.record()},newRefreshCompleted:()=>{rt.increment(),rt.record()},namespaceCountChange:e=>{0!==e&&it("bolt_client/namespace_count_change").record(e)},namespaceCount:e=>{it("bolt_client/namespace_count").record(e)}},ct=it("browse_web/list_dir/latency_total_ms",{method:"queued"}),dt=it("browse_web/list_dir/number_requests_queued"),ut=it("browse_web/list_dir/latency_total_ms",{method:"simulated"}),pt={recordQueuedLatency:e=>{ct.recordDuration(Date.now()-e,h.TimeUnit.MILLISECONDS)},recordNumberRequestsQueued:e=>{dt.record(e)},recordSimulatedLatency:e=>{ut.recordDuration(Date.now()-e,h.TimeUnit.MILLISECONDS)}};const gt=at("prefetch_loader/incorrect_sort"),mt=it("prefetch_loader/incorrect_sort_pages"),ht=e=>{gt.increment(),gt.record();const t=Math.ceil((e-30)/700);mt.record(t+1)},_t=function(e){const t=e?"success":"error",o=at("browse/success",{cypress:_.BROWSE_ON_CYPRESS,result:t});o.increment(),o.record()},ft=function(){return i.MetricsLogger.getSingleton().metricsCollector.onTTVC((e=>{var t;const o="script"===e.detail.navigationType?"ajax":e.detail.navigationType;if(function(e,t,o,s,a){it("browse/ttvc",{cypress:t,content_suggestions_variant:o,navigation_type:s,content_tiles:a}).recordDuration(e,h.TimeUnit.MILLISECONDS)}(e.duration,_.BROWSE_ON_CYPRESS,_.BROWSE_CONTENT_SUGGESTIONS_VARIANT,o,_.CONTENT_TILES),"ajax"===o){const e=i.get_timer("browse_ajax"),o=(null!==(t=e.timeToInteractive())&&void 0!==t?t:0)-e.startTime();o>0&&function(e,t,o,s){it("browse/tti",{cypress:t,content_suggestions_variant:o,content_tiles:s}).recordDuration(e,h.TimeUnit.MILLISECONDS)}(o,_.BROWSE_ON_CYPRESS,_.BROWSE_CONTENT_SUGGESTIONS_VARIANT,_.CONTENT_TILES)}}))},Et=(e,t,o)=>i.loadPath2Continue(e,o).then((e=>{const o=new Array;for(const a of e.paginated_file_info){s.assert(void 0!==a.file_info,"file_info is undefined");const e=a.file_info;e.fq_path=t+e.fq_path,o.push(i.File.fromApiV2Object(e))}return{next_request_voucher:e.next_request_voucher||null,has_more_items:e.has_more||!1,items:o}}));class vt{constructor({user:e,path:t,fqPathsToSelect:o},{onPrefetchComplete:a,onPrefetchIncorrectSort:n,onPrefetchError:r,onLoadComplete:l},{onInitializeEverything:c,onAddFilesAndSetLoadingState:d},p=window){this.isPrefetching=()=>!!this.browsePreloadHandler&&!!this.firstPagePreloadHandler,this.handlePrefetch=()=>{s.assert(this.isPrefetching(),"trying to handle prefetching and think we aren't prefetching at the same time.  something is wrong"),this.browsePreloadHandler(this.handlePrefetchDataSuccess,this.onPrefetchError)},this.handlePrefetchDataSuccess=e=>{const t=new Xe;if(t.init(e),t.isError())return void this.onPrefetchError();const o=t.fromServerBrowseContext(),s=t.fromServerNsidToMountPoint(),a=t.fromTeamFolders(),i=t.fromCurrentFolderFile();this.firstPagePreloadHandler((e=>{this.handleFirstPagePrefetchDataSuccess(e,t,s,a,i,o)}),this.onPrefetchError)},this.handleFirstPagePrefetchDataSuccess=(e,t,o,s,a,n)=>{const r=new Je;if(r.init(e),r.isError())return void this.onPrefetchError();const l=r.fromPrefetchFiles(),c=r.fromPaginatedTotalNumFiles(),d=r.fromLoadingState(),u=r.fromNextRequestVoucher(),p=d===i.LoadingState.LOADING_REMAINING_PAGES,g=r.fromNextRequestVoucherParsed();if(p&&c>730&&(""!==u&&void 0!==g)){const e=i.getStoreForBrowse(),t=i.sortOrder$1(e.getState()),o=t.sortDirection===i.SortDirection.ASCENDING,s=t.sortField===i.SortLabelToSortField(null==g?void 0:g.sort_type),a=(null==g?void 0:g.sort_is_ascending)===o;if(!s||!a)return ht(c),void this.onPrefetchIncorrectSort()}this.onInitializeEverything({path:this.path,files:p?[]:l,paginatedTotalNumFiles:c,context:n,mountPoints:o,fqPathsToSelect:this.fqPathsToSelect,loadingState:d,teamFolders:s,currentFolderInfo:a}),p?this.initializePaginationManager(c,l,!0,u):this.onLoadComplete(),this.onPrefetchComplete(t,r)},this.initializePaginationManager=(e,t=[],o=!0,s="")=>{const a=u.PaginationManager.create({firstPage:{items:t,has_more_items:o,next_request_voucher:s},keyName:"sjid",userID:this.user.id,newDataAvailableCallback:(t,o)=>{const s=t.areAllItemsReady(),a=s?i.LoadingState.LOADED:i.LoadingState.LOADING_REMAINING_PAGES;this.onAddFilesAndSetLoadingState({path:this.path,files:o,paginatedTotalNumFiles:e,loadingState:a}),s&&(t.stopAutoFetching(),this.onLoadComplete())},fetchNextFn:Et});i.waitForTTI().then((()=>a.startAutoFetching()))},this.user=e,this.path=t,this.fqPathsToSelect=o,this.onPrefetchComplete=a,this.onPrefetchIncorrectSort=n,this.onPrefetchError=r,this.onLoadComplete=l,this.onInitializeEverything=c,this.onAddFilesAndSetLoadingState=d,this.browsePreloadHandler=p.__REGISTER_BROWSE_PRELOAD_HANDLER,this.firstPagePreloadHandler=p.__REGISTER_BROWSE_FIRST_PAGE_PRELOAD_HANDLER}}const At=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{BrowseUploadController:t}=yield new Promise((function(t,o){e(["./c_browse_browse_upload_controller"],t,o)}));return t}))});class St extends s.React$1.Component{constructor(){super(...arguments),this.onChoose=e=>o.__awaiter(this,void 0,void 0,(function*(){return e.map((e=>[e,{parentPath:this.props.context.currentFQPath}]))})),this.onChooseDropboxFile=e=>o.__awaiter(this,void 0,void 0,(function*(){return e.map((e=>[e,{parentPath:this.props.context.currentFQPath}]))})),this.nsIdForRouting=e=>{const t=""===this.props.context.currentFQPath,o=E.getDestinationDir(e.parentPath||"",e.destPath);return t?this.props.user.root_ns_id:(s.assert(null!=this.props.mountPoints,"mountPoints is null"),s.assert(null!=this.props.context.rootNSID,"rootNSID is null"),E.getNsId(this.props.mountPoints,this.props.context.rootNSID,o))}}render(){return s.React$1.createElement(f.UploadKitProvider,{user:this.props.user,nsIdForRouting:this.nsIdForRouting,onChoose:this.onChoose,onChooseDropboxFile:this.onChooseDropboxFile,actionScreen:"browse_screen"},s.React$1.createElement(At,null),this.props.children)}}St.displayName="UnconnectedBrowseUploadProvider";const Rt=i.connect((e=>({context:i.context(e),mountPoints:i.mountPoints(e)})))(St),yt=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{BrowseRewind:t}=yield new Promise((function(t,o){e(["./c_delorean_components_rewind"],t,o)}));return t}))}),wt=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{HomeInlineContentPrompt:t}=yield new Promise((function(t,o){e(["./c_upsell_home_inline_location"],t,o)}));return i.requireCssWithComponent(t,["/static/metaserver/static/css/upsell/home_inline_content-vflkf4E8W.css"])}))}),Tt=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{BrowseInlineActionBar:t}=yield new Promise((function(t,o){e(["./c_browse_browse_inline_action_bar"],t,o)}));return t}))});i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{SidebarViewSharingSection:e}=yield Promise.resolve().then((function(){return as}));return e}))});const bt=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{BrowseSharingView:e}=yield Promise.resolve().then((function(){return ns}));return e}))});function Mt(){const{addDropbox:e,addFile:t,addFolder:o}=w.getStrings(a.intl);return{type:S.ActionBarMenuType.DROPDOWN,menuSections:[{menuItems:[{value:{type:S.ActionBarActionTypes.ADD_CONTENT,menuItem:w.UploadOption.FILE},description:t,icon:s.React$1.createElement(i.UIIcon,{src:i.UploadFileLine})},{value:{type:S.ActionBarActionTypes.ADD_CONTENT,menuItem:w.UploadOption.FOLDER},description:o,icon:s.React$1.createElement(i.UIIcon,{src:i.UploadFolderLine})},{value:{type:S.ActionBarActionTypes.ADD_CONTENT,menuItem:w.UploadOption.DROPBOX},description:e,icon:s.React$1.createElement(i.UIIcon,{src:i.MoveLine})}]}]}}const It=(e,t)=>i.context(e).isInsideVaultFolder,Ft={actionType:S.ActionBarActionTypes.ADD_TO_TRANSFER,isEnabled:!0,text:T.ADD_TO_TRANSFER_ACTION_STRING,icon:i.SendLine},Ct={actionType:S.ActionBarActionTypes.ADD_TO_TRANSFER,isEnabled:!0,text:T.ADD_BACKUP_TO_TRANSFER_ACTION_STRING,icon:i.SendLine},Ot=(e,t)=>{const{isTransferEnabled:o}=i.experiments(e);return!t.isSearchMode&&(o&&!y.isNothingSelected(e,t)&&y.isLiveFilesOnly(e,t)&&!y.isPnmSuppressShareSelected(e,t)&&!y.isPnmLinkNodeSelected(e,t)&&!y.isCloudDocSelected(e,t)&&!y.selectedFiles(e,t).some(i.File.isNoAccessSharedFolder))},Nt=()=>i.createSelector(Ot,y.isInsideBackupFolder,((e,t)=>{if(e)return t?Ct:Ft})),Dt=()=>(e,t)=>{if(((e,t)=>!!y.isInsideBackupFolder(e,t)&&Ot(e,t))(e,t))return y.isInsideBackupFolder(e,t)?Ct:Ft},Pt=(e,t)=>y.isSelectionFetchFolderSizeStatusOnly(e,t)&&y.isSelectionFoldersOnly(e,t)&&y.isLiveFilesOnly(e,t)&&!y.isRestrictedPathSelected(e,t)&&!i.isQueryingFolderSizes(e)&&i.selectViewType(e,{instanceId:i.BROWSE_FILES_VIEW_ID})!==i.ViewType.Grid&&i.canDisplayFolderSizes(e)&&!Lt(e,t),Lt=(e,t)=>{const o=y.currentBackupInfo(e,t);return!(!i.isBackupBrowse()||o)||"third_party"===(null==o?void 0:o.type)},xt=(e,t,o)=>{const s=null==o?void 0:o.menuValue,a=null==s?void 0:s.menuItem,n=a===M.UploadAction.UPLOAD_FOLDER?"upload_folder":"upload_file";C.logBrowseTTS(n);const r=i.path$1(e),l=t.actionSource===i.ActionSourceValue.OVERFLOW_MENU?i.ActionSourceValue.OVERFLOW_MENU:i.NewFileMenuFromType.BROWSE;switch(a){case M.UploadAction.UPLOAD_FILES:case M.UploadAction.UPLOAD_FOLDER:{const e=a===M.UploadAction.UPLOAD_FOLDER;I.FileUploaderController.setPath(r),I.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:l,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"browse_screen"});break}default:a&&F.reportStack(`Bad uploadAction=[${a}]`,{severity:O.SEVERITY.CRITICAL});const e=!1;I.FileUploaderController.setPath(r),I.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:l,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})}},kt=(e,t)=>!y.context(e,t).isInsideVaultFolder,Bt=(e,t)=>i.shouldShowDeletedFiles(e)&&y.isNothingSelected(e,t),Ut=(e,t)=>!y.isFileSharedWithMeSelected(e,t)&&y.isLiveFilesOnly(e,t)&&i.normalize(y.context(e,t).currentFQPath).split("/").length>1&&void 0!==k.folderOverviewPinnedItems(e)&&!y.isPnmLinkNodeSelected(e,t)&&!y.context(e,t).isInsideVaultFolder,$t=(e,t)=>{const o=k.folderOverviewPinnedItems(e),s=y.selectedFiles(e,t),a=void 0!==o?s.toArray().filter((e=>o.some((t=>t.fq_path===e.fq_path||t.file_id===e.file_id)))).length:0;return!y.isFileSharedWithMeSelected(e,t)&&y.isLiveFilesOnly(e,t)&&i.normalize(y.context(e,t).currentFQPath).split("/").length<=1&&void 0!==o&&a<s.count()&&!y.isPnmLinkNodeSelected(e,t)},Vt=(e,t)=>!(!y.isSingleSelectionFolder(e,t)||!y.isDeletedFilesOnly(e,t)||y.hasUnmountedOrMultipleNamespaces(e,t))&&!y.showRestoreAction(e,t),Gt=(e,t)=>{const o=y.currentBackupInfo(e,t);return!i.shouldShowDeletedFiles(e)&&y.isNothingSelected(e,t)&&"third_party"!==(null==o?void 0:o.type)},Wt=(e,t)=>{const o=k.folderOverviewPinnedItems(e),s=y.selectedFiles(e,t),a=void 0!==o?s.toArray().filter((e=>o.some((t=>t.fq_path===e.fq_path||t.file_id===e.file_id)))).length:0;return y.isLiveFilesOnly(e,t)&&!y.isFileSharedWithMeSelected(e,t)&&o&&a===s.count()},jt=a.intl.formatMessage({id:"RAWfy4",defaultMessage:"Couldn’t create a project from this folder."}),Ht=a.intl.formatMessage({id:"bf2w9a",defaultMessage:"Couldn’t add people to this project automatically."}),Yt=a.intl.formatMessage({id:"RAWfy4",defaultMessage:"Couldn’t create a project from this folder."}),qt=a.intl.formatMessage({id:"TsUR8/",defaultMessage:"Hang tight, your project will open in a moment."});const zt=e=>e?i.sjclExports.codec.hex.fromBits(i.sjclExports.hash.sha256.hash(e.toLowerCase())):"",Kt=e=>(e||"/").split("/").map(zt).join("/"),Qt=20,Xt=a.defineMessage({id:"1PRov9",defaultMessage:"Open project view"}),Jt=(e,t,o)=>{const s=i.getBrowseState(e).currentFolderInfo,a=null==s?void 0:s.file_id,n=null==s?void 0:s.ns_id,r=null==s?void 0:s.ns_path,l=i.user$1(e).id;t!==i.WebUserActionLogEvent.SELECT_SPACES_PROJECT_VIEW_BUTTON?i.WebUserActionLog.log(l,t,{folder_file_id:a,ns_id:n,resource_namespace_path:Kt(r)}):i.WebUserActionLog.log(l,t,{folder_file_id:a,ns_id:n,resource_namespace_path:Kt(r),is_creating_new_space:null!=o&&o})};const Zt=(e,t)=>{if(y.context(e,t).isInsideVaultFolder)return!1;if(!y.isNothingSelected(e,t))return!1;const o=i.getBrowseState(e),s=o.currentFolderInfo,a=o.paginatedTotalNumFiles,n=null==s?void 0:s.type;if(n===i.FileTypes.SHARED_FOLDER||n===i.FileTypes.TEAM_SHARED_FOLDER||n===i.FileTypes.FAMILY_SHARED_FOLDER){const o=null==s?void 0:s._mount_access_perms,{expFssEntryPointForSpaces:n}=y.experiments(e,t),r=i.folderMemberCounts(e),l=r>1&&r<=Qt&&a>0&&a<500;if((null==o?void 0:o.includes("can_view"))&&(null==o?void 0:o.includes("can_view_members"))&&l&&n)return Jt(e,i.WebUserActionLogEvent.SHOWN_SPACES_PROJECT_VIEW_BUTTON),!0}return!1},eo=e=>i.isSpacesEntryPointEnabled(e);a.intl.formatMessage({id:"x/e6Ro",defaultMessage:"Share this folder to be able to receive activity updates."});var to;function oo(e){const t=function(e){const t=[];return e.showTidyUp&&t.push({value:{type:S.ActionBarActionTypes.ORGANIZE,menuItem:to.TIDY_UP},description:a.intl.formatMessage(T.TIDY_UP_ACTION_STRING),icon:s.React$1.createElement(i.UIIcon,{src:i.MultipleFoldersLine})}),e.showNamingConventions&&t.push({value:{type:S.ActionBarActionTypes.ORGANIZE,menuItem:to.NAMING_CONVENTIONS},description:a.intl.formatMessage(T.APPLY_NAMING_CONVENTION_ACTION_STRING),icon:s.React$1.createElement(i.UIIcon,{src:i.CursorLine})}),e.showDuplicateFiles&&t.push({value:{type:S.ActionBarActionTypes.ORGANIZE,menuItem:to.DUPLICATE_FILES},description:a.intl.formatMessage(T.FIND_DUPLICATES_ACTION_STRING),icon:s.React$1.createElement(i.UIIcon,{src:i.DuplicateLine})}),e.showAddAutomations?t.push({value:{type:S.ActionBarActionTypes.ORGANIZE,menuItem:to.ADD_AUTOMATIONS},description:a.intl.formatMessage(T.ADD_FOLDER_AUTOMATION_STRING),icon:s.React$1.createElement(i.UIIcon,{src:i.AutomationLine})}):e.showEditAutomations&&t.push({value:{type:S.ActionBarActionTypes.ORGANIZE,menuItem:to.EDIT_AUTOMATIONS},description:a.intl.formatMessage(T.EDIT_FOLDER_AUTOMATION_STRING),icon:s.React$1.createElement(i.UIIcon,{src:i.AutomationLine})}),{menuItems:t}}(e);if(t)return{type:S.ActionBarMenuType.DROPDOWN,menuSections:[t]}}!function(e){e.NAMING_CONVENTIONS="naming-conventions",e.TIDY_UP="tidy_up",e.DUPLICATE_FILES="duplicate_files",e.ADD_AUTOMATIONS="add-automations",e.EDIT_AUTOMATIONS="edit-automations"}(to||(to={}));const so=(e,t)=>y.context(e,t).isCurrentPathWriteable()&&y.isFolderTidyable(e,t),ao=(e,t)=>y.context(e,t).isCurrentPathWriteable()&&y.isFolderTidyable(e,t),io=(e,t)=>{const{expFlowsAutomatedFolderUI:o}=y.experiments(e,t),s=y.selectedFiles(e,t).first(),a=i.getCurrentFolderInfo(e),n=y.context(e,t),r=!!o&&y.isSingleSelectionFolder(e,t)&&!n.isInsideVaultFolder&&!y.isTeamMemberFolderSelected(e,t)&&!i.File.isReadOnlySharedFolder(s),l=!!o&&!s&&a&&n.isInFolderMode&&!n.isCurrentlyInRoot&&!n.isInsideTeamFolderRoot&&!n.isInsideVaultFolder&&a.type!==i.FileTypes.TEAM_MEMBER_FOLDER&&!i.File.isReadOnlySharedFolder(a);return r||l},no=(e,t)=>{const o=y.getFlowsUserAutomation(e,t),s=$.getAllowedWorkflowActions(e);return!(null==o||!s.includes(o.actions[0].actionType))&&io(e,t)},ro=(e,t)=>!y.getFlowsUserAutomation(e,t)&&io(e,t),lo=(e,t)=>!!i.postTTIExperiments(e).expDuplicateFilesEnabled&&(y.context(e,t).isCurrentPathWriteable()&&y.isFolderTidyable(e,t)),co=(e,t)=>so(e,t)||ao(e,t)||io(e,t)||lo(e,t),uo={[y.ActionBarSelectionType.NONE]:{alwaysAtTopLevel:[S.ActionBarActionTypes.UPLOAD,S.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[S.ActionBarActionTypes.ORGANIZE,S.ActionBarActionTypes.VAULT_LOCK,S.ActionBarActionTypes.VAULT_UNLOCK],alwaysInOverflow:[[S.ActionBarActionTypes.FOLLOW,S.ActionBarActionTypes.FOLLOWING,S.ActionBarActionTypes.TIDY_UP,S.ActionBarActionTypes.APPLY_NAMING_CONVENTION,S.ActionBarActionTypes.SHOW_DELETED_FILES,S.ActionBarActionTypes.HIDE_DELETED_FILES,S.ActionBarActionTypes.REQUEST_FILES,S.ActionBarActionTypes.REWIND,S.ActionBarActionTypes.ADD_CONTENT],[S.ActionBarActionTypes.SPACES_DROPDOWN,S.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,S.ActionBarActionTypes.ADD_FOLDER_AUTOMATION],[S.ActionBarActionTypes.ADD_FROM_GDRIVE]]},[y.ActionBarSelectionType.FILE]:{alwaysAtTopLevel:[S.ActionBarActionTypes.UPLOAD,S.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.OPEN,S.ActionBarActionTypes.UNZIP,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.VAULT_LOCK,S.ActionBarActionTypes.VAULT_UNLOCK],alwaysInOverflow:[[S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.MANAGE_PERMISSIONS,S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.OPEN_IN_REPLAY,S.ActionBarActionTypes.EDIT_IMAGE,S.ActionBarActionTypes.EDIT_PDF,S.ActionBarActionTypes.OPEN,S.ActionBarActionTypes.SEND_FOR_SIGNATURE,S.ActionBarActionTypes.REQUEST_APPROVAL,S.ActionBarActionTypes.SELF_SIGN_ACTION,S.ActionBarActionTypes.CONVERT_TO_ARCHIVE,S.ActionBarActionTypes.SAVE_AS,S.ActionBarActionTypes.UNZIP],[S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.REMOVE,S.ActionBarActionTypes.RENAME,S.ActionBarActionTypes.MOVE,S.ActionBarActionTypes.COPY],[S.ActionBarActionTypes.ADD_TO_COLLECTION,S.ActionBarActionTypes.STAR,S.ActionBarActionTypes.UNSTAR,S.ActionBarActionTypes.PIN_TO,S.ActionBarActionTypes.PIN_TO_ROOT,S.ActionBarActionTypes.UNPIN],[S.ActionBarActionTypes.MANAGE_AS_ADMIN],[S.ActionBarActionTypes.ACTIVITY]],expSuggestedWorkflowsActions:{suggestedWorkflowActions:[S.ActionBarActionTypes.EDIT_PDF,S.ActionBarActionTypes.SEND_FOR_SIGNATURE,S.ActionBarActionTypes.SELF_SIGN_ACTION],compactOverflowMenuActions:[[S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.DOWNLOAD],[S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RENAME]]}},[y.ActionBarSelectionType.FOLDER]:{alwaysAtTopLevel:[S.ActionBarActionTypes.UPLOAD,S.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.OPEN,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.JOIN_FOLDER_AGAIN,S.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.MANAGE_PERMISSIONS,S.ActionBarActionTypes.OPEN,S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,S.ActionBarActionTypes.ADD_FOLDER_AUTOMATION,S.ActionBarActionTypes.TIDY_UP],[S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.JOIN_FOLDER_AGAIN,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.RENAME,S.ActionBarActionTypes.MOVE,S.ActionBarActionTypes.COPY],[S.ActionBarActionTypes.STAR,S.ActionBarActionTypes.UNSTAR,S.ActionBarActionTypes.UNPIN,S.ActionBarActionTypes.PIN_TO,S.ActionBarActionTypes.PIN_TO_ROOT],[S.ActionBarActionTypes.EVENTS,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,S.ActionBarActionTypes.MANAGE_AS_ADMIN,S.ActionBarActionTypes.SPACES_REDIRECT],[S.ActionBarActionTypes.ACTIVITY]]},[y.ActionBarSelectionType.MULTIPLE]:{alwaysAtTopLevel:[S.ActionBarActionTypes.UPLOAD,S.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.DOWNLOAD,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.MOVE,S.ActionBarActionTypes.COPY,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,S.ActionBarActionTypes.MANAGE_AS_ADMIN,S.ActionBarActionTypes.SAVE_AS,S.ActionBarActionTypes.CONVERT_TO_ARCHIVE,S.ActionBarActionTypes.ADD_TO_COLLECTION,S.ActionBarActionTypes.UNPIN,S.ActionBarActionTypes.PIN_TO,S.ActionBarActionTypes.PIN_TO_ROOT]]},[y.ActionBarSelectionType.VAULT]:{alwaysAtTopLevel:[S.ActionBarActionTypes.UPLOAD,S.ActionBarActionTypes.CREATE]},[y.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[S.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[S.ActionBarActionTypes.BACKUP_COPY_TO_FSS,S.ActionBarActionTypes.REWIND,S.ActionBarActionTypes.VERSION_HISTORY,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.SHOW_DELETED_FILES,S.ActionBarActionTypes.HIDE_DELETED_FILES,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE],alwaysInOverflow:[[S.ActionBarActionTypes.BACKUP_COPY_TO_FSS,S.ActionBarActionTypes.REWIND,S.ActionBarActionTypes.VERSION_HISTORY,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.SHOW_DELETED_FILES,S.ActionBarActionTypes.HIDE_DELETED_FILES,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]]},[y.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[S.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[S.ActionBarActionTypes.BACKUP_COPY_TO_FSS,S.ActionBarActionTypes.REWIND,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.SHOW_DELETED_FILES,S.ActionBarActionTypes.HIDE_DELETED_FILES,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE],alwaysInOverflow:[[S.ActionBarActionTypes.BACKUP_COPY_TO_FSS,S.ActionBarActionTypes.REWIND,S.ActionBarActionTypes.DELETE,S.ActionBarActionTypes.SHOW_DELETED_FILES,S.ActionBarActionTypes.HIDE_DELETED_FILES,S.ActionBarActionTypes.RESTORE,S.ActionBarActionTypes.PERMANENT_DELETE,S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]]}},po=i.createSelector(y.actionBarSelectionType,i.browsePostTTIExperiments,i.shouldModifyActionMenu,((e,t,o)=>{var s;const a=y.copyActionBarActions(uo[e]),{alwaysInOverflow:i,atTopLevelIfSpace:n}=a;return e!==y.ActionBarSelectionType.FILE&&e!==y.ActionBarSelectionType.MULTIPLE||(P.logExposure({feature:"flows_browse_bar_save_as_ui",variant:t.expFlowsBrowseBarSaveAsUi}),"ON"===t.expFlowsBrowseBarSaveAsUi&&(null==n||n.push(S.ActionBarActionTypes.SAVE_AS))),o&&(null==i?void 0:i.length)&&(null===(s=i[0])||void 0===s?void 0:s.length)&&i[0].unshift(S.ActionBarActionTypes.CREATE),a})),go=i.createSelector(y.actionBarSelectionType,y.isSelectedBackupFolder,((e,t)=>y.getInlineScenarioActions(y.copyActionBarActions(uo[e]),t,!0))),mo=i.createSelector(y.actionBarSelectionType,(e=>y.getInlineScenarioActions(y.copyActionBarActions(uo[e]),!0,!1))),ho=()=>i.createSelector(y.context,y.selectedFiles,y.user,((e,t,o)=>{const s=i.Viewer.get_root_name(o),a={firstEntryAccessibilityHint:e.getNameOfTargetFolder(s),noOfEntries:1};return{primaryActionContext:a,secondaryActionsContext:0===t.size?a:{firstEntryAccessibilityHint:i.getFilename(t.first()),noOfEntries:t.size}}})),_o=()=>Object.assign(Object.assign({},y.getFileActionsSelectorsMap()),{[S.ActionBarActionTypes.UPLOAD]:i.createSelector(kt,y.context,((e,t)=>{const o=t.isCurrentPathWriteable();return e?{actionType:S.ActionBarActionTypes.UPLOAD,isEnabled:o,text:T.UPLOAD_ACTION_STRING,icon:i.UploadLine,menu:M.getUploadMenu(),menuMinWidth:236,dropdownButtonClassName:i.cx(i.OA_PULSAR_CLASS,i.OAPulsarAction.UPLOAD_TEAM),className:o?"browse-upload-action--enabled":"browse-upload-action--disabled"}:void 0})),[S.ActionBarActionTypes.CREATE]:i.createSelector(i.context,i.user$1,i.browsePostTTIExperiments,y.isCdmRoot,y.hasContentManagerAndSuperAdmin,L.getCaptureAccess,((e,t,o,s,a,n)=>{const{expEnableCloudDocsBinderCreate:r,expEnableCloudDocsPaperCreate:l,expEnableCaptureCreate:c,expFlowsAutomatedFolderUI:d}=o,u=!e.isInsideVaultFolder&&!s&&(e.isCurrentlyInRoot||!t.is_team),p=e.isCurrentlyInRoot&&!t.is_cdm_member&&a&&!e.isInsideVaultFolder,g=!!d&&!e.isInsideVaultFolder,m=i.cx(i.OA_PULSAR_CLASS,i.OAPulsarAction.CREATE),h=!!c&&D.canUseRecorder&&!!n;return{actionType:S.ActionBarActionTypes.CREATE,isEnabled:e.isCurrentPathWriteable(),text:T.CREATE_ACTION_STRING,icon:i.AddLine,menu:M.getCreateMenu({showSharedFolderCreate:u,showTeamFolderCreate:p,showAutomatedFolderCreate:g,showPaperCreate:!!l,showBinderCreate:!!r,showCaptureCreate:h,showOnlyFolderCreation:e.isInsideVaultFolder}),menuMinWidth:236,className:"brws-action-toolbar-CREATE-menu",dropdownButtonClassName:m}})),[S.ActionBarActionTypes.REWIND]:y.createRewindActionSelector(),[S.ActionBarActionTypes.FILE_LOCK]:y.createFileLockActionSelector(),[S.ActionBarActionTypes.FILE_UNLOCK]:y.createFileUnlockActionSelector(),[S.ActionBarActionTypes.FILE_REQUEST_UNLOCK]:y.createFileRequestUnlockActionSelector(),[S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]:i.createSelector(Pt,y.selectedFiles,((e,t)=>e?{actionType:S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,isEnabled:t.some((e=>!i.File.isNoAccessSharedFolder(e))),text:T.CALCULATE_FOLDER_SIZE_ACTION_STRING,icon:i.CalculatorLine}:void 0)),[S.ActionBarActionTypes.UNPIN]:i.createSelector(Wt,y.context,y.isNoAccessSharedFolderSelected,((e,t,o)=>e?{actionType:S.ActionBarActionTypes.UNPIN,isEnabled:!o&&t.isCurrentPathWriteable(),text:T.UNPIN_ACTION_STRING,icon:i.PinFill}:void 0)),[S.ActionBarActionTypes.PIN_TO]:i.createSelector(Ut,y.isNoAccessSharedFolderSelected,((e,t)=>e?{actionType:S.ActionBarActionTypes.PIN_TO,isEnabled:!t,text:T.PIN_TO_ACTION_STRING,icon:i.PinLine}:void 0)),[S.ActionBarActionTypes.PIN_TO_ROOT]:i.createSelector($t,y.context,y.isNoAccessSharedFolderSelected,((e,t,o)=>e?{actionType:S.ActionBarActionTypes.PIN_TO_ROOT,isEnabled:!o&&t.isCurrentPathWriteable(),text:T.PIN_TO_ROOT_ACTION_STRING,icon:i.PinLine,labelOverride:a.intl.formatMessage({id:"Jd2LFg",defaultMessage:"Pin to {folder}"},{folder:i.Emstring.em_snippet(i.filename(t.currentFQPath),8,1)})}:void 0)),[S.ActionBarActionTypes.JOIN_FOLDER_AGAIN]:i.createSelector(y.context,y.selectedFiles,Vt,((e,t,o)=>o?{actionType:S.ActionBarActionTypes.JOIN_FOLDER_AGAIN,isEnabled:e.isCurrentPathWriteable()&&!t.some((e=>e.read_only)),text:T.JOIN_FOLDER_AGAIN_ACTION_STRING,icon:i.RestoreLine}:void 0)),[S.ActionBarActionTypes.SHOW_DELETED_FILES]:i.createSelector(Gt,y.context,((e,t)=>e?{actionType:S.ActionBarActionTypes.SHOW_DELETED_FILES,isEnabled:t.canViewContainingNSMembers,text:T.SHOW_DELETED_FILES_ACTION_STRING,icon:i.ShowLine}:void 0)),[S.ActionBarActionTypes.HIDE_DELETED_FILES]:i.createSelector(Bt,y.context,((e,t)=>e?{actionType:S.ActionBarActionTypes.HIDE_DELETED_FILES,isEnabled:t.canViewContainingNSMembers,text:T.HIDE_DELETED_FILES_ACTION_STRING,icon:i.HideLine}:void 0)),[S.ActionBarActionTypes.ADD_CONTENT]:i.createSelector(It,(e=>e?{actionType:S.ActionBarActionTypes.ADD_CONTENT,isEnabled:!0,text:T.ADD_CONTENT_ACTION_STRING,icon:i.AddLine,menu:Mt()}:void 0)),[S.ActionBarActionTypes.FOLLOW]:y.createFollowActionSelector(),[S.ActionBarActionTypes.FOLLOWING]:y.createFollowingActionSelector(),[S.ActionBarActionTypes.SPACES_REDIRECT]:i.createSelector(Zt,eo,((e,t)=>e?{actionType:S.ActionBarActionTypes.SPACES_REDIRECT,isEnabled:t,text:Xt,icon:i.OpenLine,className:"action-bar-direct-to-spaces-button"}:void 0)),[S.ActionBarActionTypes.ADD_TO_COLLECTION]:y.createAddToCollectionActionSelector(),[S.ActionBarActionTypes.ORGANIZE]:i.createSelector(co,so,ao,lo,ro,no,((e,t,o,s,a,n)=>e?{actionType:S.ActionBarActionTypes.ORGANIZE,isEnabled:!0,text:T.ORGANIZE_ACTION_STRING,icon:i.MultipleFoldersLine,menu:oo({showNamingConventions:t,showTidyUp:o,showDuplicateFiles:s,showAddAutomations:a,showEditAutomations:n}),menuMinWidth:236,dropdownButtonClassName:"browse-Organize-Home"}:void 0)),[S.ActionBarActionTypes.ADD_FROM_GDRIVE]:y.createAddFromGdriveActionSelector(),[S.ActionBarActionTypes.MANAGE_PERMISSIONS]:y.createManagePermissionsActionSelector()}),fo=Object.assign(Object.assign(Object.assign({},_o()),y.getInlineFileActionsSelectors()),{[S.ActionBarActionTypes.ADD_TO_TRANSFER]:Nt()}),Eo=Object.assign(Object.assign(Object.assign({},_o()),y.getTabletFileActionsSelectors()),{[S.ActionBarActionTypes.ADD_TO_TRANSFER]:Nt()}),vo=Object.assign(Object.assign(Object.assign({},_o()),y.getMobileFileActionsSelectors()),{[S.ActionBarActionTypes.ADD_TO_TRANSFER]:Nt()}),Ao={[y.ActionBarSelectionType.NONE]:{atTopLevelIfSpace:[S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_MODAL,S.ActionBarActionTypes.ADD_TO_TRANSFER,S.ActionBarActionTypes.SPACES_DROPDOWN]},[y.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_MODAL,S.ActionBarActionTypes.ADD_TO_TRANSFER]},[y.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[S.ActionBarActionTypes.SHARE_COPY_LINK,S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.SHARE_MODAL,S.ActionBarActionTypes.ADD_TO_TRANSFER]},[y.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[S.ActionBarActionTypes.SHARE,S.ActionBarActionTypes.ADD_TO_TRANSFER]},[y.ActionBarSelectionType.VAULT]:{},[y.ActionBarSelectionType.BACKUP_CONTENT]:{atTopLevelIfSpace:[S.ActionBarActionTypes.ADD_TO_TRANSFER]},[y.ActionBarSelectionType.BACKUP_FOLDER]:{}},So=i.createSelector(y.actionBarSelectionType,(e=>Ao[e])),Ro=Object.assign(Object.assign({},y.getSidebarFileActionSelectors()),{[S.ActionBarActionTypes.ADD_TO_TRANSFER]:Dt(),[S.ActionBarActionTypes.SPACES_DROPDOWN]:y.createSpacesDropdownActionSelector()}),yo={[S.ActionBarActionTypes.SHARE_COPY_LINK]:y.createShareCopyLinkActionSelector(),[S.ActionBarActionTypes.SHARE_MODAL]:y.createShareModalActionSelector(),[S.ActionBarActionTypes.ADD_TO_TRANSFER]:Dt()},wo=Object.assign(Object.assign({},y.FileActionsHandlersMap),{[S.ActionBarActionTypes.UPLOAD]:xt,[S.ActionBarActionTypes.CREATE]:(t,o,s)=>{const a=null==s?void 0:s.menuValue,n=i.user$1(t),r=o.actionSource===i.ActionSourceValue.OVERFLOW_MENU?i.ActionSourceValue.OVERFLOW_MENU:i.NewFileMenuFromType.BROWSE,l=null==a?void 0:a.menuItem;if(l===S.FolderCreationAction.FOLDER){const e=i.context(t),o=i.selectViewType(t,{instanceId:i.BROWSE_FILES_VIEW_ID}),{goldenGateRaclsEnabled:s}=i.experiments(t),{expFlowsCoreFolderSetupFlow:a}=i.postTTIExperiments(t),l=("ON"===a||"INCLUDE_SHARING"===a)&&!e.isInsideVaultFolder,c=i.autoTeamGroupId(t);a&&P.logExposure({feature:"flows_adoption_core_folder_setup_flow",variant:a}),y.handleCreateNewFolder(n,e,s,c,r,o,l)}else if(l===S.FolderCreationAction.SHARED_FOLDER){const e=i.context(t);n.is_team?y.handleSharedFolderClick(n,e):y.handleCreateSharedFolderClick(n,e)}else if(l===S.FolderCreationAction.TEAM_FOLDER){const e=i.context(t);y.handleRedirectToContentManager(e)}else if(l===S.FolderCreationAction.AUTOMATED_FOLDER){const o=i.context(t).currentFQPath;N.asyncLaunchWorkflowBuilder({operation:"create",parentFqPath:o,surface:"browse"}),i.logCreateAutomatedFolderClick({uid:n.id,source:r}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderCreateButton({actionSurface:"browse"})}))}else if(l===M.CaptureTypes.CAPTURE);else if(M.isUploadAction(l))xt(t,o,{menuValue:a});else{const e=l,o=i.path$1(t),s=i.selectionMode(t),a=0===i.sortedFilesWithFolderSizes(t).count(),{expCreateCloudDocsPaperWithApiV2:c,expCloudDocsGoogleCreate:d}=i.postTTIExperiments(t),{gddMigrationDates:u}=i.experiments(t),p=!!d||x.isGddMigrationDateWithinNumDays(u,30);i.logFileCreateClick({uid:n.id,source:r,action:M.newFileTypeToLogEvent(e),depth_folder_selected:b.getDepthFromPath(o),selection_mode:s,empty_folder:a}),b.createNewFile({user:n,path:o,documentType:e,source:i.NewFileMenuFromType.BROWSE,selection_mode:s,empty_folder:a,useApiV2ForPifsCreation:!!c,createShortcutForGdssFile:p})}},[S.ActionBarActionTypes.REWIND]:y.rewindActionHandler,[S.ActionBarActionTypes.FILE_LOCK]:y.fileLockActionHandler,[S.ActionBarActionTypes.FILE_UNLOCK]:y.fileUnlockActionHandler,[S.ActionBarActionTypes.FILE_REQUEST_UNLOCK]:y.fileRequestUnlockActionHandler,[S.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]:(e,t)=>{g.handleCalculateFolderSize(y.getActionHandlerArgs(e,t))},[S.ActionBarActionTypes.UNPIN]:(e,t)=>{g.handleUnpin(y.getActionHandlerArgs(e,t),!0)},[S.ActionBarActionTypes.PIN_TO]:(e,t)=>{g.handleBrowsePinTo(y.getActionHandlerArgs(e,t),y.context(e,t),{snackbarWithShowButton:!0})},[S.ActionBarActionTypes.PIN_TO_ROOT]:(e,t)=>{g.handleBrowsePin(y.getActionHandlerArgs(e,t),{snackbarWithShowButton:!0})},[S.ActionBarActionTypes.JOIN_FOLDER_AGAIN]:(e,t)=>{y.context(e,t),g.handleReAdd(y.getActionHandlerArgs(e,t))},[S.ActionBarActionTypes.ADD_TO_TRANSFER]:(e,t)=>{g.handleAddToTransfer(y.getActionHandlerArgs(e,t))},[S.ActionBarActionTypes.SHOW_DELETED_FILES]:(e,t)=>{y.handleTrashCanClick(y.user(e,t),y.viewType(e,t),!1,y.context(e,t).currentFQPath,y.getActionHandlerArgs(e,t))},[S.ActionBarActionTypes.HIDE_DELETED_FILES]:(e,t)=>{const o=y.user(e,t),s=y.viewType(e,t),a=y.context(e,t),i=y.getActionHandlerArgs(e,t);y.handleTrashCanClick(o,s,!0,a.currentFQPath,i)},[S.ActionBarActionTypes.ADD_CONTENT]:(e,t,o)=>{const s=null==o?void 0:o.menuValue;y.handleAddContent(i.user$1(e),i.path$1(e),s.menuItem)},[S.ActionBarActionTypes.SPACES_DROPDOWN]:y.spacesDropdownActionHandler,[S.ActionBarActionTypes.FOLLOW]:y.followActionHandler,[S.ActionBarActionTypes.FOLLOWING]:y.followingActionHandler,[S.ActionBarActionTypes.SPACES_REDIRECT]:(e,t)=>{i.getStoreForBrowse().dispatch(k.toggleSpacesEntryPoint({value:!1})),i.Snackbar.sync(qt,!0,"create-or-get-space-notification"),function(e,t){var a,n;o.__awaiter(this,void 0,void 0,(function*(){if(!y.isNothingSelected(e,t))return;let r;const l=i.getBrowseState(e),c=l.currentFolderInfo,d=null==c?void 0:c.file_id,u=(null==c?void 0:c.target_ns)?String(null==c?void 0:c.target_ns):void 0,p=null===(a=null==c?void 0:c.fq_path)||void 0===a?void 0:a.split("/").pop(),g=null===(n=l.user)||void 0===n?void 0:n.id;if(g&&u&&(r=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){const o=new i.FolderShareApiClient({userId:t,client:new i.UserApiV2Client});let a;const n=[];try{a=yield o.listMembers({contentId:e,limit:s})}catch(e){return void i.Snackbar.fail(Ht,"preview_members_failure")}if(a)return a.users.forEach((function(e){var t;const o=null===(t=e.account)||void 0===t?void 0:t.email;o&&n.push(o)})),n}))}(u,g,Qt)),d&&p&&g&&r){const t=yield function(e,t,s,a,n,r){return o.__awaiter(this,void 0,void 0,(function*(){const o={".tag":"regular_space"};try{const l=new i.UserApiV2Client;return(yield l.ns("spaces").rpc("create_or_get_spaces_for_folder",{name:e,file_id:s,members:a,space_type:o},{subjectUserId:t}))||(i.Snackbar.close(),i.Snackbar.fail(Yt,"create_or_get_spaces_for_folder_failure"),void i.WebUserActionLog.log(t,i.WebUserActionLogEvent.OPEN_PROJECT_VIEW_FAILED,{folder_file_id:s,ns_id:n,resource_namespace_path:Kt(r),reason:"Spaces createOrGetSpacesForFolder API returned undefined"}))}catch(e){return i.Snackbar.close(),i.Snackbar.fail(jt,"create_or_get_spaces_for_folder_failure"),void i.WebUserActionLog.log(t,i.WebUserActionLogEvent.OPEN_PROJECT_VIEW_FAILED,{folder_file_id:s,ns_id:n,resource_namespace_path:Kt(r),reason:e})}}))}(p,g,d,r,null==c?void 0:c.ns_id,null==c?void 0:c.ns_path);if((null==t?void 0:t.result)&&(null==t?void 0:t.result[0])){const e=`/spaces/space/${t.result[0].space_pid}`;i.Snackbar.close(),i.redirect(new s.URI({path:e}))}Jt(e,i.WebUserActionLogEvent.SELECT_SPACES_PROJECT_VIEW_BUTTON,null==t?void 0:t.new_space_created)}i.getStoreForBrowse().dispatch(k.toggleSpacesEntryPoint({value:!0}))}))}(e,t)},[S.ActionBarActionTypes.ORGANIZE]:(t,o,a)=>{const n=null==a?void 0:a.menuValue,r=null==n?void 0:n.menuItem,l=y.context(t,o),c=y.user(t,o),d=y.getActionHandlerArgs(t,o),{files:u}=d,p=u.first(),m=y.isSingleSelectionFolder(t,o)?null==p?void 0:p.fq_path:l.currentFQPath,h="/"===l.currentFQPath?"":l.currentFQPath;switch(r){case to.NAMING_CONVENTIONS:{const e={currentUserId:c.id,targetPath:h,namespaceId:l.currentNSID,origin:U.NamingConventionOrigin.from_web_organized_menu};B.showNamingConventionsModal(e);break}case to.TIDY_UP:B.showTidyUpDialog({currentUserId:c.id,targetPath:h,namespaceId:l.currentNSID,actionSurface:V.TidySpecificActionSurfaceLogValue.ORGANIZE_WEB_ENTRYPOINT,isInsideFlowsEligibleFolder:i.isInsideFlowsEligibleFolder(t),isPaidUser:!!c.is_team||!!c.paid,rootFolderDisplayName:i.Viewer.get_root_name(c),numberOfFiles:i.unsortedFiles(t).filter((e=>!e.is_dir)).count()});break;case to.ADD_AUTOMATIONS:l&&m&&(N.asyncLaunchWorkflowBuilder({operation:"add",folderFqPath:m,surface:"browse",entryPoint:"from_web_organized_menu"}),g.logUserEventOnFile({args:d,action_type:i.WebUserActionLogEvent.ADD_FOLDER_RULES_MODAL_CLICK}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderAddButton({actionSurface:"browse"})})));break;case to.EDIT_AUTOMATIONS:l&&m&&(N.asyncLaunchWorkflowBuilder({operation:"edit",folderFqPath:m,surface:"browse",entryPoint:"from_web_organized_menu"}),g.logUserEventOnFile({args:d,action_type:i.WebUserActionLogEvent.MANAGE_FOLDER_RULES_CLICK}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderEditAutomationButton({actionSurface:"browse"})})));break;case to.DUPLICATE_FILES:{const e=l.currentFQPath,t=new s.URI({path:"/duplicate"});t.setQuery({path:e}),i.redirect(t.toString()),C.logBrowseTTS("find_duplicates"),i.logEvent({class:"duplicate_files",action:"open",object:"duplicate_files_page",properties:{userId:c.id.toString()}});break}default:r&&F.reportStack(`Bad organizeAction=[${r}]`,{severity:O.SEVERITY.CRITICAL})}},[S.ActionBarActionTypes.ADD_FROM_GDRIVE]:y.addFromGdriveActionHandler,[S.ActionBarActionTypes.MANAGE_PERMISSIONS]:y.managePermissionsActionHandler}),To=Object.assign(Object.assign({},y.ActionMenuToggleHandlersMap),{[S.ActionBarActionTypes.CREATE]:(e,t,o)=>{if(o){const t=i.user$1(e),o=i.path$1(e),s=i.selectionMode(e),a=0===i.sortedFilesWithFolderSizes(e).count();i.logFileCreateClick({uid:t.id,source:i.NewFileMenuFromType.BROWSE,action:i.WebUserActionLogEvent.FILE_CREATE_OPEN_MENU,depth_folder_selected:o?b.getDepthFromPath(o):void 0,selection_mode:s,empty_folder:a}),i.logEvent(M.PAP_Select_CreateMenu({actionSurface:"browse_screen",actionElement:"action_bar"}))}},[S.ActionBarActionTypes.UPLOAD]:(e,t,o)=>{if(o){const t=i.user$1(e),o=i.path$1(e),s=i.selectionMode(e),a=0===i.sortedFilesWithFolderSizes(e).count();i.logFileCreateClick({uid:t.id,source:i.NewFileMenuFromType.BROWSE,action:i.WebUserActionLogEvent.UPLOAD_MENU_CLICK,depth_folder_selected:o?b.getDepthFromPath(o):void 0,selection_mode:s,empty_folder:a}),i.logEvent(M.PAP_Select_Upload({actionSurface:"browse_screen",actionElement:"action_bar"}))}},[S.ActionBarActionTypes.ORGANIZE]:(e,t,o)=>{if(o){const o=i.user$1(e),s=y.context(e,t);i.WebUserActionLog.log(o.id,i.WebUserActionLogEvent.BROWSE_ORGANIZE_WEB_ENTRYPOINT_OPEN,{ns_id:s.currentNSID}),i.logEvent({class:"navigation",action:"select",object:"organize_menu",properties:{actionSurface:"browse_screen",actionElement:"action_bar"}})}}}),bo=i.createSelector(i.browsePostTTIData,(e=>{const{isOverFreeQuota:t,hasExcludedNsIds:o}=e;return{isOverFreeQuota:t,hasExcludedNsIds:o}})),Mo=i.createSelector(i.browsePostTTIExperiments,i.experiments,((e,t)=>{const{expVaultEnableViewOnlySharing:o,expSpacesFssDropdown:s,expFlowsAutomatedFolderUI:a,expFlowsManualArchive:i,expFlowsManualVideoGifUi:n,expFssEntryPointForSpaces:r,expFlowsApprovalFlowVariant:l,expFlowsApprovalAndVersioningNewBadgeVariant:c,expFlowsApprovalCopyVariant:d,expCollectionsInBrowse:u,expFlowsBrowseBarSaveAsUi:p,expBackupImprovedRestorations:g,expUserLevelSharingSettings:m,expReplayBrowseAction:h,expImageEditEntryPoint:_}=e;return{expVaultEnableViewOnlySharing:Boolean(o),expSpacesFssDropdown:void 0!==s&&"OFF"!==s&&"CONTROL"!==s,expFlowsAutomatedFolderUI:Boolean(a),expFlowsManualArchive:Boolean(i),expFlowsManualVideoGifUi:Boolean(n),expFssEntryPointForSpaces:Boolean(r),expFlowsApprovalFlowVariant:l||"OFF",expFlowsApprovalAndVersioningNewBadgeVariant:c||"OFF",expFlowsApprovalCopyVariant:d||"OFF",expIsTransferEnabled:Boolean(t.isTransferEnabled),expCollectionsInBrowse:Boolean(u),expFlowsBrowseBarSaveAsUi:p||"OFF",expBackupImprovedRestorations:Boolean(g),expUserLevelSharingSettings:m||"OFF",expReplayBrowseAction:h||"OFF",expImageEditEntryPoint:_||"OFF"}}));y.getStoreForFolderSubscriptions();const Io=({path:e,selectedFiles:t})=>(s.React$1.useEffect((()=>{y.getStoreForFolderSubscriptions().dispatch(y.fetchFolderSubscription(e))}),[e,y.fetchFolderSubscription]),s.React$1.useEffect((()=>{1===t.count()&&t.first().is_dir&&y.getStoreForFolderSubscriptions().dispatch(y.fetchFolderSubscription(t.first().fq_path))}),[t,y.fetchFolderSubscription]),null);Io.displayName="FolderSubscriptionController";const Fo=s.React$1.memo((({user:e,className:t})=>{const o=i.useDispatch(),a=i.useSelector((e=>i.selectViewType(e,{instanceId:i.BROWSE_FILES_VIEW_ID}))),n=s.React$1.useCallback(((t,s)=>{const a=i.viewTypeFromViewMode(t);s.stopPropagation(),i.logSwitchViewType({uid:e.id,isSearchMode:!1,viewType:a}),i.logEvent({class:"browse",action:"select",object:"view_type",properties:{viewType:a}}),o(k.setViewType(a))}),[o,e]);return s.React$1.createElement(i.ViewModeToggle,{className:t,currentMode:i.viewModeFromViewType(a),onSelection:n})}));Fo.displayName="BrowseViewModeToggle";const Co=({browsePostTTIExperiments:e,context:t})=>!!e.expLetMembersInviteData&&(e.expLetMembersInviteData.shouldShowLetMembersInviteCta&&t.isInsideTeamFolderTree&&t.isCurrentlyInRoot),Oo=({browsePostTTIExperiments:e,browsePostTTIData:t,context:o,isTmrMember:s})=>t.firstTaskProps.is_eligible_team&&(o.isInsideTeamFolderTree||s&&o.currentNSID===o.rootNSID)&&o.isCurrentlyInRoot,No={loader:()=>new Promise((function(t,o){e(["./c_growth_ui_invite_facepile"],t,o)})).then((({InviteFacepile:e})=>e))},Do=i.Loadable(No);var Po,Lo,xo,ko;function Bo(e){return(null==e?void 0:e.role)||""}t.FirstPathId=void 0,(Po=t.FirstPathId||(t.FirstPathId={})).SUGGESTED_FOLDERS_ITERATION="suggested_folders_iteration",Po.NONE="",function(e){e[e.ShowWithoutText=1]="ShowWithoutText",e[e.ShowWithText=2]="ShowWithText",e[e.ShowWithTextAsPrimary=3]="ShowWithTextAsPrimary"}(Lo||(Lo={})),function(e){e[e.None=0]="None",e[e.SuggestedFolders=1]="SuggestedFolders"}(xo||(xo={})),t.emptyStateType=void 0,(ko=t.emptyStateType||(t.emptyStateType={})).DROP_TARGET_VIEW="drop_target_view",ko.SUGGESTED_FOLDERS_VIEW="suggested_folders_view";const Uo=s.React$1.forwardRef((({group:e,integrationPopoverInfo:t,onClick:o},a)=>{let n,r;const l=Yo(o,"group",e),c=i.cx("facepile-item","group-facepile-item"),d=i.avatarColorForUserIdentifier(e.name);return e.is_automatic?(r=q.teamAccessTypeString(e.name,e.access_type),n=s.React$1.createElement(i.Facepile.Item,{className:i.cx(c,"auto-group-facepile-item"),alt:r,onClick:t?void 0:l,backgroundColor:"#F7F5F2"},s.React$1.createElement(i.UIIcon,{src:i.TeamLine,role:"presentation",color:"black"}))):(r=q.groupAccessTypeString(e.name,e.access_type,e.num_users),n=s.React$1.createElement(i.Facepile.Item,{ref:a,className:c,alt:r,onClick:t?void 0:l,backgroundColor:d},qo(e.name))),s.React$1.createElement(jo,{avatar:n,itemKey:`group:${e.gid}:${e.name}`,accessTypeString:r,popoverColor:d,integrationPopoverInfo:t,avatarInfo:{avatarType:"group",targetGroup:{gid:e.gid,groupName:e.name,message:r}}})}));Uo.displayName="GroupFacepileItem";const $o=s.React$1.forwardRef((({invitee:e,integrationPopoverInfo:t,onClick:o},a)=>{const n=q.individualAccessTypeString(e.email_or_fbname,"pending",!1),r=Yo(o,"invited",e),l=s.React$1.createElement(i.Facepile.Item,{ref:a,className:i.cx("facepile-item","invitee-facepile-item"),alt:n,isInactive:!0,onClick:t?void 0:r},qo(e.email_or_fbname));return s.React$1.createElement(jo,{avatar:l,itemKey:`invitation:${e.invitation_id}`,accessTypeString:n,popoverColor:i.avatarColorForUserIdentifier(e.email_or_fbname),integrationPopoverInfo:t,avatarInfo:{avatarType:"invited_person",targetUser:{accountId:e.invitation_id,displayName:e.email_or_fbname,familiarName:void 0,accessType:n}}})}));$o.displayName="InviteeFacepileItem";const Vo=s.React$1.forwardRef((({member:e,arePairedUsersInSharedFolder:t,integrationPopoverInfo:o,onClick:a},n)=>{let r=e.display_name;const l=i.Viewer.get_viewer(),c=l.get_user_ids(!0).includes(e.user_id);if(c&&t){const t=e.user_id,o=l.get_user_by_role("personal",!0),s=l.get_user_by_role("work",!0);o&&t===o.id?r="Personal":s&&t===s.id&&null!=l.team_name&&(r=l.team_name)}r=i.Emstring.em_snippet(r,i.SNIPPET_SIZES.DISPLAY_NAME);const d=i.cx("facepile-item","member-facepile-item",{"viewing-user-facepile-item":c,"family-member-facepile-item":!!e.same_family}),u=q.individualAccessTypeString(r,e.access_type,c,t),p=i.avatarColorForUserIdentifier(e.display_name),g=Yo(a,"member",e),m=s.React$1.createElement(i.Facepile.Item,{ref:n,className:d,alt:u,onClick:o?void 0:g,src:e.photo_url,backgroundColor:p},e.initials.toUpperCase());return s.React$1.createElement(jo,{avatar:m,itemKey:`user:${e.user_id}:${e.photo_url}`,accessTypeString:u,popoverColor:p,integrationPopoverInfo:o,canShowInitially:!0,avatarInfo:{avatarType:"joined_member",targetUser:{accountId:e.account_id,displayName:r,familiarName:e.familiar_name,accessType:u,isViewer:c,email:e.email,photoUrl:e.photo_url}}})}));Vo.displayName="MemberFacepileItem";const Go=s.React$1.forwardRef((({overflowCount:e,integrationPopoverInfo:t,onClick:o},n)=>{const r="#a792723d",l=a.intl.formatMessage({id:"NwLz1M",defaultMessage:"{count, plural, one{{count} more member} other{{count} more members}}"},{count:e}),c=Ho(o),d=e>=99?"99+":`${e}`,u=s.React$1.createElement(i.Facepile.Item,{ref:n,className:i.cx("facepile-item","overflow-facepile-item"),alt:l,onClick:t?void 0:c,backgroundColor:r},d);return s.React$1.createElement(jo,{avatar:u,itemKey:"overflow_count",accessTypeString:l,popoverColor:r,integrationPopoverInfo:t,avatarInfo:{avatarType:"overflow",overflowInfo:{message:l}},onClick:c})}));Go.displayName="OverflowFacepileItem";const Wo=s.React$1.forwardRef((({index:e,onClick:t},o)=>{const n=a.intl.formatMessage({id:"EIw3b/",defaultMessage:"Invite"}),r=`placeholder:${e}`,l=i.cx("facepile-item","placeholder-facepile-item"),c=Ho(t),d=s.React$1.createElement(i.Facepile.Item,{ref:o,className:l,alt:n,onClick:c,src:s.static_url("/static/metaserver/static/images/icons/no_member-vflE0FYQV.svg")});return s.React$1.createElement(i.Tooltip,{key:r,id:r,title:n,placement:"bottom"},d)}));Wo.displayName="PlaceholderFacepileItem";s.React$1.forwardRef((({integrationPopoverInfo:e,onClick:t},o)=>{const a=q.getDescriptionForSharedLink(),n="#F7F5F2",r=Ho(t),l=s.React$1.createElement(i.Facepile.Item,{ref:o,className:i.cx("facepile-item","shared-link-facepile-item"),alt:a,onClick:e?void 0:r,backgroundColor:n},s.React$1.createElement(i.UIIcon,{src:i.LinkLine,role:"presentation",color:"black"}));return s.React$1.createElement(jo,{avatar:l,itemKey:"shared_link",accessTypeString:a,popoverColor:n,integrationPopoverInfo:e,avatarInfo:{avatarType:"shared_link",targetLink:{message:a}},onClick:r})})).displayName="SharedLinkFacepileItem";const jo=({avatar:e,itemKey:t,accessTypeString:o,popoverColor:a,integrationPopoverInfo:n,canShowInitially:r,avatarInfo:l,onClick:c})=>{if(n){const o=q.getViewerId();if(o)return s.React$1.createElement(i.Provider,{store:n.integrationStore,key:t},s.React$1.createElement(Y.ProfileCardPopover,{popoverGroup:n.integrationPopoverGroup,integrationStore:n.integrationStore,entryPoint:n.entryPoint,viewerId:o,avatarInfo:l,file:n.fileInfo,onAvatarClick:c||void 0,isShowInitially:r&&n.autoDisplayTooltip,portalParentElement:document.body,avatarColor:a},e))}return s.React$1.createElement(i.Tooltip,{key:t,id:t,title:o,placement:"bottom"},e)};function Ho(e){return function(t){null==e||e(),t.stopPropagation()}}function Yo(e,t,o){return function(s){null==e||e(t,o),s.stopPropagation()}}function qo(e){return q.getInitials(e).toUpperCase()}jo.displayName="FacepileItemWithPopover";const zo=({user:e,maxFacepileItems:t,avatarSize:o,isInsideFamilySharedFolder:n,numUndisplayableUsersAndInvites:r,arePairedUsersInSf:l,isCdmRoot:c,groups:d,invitations:u,members:p,sharedLinkExists:g,onAvatarClick:m,onOverflowCountClick:h,onSharedLinkClick:_,integrationPopoverInfo:f,integrationPopoverInfoNoAutoDisplay:E})=>{const[v,A]=s.React$1.useState(t),[S,R]=s.React$1.useState(null),y=s.React$1.useMemo((()=>Array(t).fill(0).map((e=>s.React$1.createRef()))),[t]),[w,T]=j.useResizeObserver();s.React$1.useEffect((()=>{S&&(A(t),R(null))}),[null==T?void 0:T.contentRect.width]),s.React$1.useLayoutEffect((()=>{if(!y||!y[0]||!S)return void(v!==t&&A(t));const e=S.getBoundingClientRect().top,o=y.filter((t=>t.current&&t.current.getBoundingClientRect().top===e)).length;A(Math.max(2,o))}),[t,S]);const b=s.React$1.useCallback((()=>{let o=[];const a=null!=p?p:[],i=d?d.slice():[],g=u?u.slice():[],_=function(e,t){if(e)for(const o of e)if(o.user_id===t.id)return o;return}(a,e);let A=0;_&&o.push(s.React$1.createElement(Vo,{ref:y[Math.min(A++,t-1)],member:_,key:_.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:E,onClick:m})),null==i||i.forEach((e=>o.push(s.React$1.createElement(Uo,{ref:y[Math.min(A++,t-1)],group:e,key:e.gid,integrationPopoverInfo:f,onClick:m})))),n?(null==a||a.forEach((e=>{e.user_id!==(null==_?void 0:_.user_id)&&e.same_family&&o.push(s.React$1.createElement(Vo,{ref:y[Math.min(A++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))})),null==a||a.forEach((e=>{e.user_id===(null==_?void 0:_.user_id)||e.same_family||o.push(s.React$1.createElement(Vo,{ref:y[Math.min(A++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))}))):null==a||a.forEach((e=>{e.user_id!==(null==_?void 0:_.user_id)&&o.push(s.React$1.createElement(Vo,{ref:y[Math.min(A++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))})),null==g||g.forEach((e=>o.push(s.React$1.createElement($o,{ref:y[Math.min(A++,t-1)],invitee:e,key:e.invitation_id,integrationPopoverInfo:f,onClick:m}))));let S=null!=r?r:0;if(r||o.length>v){S+=o.length-v+1,o=o.slice(0,v-1);for(let e=v-1;e<y.length;e++)y[e]=s.React$1.createRef()}if(S>0&&o.push(s.React$1.createElement(Go,{ref:y[Math.min(A++,t-1)],overflowCount:S,key:S,integrationPopoverInfo:f,onClick:h})),1===o.length&&_){if(!e.is_team_admin||!c)return;for(let e=1;e<=v-1;e++)o.push(s.React$1.createElement(Wo,{ref:y[Math.min(A++,t-1)],index:e,key:`placeholder_${e}`,onClick:m}))}return o}),[l,y,d,f,E,u,c,n,t,p,r,v,m,h,_,g,e]),[M,I]=s.React$1.useState("top-start"),F={auto:!0,placement:M,onChangePlacement:e=>I(e)},C=b();if(void 0===C){let e;return e=g?q.getDescriptionForSharedLink():a.intl.formatMessage({id:"KwZ+hv",defaultMessage:"Only you have access"}),s.React$1.createElement("div",{className:"browse-facepile--text-only"},s.React$1.createElement(H.Truncate,{lines:2,tooltipControlProps:F},e))}return s.React$1.createElement("div",{ref:w},s.React$1.createElement(i.Facepile,{size:o},s.React$1.createElement("div",{key:"browse-facepile",ref:e=>R(e),className:i.cx("browse-facepile",{"family-room-facepile":n})},C)))};zo.displayName="BrowseFacepile";const Ko=({file:e})=>(t,s)=>o.__awaiter(void 0,void 0,void 0,(function*(){const o=s(),a=i.context(o),n=i.user$1(o);if(!e||!i.File.isTeamMemberFolder(e)&&i.File.canViewFileMembers(e,a)){if(e||!a.isCurrentlyInRoot)return i.ShareTibEventLogger.log(n.id,K.TiburonEventName.ClickManagePermissionsAction,i.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,e?{file_id:e.file_id,fq_path:e.fq_path,ns_id:e.target_ns?e.target_ns:void 0}:{fq_path:a.currentFQPath,ns_id:a.currentNSID}),W.showShareModal(n,e||a,{browseContext:a,origin:i.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,initialScreen:i.MANAGE_SCREEN},(({path:e,qargs:o})=>t(k.setUrl({path:e,qargs:o}))));{const e=i.Viewer.get_viewer(),t=n.is_team&&!e.team_is_limited,o=n.is_team_admin&&t?"/team/admin/members":"/team#members";i.open_tab(o)}}})),Qo=()=>{i.getStoreForSharedWith();const e=i.useDispatch(),t=i.useSelector(i.user$1),o=i.useSelector(i.context),a=i.useSelector(i.isRightRailCollapsed),n=i.useSelector(i.isInSelectMode),r=i.useSelector(i.getFileFromSelectedFilesForSidebar),l=(t.is_cdm_member||t.is_tmr_member)&&"/"===o.currentFQPath&&o.currentNSID===o.rootNSID,c=i.useSelector((e=>i.getDataForFile(e,r))),{numUndisplayableUsersAndInvites:d=0,groups:u=[],invitations:p=[],joinedMembers:g=[]}=c||{},m=i.useSelector((e=>i.doesSharedLinkExistForPath(e,o.currentFQPath))),h=i.useSelector(i.getIntegrationData),_=r?c.sharedLinkExists:m,f=o.isInsideFamilySharedFolder&&a?"large":"standard",E=q.arePairedUsersInSf(g);s.reactExports.useEffect((()=>{e(i.fetchIntegrationData())}),[e]);const v=()=>{e(Ko({file:r}))},A=s.reactExports.useMemo((()=>new W.IntegrationPopoverGroup),[]),S=e=>({integrationPopoverGroup:A,integrationStore:i.initStoreForIntegration(t.id),autoDisplayTooltip:!(!e||!(null==h?void 0:h.autoDisplayTooltip)),entryPoint:"browse_page_side_bar",fileInfo:r?{".tag":r.type===i.FileTypes.FILE?"file":"folder",id:i.fulfilled(r.file_id),name:Q.getFileName(r)}:void 0});return s.React$1.createElement("div",{className:"audience-box-facepile"},s.React$1.createElement(zo,{user:t,maxFacepileItems:5,avatarSize:f,isInsideFamilySharedFolder:o.isInsideFamilySharedFolder,numUndisplayableUsersAndInvites:d,arePairedUsersInSf:E,isCdmRoot:l&&!n,groups:u,invitations:p,members:g,sharedLinkExists:_,onAvatarClick:v,onOverflowCountClick:v,onSharedLinkClick:()=>W.showShareModal(t,r||o,{browseContext:o,origin:i.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW},(({path:t,qargs:o})=>e(k.setUrl({path:t,qargs:o})))),integrationPopoverInfo:S(),integrationPopoverInfoNoAutoDisplay:S(!1)}))},Xo=()=>{i.getStoreForSharedWith();const e=i.useSelector(i.isBrowseLoadingFirstPage),t=i.useSelector(i.isSharedDataLoadedForBrowsePath),o=i.useSelector(i.getFileFromSelectedFilesForSidebar),a=!e&&t;return!i.useSelector(i.canViewMembers)||(null==o?void 0:o.isDeleted)?null:s.React$1.createElement("div",{className:i.cx("shared-with-members","audience-box u-pad-top-xs u-pad-bottom-s u-mar-bottom-xs")},a?s.React$1.createElement(i.UserEducationEffect,{containerName:"SharedWithView",name:"AudienceBoxAvatars"},s.React$1.createElement(Qo,null)):s.React$1.createElement(G.LoadingIndicator,{style:G.LoadingIndicator.LoadingIndicatorStyle.DOTS}))},Jo={selectedFilesSelector:i.selectedFiles$1,userSelector:i.user$1,contextSelector:i.context,overQuotaDataSelector:bo,experimentSelector:Mo,isSearchMode:!1,actionSurface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,currentFolderInfo:i.getCurrentFolderInfo,flowsUserAutomation:$.getUserAutomation,rightRailCollapsedState:i.isRightRailCollapsed,isInsideBackupFolder:i.isInsideBackupFolder,isSelectedBackupFolder:i.isSelectedBackupFolder,backupInfoByFile:i.folderBackupInfoByFile,backupInfoByPath:i.folderBackupInfoByPath},Zo=ho(),es=y.createActionBarActionSelector(),ts={handleAction:y.actionHandler,handleActionMenuToggle:y.actionMenuToggleHandler};class os extends s.React$1.PureComponent{constructor(){super(...arguments),this.actionHandler={handleAction:e=>{this.props.handleAction(e,Jo,wo)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},Jo,y.ActionMenuToggleHandlersMap)}},this.onboardingChecklistShareButtonTooltipTriggerRef=s.React$1.createRef()}getTopLevelActions(e){const t=null==e?void 0:e[0],o=null==e?void 0:e[1],s=[];let a,i;return(null==t?void 0:t.actionType)===S.ActionBarActionTypes.SHARE_COPY_LINK?(a=t,i=o):i=t,a&&s.push(a),i&&s.push(i),s}render(){var e,t;const{browseActionBarActions:o,selectedFiles:i,accessibilityConfig:n,useCompactMode:r}=this.props;return o.atTopLevelIfSpace=this.getTopLevelActions(o.atTopLevelIfSpace),s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("div",{className:"brws-sharing-buttons",ref:this.onboardingChecklistShareButtonTooltipTriggerRef},(!!(null===(e=o.alwaysAtTopLevel)||void 0===e?void 0:e.length)||!!(null===(t=o.atTopLevelIfSpace)||void 0===t?void 0:t.length))&&s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(A.ActionBar,{actionHandler:this.actionHandler,actions:o,intl:a.intl,hideOverflowMenu:!0,accessibilityConfig:n,hideIcons:r,className:"brws-sharing-action-bar-container"}),r&&s.React$1.createElement(X.AsyncOnboardingChecklistShareButtonTooltip,{triggerRef:this.onboardingChecklistShareButtonTooltipTriggerRef}))),(0===i.count()||1===i.count())&&!r&&s.React$1.createElement("div",{className:"brws-inline-audience-box"},s.React$1.createElement(Xo,null)))}}os.displayName="SidebarViewSharingSectionComponent";const ss=i.connect(((e,t)=>{const o=t.useCompactMode?yo:Ro;return{browseActionBarActions:es(e,Jo,o,So),context:i.context(e),selectedFiles:i.selectedFilesForSidebar(e),user:i.user$1(e),accessibilityConfig:Zo(e,Jo),postTTIExperiments:i.postTTIExperiments(e),rightRailCollapsed:i.isRightRailCollapsed(e)}}),ts)(os);var as=Object.freeze({__proto__:null,SidebarViewSharingSection:ss});const is=({useCompactMode:e})=>{const t=i.useSelector(i.postTTIExperiments),o=i.useSelector(i.context),a=i.useSelector(i.selectedFilesForSidebar),n=i.useSelector(i.user$1),r=i.useSelector(i.browsePostTTIData),l=i.useSelector(k.paginatedTotalNumFiles),{firstTaskProps:c}=r,d={browsePostTTIExperiments:t,selectedFiles:a,browsePostTTIData:r,context:o,isTmrMember:n.is_tmr_member,showInviteSidePanel:!1},u=s.reactExports.useMemo((()=>((e,t)=>({role:Bo(t.expPersonalizedFirstPaths),totalNumItems:e}))(l,t)),[l,t]),p=(e=>{const{selectedFiles:t,showInviteSidePanel:o}=e,s=t&&0!==t.size;return(o||Oo(e)||Co(e))&&!s})(d);return s.reactExports.createElement(s.reactExports.Fragment,null,p&&s.reactExports.createElement("div",{className:"brws-sharing-view--invite-ui"},s.reactExports.createElement(Do,{isTeamAdmin:n.is_team_admin,isFirstTask:c.is_eligible_team,memberInfo:c.member_info,enableInviteSidePanel:!1,personalizationLogCtx:u,isLetMembersInviteEligible:Co(d),expLetMembersInviteData:Co(d)?t.expLetMembersInviteData:void 0,expBrowseRightRailEnabledEnabled:!0,isTmrMember:n.is_tmr_member})),!p&&s.reactExports.createElement("div",{className:"brws-sharing-view--share-ui"},s.reactExports.createElement(ss,{useCompactMode:e})))};is.displayName="BrowseSharingView";var ns=Object.freeze({__proto__:null,BrowseSharingView:is});const rs={module_name:"clink_first_task",framework:"team_setup_essential"};var ls,cs={exports:{}};window,ls=function(e){return function(e){var t={};function o(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}({"./jquery.qrcode.js":function(e,t,o){var s,a=o("jquery");(s=a).fn.qrcode=function(e){function t(e){this.mode=a.MODE_8BIT_BYTE,this.data=e}function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}t.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},o.prototype={addData:function(e){var o=new t(e);this.dataList.push(o),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=S.getRSBlocks(e,this.errorCorrectLevel),o=new R,s=0,a=0;a<t.length;a++)s+=t[a].dataCount;for(a=0;a<this.dataList.length;a++){var i=this.dataList[a];o.put(i.mode,4),o.put(i.getLength(),f.getLengthInBits(i.mode,e)),i.write(o)}if(o.getLengthInBits()<=8*s)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var o=-1;o<=7;o++)if(!(e+o<=-1||this.moduleCount<=e+o))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(this.modules[e+o][t+s]=0<=o&&o<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var e=0,t=0,o=0;o<8;o++){this.makeImpl(!0,o);var s=f.getLostPoint(this);(0==o||e>s)&&(e=s,t=o)}return t},createMovieClip:function(e,t,o){var s=e.createEmptyMovieClip(t,o);this.make();for(var a=0;a<this.modules.length;a++)for(var i=1*a,n=0;n<this.modules[a].length;n++){var r=1*n;this.modules[a][n]&&(s.beginFill(0,100),s.moveTo(r,i),s.lineTo(r+1,i),s.lineTo(r+1,i+1),s.lineTo(r,i+1),s.endFill())}return s},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=f.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var o=0;o<e.length;o++){var s=e[t],a=e[o];if(null==this.modules[s][a])for(var i=-2;i<=2;i++)for(var n=-2;n<=2;n++)this.modules[s+i][a+n]=-2==i||2==i||-2==n||2==n||0==i&&0==n}},setupTypeNumber:function(e){for(var t=f.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var s=!e&&1==(t>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=s}for(o=0;o<18;o++)s=!e&&1==(t>>o&1),this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=s},setupTypeInfo:function(e,t){for(var o=this.errorCorrectLevel<<3|t,s=f.getBCHTypeInfo(o),a=0;a<15;a++){var i=!e&&1==(s>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++)i=!e&&1==(s>>a&1),a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var o=-1,s=this.moduleCount-1,a=7,i=0,n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(var r=0;r<2;r++)if(null==this.modules[s][n-r]){var l=!1;i<e.length&&(l=1==(e[i]>>>a&1)),f.getMask(t,s,n-r)&&(l=!l),this.modules[s][n-r]=l,-1==--a&&(i++,a=7)}if((s+=o)<0||this.moduleCount<=s){s-=o,o=-o;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,t,s){for(var a=S.getRSBlocks(e,t),i=new R,n=0;n<s.length;n++){var r=s[n];i.put(r.mode,4),i.put(r.getLength(),f.getLengthInBits(r.mode,e)),r.write(i)}var l=0;for(n=0;n<a.length;n++)l+=a[n].dataCount;if(i.getLengthInBits()>8*l)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*l+")");for(i.getLengthInBits()+4<=8*l&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*l||(i.put(o.PAD0,8),i.getLengthInBits()>=8*l));)i.put(o.PAD1,8);return o.createBytes(i,a)},o.createBytes=function(e,t){for(var o=0,s=0,a=0,i=new Array(t.length),n=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;s=Math.max(s,l),a=Math.max(a,c),i[r]=new Array(l);for(var d=0;d<i[r].length;d++)i[r][d]=255&e.buffer[d+o];o+=l;var u=f.getErrorCorrectPolynomial(c),p=new A(i[r],u.getLength()-1).mod(u);for(n[r]=new Array(u.getLength()-1),d=0;d<n[r].length;d++){var g=d+p.getLength()-n[r].length;n[r][d]=g>=0?p.get(g):0}}var m=0;for(d=0;d<t.length;d++)m+=t[d].totalCount;var h=new Array(m),_=0;for(d=0;d<s;d++)for(r=0;r<t.length;r++)d<i[r].length&&(h[_++]=i[r][d]);for(d=0;d<a;d++)for(r=0;r<t.length;r++)d<n[r].length&&(h[_++]=n[r][d]);return h};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i=1,n=0,r=3,l=2,c=0,d=1,u=2,p=3,g=4,m=5,h=6,_=7,f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;f.getBCHDigit(t)-f.getBCHDigit(f.G15)>=0;)t^=f.G15<<f.getBCHDigit(t)-f.getBCHDigit(f.G15);return(e<<10|t)^f.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;f.getBCHDigit(t)-f.getBCHDigit(f.G18)>=0;)t^=f.G18<<f.getBCHDigit(t)-f.getBCHDigit(f.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return f.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,o){switch(e){case c:return(t+o)%2==0;case d:return t%2==0;case u:return o%3==0;case p:return(t+o)%3==0;case g:return(Math.floor(t/2)+Math.floor(o/3))%2==0;case m:return t*o%2+t*o%3==0;case h:return(t*o%2+t*o%3)%2==0;case _:return(t*o%3+(t+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new A([1],0),o=0;o<e;o++)t=t.multiply(new A([1,E.gexp(o)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),o=0,s=0;s<t;s++)for(var a=0;a<t;a++){for(var i=0,n=e.isDark(s,a),r=-1;r<=1;r++)if(!(s+r<0||t<=s+r))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==r&&0==l||n==e.isDark(s+r,a+l)&&i++;i>5&&(o+=3+i-5)}for(s=0;s<t-1;s++)for(a=0;a<t-1;a++){var c=0;e.isDark(s,a)&&c++,e.isDark(s+1,a)&&c++,e.isDark(s,a+1)&&c++,e.isDark(s+1,a+1)&&c++,0!=c&&4!=c||(o+=3)}for(s=0;s<t;s++)for(a=0;a<t-6;a++)e.isDark(s,a)&&!e.isDark(s,a+1)&&e.isDark(s,a+2)&&e.isDark(s,a+3)&&e.isDark(s,a+4)&&!e.isDark(s,a+5)&&e.isDark(s,a+6)&&(o+=40);for(a=0;a<t;a++)for(s=0;s<t-6;s++)e.isDark(s,a)&&!e.isDark(s+1,a)&&e.isDark(s+2,a)&&e.isDark(s+3,a)&&e.isDark(s+4,a)&&!e.isDark(s+5,a)&&e.isDark(s+6,a)&&(o+=40);var d=0;for(a=0;a<t;a++)for(s=0;s<t;s++)e.isDark(s,a)&&d++;return o+=Math.abs(100*d/t/t-50)/5*10}},E={glog:function(e){if(e<1)throw new Error("glog("+e+")");return E.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return E.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},v=0;v<8;v++)E.EXP_TABLE[v]=1<<v;for(v=8;v<256;v++)E.EXP_TABLE[v]=E.EXP_TABLE[v-4]^E.EXP_TABLE[v-5]^E.EXP_TABLE[v-6]^E.EXP_TABLE[v-8];for(v=0;v<255;v++)E.LOG_TABLE[E.EXP_TABLE[v]]=v;function A(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var o=0;o<e.length&&0==e[o];)o++;this.num=new Array(e.length-o+t);for(var s=0;s<e.length-o;s++)this.num[s]=e[s+o]}function S(e,t){this.totalCount=e,this.dataCount=t}function R(){this.buffer=new Array,this.length=0}return A.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var s=0;s<e.getLength();s++)t[o+s]^=E.gexp(E.glog(this.get(o))+E.glog(e.get(s)));return new A(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=E.glog(this.get(0))-E.glog(e.get(0)),o=new Array(this.getLength()),s=0;s<this.getLength();s++)o[s]=this.get(s);for(s=0;s<e.getLength();s++)o[s]^=E.gexp(E.glog(e.get(s))+t);return new A(o,0).mod(e)}},S.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],S.getRSBlocks=function(e,t){var o=S.getRsBlockTable(e,t);if(null==o)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=o.length/3,a=new Array,i=0;i<s;i++)for(var n=o[3*i+0],r=o[3*i+1],l=o[3*i+2],c=0;c<n;c++)a.push(new S(r,l));return a},S.getRsBlockTable=function(e,t){switch(t){case i:return S.RS_BLOCK_TABLE[4*(e-1)+0];case n:return S.RS_BLOCK_TABLE[4*(e-1)+1];case r:return S.RS_BLOCK_TABLE[4*(e-1)+2];case l:return S.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},R.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=s.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:l,background:"#ffffff",foreground:"#000000"},e),this.each((function(){var t="canvas"==e.render?function(){var t=new o(e.typeNumber,e.correctLevel);t.addData(e.text),t.make();var s=document.createElement("canvas");s.width=e.width,s.height=e.height;for(var a=s.getContext("2d"),i=e.width/t.getModuleCount(),n=e.height/t.getModuleCount(),r=0;r<t.getModuleCount();r++)for(var l=0;l<t.getModuleCount();l++){a.fillStyle=t.isDark(r,l)?e.foreground:e.background;var c=Math.ceil((l+1)*i)-Math.floor(l*i),d=Math.ceil((r+1)*i)-Math.floor(r*i);a.fillRect(Math.round(l*i),Math.round(r*n),c,d)}return s}():function(){var t=new o(e.typeNumber,e.correctLevel);t.addData(e.text),t.make();for(var a=s("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),i=e.width/t.getModuleCount(),n=e.height/t.getModuleCount(),r=0;r<t.getModuleCount();r++)for(var l=s("<tr></tr>").css("height",n+"px").appendTo(a),c=0;c<t.getModuleCount();c++)s("<td></td>").css("width",i+"px").css("background-color",t.isDark(r,c)?e.foreground:e.background).appendTo(l);return a}();s(t).appendTo(this)}))},e.exports=a.fn.qrcode},0:function(e,t,o){e.exports=o("./jquery.qrcode.js")},jquery:function(t,o){t.exports=e}})},cs.exports=ls(Z.jqueryExports);class ds extends s.React$1.Component{render(){return s.React$1.createElement("div",{className:"hidden-option"},this.props.children)}}ds.displayName="Hidden";class us extends s.React$1.Component{render(){return s.React$1.createElement(ds,null,s.React$1.createElement("select",Object.assign({},r.omit(this.props,"options")),Array.from(this.props.options).map((e=>s.React$1.createElement("option",{key:e,label:e,value:e})))))}}us.displayName="HiddenSelect",us.propTypes={options:i.PropTypes.arrayOf(i.PropTypes.any).isRequired,value:i.PropTypes.any};class ps extends s.React$1.Component{constructor(){super(...arguments),this.state={id:r.uniqueId("option")}}UNSAFE_componentWillReceiveProps(e){if(null!=e.id)return this.setState({id:e.id})}render(){const e={"list-item":!0,"select-option":!0,"select-option-disabled":this.props.disabled};null!=this.props.className&&(e[this.props.className]=!0);const t=this.props.value;return s.React$1.createElement("div",Object.assign({},this.props,{"data-value":t,id:this.state.id,role:"option",className:i.cx(e),"aria-disabled":this.props.disabled}),this.props.children)}}ps.displayName="selectOption";class gs extends s.React$1.Component{constructor(){super(...arguments),this.displayName="selectInput",this.mouseInput=!0,this.state={open:!1,focused:void 0,keyboarsSelectPrefix:"",selectOptionId:r.uniqueId("selected-option"),listboxId:r.uniqueId("listbox"),value:this.props.defaultValue,errorWrapperIdName:r.uniqueId("input-error")},this._getFilteredChildren=()=>r.isArray(this.props.children)?r.filter(this.props.children,(e=>e)):this.props.children,this.render=()=>{const e={"select-input":!0,"select-input-dropdown-shown":this.state.open,"select-input-disabled":this.props.isDisabled};this.props.variant&&(e[this.props.variant]=!0),this.props.className&&(e[this.props.className]=!0);const t={"list-menu":!0,"select-input-dropdown":!0,"select-input-disable-error":this.props["disable-errors"]},o=s.React$1.createElement(oe.FormError,Object.assign({},this.props,{errorWrapperIdName:this.state.errorWrapperIdName}));let a=this.props.ariaDescriptionId;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(a=o.props.id);const n=this.selectedOption();return s.React$1.createElement("div",{className:i.cx(e),style:this.props.style,ref:"wrapperDiv"},o,s.React$1.createElement("button",{className:"select-input-button","aria-expanded":this.state.open,"aria-describedby":a,"aria-controls":this.state.listboxId,"aria-labelledby":this.props.ariaLabelId+" "+(null==n?void 0:n.props.id),ref:"selectButton",tabIndex:0,onClick:this.handleClickOnInputButton},s.React$1.createElement("div",{className:"select-input-input filter-item__filter-input",ref:"label"},n,s.React$1.createElement("div",{className:"select-input-dropdown-arrow"},s.React$1.createElement(i.Sprite,{group:"web",name:"arrow-down-gray",alt:""})))),s.React$1.createElement(us,{name:this.props.name,defaultValue:this.props.defaultValue,value:this.getValue(),options:s.React$1.Children.map(this.props.children,(e=>e.props.value))}),s.React$1.createElement("div",{className:"hidden-option-container"},s.React$1.createElement("div",{id:this.state.listboxId,className:i.cx(t),role:"listbox",onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove,tabIndex:-1,ref:"dropdown"},this.menuChildren())))},this.handleMouseMove=e=>{let t;if(!this.props.isDisabled){e.pageX===o&&e.pageY===t||(this.mouseInput=!0);var o=e.pageX;return e.pageY}},this.sortedOptions=[],this._keyboardSelect=e=>{const t=r.sortedIndexBy(this.sortedOptions,{text:e.toLowerCase()},"text"),o=this.sortedOptions[Math.max(t-1,0)],s=this.sortedOptions[Math.min(t,this.sortedOptions.length-1)];return this._commonPrefixLen(e,o.text)>=this._commonPrefixLen(e,s.text)?this.setState({keyboarsSelectPrefix:e,focused:o.value}):this.setState({keyboarsSelectPrefix:e,focused:s.value})},this.handleKeydown=e=>{if(!this.props.isDisabled){switch(this.mouseInput=!1,e.keyCode){case te.Key_enum.Key.Tab:return this.setState({open:!1,focused:void 0}),!0;case te.Key_enum.Key.Enter:case te.Key_enum.Key.Space:this.state.open&&this.state.focused?(this.setValue(this.state.focused),this.setState({open:!1})):this.toggle();break;case te.Key_enum.Key.Escape:if(this.state.open){const e=this.getValue();this.setValue(e),this.setState({open:!1})}break;case te.Key_enum.Key.UpArrow:this.state.open?this.setState({focused:this.prev(this.state.focused)}):this.setState({open:!0});break;case te.Key_enum.Key.DownArrow:this.state.open?this.setState({focused:this.next(this.state.focused)}):this.setState({open:!0});break;default:if(!this.state.open)return!0;if(!r.values(te.Key_enum.Key).includes(e.keyCode)){const t=String.fromCharCode(e.which),o=this.state.keyboarsSelectPrefix+t;this._keyboardSelect(o),this._keyboardSelect_timeout&&clearTimeout(this._keyboardSelect_timeout),this._keyboardSelect_timeout=setTimeout((()=>(this.setState({keyboarsSelectPrefix:""}),this._keyboardSelect_timeout=void 0)),500)}}return!1}},this.prev=e=>{let t,o;return s.React$1.Children.forEach(this.props.children,(s=>{o||s.props.disabled||(o=s.props.value),s.props.value===e&&(t=o),s.props.disabled||(o=s.props.value)})),t},this.next=e=>{let t,o;return s.React$1.Children.forEach(this.props.children,(s=>{s.props.disabled||(o===e&&(t=s.props.value),o=s.props.value)})),t||o},this.menuChildren=()=>{const e=this.getValue();return s.React$1.Children.map(this.props.children,(t=>s.React$1.cloneElement(t,{onMouseEnter:()=>{if(i.scroll_lock_document(),this.mouseInput)return this.setState({focused:t.props.value})},onMouseOut:()=>i.scroll_unlock_document(),onClick:()=>{if(!t.props.disabled)return this.setState({open:!1}),this.setValue(t.props.value)},className:i.cx({"focused-option":null!=this.state.focused&&this.state.focused===t.props.value,"selected-option":e===t.props.value},t.props.className)})))},this.componentDidMount=()=>(this.globalMenuCloser=e=>{if(this.state.open){const t=Z.$j(e.target).closest(".select-input");if(!t.length||t[0]!==s.reactDomExports.findDOMNode(this.refs.wrapperDiv))return this.setState({open:!1,focused:void 0})}},Z.$j(document).on("click",this.globalMenuCloser)),this.componentWillUnmount=()=>Z.$j(document).off("click",this.globalMenuCloser),this.selectedOption=()=>{let e=null;return null!=this.props.headerElement?this.props.headerElement:(s.React$1.Children.forEach(this._getFilteredChildren(),(t=>{if(e||(e=t),(null!=t?t.props.value:void 0)===this.getValue())return e=t})),e?s.React$1.cloneElement(e,{id:this.state.selectOptionId}):null)},this.handleClickOnInputButton=e=>(e.preventDefault(),this.toggle()),this.toggle=()=>{if(!this.props.isDisabled)return this.state.open?this.setState({open:!1,focused:null}):this.setState({open:!0,focused:this.getValue()})},this.getValue=()=>{let e,t;return null!=(e=null!=(t=null!=this.props.value?this.props.value:null!=this.props.valueLink?this.props.valueLink.value:void 0)?t:this.state.value)?e:this.props.defaultValue},this.setValue=e=>{const t=this.getValue();if(this.props.valueLink?this.props.valueLink.requestChange(e):this.setState({value:e}),t!==e||null!=this.props.headerElement)return"function"==typeof this.props.onChange?this.props.onChange(t,e):void 0}}_commonPrefixLen(e,t){e=e.trim().toLowerCase(),t=t.trim().toLowerCase();let o=0;for(;o<e.length&&o<t.length&&e.charAt(o)===t.charAt(o);)o++;return o}componentWillMount(){const e=s.React$1.Children.map(this._getFilteredChildren(),(e=>({value:e.props.value,text:W.getText(e).trim().toLowerCase()})));return this.sortedOptions=r.sortBy(e,"text")}componentDidUpdate(e,t){let o;const a=Z.$j(s.reactDomExports.findDOMNode(this.refs.dropdown)),i=Z.$j(s.reactDomExports.findDOMNode(this.refs.selectButton));this.state.open&&(o=a.find(`[data-value='${this.state.focused}']`),a.attr("aria-activedescendant",o.attr("id"))),this.state.open&&this.state.focused&&null==this.props.headerElement&&(o=a.find(`[data-value='${this.state.focused}']`),a.attr("aria-activedescendant",o.attr("id")),function(e,t){const o=e.scrollTop(),s=o+e.height(),a=t.position().top+o,i=a+t.height();a<o?e.scrollTop(a):i>s&&e.scrollTop(i-e.height())}(a,o));const n=t.open&&!this.state.open;if(!t.open&&this.state.open&&a.focus(),n)return i.focus()}}gs.defaultProps={errorWrapperClassName:"select-input-error-wrapper",ariaLabelId:"",ariaDescriptionId:"",style:null,headerElement:null},gs.displayName="selectInput";const ms=oe.text,hs=gs,_s=ps,fs=i.He(hs)`
  .select-input-input {
    padding: 0 6px !important;
  }
`,Es=i.He.div`
  .phone-text {
    padding-bottom: 13px;
  }
`,vs=i.He(_s)`
  &&&& {
    vertical-align: baseline;
  }
`;class As extends s.React$1.Component{constructor(e){super(e),this.getFullNumber=()=>se.phone_helpers_webpackExports.full_number(this.state.selectedCountryCode,this.state.phoneNumber),this.getCountryIso=()=>se.phone_helpers_webpackExports.iso_to_dialing(this.state.selectedCountryCode),this.getExampleNumber=()=>se.phone_helpers_webpackExports.get_example_mobile_number(this.getCountryIso()),this.onCountrySelected=(e,t)=>{this.setState({selectedCountryCode:t})},this.bindToInput=e=>t=>{this.setState(Object.assign(Object.assign({},this.state),{[e]:t.currentTarget.value}))},this.state={selectedCountryCode:Qe.LOCALE&&"PK"!==Qe.LOCALE?Qe.LOCALE:"US",phoneNumber:""}}componentDidUpdate(e,t){this.state.selectedCountryCode===t.selectedCountryCode&&this.state.phoneNumber===t.phoneNumber||this.notifyListenerOfPhoneInput()}notifyListenerOfPhoneInput(){this.getFullNumber()?se.phone_helpers_webpackExports.is_valid(this.getFullNumber())?this.props.onPhoneNumberInput({type:"success",phoneNumber:this.getFullNumber()}):this.props.onPhoneNumberInput({type:"error"}):this.props.onPhoneNumberInput({type:"empty"})}renderCountryList(){return s.React$1.createElement(fs,{onChange:this.onCountrySelected,value:this.state.selectedCountryCode,className:"phone-country",variant:"small"},this.props.countryList.map((e=>s.React$1.createElement(vs,{key:e.countryCode,value:e.countryCode,disabled:"PK"===e.countryCode},e.countryName," ",e.phoneCode))))}renderLoading(){return s.React$1.createElement("img",{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),alt:a.intl.formatMessage({id:"jybGUg",defaultMessage:"Loading"})})}render(){if(this.props.isLoading)return this.renderLoading();const e=se.phone_helpers_webpackExports.format(this.getCountryIso(),this.state.phoneNumber),t=!this.state.phoneNumber||se.phone_helpers_webpackExports.is_valid(this.getFullNumber());return s.React$1.createElement(Es,{className:"phone-number-input phone-number-input-inline"},s.React$1.createElement("div",{className:"phone-number-error-wrapper"},s.React$1.createElement("div",{className:"phone-number-error error-message"}," ")),this.renderCountryList(),s.React$1.createElement(ms,{placeholder:this.getExampleNumber(),className:"phone-text",inline:!0,variant:"small",onChange:this.bindToInput("phoneNumber"),value:e,error:t?void 0:{message_text:a.intl.formatMessage({id:"Q8gucb",defaultMessage:"Invalid phone number"})}}))}}As.displayName="PhoneInput";const Ss={type:"unknown_error"};function Rs(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o={checkpoint_token:t};null!==s&&(o.backup_phone_number=s);const a=yield i.WebRequest$2({url:"/account/twofactor/enable_finish",data:o,subject_user:e});if("OK"===a)return{type:"success"};if("EXPIRED"===a)return{type:"error",error:"EXPIRED"}}catch(e){}return Ss}))}function ys(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/u2f_start_registration",data:{checkpoint_token:t},subject_user:e}),s=JSON.parse(o),a={challenge_id:s.challenge_id};for(const e of Object.keys(ae.PROTOCOLS))a[e]=s[e]&&JSON.parse(s[e]);return Object.keys(a).length>0?{type:"success",request:a}:Ss}catch(e){return Ss}}))}const ws=oe.password,Ts=a.intl.formatMessage({id:"fvZIUX",defaultMessage:"Sorry, an error occurred. Please try again later."});class bs extends s.React$1.Component{render(){const e=this.props.acceptButtonText||a.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"});let t,o;return this.props.dismissOptions&&(o=this.props.dismissOptions.text,t=e=>{-1!==e.currentTarget.className.indexOf("dbmodal-button")&&(e.preventDefault(),this.props.dismissOptions.onDismiss())}),s.React$1.createElement(ie.ModalWithCSS,{acceptButtonText:null===this.props.onAccept?null:e,autoClose:!1,onAccept:this.props.onAccept,onDismiss:t,title:this.props.title,submitting:this.props.submitting,id:this.props.id,className:this.props.className,dismissButtonText:o,helpLink:this.props.helpLink,onShow:this.props.onShow},s.React$1.createElement("div",{className:"twofactor-account-form"},this.props.children,this.props.errorText&&s.React$1.createElement("div",{className:"error-message"},this.props.errorText)))}}bs.displayName="ModalStepModal";class Ms extends s.React$1.Component{render(){return s.React$1.createElement(bs,{id:"twofactor-start",onAccept:this.props.onConfirm,title:this.props.title,acceptButtonText:a.intl.formatMessage({id:"kOQNUE",defaultMessage:"Get started"}),helpLink:s.React$1.createElement("a",{className:"learn-more",href:"https://www.dropbox.com/help/363",target:"_blank",rel:"noreferrer"},a.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}))},s.React$1.createElement("p",null,a.intl.formatMessage({id:"EIHDne",defaultMessage:"Two-step verification adds an extra layer of protection to your account. Whenever you sign in to the Dropbox website or link a new device, you’ll need to enter both your password and also a security code sent to your mobile phone."})))}}Ms.displayName="StartModal";class Is extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{let o;o="enable"===s?"/account/twofactor/confirm_password":"disable"===s?"/account/twofactor/disable_confirm_password":"/account/twofactor/edit_confirm_password";const a=yield i.WebRequest$2({url:o,data:{password:t},subject_user:e});if(a.startsWith("OK:"))return{type:"success",checkpointToken:a.substring(3)};switch(a){case"EXPIRED_PASSWORD":case"INVALID":case"RATELIMIT":case"ALREADY_ENABLED":case"ALREADY_DISABLED":return{type:"error",error:a}}}catch(e){}return Ss}))}(this.props.user.id,this.state.password,this.props.context);if(this.setState({submitting:!1}),"success"===e.type)this.props.onSuccessfulPassword(e.checkpointToken);else if("error"===e.type){if("INVALID"===e.error)this.setState({error:a.intl.formatMessage({id:"l/9ohN",defaultMessage:"Invalid password"})})}else this.setState({unexpectedError:Ts});this.props.loggingEventName&&i.UserActivityLogger.log("web",this.props.loggingEventName,{confirmPasswordResp:e.type})})),this.setPassword=e=>this.setState({password:e.currentTarget.value}),this.state={password:"",submitting:!1}}render(){return s.React$1.createElement(bs,{id:"twofactor-enter-password",onAccept:this.onAccept,title:this.props.title,submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("p",null,a.intl.formatMessage({id:"+HVGgM",defaultMessage:"For security, please enter your password for {email}."},{email:this.props.user.email})),s.React$1.createElement(ws,{id:"password",value:this.state.password,variant:"small",onChange:this.setPassword,error:void 0===this.state.error?void 0:{message_text:this.state.error},placeholder:a.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})}))}}Is.displayName="ConfirmPasswordModal";class Fs extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.state.usePhoneDelivery)this.props.user.is_email_verified?this.props.onSelectionConfirmed({type:"phone"}):(new ne.EmailVerification).show_verify_modal(void 0,re.EmailVerificationReasons.TFA_SMS_REGISTRATION);else{this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/add_phone",data:{checkpoint_token:t,offline:!0},subject_user:e});if(o.startsWith("OK:"))return{type:"success",b32EncodedKey:o.substring(3)};if("EXPIRED"===o)return{type:"error",error:"EXPIRED"}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken);this.setState({submitting:!1}),"success"===e.type?this.props.onSelectionConfirmed({type:"offline",offlineKey:e.b32EncodedKey}):"error"===e.type?this.props.onPasswordExpired():this.setState({unexpectedError:Ts})}})),this.state={usePhoneDelivery:!0,submitting:!1}}render(){const e=e=>()=>{this.setState({usePhoneDelivery:e})};return s.React$1.createElement(bs,{title:this.props.title,submitting:this.state.submitting,onAccept:this.onAccept,id:"twofactor-delivery-choice",errorText:this.state.unexpectedError},s.React$1.createElement("p",null,s.React$1.createElement("b",null,a.intl.formatMessage({id:"6Ooe3V",defaultMessage:"How would you like to receive your security codes?"}))),s.React$1.createElement("div",{className:"delivery-choice "+(this.state.usePhoneDelivery?"selected":""),id:"sms-choice"},s.React$1.createElement(i.RadioButton,{id:"use-sms",name:"delivery","aria-label":"Use SMS",checked:this.state.usePhoneDelivery,"aria-checked":this.state.usePhoneDelivery,onChange:e(!0),tabIndex:0}),s.React$1.createElement("label",{htmlFor:"use-sms"},s.React$1.createElement("strong",null,a.intl.formatMessage({id:"ribcyl",defaultMessage:"Use text messages"})),s.React$1.createElement("br",null),a.intl.formatMessage({id:"rkKFQh",defaultMessage:"Security codes will be sent to your mobile phone"}))),s.React$1.createElement("div",{className:"delivery-choice "+(this.state.usePhoneDelivery?"":"selected"),id:"app-choice"},s.React$1.createElement(i.RadioButton,{id:"use-app",name:"delivery",type:"radio",checked:!this.state.usePhoneDelivery,"aria-checked":!this.state.usePhoneDelivery,onChange:e(!1),tabIndex:0}),s.React$1.createElement("label",{htmlFor:"use-app"},s.React$1.createElement("strong",null,a.intl.formatMessage({id:"gbLFmN",defaultMessage:"Use a mobile app"})),s.React$1.createElement("br",null),a.intl.formatMessage({id:"9W0BXd",defaultMessage:"Security codes will be generated by an authenticator app"}))))}}Fs.displayName="ChooseDeliveryModal";let Cs=[];function Os(){return o.__awaiter(this,void 0,void 0,(function*(){try{return yield i.WebRequest$2({url:"/account/get_phone_input_data",dataType:"json"})}catch(e){return null}}))}const Ns=e=>{let t=[];if(e){const{country_list:o,phone_code_map:s}=e;t=o.map((e=>({countryCode:e[0],countryName:e[1],phoneCode:s[e[0]]})))}return t};class Ds extends s.React$1.Component{constructor(e){super(e),this.BAD_CARRIER=a.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.INVALID_NUMBER=a.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.NOTAMOBILE=a.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.UNREACHABLE=a.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.RATE_LIMIT=a.intl.formatMessage({id:"R8c4fE",defaultMessage:"You’ve tried to add two-step authentication with SMS too many times. Please try again after 24 hours."}),this.UNVERIFIED_EMAIL=a.intl.formatMessage({id:"HvNB6H",defaultMessage:"You must verify your email before you can add two-step authentication with SMS."}),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.state.phoneNumber&&"success"===this.state.phoneNumber.type){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/add_phone",data:{checkpoint_token:t,phone_number:s},subject_user:e});if(o.startsWith("OK:"))return{type:"success",phoneSig:o.substring(3)};switch(o){case"EXPIRED":case"UNREACHABLE":case"BADCARRIER":case"INVALIDNUMBER":case"NOTAMOBILE":case"RATELIMIT":case"UNVERIFIED_EMAIL":return{type:"error",error:o}}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken,this.state.phoneNumber.phoneNumber);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept({phoneNumber:this.state.phoneNumber.phoneNumber,phoneSig:e.phoneSig});else if("error"===e.type){const t=e=>{this.setState({unexpectedError:e})};switch(e.error){case"EXPIRED":this.props.onPasswordExpired();break;case"UNREACHABLE":t(this.UNREACHABLE);break;case"BADCARRIER":t(this.BAD_CARRIER);break;case"INVALIDNUMBER":t(this.INVALID_NUMBER);break;case"NOTAMOBILE":t(this.NOTAMOBILE);break;case"RATELIMIT":l.Notify.error(this.RATE_LIMIT);break;case"UNVERIFIED_EMAIL":t(this.UNVERIFIED_EMAIL)}}else this.setState({unexpectedError:Ts})}})),this.setPhoneNumber=e=>this.setState({phoneNumber:e}),this.state={submitting:!1,loadedUserConstants:Cs}}UNSAFE_componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){if(0===Cs.length){const e=yield Os();if(e&&0===this.state.loadedUserConstants.length){const t=Ns(e);Cs=t,this.setState({loadedUserConstants:t})}}}))}render(){return s.React$1.createElement(bs,{id:"twofactor-enter-phone",className:"twofactor-overflow",title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,errorText:this.state.unexpectedError,dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",{className:"subtitle"},a.intl.formatMessage({id:"HKKwpB",defaultMessage:"Enter your mobile phone number"})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"NvAM7e",defaultMessage:"We’ll send a security code to this phone number whenever you sign in to the Dropbox website or link a new Device."})),s.React$1.createElement(As,{onPhoneNumberInput:this.setPhoneNumber,isLoading:0===this.state.loadedUserConstants.length,countryList:this.state.loadedUserConstants}))}}Ds.displayName="EnterPhoneModal";class Ps extends s.React$1.Component{constructor(e){super(e),this.qrCodeContainer=s.React$1.createRef(),this.state={showBarcode:!0}}componentDidMount(){this.setupQrCode()}componentDidUpdate(){this.setupQrCode()}componentWillUpdate(e,t){this.clearQrCode()}setupQrCode(){const e=Z.$j(this.qrCodeContainer.current);e.empty();const t="Dropbox",o=this.parseB32Key(this.props.totpB32Secret,!1),s={text:`otpauth://totp/${t}:${this.props.user.email}?secret=${o}&issuer=${t}`,height:200,width:200},a=document.createElement("canvas"),i=!(!a.getContext||!a.getContext("2d"));i||(s.render="table"),e.qrcode(s).show(),i||e.children("table").css("margin","0 auto")}clearQrCode(){Z.$j(this.qrCodeContainer.current).empty()}parseB32Key(e,t){const o=e.replace(new RegExp("=+$"),"");return t?o.toLowerCase().replace(/(.{4})/g,"$1 "):o}render(){const e=e=>()=>{this.setState({showBarcode:e})};return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.props.onAccept,id:"twofactor-offline-setup",dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss},onShow:()=>this.setupQrCode()},s.React$1.createElement("p",null,a.intl.formatMessage({id:"u09i+4",defaultMessage:"An authenticator app lets you generate security codes on your phone without needing to receive text messages. If you don’t already have one, we support any of <a>these apps</a>."},{a:e=>s.React$1.createElement("a",{href:"https://www.dropbox.com/help/363#2fa-apps",rel:"noopener noreferrer",target:"_blank"},e)})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"b+PDmn",defaultMessage:"To configure your authenticator app:"})),s.React$1.createElement("ul",{className:"blue-bullets"},s.React$1.createElement("li",null,a.intl.formatMessage({id:"bKmf0p",defaultMessage:"Add a new time-based token."})),this.state.showBarcode?s.React$1.createElement("li",null,a.intl.formatMessage({id:"+kJxW6",defaultMessage:"Use your app to scan the barcode below, or <button>enter your secret key manually</button>."},{button:t=>s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e(!1)},t)})):s.React$1.createElement("li",null,a.intl.formatMessage({id:"LzEh8h",defaultMessage:"Enter the secret key below, or <button>scan a barcode instead</button>."},{button:t=>s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e(!0)},t)}))),this.state.showBarcode?s.React$1.createElement("div",{id:"qr-div",ref:this.qrCodeContainer}):s.React$1.createElement("div",{id:"secret-div"},this.parseB32Key(this.props.totpB32Secret,!0)))}}Ps.displayName="SetupOfflineModal";class Ls extends s.React$1.Component{constructor(e){super(e),this.INVALID_CODE_GENERAL=a.intl.formatMessage({id:"LGWy5v",defaultMessage:"Invalid code."}),this.INVALID_CODE_TOTP=a.intl.formatMessage({id:"PEgSVc",defaultMessage:"Invalid code. Check the clock on your phone: it must be accurate to the minute."}),this.bindToInput=e=>t=>{this.setState(Object.assign(Object.assign({},this.state),{[e]:t.currentTarget.value}))},this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e="phone"===this.props.deliveryDetails.type?this.props.deliveryDetails.phoneData.phoneSig:void 0,t=yield function(e,t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/confirm_phone",data:{checkpoint_token:t,twofactor_code:s,phone_sig:a},subject_user:e}),n=JSON.parse(o);if("OK"===n.result)return{type:"success",backupCodes:n.codes};switch(n.result){case"INVALID":case"EXPIRED":case"RATELIMIT":return{type:"error",error:n.result}}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken,this.state.code,e);if(this.setState({submitting:!1}),"success"===t.type)this.props.onSuccessfulConfirm(t.backupCodes);else if("error"===t.type)switch(t.error){case"EXPIRED":this.props.onPasswordExpired();break;case"INVALID":const e=this.state.invalidCodeAttempts+1;0===this.state.invalidCodeAttempts||"phone"===this.props.deliveryDetails.type?this.setState({unexpectedError:this.INVALID_CODE_GENERAL,invalidCodeAttempts:e}):this.setState({unexpectedError:this.INVALID_CODE_TOTP,invalidCodeAttempts:e});break;case"RATELIMIT":l.Notify.error(a.intl.formatMessage({id:"kU4PMt",defaultMessage:"Too many invalid codes. Try again in a few minutes."}))}else this.setState({unexpectedError:Ts})})),this.state={submitting:!1,invalidCodeAttempts:0,code:""}}render(){return"phone"===this.props.deliveryDetails.type?(e=>s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enable-confirm",errorText:this.state.unexpectedError,dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",null,a.intl.formatMessage({id:"HONi9s",defaultMessage:"We sent a security code to {phone_number}. Enter it below to verify your phone number"},{phone_number:e})),s.React$1.createElement("div",{className:"twofactor-input-wrapper"},s.React$1.createElement(i.TextInput,{id:"phone-code",value:this.state.code,onChange:this.bindToInput("code"),placeholder:a.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"})}))))(this.props.deliveryDetails.phoneData.phoneNumber):(()=>s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enable-confirm",errorText:this.state.unexpectedError,dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",null,a.intl.formatMessage({id:"lG9gS/",defaultMessage:"Enter the security code generated by your mobile authenticator app to make sure it’s configured correctly."})),s.React$1.createElement("div",{className:"twofactor-input-wrapper"},s.React$1.createElement(i.TextInput,{id:"phone-code",value:this.state.code,onChange:this.bindToInput("code"),placeholder:a.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"})}))))()}}Ls.displayName="ConfirmDeliveryModal";class xs extends s.React$1.Component{constructor(e){super(e),this.SAME_AS_PRIMARY_ERROR=a.intl.formatMessage({id:"yJcqG4",defaultMessage:"You can’t use your primary phone as your backup"}),this.numberIsSameAsPrimary=()=>{const e=this.state.backupPhoneNumber,t=e&&"success"===e.type?e.phoneNumber:void 0;return t&&this.props.primaryPhone&&t===this.props.primaryPhone},this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.numberIsSameAsPrimary())return;const e=this.state.backupPhoneNumber,t=e&&"success"===e.type?e.phoneNumber:void 0;if("edit_backup_phone"===this.props.flow){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/set_backup_phone",data:{checkpoint_token:t,backup_phone_number:s||""},subject_user:e});if("OK"===o)return{type:"success"};if("EXPIRED"===o)return{type:"error",error:o}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken,t);this.setState({submitting:!1}),"success"===e.type?this.props.onAccept(t):"error"===e.type?this.props.onPasswordExpired():this.setState({unexpectedError:Ts})}else if("edit_twofactor"===this.props.flow){this.setState({submitting:!0});const e=yield Rs(this.props.user.id,this.props.checkpointToken,t||null);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept(t);else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Ts})}else this.props.onAccept(t)})),this.setBackupPhoneNumber=e=>this.setState({backupPhoneNumber:e}),this.state={submitting:!1,isSameAsPrimary:!1,loadedUserConstants:Cs}}UNSAFE_componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){if(0===Cs.length){const e=yield Os();if(e&&0===this.state.loadedUserConstants.length){const t=Ns(e);Cs=t,this.setState({loadedUserConstants:t})}}}))}render(){const e=this.numberIsSameAsPrimary()&&this.SAME_AS_PRIMARY_ERROR;return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enter-backup-phone",className:"twofactor-overflow",errorText:e||this.state.unexpectedError,dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",{className:"subtitle"},a.intl.formatMessage({id:"PVsh9/",defaultMessage:"<strong>Backup phone number</strong> (optional)"},{strong:e=>s.React$1.createElement("strong",null,e)})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"MLWfyM",defaultMessage:"If you lose access to your primary security code source, we can send them to your backup mobile number instead."})),s.React$1.createElement(As,{onPhoneNumberInput:this.setBackupPhoneNumber,isLoading:0===this.state.loadedUserConstants.length,countryList:this.state.loadedUserConstants}),s.React$1.createElement("p",{id:"backup-phone-number-description"},a.intl.formatMessage({id:"djBo1i",defaultMessage:"While this step is optional, we encourage you to set up a backup phone number in case you lose your mobile phone or are otherwise unable to receive your security code."})))}}function ks(e){return e.toLowerCase().replace(/(.{4})/g,"$1 ")}xs.displayName="BackupPhoneModal";class Bs extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield Rs(this.props.user.id,this.props.checkpointToken,this.props.backupPhone||null);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Ts})})),this.state={submitting:!1}}render(){const e=void 0!==this.props.primaryPhone?a.intl.formatMessage({id:"HyWjj5",defaultMessage:"Your security codes will be sent by text message"}):a.intl.formatMessage({id:"bQoyjz",defaultMessage:"Your security codes will be generated by your authenticator app"});return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-recovery",errorText:this.state.unexpectedError,dismissOptions:{text:a.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("div",{className:"deliveryLabel"},e),s.React$1.createElement("div",{className:"confirm-phones-outer"},this.props.primaryPhone&&s.React$1.createElement("div",{id:"confirm-phone-primary",className:"confirm-phones-inner"},s.React$1.createElement("span",{className:"confirm-phone-label"},a.intl.formatMessage({id:"9m9zTf",defaultMessage:"Primary phone number"})),s.React$1.createElement("span",{id:"confirm-phone-primary-number",className:"confirm-phone-number"},this.props.primaryPhone)),this.props.backupPhone&&s.React$1.createElement("div",{id:"confirm-phone-backup",className:"confirm-phones-inner"},s.React$1.createElement("span",{className:"confirm-phone-label"},a.intl.formatMessage({id:"4KZf0Q",defaultMessage:"Backup phone number"})),s.React$1.createElement("span",{id:"confirm-phone-backup-number",className:"confirm-phone-number"},this.props.backupPhone))),s.React$1.createElement("div",{className:"codesbox"},s.React$1.createElement("p",{className:"desc"},a.intl.formatMessage({id:"zSj4X8",defaultMessage:"You can use these one-time backup codes to access your account."})),s.React$1.createElement("div",{id:"backup-code-list-container"},s.React$1.createElement("ol",{className:"twofactor-backup-list"},this.props.recoveryCodes.map((e=>s.React$1.createElement("li",{className:"twofactor-backup-list__item"},s.React$1.createElement("span",{className:"twofactor-backup-list__code"},ks(e))))))),s.React$1.createElement("p",{className:"sub-desc"},a.intl.formatMessage({id:"Lb5frQ",defaultMessage:"Write these down and keep them safe."}))))}}Bs.displayName="ViewRecoveryCodesModal";class Us extends s.React$1.Component{constructor(e){super(e),this.loadRecoveryCodes=e=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const t=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=s?"/account/twofactor/new_rescue_code":"/account/twofactor/get_rescue_code",a=yield i.WebRequest$2({url:o,data:{checkpoint_token:t,user_json:!0},dataType:"json",subject_user:e});if("OK"===a.result)return{type:"success",backupCodes:a.codes};if("EXPIRED"===a.result)return{type:"error",error:"EXPIRED"}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken,e);if(this.setState({submitting:!1}),"success"===t.type)this.setState({backupCodes:t.backupCodes});else if("error"===t.type){if("EXPIRED"===t.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Ts})})),this.state={submitting:!1}}componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){this.loadRecoveryCodes(!1)}))}render(){const{backupCodes:e}=this.state;return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.props.onClose,acceptButtonText:a.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),dismissOptions:{text:a.intl.formatMessage({id:"rnNUn1",defaultMessage:"Generate new codes"}),onDismiss:()=>this.loadRecoveryCodes(!0)},id:"twofactor-recovery-edit",submitting:this.state.submitting,errorText:this.state.unexpectedError},(e=>e?s.React$1.createElement("div",{className:"codesbox"},s.React$1.createElement("p",{className:"desc"},a.intl.formatMessage({id:"zSj4X8",defaultMessage:"You can use these one-time backup codes to access your account."})),s.React$1.createElement("div",{id:"backup-code-list-container"},s.React$1.createElement("ol",{className:"twofactor-backup-list"},e.map((e=>s.React$1.createElement("li",{className:"twofactor-backup-list__item"},s.React$1.createElement("span",{className:"twofactor-backup-list__code"},ks(e))))))),s.React$1.createElement("p",{className:"sub-desc"},a.intl.formatMessage({id:"Lb5frQ",defaultMessage:"Write these down and keep them safe."}))):s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),alt:a.intl.formatMessage({id:"jybGUg",defaultMessage:"Loading"})}))(e))}}Us.displayName="EditRecoveryCodesModal";class $s extends s.React$1.Component{render(){return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.props.onAccept,id:"twofactor-done"},s.React$1.createElement("p",null,a.intl.formatMessage({id:"4cZi/F",defaultMessage:"From now on, when you sign in to the Dropbox website or link a new device, you’ll need to enter a security code from your phone."})))}}$s.displayName="FinishTwofactorEnableModal";class Vs extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/disable",data:{checkpoint_token:t},subject_user:e});if("OK"===o)return{type:"success"};if("EXPIRED"===o)return{type:"error",error:"EXPIRED"}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Ts})})),this.state={submitting:!1}}render(){return s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-disable",errorText:this.state.unexpectedError},s.React$1.createElement("p",null,a.intl.formatMessage({id:"wAS6mz",defaultMessage:"If you disable two-step verification, you’ll only need your email and password when you sign in to the Dropbox website or link a new device."})))}}Vs.displayName="FinishTwofactorDisableModal";class Gs extends s.React$1.Component{constructor(e){super(e),this.UNSUPPORTED_U2F_ERROR_STRING=a.intl.formatMessage({id:"nr9Ux4",defaultMessage:"Currently, security keys are only supported with Google Chrome, version 38 or higher."}),this.UNSUPPORTED_ERROR_STRING=a.intl.formatMessage({id:"oHNNG5",defaultMessage:"Currently, security keys are only supported with Google Chrome, version 38 or higher, and Firefox, version 60 or higher."}),this.onAccept=()=>{this.state.unsupportedBrowser?i.unmountModal():this.props.onAccept(),this.props.loggingEventName&&i.UserActivityLogger.log("web",this.props.loggingEventName,{unsupportedBrowser:this.state.unsupportedBrowser})},this.state={submitting:!0,unsupportedBrowser:!1,unsupportedErrorText:this.UNSUPPORTED_U2F_ERROR_STRING}}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){let e;try{if(e=yield ys(this.props.user.id),"unknown_error"===e.type)throw e}catch(e){return this.setState({submitting:!1,unsupportedBrowser:!0,unsupportedErrorText:this.UNSUPPORTED_U2F_ERROR_STRING}),void this.props.onGetRequest()}const t=!ae.canRegisterAuthenticator(e.request);let o=this.UNSUPPORTED_U2F_ERROR_STRING;ae.isWebAuthnEnabled(e.request)&&(o=this.UNSUPPORTED_ERROR_STRING),this.setState({submitting:!1,unsupportedBrowser:t,unsupportedErrorText:o}),this.props.onGetRequest(e)}))}render(){const e=this.state.unsupportedBrowser?this.state.unsupportedErrorText:"";return s.React$1.createElement(bs,{title:this.props.title,id:"twofactor-security-key-unsupported-browser",onAccept:this.onAccept,errorText:e,acceptButtonText:this.state.unsupportedBrowser?a.intl.formatMessage({id:"6bRQ0U",defaultMessage:"Done"}):a.intl.formatMessage({id:"6fTvLO",defaultMessage:"Begin setup"}),submitting:this.state.submitting},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,a.intl.formatMessage({id:"mgikY5",defaultMessage:"A security key allows you to complete two-step verification securely and conveniently, when logging into Dropbox. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)}))))}}Gs.displayName="SecurityKeyIntroModal";class Ws extends s.React$1.Component{constructor(e){super(e),this.onPrepareAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({registrationStatus:"pending_registration"})})),this.onAuthenticatorCallback=e=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const t=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield i.WebRequest$2({url:"/account/twofactor/u2f_finish_registration",data:{checkpoint_token:t,device_response:JSON.stringify(s)},subject_user:e});return o.startsWith("err:")?{type:"error",localizedError:JSON.parse(o.substring(4)).security_key_register.message_text}:{type:"success",data:JSON.parse(o)}}catch(e){return Ss}}))}(this.props.user.id,this.props.checkpointToken,e);this.setState({submitting:!1}),"success"===t.type?(this.props.onKeyAdded(),this.setState({registrationStatus:"success",deviceGid:t.data.device_gid})):"error"===t.type?this.setState({registrationStatus:"error",unexpectedError:t.localizedError}):this.setState({registrationStatus:"error"}),this.props.loggingEventName&&i.UserActivityLogger.log("web",this.props.loggingEventName,{respType:t.type})})),this.renderPrepare=()=>s.React$1.createElement(bs,{title:this.props.title,onAccept:this.onPrepareAccept,acceptButtonText:a.intl.formatMessage({id:"cTRGoc",defaultMessage:"Key inserted"}),submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,a.intl.formatMessage({id:"3Ol37w",defaultMessage:"Start by inserting your security key into a USB port. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)})))),this.renderPending=()=>s.React$1.createElement(bs,{title:this.props.title,errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/security_keys/detect-vflwOn2Nf.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/detect@2x-vflx2BPRH.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),className:"scanning-wheel"}),a.intl.formatMessage({id:"tq1aa1",defaultMessage:"Scanning for security key"})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"e8eCgM",defaultMessage:"If your key has a button or a gold disk, tap it now. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)})))),this.retryRegister=()=>{this.setState({registrationStatus:"pending_registration"})},this.renderError=()=>s.React$1.createElement(bs,{title:this.props.title,onAccept:this.retryRegister,acceptButtonText:a.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}),errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/security_keys/detect-vflwOn2Nf.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/detect@2x-vflx2BPRH.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,a.intl.formatMessage({id:"50+STL",defaultMessage:"Re-insert your key and click ‘Retry’"})))),this.setNickname=e=>this.setState({nickname:e.currentTarget.value}),this.renameAndFinish=()=>{if(this.state.nickname){this.setState({renameSubmitting:!0});(new i.UserApiV2Client).ns("security_settings").rpc("rename_auth_device_v2",{device_gid:this.state.deviceGid,nickname:this.state.nickname},{subjectUserId:this.props.user.id}).then((e=>{this.setState({renameSubmitting:!1}),this.props.onKeyAdded(),this.props.onFinish()}),(e=>{this.setState({renameSubmitting:!1}),this.props.onFinish()}))}else this.props.onFinish()},this.state={submitting:!1,renameSubmitting:!1,registrationStatus:"prepare",deviceGid:"",nickname:""},this.currentRequest=this.props.request}componentDidUpdate(e,t){return o.__awaiter(this,void 0,void 0,(function*(){if(t.registrationStatus!==this.state.registrationStatus&&"pending_registration"===this.state.registrationStatus)if(void 0===this.currentRequest&&(this.setState({submitting:!0}),this.currentRequest=yield ys(this.props.user.id,this.props.checkpointToken),this.setState({submitting:!1})),"success"===this.currentRequest.type){const e=yield ae.register(this.currentRequest.request);this.currentRequest=void 0,this.onAuthenticatorCallback(e)}else this.setState({registrationStatus:"error",unexpectedError:Ts})}))}renderSuccess(){return s.React$1.createElement(bs,{title:this.props.title,acceptButtonText:a.intl.formatMessage({id:"t0ve6c",defaultMessage:"Finish"}),onAccept:this.renameAndFinish,submitting:this.state.renameSubmitting},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(i.Image$1,{src:s.static_url("/static/metaserver/static/images/security_keys/success-vfldNQ5IO.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/success@2x-vflv-3UZY.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,a.intl.formatMessage({id:"qAhMHO",defaultMessage:"Key added!"})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"FvQTeI",defaultMessage:"You can now use your security key to complete two-step verification when you sign into Dropbox."})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"/8wKhI",defaultMessage:"If you’d like, you can also set a nickname for this security key, so that it’s easier to tell apart from any other key you have."}))),s.React$1.createElement(i.TextInput,{id:"nickname",value:this.state.nickname,onChange:this.setNickname,"disable-errors":!0,placeholder:a.intl.formatMessage({id:"J/uM6N",defaultMessage:"for example, ‘yellow USB key’"}),maxLength:100}))}render(){switch(this.state.registrationStatus){case"prepare":return this.renderPrepare();case"pending_registration":return this.renderPending();case"error":return this.renderError();case"success":return this.renderSuccess()}}}Ws.displayName="SecurityKeyRegisterModal";class js extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o="/account/twofactor/revoke_all_trusted_devices",s=yield i.WebRequest$2({url:o,data:{checkpoint_token:t},subject_user:e});if("OK"===s)return{type:"success"};if("EXPIRED"===s)return{type:"error",error:"EXPIRED"}}catch(e){}return Ss}))}(this.props.user.id,this.props.checkpointToken);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Ts})})),this.state={submitting:!1}}render(){return s.React$1.createElement(bs,{title:this.props.title,acceptButtonText:a.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),onAccept:this.onAccept,dismissOptions:{text:a.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onDismiss:this.props.onDismiss},id:"twofactor-revoke-all-trusted-devices",submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("p",null,a.intl.formatMessage({id:"B7S5UI",defaultMessage:"To sign in again you’ll need your phone or a backup option for the second step."})))}}js.displayName="RevokeAllTrustedDevicesModal";const Hs=a.defineMessage({id:"GU8La8",defaultMessage:"Link sent to {email}"}),Ys=a.defineMessage({id:"93LvA5",defaultMessage:"There was an error sending the link"}),qs={EMAIL:{id:"email",label:a.intl.formatMessage({id:"Jf36zT",defaultMessage:"By email"}),content:a.intl.formatMessage({id:"5ZXdxv",defaultMessage:"We'll send a link to:"}),buttonText:a.intl.formatMessage({id:"JuuMAX",defaultMessage:"Email me the link"})},PHONE:{id:"phone",label:a.intl.formatMessage({id:"DVUAxh",defaultMessage:"By text"}),content:a.intl.formatMessage({id:"OeOpuZ",defaultMessage:"We'll send a link to:"}),buttonText:a.intl.formatMessage({id:"6sVXnz",defaultMessage:"Text me the link"})},QR:{id:"qr",label:a.intl.formatMessage({id:"Y+Foy6",defaultMessage:"QR code"}),content:a.intl.formatMessage({id:"heeSqP",defaultMessage:"Point your camera at the QR code to download Dropbox."}),buttonText:""}},zs=s.static_url("/static/metaserver/static/images/growth/personalization/download_app_qr_code_no_margin-vflidVVmZ.png"),Ks=({email:e,dontNotify:t=!1,loggingExtras:n={},sendEmailButtonRef:r,sendTextButtonRef:c,showPrimaryButton:d})=>{const u=qs.QR,p=qs.EMAIL,[g,m]=s.reactExports.useState(u.id),[h,_]=s.reactExports.useState(zs);s.reactExports.useEffect((()=>{d&&d(g!==qs.QR.id),function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=function(){const e=i.getActiveUser();if(e)return e;const t=i.Viewer.get_viewer().get_users();return t.length>0?t[t.length-1]:void 0}(),t=new i.DefaultUserApiV2Client(e),{image_src:o}=yield t.ns("growth").rpc("get_mobile_app_link_qr_image",void 0,{});return o}))}().then((e=>{_(e)}))}),[]);const f=(()=>{const[e,t]=s.reactExports.useState(null);return s.reactExports.useEffect((()=>{Os().then(t)}),[]),e})();return s.React$1.createElement("div",{className:"send-mobile-link"},s.React$1.createElement(J.Tabs,{selectedTab:g,onSelection:e=>{m(e),d&&d(e!==qs.QR.id)}},s.React$1.createElement(J.Tabs.Group,null,s.React$1.createElement(J.Tabs.Tab,{id:u.id},u.label),s.React$1.createElement(J.Tabs.Tab,{id:p.id},p.label)),s.React$1.createElement(J.Tabs.Panel,{tabId:qs.EMAIL.id},s.React$1.createElement("div",{className:"input-container"},s.React$1.createElement(i.Text,{tagName:"label",htmlFor:"email-input",size:"small",isBold:!0},qs.EMAIL.content),s.React$1.createElement(i.TextInput,{id:"email-input",size:"large",value:e,withRightAccessory:s.React$1.createElement(i.UIIcon,{src:i.LockLine}),disabled:!0})),s.React$1.createElement(i.Button$1,{className:"setup-button",variant:"primary",size:"large",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const o={ctaName:"email_link"};try{i.TeamsWebActionsLogger.log("send_mobile_app_link",Object.assign(Object.assign({},n),{cta_shown:"email_link",sent_address:e})),yield i.WebRequest$2({url:"/email_mobile_app",data:{recipient_email:e}}),o.success="true",t||l.Notify.success(a.intl.formatMessage(Hs,{email:e}))}catch(e){o.success="false",t||l.Notify.error(a.intl.formatMessage(Ys))}finally{le.SMBFunnelLogger.log(le.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,o)}})),ref:r,style:{display:r?"none":void 0}},qs.EMAIL.buttonText),!!r&&s.React$1.createElement("div",{style:{height:2}}),s.React$1.createElement("div",{className:"notification-message"},s.React$1.createElement(i.Text,{tagName:"span",color:"faint"},a.intl.formatMessage({id:"hHhhyq",defaultMessage:"Double check your spam folder."})))),s.React$1.createElement(J.Tabs.Panel,{tabId:qs.PHONE.id},s.React$1.createElement("div",{className:"input-container"},f?s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Text,{tagName:"label",size:"small",isBold:!0},qs.PHONE.content),s.React$1.createElement(se.SendAppLinkForm,{phoneInputData:f,onStatusChange:e=>{const{phoneNumber:o,sendStatus:s}=e;s===se.SendStatus.SENDING?i.TeamsWebActionsLogger.log("send_mobile_app_link",Object.assign(Object.assign({},n),{cta_shown:"text_link",sent_address:o})):s===se.SendStatus.SUCCESS?le.SMBFunnelLogger.log(le.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,{ctaName:"text_link",success:"true"}):s===se.SendStatus.FAILURE&&le.SMBFunnelLogger.log(le.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,{ctaName:"text_link",success:"false"}),t||se.showStatusUsingNotify(e)},size:"large",SubmitButton:()=>s.React$1.createElement(i.Button$1,{className:"setup-button",variant:"primary",size:"large",type:"submit",ref:c,style:{display:c?"none":void 0}},qs.PHONE.buttonText),formTypes:[se.SendAppLinkFormType.SMS],buttonPosition:se.SendAppLinkButtonPosition.BOTTOM,isFullWidth:!0})):s.React$1.createElement("div",{style:{textAlign:"center"}},s.React$1.createElement(i.Spinner,{"aria-valuetext":"Loading"}))),!!f&&s.React$1.createElement(se.SendAppLinkFormDisclaimer,{size:"large",color:"faint"})),s.React$1.createElement(J.Tabs.Panel,{tabId:qs.QR.id},s.React$1.createElement("div",{className:"input-container"},s.React$1.createElement("div",{className:"qr-code-container"},s.React$1.createElement("img",{className:"qr-code-img",alt:a.intl.formatMessage({id:"downloadAppQRCodeImageAlt",defaultMessage:"Download Dropbox using this QR code"}),src:h}),s.React$1.createElement("div",{className:"qr-code-text-container"},s.React$1.createElement(i.Text,{tagName:"p",size:"standard"},qs.QR.content)))))))};Ks.displayName="SendMobileLinkWithoutCss";const Qs=i.requireCssWithComponent(Ks,["/static/metaserver/static/css/admin/teams/essential_setup/send_mobile_link-vflGQi7zO.css"]);class Xs extends s.React$1.PureComponent{constructor(e){super(e),this.submitButtonRef=s.React$1.createRef(),this.showPrimaryButton=e=>{this.setState({showPrimaryButton:e})},this.closeModal=()=>{this.props.onDismiss()},this.submit=()=>{this.submitButtonRef.current&&this.submitButtonRef.current.click(),this.props.dismissAfterSubmit&&this.closeModal()},this.state={showPrimaryButton:!0}}render(){const{linkedEmail:e,loggingExtras:t,showSendMobileLinkModal:o}=this.props;return s.React$1.createElement(i.Modal$1,{className:"send-mobile-link-modal",open:o,width:"small",onRequestClose:this.closeModal},s.React$1.createElement(i.Modal$1.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(i.Title,null,a.intl.formatMessage({id:"HzJQla",defaultMessage:"How should we send the download link to your mobile device?"}))),s.React$1.createElement(i.Modal$1.Body,null,s.React$1.createElement(Qs,{email:e,sendTextButtonRef:this.submitButtonRef,sendEmailButtonRef:this.submitButtonRef,loggingExtras:t,showPrimaryButton:this.showPrimaryButton})),s.React$1.createElement(i.Modal$1.Footer,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:this.closeModal},a.intl.formatMessage({id:"kB1zBv",defaultMessage:"Close"})),this.state.showPrimaryButton&&s.React$1.createElement(i.Button$1,{variant:"primary",onClick:this.submit},a.intl.formatMessage({id:"wHAaDF",defaultMessage:"Send me a link"}))))}}Xs.displayName="SendMobileLinkModal";let Js=null;class Zs extends s.React$1.PureComponent{constructor(e){super(e),this.handleDismissSendMobileLinkModal=()=>{this.setState({showSendMobileLinkModal:!1})},this.handleHideOpenInMobileSnackbar=()=>{this.setState({showOpenInMobileSnackbar:!1})},this.state={isSendingNotification:!1,showSendMobileLinkModal:!1,showOpenInMobileSnackbar:!1,dismissSendMobileLinkModalAfterSubmit:!1}}componentDidMount(){Js||(Js=this)}componentWillUnmount(){Js=null}render(){const{showSendMobileLinkModal:e,showOpenInMobileSnackbar:t}=this.state,o=this.props.user&&s.React$1.createElement(Xs,{linkedEmail:this.props.user.email,showSendMobileLinkModal:e,onDismiss:this.handleDismissSendMobileLinkModal,dismissAfterSubmit:this.state.dismissSendMobileLinkModalAfterSubmit,loggingExtras:rs}),n=s.React$1.createElement(i.Snackbar$1,{className:"open-in-mobile-snackbar",open:t,onRequestClose:this.handleHideOpenInMobileSnackbar,timeout:0},s.React$1.createElement(i.Text,{inverse:!0},s.React$1.createElement(i.UIIcon,{className:"open-in-mobile-snackbar__icon",src:i.CheckmarkCircleLine})),s.React$1.createElement(i.Snackbar$1.Message,null,a.intl.formatMessage({id:"U/fUL+",defaultMessage:"Check your device for a notification"})),s.React$1.createElement(i.Snackbar$1.Actions,null,s.React$1.createElement(i.Button$1,{variant:"transparent",inverse:!0,onClick:()=>{var e;return this.sendNotificationToPhone((null===(e=this.props.folder)||void 0===e?void 0:e.fq_path)||"/",this.state.campaign)}},a.intl.formatMessage({id:"A+nrfT",defaultMessage:"Send it again"})),s.React$1.createElement(i.Button$1,{variant:"transparent",inverse:!0,onClick:this.handleHideOpenInMobileSnackbar},a.intl.formatMessage({id:"JBINyn",defaultMessage:"Close"}))));return s.React$1.createElement(s.React$1.Fragment,null,o,n)}sendNotificationToPhone(e,t){return o.__awaiter(this,void 0,void 0,(function*(){this.setState({isSendingNotification:!0,campaign:t});try{const o=new i.DefaultUserApiV2Client(this.props.user),{success:s}=yield o.ns("growth").rpc("send_open_mobile_app_notification",{folder_path:e,campaign:t},{});if(!s)throw new Error("Not sent");this.setState({showOpenInMobileSnackbar:!0})}catch(e){this.setState({showSendMobileLinkModal:!0})}finally{this.setState({isSendingNotification:!1})}}))}showMobileLinkModal(e=!1){this.setState({showSendMobileLinkModal:!0,dismissSendMobileLinkModalAfterSubmit:e})}}Zs.displayName="OpenInMobileModal";class ea extends s.React$1.PureComponent{static sendNotificationToPhone(e,t){return o.__awaiter(this,void 0,void 0,(function*(){Js&&!Js.state.isSendingNotification&&(yield Js.sendNotificationToPhone(e,t))}))}static showMobileLinkModal(e=!1){Js&&!Js.state.showSendMobileLinkModal&&Js.showMobileLinkModal(e)}render(){return s.React$1.createElement(Zs,Object.assign({},this.props))}}function ta(e){return{class:"navigation",action:"select",object:"content_right_click",properties:e}}ea.displayName="OpenInMobileModalController";const oa=()=>({logOverflowMenuImpression:sa,logMoreActionsCtaClicked:aa,logSuggestedWorkflowItemClicked:ia}),sa=(e,t)=>{i.logEvent({class:"file_actions",action:"shown",object:"suggested_workflows_overflow_menu",properties:{experimentVariant:e,fileType:pe.getFileTypeFromString(t)}})},aa=(e,t)=>{i.logEvent({class:"file_actions",action:"click",object:"suggested_workflows_more_actions",properties:{experimentVariant:e,fileType:pe.getFileTypeFromString(t)}})},ia=(e,t,o,s)=>{i.logEvent({class:"file_actions",action:"click",object:"suggested_workflows_menu_item",properties:{experimentVariant:e,fileType:pe.getFileTypeFromString(t),overflowMenuStyle:o,overflowMenuActionType:s}})},na=ho(),ra={selectedFilesSelector:i.selectedFiles$1,userSelector:i.user$1,contextSelector:i.context,overQuotaDataSelector:bo,experimentSelector:Mo,isSearchMode:!1,actionSurface:i.ActionSurfaceLogValue.ACTION_BAR,currentFolderInfo:i.getCurrentFolderInfo,flowsUserAutomation:$.getUserAutomation,browsePostTTIData:i.browsePostTTIData,browsePostTTIExperiments:i.browsePostTTIExperiments,hasLinkedMobile:i.hasLinkedMobile,accessibilityConfig:e=>na(e,ra),rightRailCollapsedState:i.isRightRailCollapsed,isInsideBackupFolder:i.isInsideBackupFolder,isSelectedBackupFolder:i.isSelectedBackupFolder,backupInfoByFile:i.folderBackupInfoByFile,backupInfoByPath:i.folderBackupInfoByPath},la=_o(),ca=y.createActionBarActionSelector(),da={handleAction:y.actionHandler,handleActionMenuToggle:y.actionMenuToggleHandler,setOverflowMenuCoordinates:k.setOverflowMenuCoordinates,setOverflowMenuOpenRequest:k.setOverflowMenuOpenRequest,setOverflowMenuCloseRequest:k.setOverflowMenuCloseRequest,setCreateMenuOpenRequest:k.setCreateMenuOpenRequest,setCaptureAccess:L.setCaptureAccess};class ua extends s.React$1.Component{constructor(){super(...arguments),this.state={overflowMenuOpenRequest:void 0},this.actionHandler={handleAction:(e,t)=>{e.event.stopPropagation(),t?ra.actionSurface=i.ActionSurfaceLogValue.RIGHT_CLICK_MENU:e.source===S.ActionBarActionEventSource.BUTTON||e.source===S.ActionBarActionEventSource.BUTTON_MENU?ra.actionSurface=i.ActionSurfaceLogValue.ACTION_BAR:ra.actionSurface=i.ActionSurfaceLogValue.OVERFLOW_MENU,this.props.handleAction(e,ra,wo)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},ra,To)}},this.onOverflowMenuToggle=e=>{if(e.isOpen){const{num_files_selected:e,num_folders_selected:t}=i.countFilesAndFolders(this.props.selectedFiles);i.logBrowseAction({uid:this.props.user.id,action:i.WebUserActionLogEvent.OPEN_OVERFLOW_MENU,num_files_selected:e,num_folders_selected:t,action_surface:this.props.overflowMenuCoordinates?i.ActionSurfaceLogValue.RIGHT_CLICK_MENU:i.ActionSurfaceLogValue.ACTION_BAR}),this.props.overflowMenuCoordinates?i.logEvent(ta({actionSurface:"browse_screen",actionElement:"content"})):i.logEvent(ue.PAP_Select_ActionBarOverflowMenu({actionSurface:"browse_screen",actionElement:"action_bar"})),this.props.setOverflowMenuCloseRequest()}else this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest()},this.resetOverflowMenuCoordinates=(e,t)=>{this.props.overflowMenuCoordinates&&(this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest({autoFocus:!1})),(null==t?void 0:t.size)&&e.stopPropagation()}}componentDidMount(){void 0===this.props.canAccessCapture&&ue.fetchCaptureAccess(this.props.user).then((e=>{this.props.setCaptureAccess(e)}))}render(){const{browseActionBarActions:e,accessibilityConfig:t,responsive:o,path:n,selectedFiles:r,user:l,showSharingView:c,selectedOrCurrentFolder:d,showBrowseViewToggle:u,overflowMenuTitle:p,canShowSelectionIndicatorInToolbar:g,isRightRailCollapsed:m,overflowMenuOpenRequest:h,overflowMenuCloseRequest:_,overflowMenuCoordinates:f,createMenuOpenRequest:E,setCreateMenuOpenRequest:v,expSuggestedWorkflowsVariant:R}=this.props,y=o.isResponsive?o.isMatchedLarge?S.ResponsiveSize.DESKTOP:o.isMatchedMedium?S.ResponsiveSize.TABLET:S.ResponsiveSize.MOBILE:S.ResponsiveSize.DESKTOP,w=g?s.React$1.createElement("div",{className:"family-brws-selection-view-mode-container"},s.React$1.createElement(de.SelectionIndicator,{responsive:o,selectedFilesCount:r.size,rightRailCollapsed:m}),s.React$1.createElement(Fo,{user:l,className:"brws-action-toolbar-view-mode-toggle"})):s.React$1.createElement(Fo,{user:l,className:"brws-action-toolbar-view-mode-toggle"}),T=1===r.size?r.first().ext:void 0;return s.React$1.createElement("div",{className:i.cx("brws-action-toolbar"),style:{width:this.props.fixedWidth},onClick:e=>this.resetOverflowMenuCoordinates(e,r)},s.React$1.createElement(Io,{path:n,selectedFiles:r}),s.React$1.createElement(A.ActionBar,{className:"brws-action-toolbar-actionbar",actionHandler:this.actionHandler,actions:e,intl:a.intl,responsive:!0,responsiveSize:y,accessibilityConfig:t,handleOverflowMenuToggle:this.onOverflowMenuToggle,overflowMenuOpenRequest:h,overflowMenuCloseRequest:_,overflowMenuTitle:p,expActionBarRedesignEnabled:!0,overflowMenuCoordinates:f,hideOverflowMenuHeader:!1,resolveOverflowMenuOpenRequest:()=>{this.props.setOverflowMenuOpenRequest(void 0)},canShowSelectionIndicatorInToolbar:g,createMenuOpenRequest:E,resolveCreateMenuOpenRequest:()=>{v()},expSuggestedWorkflowsVariant:R,expSuggestedWorkflowsLoggingCallbacks:oa(),fileExtension:T,logPDFEditImpression:()=>{i.logPDFEditImpression$1(l.id,r,f?i.ActionSurfaceLogValue.RIGHT_CLICK_MENU:i.ActionSurfaceLogValue.ACTION_BAR)},logOverflowMenuItemImpression:e=>{i.logOverflowMenuItemImpression$1(l.id,r,f?i.ActionSurfaceLogValue.RIGHT_CLICK_MENU:i.ActionSurfaceLogValue.ACTION_BAR,e)}}),c&&s.React$1.createElement("div",{className:"brws-action-toolbar-sharing-view-container"},s.React$1.createElement(is,{useCompactMode:y!==S.ResponsiveSize.DESKTOP})),u&&w,s.React$1.createElement(ea,{folder:d,user:l}))}}ua.displayName="BrowseActionToolbarController";const pa=i.connect(((e,t)=>{var o;const s=i.user$1(e),n=i.context(e),r=i.selectedFiles$1(e).toList(),l=i.backups(e),c=null===(o=null==l?void 0:l.find((e=>e.fqPath===n.currentFQPath)))||void 0===o?void 0:o.displayName,d=l&&r.isEmpty()&&c?c:ce.getTitle(r,s,n,a.intl),u=t.responsive.isResponsive&&!t.responsive.isMatchedLarge&&!t.responsive.isMatchedMedium,p=t.responsive.isResponsive&&!t.responsive.isMatchedLarge&&t.responsive.isMatchedMedium,g=u?vo:p?Eo:la,m=ra.accessibilityConfig?ra.accessibilityConfig(e):void 0,h=ra.selectedFilesSelector(e),_=1===h.count()&&h.first().is_dir?h.first():ra.currentFolderInfo(e);return i.isRightClickMenuOpen(e)&&(ra.actionSurface=i.ActionSurfaceLogValue.RIGHT_CLICK_MENU),{browseActionBarActions:ca(e,ra,g,po),user:s,accessibilityConfig:m,selectedFiles:i.selectedFiles$1(e),path:i.path$1(e),showBrowseViewToggle:i.showBrowseViewToggleInToolbar(e),showSharingView:i.showShareViewInToolbar(e,t.responsive),fileActionsExperiments:ra.experimentSelector(e),selectedOrCurrentFolder:_,overflowMenuTitle:d,canShowSelectionIndicatorInToolbar:i.showSelectionIndicatorInToolbar(e),isRightRailCollapsed:i.isRightRailCollapsed(e),overflowMenuOpenRequest:i.overflowMenuOpenRequest(e),overflowMenuCloseRequest:i.overflowMenuCloseRequest(e),overflowMenuCoordinates:i.overflowMenuCoordinates(e),createMenuOpenRequest:i.createMenuOpenRequest(e),canAccessCapture:L.getCaptureAccess(e),expSuggestedWorkflowsVariant:i.expSuggestedWorkflowsVariant(e)}}),da)(ua),ga=({responsive:e,fixedWidth:t})=>{const o=i.useSelector(i.context),a=i.useSelector(i.browseLoadingState),n=void 0!==t?t+28+16:t;return s.React$1.createElement(s.React$1.Fragment,null,"/"===o.currentFQPath?s.React$1.createElement(wt,{canRenderItems:!0,isOnBrowse:!0}):null,a===i.LoadingState.LOADING_FIRST_PAGE&&s.React$1.createElement("div",{className:"brws-action-toolbar"},s.React$1.createElement("div",{className:"brws-action-toolbar-loading"})),[i.LoadingState.LOADED,i.LoadingState.LOAD_ERROR,i.LoadingState.LOADING_REMAINING_PAGES,i.LoadingState.UPDATING_FILTERED_VIEW].includes(a)&&!o.isInsideVaultFolder&&!o.isInFamilySharedFolder&&s.React$1.createElement(pa,{responsive:e,fixedWidth:n}))};i.injectInternalStyle("metaserver/static/js/browse/filtered_view/empty_state.module.out.css",(e=>"._emptyContainer_upjf8_1{display:flex;flex-direction:row;height:282px;justify-content:center;width:80%}._emptyContainerResponsive_upjf8_9{align-items:center;flex-direction:column;margin-right:28px;margin-top:80px}._emptyContent_upjf8_16{align-items:flex-start;display:flex;flex-direction:column;justify-content:center;padding:var(--spacing__unit--2)}._contentText_upjf8_24{margin:var(--spacing__unit--2) 0}._imageResponsive_upjf8_28{width:250px}"));const ma="_emptyContainer_upjf8_1",ha="_emptyContainerResponsive_upjf8_9",_a="_emptyContent_upjf8_16",fa="_contentText_upjf8_24",Ea="_imageResponsive_upjf8_28",va=({selectedFilter:e,responsive:t})=>{if(e===i.BrowseFilterType.NONE)return null;const o=i.EMPTY_STATE_CONFIG[e];return s.React$1.createElement("div",{className:i.cx({[ma]:!0,[ha]:!t.isMatchedMedium})},s.React$1.createElement(i.Image$1,{className:i.cx({[Ea]:!t.isMatchedMedium}),src:o.illustrationUrl,srcHiRes:o.illustrationHiResUrl,alt:""}),s.React$1.createElement("div",{className:_a},s.React$1.createElement(i.Title,null,o.title),s.React$1.createElement(i.Text,{className:fa},o.subtitle),s.React$1.createElement(i.Button$1,{onClick:()=>{i.getStoreForBrowse().dispatch(k.setFilterTypes([]))},variant:"outline"},i.EMPTY_STATE_CTA_BUTTON)))},Aa="popstate";const Sa=new class{constructor(){this.navigationHistory=[],this.onPopState=()=>{const e=this.peekItem(1);e&&e.url===i.get_href()?this.wasLastNavigationBack=!0:(this.wasLastNavigationBack=!1,this.clear())}}clear(){this.navigationHistory=[]}popItem(){return this.navigationHistory.pop()}pushItem(e){this.navigationHistory.push(e)}peekItem(e=0){if(this.navigationHistory.length>e)return this.navigationHistory[this.navigationHistory.length-1-e]}register(){window.addEventListener(Aa,this.onPopState),this.navigationHistory=[]}unregister(){window.removeEventListener(Aa,this.onPopState),this.navigationHistory=[]}getLastScrollPosition(e){if(this.wasLastNavigationBack||this.pushItem({url:i.get_href(),fq_path:e}),this.wasLastNavigationBack){this.wasLastNavigationBack=!1;const e=this.popItem();return e&&e.fq_path}if(this.wasNavigateUpFolder){this.wasNavigateUpFolder=!1;const e=this.peekItem(1);return e&&e.fq_path}}navigateUpFolder(){this.wasNavigateUpFolder=!0}},Ra=({width:e})=>s.React$1.createElement("img",{"aria-hidden":"true",src:s.static_url("/static/metaserver/static/images/file_imports/google_drive_icon-vfl1z5-Cq.svg"),width:e}),ya=({width:e})=>s.React$1.createElement("img",{"aria-hidden":"true",src:s.static_url("/static/metaserver/static/images/file_imports/microsoft_onedrive_icon-vflLR7ql-.svg"),width:e});function wa(e){return{class:"files_browser",action:"select",object:"import_empty_state",properties:e}}const Ta=["google","google_drive","google_photos","one_drive","icloud","microsoft"];function ba(e){return Ta.find((t=>t===(null==e?void 0:e.toLowerCase())))}const Ma=({children:e,popoverOptions:t,buttonVariant:o="transparent",withIconLeft:a})=>1===t.length?s.React$1.createElement(i.Button$1,{className:"empty-state-drop-target__cta",onClick:t[0].handleClick,variant:"primary"},e):s.React$1.createElement(i.Menu.Wrapper,{onSelection:({handleClick:e})=>{e()},className:"empty-state-drop-target__cta"},(({getContentProps:n,getTriggerProps:r})=>s.React$1.createElement(s.React$1.Fragment,null,a?s.React$1.createElement(i.Button$1,Object.assign({withIconLeft:s.React$1.createElement(i.UIIcon,{src:a}),variant:o},r()),e):s.React$1.createElement(i.Button$1,Object.assign({variant:o},r()),e),s.React$1.createElement(i.Menu.Content,Object.assign({},n()),s.React$1.createElement(i.Menu.Segment,null,t.map(((e,t)=>s.React$1.createElement(i.Menu.ActionItem,{key:t,value:e,className:`popover-option__${String(e.iconName)}`,withLeftAccessory:s.React$1.createElement(i.UIIcon,{src:e.iconSrc,className:"cta-option-block__icon"})},s.React$1.createElement(i.Text,null,e.displayName)))))))));Ma.displayName="TertiaryLinkPopover";const Ia=()=>"V1"===_.DEFAULT_DRAG_AND_DROP||"V2"===_.DEFAULT_DRAG_AND_DROP,Fa=({isDraggingFiles:t,onMount:o,popoverOptions:n,IconComponent:r=i.SpotIcon,children:l})=>{var c;s.reactExports.useEffect((()=>{o(),i.OALogger.logToProEvents(i.FileListEmptyUploadEvents.VIEW_EMPTY_STATE)}),[]);const{description:d,buttonText:u,googleDriveButtonText:p,onedriveButtonText:g,fileImportsOrText:m}={description:a.intl.formatMessage({id:"c36Skn",defaultMessage:"Drag files and folders here to upload"}),buttonText:Ia()?"":a.intl.formatMessage({id:"hCAGEJ",defaultMessage:"Add from computer"}),googleDriveButtonText:a.intl.formatMessage({id:"6jhwNV",defaultMessage:"Add from Google Drive"}),onedriveButtonText:a.intl.formatMessage({id:"o1L7D0",defaultMessage:"Add from Microsoft OneDrive"}),fileImportsOrText:a.intl.formatMessage({id:"NRKTKN",defaultMessage:"or"})},h=i.useSelector((e=>i.getBrowseState(e))),{fileImportsEntryPointsEmptyState:_}=h.experiments,f=()=>{i.logEvent(wa({actionSurface:"browse",experimentVariant:_,externalProvider:ba("google_drive")})),new Promise((function(t,o){e(["./c_file_imports_ui_entry"],t,o)})).then((e=>{e.clickOnImportFromGoogleDrive({currentPath:h.path})}))},E=(null===(c=h.user)||void 0===c?void 0:c.cdm_tmf_path)||"/",v=h.path===E?_:"OFF",A=i.useSelector(me.getIsDropzoneActive);return s.reactExports.useEffect((()=>{"V1"!==v&&"V2"!==v&&"V3"!==v||(i.logEvent({class:"files_browser",action:"shown",object:"import_empty_state",properties:{actionSurface:"browse",experimentVariant:v}}),i.logExposure({feature:"file_imports_entry_points_empty_state",variant:v}))}),[v]),s.React$1.createElement("div",{className:i.cx("empty-state-drop-target",{"empty-state-drop-target--drag-active":t&&!Ia(),"empty-state-drop-target--drag-available":!t&&!A,"empty-state-drop-target--drag-active-blue":A&&Ia()})},s.React$1.createElement("div",{className:"empty-state-drop-target__copy"},Ia()?s.React$1.createElement("div",{style:{paddingTop:"100px"}},s.React$1.createElement(i.Text,{color:"faint"},s.React$1.createElement(r,{src:i.UploadFolderSpot}),s.React$1.createElement("div",null,s.React$1.createElement("strong",null,a.intl.formatMessage({id:"OxWWfA",defaultMessage:"Drop files here to upload,"}))," ",s.React$1.createElement("br",null)," ",a.intl.formatMessage({id:"zvJBaT",defaultMessage:"or use the 'Upload' button"})))):s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(r,{className:"empty-state-drop-target__icon",src:i.UploadFolderSpot}),s.React$1.createElement("div",{className:"empty-state-drop-target__text"},d," ")," "),"V1"===v?s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_buttons_v1"},s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:f},p),s.React$1.createElement("div",null,m),s.React$1.createElement(Ma,{buttonVariant:"transparent",popoverOptions:n},u)):"V2"===v?s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_buttons_v2"},s.React$1.createElement(i.Button$1,{withIconLeft:s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_icon"},s.React$1.createElement(Ra,null)),variant:"opacity",onClick:f},p),s.React$1.createElement(Ma,{withIconLeft:i.AddLine,buttonVariant:"outline",popoverOptions:n},u)):"V3"===v?s.React$1.createElement("div",{className:"empty-state-drop-target__imports_buttons_v3"},s.React$1.createElement(i.SplitButton,{withIconLeft:s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_icon"},s.React$1.createElement(Ra,null)),renderMenu:({buttonProps:t})=>s.React$1.createElement(i.Menu.Wrapper,{onSelection:t=>{"onedrive"===t&&(i.logEvent(wa({actionSurface:"browse",experimentVariant:_,externalProvider:ba("one_drive")})),new Promise((function(t,o){e(["./c_file_imports_ui_entry"],t,o)})).then((e=>{e.clickOnImportFromOneDrive({currentPath:h.path})})))}},(({getTriggerProps:e,getContentProps:o})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,Object.assign({"aria-label":"Show options"},t,e())),s.React$1.createElement(i.Menu.Content,Object.assign({},o(),{placement:"bottom-end"}),s.React$1.createElement(i.Menu.Segment,null,s.React$1.createElement(i.Menu.ActionItem,{key:"onedrive",value:"onedrive",withLeftAccessory:s.React$1.createElement(i.UIIcon,{src:ya})},g)))))),variant:"opacity",onClick:f},p),s.React$1.createElement(Ma,{withIconLeft:i.AddLine,buttonVariant:"outline",popoverOptions:n},u)):s.React$1.createElement("div",{className:"empty-state-drop-target__button"},s.React$1.createElement(Ma,{popoverOptions:n},u))),l&&s.React$1.createElement("div",{className:"empty-state-drop-target__children"},l))};Fa.displayName="EmptyStateDropTarget";const Ca=e=>{const t=i.getStoreForBrowse(),a=i.useSelector(i.overflowMenuCoordinates),n=i.useSelector(i.isValidEnhancedRightClickVariant),r=()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield t.dispatch(k.setOverflowMenuCloseRequest({autoFocus:!1})),yield o.__awaiter(void 0,void 0,void 0,(function*(){yield t.dispatch(k.setOverflowMenuCoordinates(void 0)),yield t.dispatch(k.setOverflowMenuOpenRequest(void 0)),yield t.dispatch(k.setOverflowMenuCloseRequest(void 0))}))})),l=e=>{e.key!==i.Key_enum.Key.Escape&&27!==e.keyCode||r()};return s.React$1.useEffect((()=>(window.addEventListener("keydown",l,!0),()=>{window.removeEventListener("keydown",l)})),[]),s.React$1.createElement("div",{onClick:e=>{r()},onContextMenu:e=>o.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const{clientX:o,clientY:s}=e;a&&(yield r()),setTimeout((()=>{t.dispatch(k.setOverflowMenuCoordinates([o,s])),t.dispatch(k.setOverflowMenuOpenRequest({autoFocus:!1}))}),200)})),className:i.cx({"maestro-browse-app-content--full-height-container":n})},e.children)};Ca.displayName="BrowseRightClickActionMenu";const Oa=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{InFolderActivationPartialStateErrorBoundary:t}=yield new Promise((function(t,o){e(["./c_in-folder-activation_in_folder_activation"],t,o)}));return t}))}),Na=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{InFolderActivationEmptyStateDropTargetErrorBoundary:t}=yield new Promise((function(t,o){e(["./c_in-folder-activation_in_folder_activation"],t,o)}));return t}))});class Da{constructor(e,t){this.uid=e,this.targetPath=t}logPredictionEvent(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){const o=Math.round(Date.now()/1e3),a=t?e.map((e=>({prediction_uuid:e.predictionId,utc_timestamp:o}))):void 0,i=s?e.map((e=>({action:s,prediction_uuid:e.predictionId,utc_timestamp:o}))):void 0;yield(new Ee.TeamApiV2Client).ns("ml_platform").rpc("log_predictions_events",{predict_requested:void 0,viewed:a,actioned:i},{subjectUserId:this.uid})}))}logOpenSuggestedItem(e,t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.WebUserActionLogEvent.SUGGEST_OPEN_SUGGESTED_ITEM;yield i.WebUserActionLog.log(this.uid,o,{source:a,position:s,clickOrigin:t,isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:i.depth(this.targetPath)}),yield this.logPredictionEvent([e],void 0,o)}))}logOpenParentFolder(e,t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){const t=i.WebUserActionLogEvent.SUGGEST_OPEN_PARENT_FOLDER;yield i.WebUserActionLog.log(this.uid,t,{source:a,position:s,clickOrigin:"parent-folder",isDir:!0,suggestId:e.suggestId,mlModel:e.mlModel,depth:i.depth(this.targetPath)}),yield this.logPredictionEvent([e],void 0,t)}))}logClickDismissSuggestedItem(e,t,o,s){i.WebUserActionLog.log(this.uid,i.WebUserActionLogEvent.SUGGEST_CLICK_DISMISS_SUGGESTED_ITEM,{source:s,position:o,clickOrigin:"dismiss-suggested-item",isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:i.depth(this.targetPath)})}logDismissSuggestedItem(e,t,o,s,a){const n=i.WebUserActionLogEvent.SUGGEST_DISMISS_SUGGESTED_ITEM;i.WebUserActionLog.log(this.uid,n,{source:a,position:o,clickOrigin:"dismiss-suggested-item",isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:i.depth(this.targetPath)}),this.logPredictionEvent([e],void 0,n)}logSuggestedShown(e,t,o,s){i.WebUserActionLog.log(this.uid,i.WebUserActionLogEvent.SUGGEST_SECTION_SHOWN,{source:s,items_shown:o,num_items:e,variant:t,depth:i.depth(this.targetPath)})}logShowHideSection(e,t){e?i.WebUserActionLog.log(this.uid,i.WebUserActionLogEvent.SUGGEST_HIDE_SECTION,{source:t,depth:i.depth(this.targetPath)}):i.WebUserActionLog.log(this.uid,i.WebUserActionLogEvent.SUGGEST_UNHIDE_SECTION,{source:t,depth:i.depth(this.targetPath)})}logSectionRendered(e,t,o){i.WebUserActionLog.log(this.uid,i.WebUserActionLogEvent.SUGGEST_SECTION_RENDERED,{renderTimeMS:e,source:t,depth:i.depth(this.targetPath),variant:o})}logRenderedSuggestedItems(e,t){const o=i.WebUserActionLogEvent.SUGGEST_RENDER_SUGGESTED_ITEM;for(let s=0;s<e.length;s++){const a=e[s];i.WebUserActionLog.log(this.uid,o,{source:t,index:s,isDir:a.isDir,suggestId:a.suggestId,mlModel:a.mlModel,depth:i.depth(this.targetPath),client:a.clientType})}this.logPredictionEvent(e,o,void 0)}}const Pa=(e,t)=>new Promise(((s,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){try{const o=yield function(e,t){const o=t.map((e=>({id:e.resourceId,type:i.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID})));return new Promise(((t,s)=>{i.SilentBackgroundRequest$2({url:"/home_feed/get_file_metadata",type:"POST",subject_user:e.id,dataType:"json",data:{resources_json:JSON.stringify(o)},success:e=>{t(e)},error:e=>{s(e)}})}))}(e,t),a=new Map;for(const e of o)a.set(La(e.id),e.file_metadata);s(a)}catch(e){a(e)}}))));const La=e=>e,xa=new class{constructor(){this.getCache=()=>o.__awaiter(this,void 0,void 0,(function*(){return this.cache})),this.prewarm=(e,t)=>o.__awaiter(this,void 0,void 0,(function*(){return this.cache=Pa(e,t),this.cache.then((()=>{}))})),this.getFileMetadata=e=>this.getCache().then((t=>t.get(e)))}},ka={num_items:i.DEFAULT_NUM_ITEMS_TO_FETCH,accepted_types:i.DEFAULT_ACCEPTED_TYPES,client_type:i.CLIENT_TYPE},Ba=s.reactExports.createContext(null),Ua=({user:e,fetchSuggestedItemsInFolder:t,source:o,trackDismissSuggestedItem:a,openSuggestedItem:n,openSuggestedParent:r,folderPathString:l,prefetchSuggestedItems:c,children:d,_logger:u})=>{var p;const g=i.getFolderPath(l),m=i.useQueryClient(),[h,_]=s.reactExports.useState(i.SuggestLoadingState.PREFETCHING),[f,E]=s.reactExports.useState([]),[v,A]=s.reactExports.useState(null!==(p=i.UserLocalStorage.get(e.id,i.SUGGEST_SECTION_IS_HIDDEN_LOCAL_STORAGE_KEY))&&void 0!==p&&p),[S,R]=s.reactExports.useState(null),[y,w]=s.reactExports.useState(g),T=s.reactExports.useMemo((()=>null!=u?u:new Da(e.id,y)),[u,e,y]),b=s.reactExports.useCallback((t=>{const{items:o,modelVariant:s}=t;R(s),E(o),_(i.SuggestLoadingState.SUCCESS),xa.prewarm(e,o)}),[e,R,E,_]),M=s.reactExports.useCallback((()=>{_(i.SuggestLoadingState.FAILURE)}),[_]),I=s.reactExports.useCallback((()=>{i.browseContentSuggestionsRequestPackage.invalidateQueries(m,Object.assign(Object.assign({},ka),{folder_path:g}))}),[m,g]),F=s.reactExports.useCallback((()=>{A((t=>{const s=!t;return i.UserLocalStorage.set(e.id,i.SUGGEST_SECTION_IS_HIDDEN_LOCAL_STORAGE_KEY,s),I(),T.logShowHideSection(s,o),s}))}),[A,T,o,e.id,I]),C=s.reactExports.useCallback(((e,t)=>(I(),a(e,t,o).then((()=>{E((e=>e.map((e=>Object.assign(Object.assign({},e),{isDismissed:e.key===t.key})))))})))),[E,a,o,I]),O=s.reactExports.useCallback((e=>()=>{e.isDismissed&&(E((t=>t.filter((t=>t.key!==e.key)))),I())}),[E,I]);return s.reactExports.useEffect((()=>{h!==i.SuggestLoadingState.PREFETCHING&&(_(i.SuggestLoadingState.FETCHING),w(g))}),[g,w,_]),((e,t,o)=>{const a=i.browseContentSuggestionsRequestPackage.useQuery({apiArg:Object.assign(Object.assign({},ka),{folder_path:e})});s.reactExports.useEffect((()=>{a.isError?o():(null==a?void 0:a.data)&&t(i.formatBrowseContentSuggestions(a.data.apiData))}),[null==a?void 0:a.data,a.isError,t,o])})(g,b,M),s.reactExports.createElement(Ba.Provider,{value:{loadingState:h,logger:T,isHiddenByUser:v,suggestedItems:f,onToggleSuggestVisibility:F,dismissSuggestedItem:C,removeSuggestionFromUi:O,user:e,source:o,modelVariant:S,openSuggestedItem:n,openSuggestedParent:r,currentFolderPath:g}},d)};Ua.displayName="SuggestionsContextProvider";const $a=()=>s.reactExports.useContext(Ba),Va=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{SuggestNonEmpty:t}=yield new Promise((function(t,o){e(["./c_content_suggestions_suggest_nonempty"],t,o)})).then((function(e){return e.suggest_nonempty_esnext}));return t})),loading:e=>s.React$1.createElement(fe.SuggestLoadingInner,Object.assign({},e))}),Ga=(e,t)=>{if(!t)return[...e];const o=[];for(const s of e)Wa(s,t)||o.push();return o},Wa=(e,t)=>{for(const o of t)if(ja(e,o))return!0;return!1},ja=(e,t)=>e.resourceId===t.resourceId,Ha=e=>{const t=$a(),o=i.useCvcInteractiveLogger("browse_content_suggestions"),a=i.useCvcPageRenderLogger("browse_content_suggestions"),n=s.React$1.useCallback((e=>{o(e),a(e)}),[o,a]),{trackedElementRef:r,startCvcMeasurement:l}=i.useComponentVisuallyCompleteCalculator("browse_content_suggestions",(null==t?void 0:t.currentFolderPath)||"",n,3e4);return s.React$1.useEffect((()=>{l()}),[null==t?void 0:t.currentFolderPath,l]),s.React$1.createElement("div",{ref:r},s.React$1.createElement(za,Object.assign({},e)))};Ha.displayName="SuggestComponentCVCReporter";const Ya=e=>{const t=((e,t)=>{const o=s.reactExports.useRef(null);return s.reactExports.useCallback((s=>{var a,i;const n=(null===(a=o.current)||void 0===a?void 0:a.containingFolderPath)!==s.containingFolderPath?null:o.current;!s.modelVariant||(null==n?void 0:n.suggestionAvailableCount)===s.suggestionAvailableCount&&(null==n?void 0:n.modelVariant)===s.modelVariant||e.logSuggestedShown(s.suggestionAvailableCount,s.modelVariant,s.suggestionSlotCount,t);const r=Ga(s.renderedItems,null==n?void 0:n.renderedItems);r.length>0&&e.logRenderedSuggestedItems(r,t),o.current=Object.assign(Object.assign({},s),{renderedItems:[...null!==(i=null==n?void 0:n.renderedItems)&&void 0!==i?i:[],...r]})}),[e,t])})(e.logger,e.source),[o,a]=s.React$1.useState(!1),n=s.React$1.useRef(Date.now());if(e.isHiddenByUser)return null;const r=()=>{if(!o){const t=Date.now()-n.current;e.logger.logSectionRendered(t,e.source,e.variant),a(!0)}},{itemsToShow:l,tileWidth:c,tileMarginRight:d,useTileWidthForCard:u,filenameMaxChars:p,shouldTruncateFilenameOnTileHover:g,filenameWidthAfterTruncation:m,subheaderLabelMaxChars:h,showIconsInsteadOfThumbnails:_,fileIconSize:f}=e.getLayoutFn?e.getLayoutFn(e.containerWidth,e.responsive,e.suggestedItems.length,i.isLoading(e.loadingState)):fe.getLayout(e.containerWidth);if(i.isLoading(e.loadingState))return s.React$1.createElement(fe.SuggestLoadingInner,{isHiddenByUser:e.isHiddenByUser,itemsToShow:l,tileWidth:c,tileMarginRight:d,suggestLoadingTile:e.suggestLoadingTile});if(e.loadingState===i.SuggestLoadingState.FAILURE)return r(),e.suggestEmpty?e.suggestEmpty({}):s.React$1.createElement(_e.SuggestEmpty,null);const E=e.suggestedItems.slice(0,l);return t({containingFolderPath:e.currentFolderPath,renderedItems:E,suggestionAvailableCount:e.suggestedItems.length,suggestionSlotCount:l,modelVariant:e.modelVariant}),0===l||0===e.suggestedItems.length?(r(),e.suggestEmpty?e.suggestEmpty({}):s.React$1.createElement(_e.SuggestEmpty,null)):_e.isBrowseSuggestionsSkipTTIEnabled(e.variant)?s.React$1.createElement(_e.SuggestNonEmpty,{logger:e.logger,user:e.user,source:e.source,dismissSuggestedItem:e.dismissSuggestedItem,removeSuggestionFromUi:e.removeSuggestionFromUi,tileWidth:c,tileMarginRight:d,useTileWidthForCard:u,suggestedItemsToShow:E,openSuggestedItem:e.openSuggestedItem,openSuggestedParent:e.openSuggestedParent,filenameMaxChars:p,shouldTruncateFilenameOnTileHover:g,filenameWidthAfterTruncation:m,subheaderLabelMaxChars:h,showIconsInsteadOfThumbnails:_,fileIconSize:f,markRenderTime:r,variant:e.variant}):s.React$1.createElement(Va,{logger:e.logger,user:e.user,source:e.source,dismissSuggestedItem:e.dismissSuggestedItem,removeSuggestionFromUi:e.removeSuggestionFromUi,tileWidth:c,tileMarginRight:d,useTileWidthForCard:u,suggestLoadingTile:e.suggestLoadingTile,suggestedItemsToShow:E,isHiddenByUser:e.isHiddenByUser,itemsToShow:l,openSuggestedItem:e.openSuggestedItem,openSuggestedParent:e.openSuggestedParent,filenameMaxChars:p,shouldTruncateFilenameOnTileHover:g,filenameWidthAfterTruncation:m,subheaderLabelMaxChars:h,showIconsInsteadOfThumbnails:_,fileIconSize:f,markRenderTime:r,variant:e.variant})};Ya.displayName="SuggestComponentInnerNoCss";const qa=e=>{const t=$a();if(!t)return s.React$1.createElement("div",null,"Error: Missing SuggestionsContext");const{loadingState:o,logger:a,isHiddenByUser:n,suggestedItems:r,dismissSuggestedItem:l,removeSuggestionFromUi:c,onToggleSuggestVisibility:d,user:u,source:p,modelVariant:g,openSuggestedItem:m,openSuggestedParent:h,currentFolderPath:_}=t;return s.React$1.createElement(fe.SuggestFrame,{isHiddenByUser:n,onHeightChanged:e.onHeightChanged},e.suggestHeader?e.suggestHeader({isHiddenByUser:n,buttonAction:d,isLoading:i.isLoading(o)}):s.React$1.createElement(fe.SuggestHeader,{isHiddenByUser:n,buttonAction:d}),s.React$1.createElement(Ya,{isHiddenByUser:n,loadingState:o,containerWidth:e.containerWidth,responsive:e.responsive,logger:a,suggestedItems:r,user:u,source:p,modelVariant:g,dismissSuggestedItem:l,removeSuggestionFromUi:c,openSuggestedItem:m,openSuggestedParent:h,currentFolderPath:_,suggestEmpty:e.suggestEmpty,suggestLoadingTile:e.suggestLoadingTile,getLayoutFn:e.getLayoutFn,variant:e.variant}))};qa.displayName="SuggestComponentNoCss";const za=i.requireCssWithComponent(qa,["/static/metaserver/static/css/home_access/main-vflENvd0-.css"]);var Ka,Qa,Xa;t.InFolderActivationExperiment=void 0,(Ka=t.InFolderActivationExperiment||(t.InFolderActivationExperiment={})).core_o21n_in_folder_activation_m2="core_o21n_in_folder_activation_m2",Ka.core_act_sharing_made_easy="core_act_sharing_made_easy",t.InFolderActivationM2Variant=void 0,(Qa=t.InFolderActivationM2Variant||(t.InFolderActivationM2Variant={})).OFF="OFF",Qa.CONTROL="CONTROL",Qa.V1="V1",Qa.V1_FILE_IMPORTS="V1_FILE_IMPORTS",t.SharingMadeEasyVariant=void 0,(t.SharingMadeEasyVariant||(t.SharingMadeEasyVariant={})).V1="V1",function(e){e.BASIC="BASIC",e.PLUS="PLUS",e.PROFESSIONAL="PROFESSIONAL"}(Xa||(Xa={}));const Ja=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{OnboardingChecklist:t}=yield new Promise((function(t,o){e(["./c_onboarding_checklist2"],t,o)}));return t}))}),Za=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{SuggestedItemsToMoveComponent:t}=yield new Promise((function(t,o){e(["./c_suggested_items_to_move"],t,o)}));return t}))}),ei=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{EmptyStateDropTarget:t}=yield new Promise((function(t,o){e(["./c_growth_ui_empty_state_drop_target"],t,o)}));return t}))}),ti=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{SuggestedFolders:t}=yield new Promise((function(t,o){e(["./c_suggested_folders"],t,o)}));return t}))}),oi=({user:e,context:o,files:a,browsePostTTIExperiments:n,browsePostTTIData:r,isEligibleForOnboardingChecklist:l,showAdminChecklistQarg:c,initialIncompleteOnboardingTaskCount:d,handleOnboardingTaskCountChange:u,responsive:p,isEligibleForSuggestedItemsToMove:g,autoTeamGroupId:m,shouldShowTeamSpaceEmptyZone:h,totalNumItems:f,initialTotalNumItems:E,getDropTargetProps:v,accM3Variant:A})=>{var S;const R=i.useSelector(i.initialSuggestedItemsToMoveCount);if(l&&(c||void 0===d||d>0)&&!["V1","V2"].includes(A)){const e=null===(S=r.firstTaskProps.member_info.users.find((e=>null!==e.admin_role)))||void 0===S?void 0:S.display_name;return s.React$1.createElement(Ja,{adminName:e,onTaskCountChange:u,responsive:p})}if(g&&(null===R||R>0))return s.React$1.createElement(Za,{autoTeamGroupId:m,files:a,user:e});const y=n.expPersonalizedFirstPaths,w=Bo(y),T=(null==(b=y)?void 0:b.firstPath)||t.FirstPathId.NONE;var b;const M=function(e){return(null==e?void 0:e.suggestedFoldersType)||xo.None}(y);if(h&&T===t.FirstPathId.SUGGESTED_FOLDERS_ITERATION&&w&&E<=4&&M!==xo.None)return s.React$1.createElement(ti,{autoTeamGroupId:m,files:a,isTeamView:!0,user:e,context:o,teamLoggerCtx:{userRole:w,numInitialItems:E,activeFirstPath:T}});const I=y?{firstPath:T,role:w}:void 0;return h&&1===f&&"V1"!==_.DEFAULT_DRAG_AND_DROP&&"V2"!==_.DEFAULT_DRAG_AND_DROP?s.React$1.createElement(ei,Object.assign({},v,{personalizationCtx:I})):null};function si(e,t){if(void 0!==t)return{feature:e,variant:t.variant,metadata:{metadata:t.metadata}}}oi.displayName="ActivationBrowseZone";const ai=({children:e,coreActSfProM2:t})=>{const o=s.React$1.useMemo((()=>({core_act_sf_pro_m2:si("core_act_sf_pro_m2",t)})),[t]);return s.React$1.createElement(le.ExperimentProvider,Object.assign({},o),e)};ai.displayName="ActivationBrowseZoneExperimentProvider";const ii=["general-activation:error-boundary"],ni=s.React$1.memo((e=>{var t;return s.React$1.createElement(ve.ErrorBoundary,Object.assign({},e,{exceptionTags:[...null!==(t=e.exceptionTags)&&void 0!==t?t:[],...ii]}))}));ni.displayName="GeneralActivationErrorBoundary";const ri=a.defineMessage({id:"WZu6Dd",defaultMessage:"Other things you can do"}),li=a.defineMessage({id:"WODwII",defaultMessage:"More you can do now"}),ci=a.defineMessage({id:"v6r9av",defaultMessage:"More ways to add content"}),di=a.defineMessage({id:"7mWgl4",defaultMessage:"More you can do now"}),ui=a.defineMessage({id:"+r3opP",defaultMessage:"What to do next"}),pi=a.defineMessage({id:"0Jjh2r",defaultMessage:"Close"});a.defineMessage({id:"cqWStW",defaultMessage:"<a>Learn</a> how you could organize this folder"}),a.defineMessage({id:"gGqIMM",defaultMessage:"<a>Share this folder</a> with other people"}),a.defineMessage({id:"0TiB0v",defaultMessage:"<a>Download the mobile app</a> to upload files"});const gi={creatingFolderSpinnerAriaText:a.defineMessage({id:"sJ70Z1",defaultMessage:"Creating folder"}),createSuggestedFolder:a.defineMessage({id:"ZBBkg4",defaultMessage:"Create"}),dismissSuggestedFolder:a.defineMessage({id:"CmTVpN",defaultMessage:"Dismiss"}),setAccessLevelSelectAriaLabel:a.defineMessage({id:"PbXzjX",defaultMessage:"Set permission for {item}"}),createSuggestedFolderSuccessMsg:a.defineMessage({id:"4h7t7m",defaultMessage:"Created folder for {folderName}."}),createSuggestedFolderErrorMsg:a.defineMessage({id:"bgaDTg",defaultMessage:"Failed to create folder for {folderName}."}),createSuggestedFolderPermissionErrorMsg:a.defineMessage({id:"P2+xa4",defaultMessage:"Your folder settings weren't saved. Right now, {folderName} is invite-only. To change this, update the folder access."}),suggestedFoldersTitleForBusiness:a.defineMessage({id:"6NVOWp",defaultMessage:"Suggested folders based on your role"}),suggestedFoldersTitleForPersonal:a.defineMessage({id:"wWUAR1",defaultMessage:"Create suggested folders"}),teamAccessLevelInviteOnly:a.defineMessage({id:"p7XIqt",defaultMessage:"Invite-only access"}),teamAccessLevelEveryoneCanEdit:a.defineMessage({id:"xwP9BL",defaultMessage:"Everyone can edit"}),teamAccessLevelEveryoneCanView:a.defineMessage({id:"yP3Iv4",defaultMessage:"Everyone can view"}),uploadedFromGoogleDrive:a.defineMessage({id:"sW0Fph",defaultMessage:"Uploaded from Google Drive"}),uploadedFromOneDrive:a.defineMessage({id:"K+NlGf",defaultMessage:"Uploaded from Microsoft OneDrive"}),upload:a.defineMessage({id:"3t/eQf",defaultMessage:"Upload"})},mi=({isPersonal:e,isCurrentlyInRoot:t,initialTotalNumItems:o,suggestedFoldersCount:s})=>{if(!e)return!1;if(!t)return!1;if(o>3)return!1;return!(void 0!==s)||0!==s};var hi;!function(e){e.SharingMadeEasy="SharingMadeEasy",e.SuggestedFolders="SuggestedFolders"}(hi||(hi={}));const _i=({isCurrentlyInRoot:e,isPersonal:t,hasBoltSMEShareFiredDuringPageLifetime:o,hasUserEverSharedFileOrFolder:s,suggestedSharingActionsCount:a,isProTrialUser:n,sfProVariant:r,suggestedFoldersCount:l,initialTotalNumItems:c})=>{const d=mi({isPersonal:t,isCurrentlyInRoot:e,initialTotalNumItems:c,suggestedFoldersCount:l}),u=(({isProTrialUser:e,isCurrentlyInRoot:t,suggestedSharingActionsCount:o,hasUserEverSharedFileOrFolder:s,hasBoltSMEShareFiredDuringPageLifetime:a})=>!!e&&(!!t&&!(void 0!==o&&(0===o||!s&&!a))))({isProTrialUser:n,isCurrentlyInRoot:e,suggestedSharingActionsCount:a,hasUserEverSharedFileOrFolder:s,hasBoltSMEShareFiredDuringPageLifetime:o});if(r===i.Variant.OFF||r===i.Variant.CONTROL)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t})=>e?{widgetsShown:[hi.SharingMadeEasy],defaultWidget:hi.SharingMadeEasy}:t?{widgetsShown:[hi.SuggestedFolders],defaultWidget:hi.SuggestedFolders}:null)({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d});if(r===i.Variant.V1)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t,hasBoltSMEShareFiredDuringPageLifetime:o})=>e&&o?{widgetsShown:[hi.SharingMadeEasy],defaultWidget:hi.SharingMadeEasy}:t?{widgetsShown:[hi.SuggestedFolders],defaultWidget:hi.SuggestedFolders}:e?{widgetsShown:[hi.SharingMadeEasy],defaultWidget:hi.SharingMadeEasy}:null)({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d,hasBoltSMEShareFiredDuringPageLifetime:o});if(r===i.Variant.V2)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t})=>{const o=[];let s;return e&&(o.push(hi.SharingMadeEasy),s=hi.SharingMadeEasy),t&&(o.push(hi.SuggestedFolders),s||(s=hi.SuggestedFolders)),s?{widgetsShown:o,defaultWidget:s}:null})({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d});throw new Error(`get_active_widgets was called with an unknown variant: ${r}`)};var fi;!function(e){e.SUGGESTED_FOLDERS="suggested_folders",e.SHARING_MADE_EASY="sharing_made_easy"}(fi||(fi={}));const Ei={[hi.SharingMadeEasy]:fi.SHARING_MADE_EASY,[hi.SuggestedFolders]:fi.SUGGESTED_FOLDERS};var vi;!function(e){e.SUGGESTED_FOLDERS="suggested_folders",e.SHARING_MADE_EASY="sharing_made_easy",e.TABS="tabs"}(vi||(vi={}));const Ai=a.intl.formatMessage(ui),Si=a.intl.formatMessage(gi.suggestedFoldersTitleForPersonal),Ri=({user:e,context:o,files:a,browsePostTTIData:n,isCurrentlyInRoot:r,isProTrialUser:l,suggestedSharingActionsCount:c,hasBoltSMEShareFiredDuringPageLifetime:d,hasUserEverSharedFileOrFolder:u,handleSuggestedSharingActionsCountChange:p,suggestedFoldersCount:g,initialTotalNumItems:m,handleSuggestedFoldersCountChange:h,isColumnResizingEnabled:_,scrollContainerWidth:f})=>{const[E,v]=s.reactExports.useState(),A=i.useExperimentVariant("core_act_sf_pro_m2")||i.Variant.OFF,S=s.reactExports.useMemo((()=>{try{return _i({isCurrentlyInRoot:r,isPersonal:!0,hasBoltSMEShareFiredDuringPageLifetime:d,hasUserEverSharedFileOrFolder:u,suggestedSharingActionsCount:c,isProTrialUser:l,sfProVariant:A,suggestedFoldersCount:g,initialTotalNumItems:m})}catch(e){return F.reportException({err:e,severity:O.SEVERITY.NONCRITICAL,tags:["browse-footer-personal:get-active-widgets","activation:general-activation"],force:!0}),null}}),[r,d,u,c,l,A,g,m]),R=s.reactExports.useMemo((()=>(({widgetsShown:e,suggestedSharingActionsCount:t,suggestedFoldersCount:o})=>{if(!e)return[];const s=e.filter((e=>{switch(e){case hi.SharingMadeEasy:return void 0!==t;case hi.SuggestedFolders:return void 0!==o;default:return!1}}));return e.length>s.length?[]:s})({widgetsShown:null==S?void 0:S.widgetsShown,suggestedSharingActionsCount:c,suggestedFoldersCount:g})),[S,c,g]);(({loadedActiveWidgets:e,hasShared:t})=>{const o=s.reactExports.useRef();s.reactExports.useEffect((()=>{let s;if(e.length>1)s=vi.TABS;else if(e.includes(hi.SuggestedFolders))s=vi.SUGGESTED_FOLDERS;else{if(!e.includes(hi.SharingMadeEasy))return void(o.current=void 0);s=vi.SHARING_MADE_EASY}o.current!==s&&(i.logEvent({class:"onboard",action:"shown",object:"browse_footer",properties:{browseFooterIsPersonal:!0,browseFooterSurface:s,hasShared:t}}),o.current=s)}),[e,t])})({loadedActiveWidgets:R,hasShared:u||d});const y=i.useLogExposure("core_act_sf_pro_m2"),w=s.React$1.useRef(!1),T=mi({isPersonal:!0,isCurrentlyInRoot:r,initialTotalNumItems:m,suggestedFoldersCount:g});if(s.React$1.useEffect((()=>{"function"==typeof y&&T&&(w.current||(w.current=y()))}),[T,y]),!S)return null;const{widgetsShown:b,defaultWidget:M}=S,I=E&&b.includes(E)?E:M,C=R.length>1;return s.React$1.createElement(J.Tabs,{selectedTab:I,onSelection:e=>{e!==E&&(v(e),(e=>{i.logEvent({class:"onboard",action:"change",object:"browse_footer_tabs",properties:{browseFooterTab:Ei[e]}})})(e))}},C&&s.React$1.createElement(J.Tabs.Group,null,s.React$1.createElement(J.Tabs.Tab,{id:hi.SuggestedFolders},Si),s.React$1.createElement(J.Tabs.Tab,{id:hi.SharingMadeEasy},Ai)),b.includes(hi.SuggestedFolders)&&s.React$1.createElement(yi,{show:I===hi.SuggestedFolders,tabId:hi.SuggestedFolders},s.React$1.createElement(ni,{fallback:null,resetKeys:[e,a,o],componentTag:"suggested-folders-individual",reportMetrics:!0},s.React$1.createElement(ti,{files:a,isTeamView:!1,user:e,context:o,handleSuggestedFoldersCountChange:h,shouldHideHeading:C}))),b.includes(hi.SharingMadeEasy)&&s.React$1.createElement(yi,{show:I===hi.SharingMadeEasy,tabId:hi.SharingMadeEasy},s.React$1.createElement(Oa,{user:e,context:o,isColumnResizingEnabled:_,width:f,numItems:a.size,experiment:t.InFolderActivationExperiment.core_act_sharing_made_easy,variant:t.SharingMadeEasyVariant.V1,shouldHideHeading:C,onActionsCountChange:p})))};Ri.displayName="BrowseFooterPersonal";const yi=({show:e,tabId:t,children:o})=>s.React$1.createElement("div",{role:"tabpanel","aria-hidden":!e,"aria-describedby":t,style:e?void 0:{display:"none"}},o);i.injectInternalStyle("metaserver/static/js/browse/filtered_view/browse_view_filter.module.out.css",(e=>'._container_9q7dw_1{background-color:var(--color__standard__background);margin-left:-44px;margin-top:var(--spacing__unit--1_5);padding:0 var(--spacing__unit--2) var(--spacing__unit--1_5);position:-webkit-sticky;position:sticky;top:64px;width:100%;z-index:3}._container_9q7dw_1:before{border-top:1px solid var(--color__standard__border);content:"";display:block;padding-bottom:var(--spacing__unit--1_5);width:100%}._containerNoBorder_9q7dw_20:before{border-top:none}._containerResponsive_9q7dw_24{margin-left:-16px}._chipComponent_9q7dw_28{margin-right:var(--spacing__unit--1)}'));const wi="_container_9q7dw_1",Ti="_containerNoBorder_9q7dw_20",bi="_containerResponsive_9q7dw_24",Mi="_chipComponent_9q7dw_28",Ii=({responsive:e,user:t})=>{var o;const a=i.getStoreForBrowse(),n=i.useSelector(i.selectedFilterTypes).toArray(),r=0===n.length?i.BrowseFilterType.NONE:n[0];s.reactExports.useEffect((()=>()=>{a.dispatch(k.setFilterTypes([]))}),[a]);const l=e=>()=>{e===r?(a.dispatch(k.setFilterTypes([])),i.logEvent(i.PAP_Remove_Filter({actionElement:"browse_screen_filter",actionSurface:"browse_screen",filterType:e.toString()}))):(a.dispatch(k.setFilterTypes([e])),i.logEvent(i.PAP_Select_Filter({actionElement:"browse_screen_filter",actionSurface:"browse_screen",filterType:e.toString()})))},c=null!==(o=i.UserLocalStorage.get(t.id,i.SUGGEST_SECTION_IS_HIDDEN_LOCAL_STORAGE_KEY))&&void 0!==o&&o;return s.React$1.createElement("div",{className:i.cx({[wi]:!0,[bi]:!e.isMatchedLarge,[Ti]:c})},i.BrowseFilterConfigs.map((({displayName:e,icon:t,type:o},a)=>{return s.React$1.createElement(i.FilterChip,{className:Mi,isSelected:(n=o,n===r),key:a,onClick:l(o),withIconLeft:s.React$1.createElement(i.UIIcon,{src:t}),"data-campaigns-element-id":0===a?Ae.CampaignsElementIdEnum.BROWSE_VIEW_FILTERS:void 0},e);var n})))};Ii.displayName="BrowseViewFilter";const Fi=(e,t)=>({audienceText:e[0],tooltipText:t,accessLog:e[1]}),Ci=e=>e.filter(Boolean).reduce(((e,t)=>s.React$1.createElement(s.React$1.Fragment,null,e,s.React$1.createElement("br",null),"+ ",t))),Oi=a.intl.formatMessage({id:"qsCrP2",defaultMessage:"your team"}),Ni=a.intl.formatMessage({id:"q9Both",defaultMessage:"thisFolder"}),Di=()=>{var e;return null!==(e=i.Viewer.get_viewer().team_name)&&void 0!==e?e:Oi},Pi=" "+a.intl.formatMessage({id:"wKmA05",defaultMessage:"+ others"}),Li={ONLY_YOU:[a.intl.formatMessage({id:"CQcL59",defaultMessage:"Only you"}),"only_you"],LIMITED:[a.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"}),"limited"],LIMITED_OTHER:[a.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"})+Pi,"limited_plus_others"],TEAM:[Di(),"company"],TEAM_OTHER:[Di()+Pi,"company_plus_others"],PARENT:[a.intl.formatMessage({id:"RBqYQP",defaultMessage:"Parent"}),"parent"],PARENT_OTHER:[a.intl.formatMessage({id:"RBqYQP",defaultMessage:"Parent"})+Pi,"parent_plus_others"]},xi={onlyYou:a.intl.formatMessage({id:"kWQx7/",defaultMessage:"You are the only person with access"}),certainItems:(e=Ni)=>a.intl.formatMessage({id:"eT8Pi8",defaultMessage:"You only have access to certain items within {folderName}"},{folderName:e}),noAccess:a.intl.formatMessage({id:"nViKas",defaultMessage:"You do not have access to this folder"}),team:e=>a.intl.formatMessage({id:"Oau+Od",defaultMessage:"Everyone at {team_name} ({count, plural, one{{count} person} other{{count} people}})"},{team_name:Di(),count:e}),tmrTeam:e=>a.intl.formatMessage({id:"DjR0GE",defaultMessage:"{count, plural, one{{count} team member has} other{All {count} team members have}} access."},{count:e}),parent:(e,t)=>a.intl.formatMessage({id:"l7tX5p",defaultMessage:"{count} with access to parent folder {parentFolderName}"},{count:e,parentFolderName:s.React$1.createElement("b",null,t)}),withLink:a.intl.formatMessage({id:"fuKova",defaultMessage:"anyone with link"}),withOutsideMember:e=>e&&a.intl.formatMessage({id:"dC1wLy",defaultMessage:"{count} outside {team_name}"},{team_name:Di(),count:e}),withTeamMember:e=>e&&a.intl.formatMessage({id:"7cek/w",defaultMessage:"{count} at {team_name}"},{team_name:Di(),count:e})},ki=({audienceText:e,tooltipText:t,tabIndex:o,accessLog:a,groups:n,file:r})=>{const l=i.useDispatch(),c=i.useSelector(i.isInSelectMode),d=i.useSelector(i.context),u=s.React$1.useMemo((()=>c||r&&(r.isDeleted||i.File.isTeamMemberFolder(r)||!i.File.canViewFileMembers(r,d))?"default":"pointer"),[c,r,d]);return s.React$1.createElement(i.Text,{"data-testid":"membership-column-text",className:"membership-column-text",onMouseEnter:()=>{if(null==r?void 0:r.is_in_team_folder_tree){const e=i.getAudienceDescriptionLoggingPayload(n,r,a);i.TeamsWebActionsLogger.log("hover_on_audience_description_text",e)}}},s.React$1.createElement(i.StylelessButton,{className:"audience-description",cursor:u,onClick:e=>{if(!c&&!(null==r?void 0:r.isDeleted))return l(Ko({file:r})),e.preventDefault(),e.stopPropagation()},tabIndex:o,"aria-label":e.toString()+" "+(null==t?void 0:t.toString())},e))},Bi=a.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"}),Ui=a.intl.formatMessage({id:"mo3voz",defaultMessage:"Limited"}),$i=({tabIndex:e,file:t})=>{const o=i.useSelector(i.isBrowseLoadingFirstPage),n=i.useSelector(i.isSharedDataLoadedForBrowsePath)&&!o,r=i.useSelector(i.user$1),l=i.useSelector(i.context),c=i.useSelector((e=>i.canViewMembersOfFile(e,t))),d=i.useSelector((e=>i.canTraverseFile(e,t))),u=i.useSelector((e=>i.getDataForFile(e,t)));if(!n)return null;let{audienceDescription:p,numUndisplayableUsersAndInvites:g=0,groups:m=[],invitations:h=[],joinedMembers:_=[],memberCount:f=0,sharedLinkExists:E=!1,accessTextData:v={total_groups_and_users:0,total_unique_inherited_members:0,total_unique_users:0,users_outside_team:0,is_confidential:!1,isParentTmr:!1,is_parent_tsd:!1,is_parent_namespace:!1,has_team_group:!1,has_group:!1}}=u||{};v=Object.assign(Object.assign({},v),{folderName:null==t?void 0:t.fq_path.split("/").slice(-1)[0],parentFolderName:l.getNameOfTargetFolder(),hasSharedLink:E,canViewMembers:c,canTraverse:d});let{audienceText:A,tooltipText:S,accessLog:R}=(({total_groups_and_users:e,total_unique_inherited_members:t,total_unique_users:o,users_outside_team:s,is_confidential:a,is_parent_tsd:i,is_parent_namespace:n,isParentTmr:r,has_team_group:l,has_group:c,hasSharedLink:d=!1,folderName:u=Ni,parentFolderName:p="",canViewMembers:g=!0,canTraverse:m=!0})=>{if(!g)return Fi(Li.LIMITED,m?xi.certainItems(u):xi.noAccess);if(0===e)return Fi(["",""],"");if((i||r)&&l)return e>=1&&0===s?d?Fi(Li.TEAM_OTHER,Ci([xi.team(o),xi.withLink])):Fi(Li.TEAM,r?xi.tmrTeam(o):xi.team(o)):Fi(Li.TEAM_OTHER,Ci([xi.team(o-s),xi.withOutsideMember(s),d&&xi.withLink]));if(n||t===o&&!d&&!a)return d?Fi(Li.PARENT_OTHER,Ci([xi.parent(t,p),xi.withLink])):Fi(Li.PARENT,xi.parent(o,p));if(1===e&&1===o&&!c&&!d)return Fi(Li.ONLY_YOU,xi.onlyYou);if(a||i&&!l)return 0!==s||d?Fi(Li.LIMITED_OTHER,Ci([xi.withTeamMember(o-s),xi.withOutsideMember(s),d&&xi.withLink])):Fi(Li.LIMITED,xi.withTeamMember(o));const h=Math.max(o-s-t,0);return Fi(Li.PARENT_OTHER,Ci([xi.parent(t,p),h&&xi.withTeamMember(h),xi.withOutsideMember(s),d&&xi.withLink]))})(v);if(!A){const e=m.concat(_||[]).concat(h||[]),o=e.length+(g||0),[n]=q.findOwnerAndMeInJoinedMembers(_||[],r);if(null==t?void 0:t.isDeleted)A=a.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"});else if(c)if(p)A=p;else if(o>=0&&(1!==o||!n)){A=a.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:f});const t=e.slice(0,5).map((e=>i.Emstring.em_snippet(e.display_name||e.email||e.name||e.email_or_fbname||"",i.SNIPPET_SIZES.DISPLAY_NAME)));if(o>5){t.pop();const e=o-4,s=a.intl.formatMessage({id:"asRDyH",defaultMessage:"{count, plural, one{and {count} more...} other{and {count} more...}}"},{count:e});t.push(s)}S=t.length>0?t.reduce(((e,t)=>s.React$1.createElement(s.React$1.Fragment,null,e,s.React$1.createElement("br",null),t))):""}else A=a.intl.formatMessage({id:"ZP6Ear",defaultMessage:"Only you"});else A=v.canTraverse?Ui:Bi}return!l.isCurrentlyInRoot||t||r.is_cdm_member?s.React$1.createElement("div",{className:"shared-with-members"},S?s.React$1.createElement(i.Tooltip,{placement:"bottom",className:"membership-column-tooltip","data-testid":"membership-column-tooltip",title:S},s.React$1.createElement("div",null,s.React$1.createElement(ki,{tabIndex:e,audienceText:A,accessLog:R,groups:m,file:t,tooltipText:S}))):s.React$1.createElement(ki,{tabIndex:e,audienceText:A,accessLog:R,groups:m,file:t})):null},Vi=i.Loadable({loader:()=>(new Promise((function(t,o){e(["./c_file_uploader_clean_persistent_dropzone"],t,o)})),new Promise((function(t,o){e(["./c_file_uploader_clean_dropzone_outline"],t,o)})).then((({DropzoneOutline:e})=>e))),loading:({children:e})=>s.React$1.createElement(s.React$1.Fragment,null,e)}),Gi=i.Loadable({loader:()=>new Promise((function(t,o){e(["./c_file_uploader_clean_persistent_dropzone"],t,o)})).then((({PersistentDropzone:e})=>e)),loading:({children:e})=>s.React$1.createElement(s.React$1.Fragment,null,e)}),Wi=({user:e,handleUploadButtonClick:t,text:o})=>{const[a,n]=s.React$1.useState(!1);return s.React$1.createElement(Re.AddMoreFilesMenu,{key:"uploadButton",user:e,placement:"bottom",variant:"transparent",handleFileChoose:e=>t(e,"dropzone-upload-button")},s.React$1.createElement(i.Text,{color:a?"standard":"faint",isBold:!0,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},o))},ji=(e,t,o)=>s.React$1.createElement(Wi,{user:e,handleUploadButtonClick:t,text:o}),Hi=e=>{const t=i.useSelector(i.isInsideBackupFolder),o=i.useSelector(i.sortedFilesWithFolderSizes),n=i.useSelector(i.browseLoadingState),r=i.useSelector(i.user$1),l=i.useSelector(i.context),c=s.React$1.useRef(!1);s.React$1.useEffect((()=>{c.current||n===i.LoadingState.LOADING_FIRST_PAGE||(c.current=!0)}),[n]);const d=[i.LoadingState.LOADING_REMAINING_PAGES,i.LoadingState.LOADED,i.LoadingState.UPDATING_FILTERED_VIEW];return c.current&&d.push(i.LoadingState.LOADING_FIRST_PAGE),he.is_mobile_or_tablet()||"OFF"===_.DEFAULT_DRAG_AND_DROP||"CONTROL"===_.DEFAULT_DRAG_AND_DROP||e.shouldShowInFolderActivationForPersonal&&0===o.size||t||l.isInsideVaultFolder||-1===d.indexOf(n)||!e.hasFolderWritePermissions?null:e.shouldShowSuggestions&&0===o.size&&!e.emptyFilteredView?s.React$1.createElement(Gi,{areSuggestionsVisible:!0,responsive:e.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center"}},s.React$1.createElement(i.Text,{color:"faint"},s.React$1.createElement(i.SpotIcon,{src:i.UploadFolderSpot}),s.React$1.createElement("div",null,a.intl.formatMessage({id:"M+EHQA",defaultMessage:"Drop files here to upload, or click <uploadLink>Upload</uploadLink>"},{uploadLink:t=>ji(r,e.handleUploadButtonClick,t)}))))):0!==o.size||e.emptyFilteredView?s.React$1.createElement(Gi,{responsive:e.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center",verticalAlign:"middle"}},s.React$1.createElement(i.Text,{color:"faint",style:{display:"flex"}},s.React$1.createElement(i.UIIcon,{src:i.UploadFolderLine}),s.React$1.createElement("div",null,a.intl.formatMessage({id:"M+EHQA",defaultMessage:"Drop files here to upload, or click <uploadLink>Upload</uploadLink>"},{uploadLink:t=>ji(r,e.handleUploadButtonClick,t)}))))):s.React$1.createElement(Gi,{isFolderEmpty:!0,responsive:e.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center"}},s.React$1.createElement(i.Text,{color:"faint"},s.React$1.createElement(i.SpotIcon,{src:i.UploadFolderSpot}),s.React$1.createElement("div",null,a.intl.formatMessage({id:"M+EHQA",defaultMessage:"Drop files here to upload, or click <uploadLink>Upload</uploadLink>"},{uploadLink:t=>ji(r,e.handleUploadButtonClick,t)})))))},Yi=[i.NameSpaceAccess.ACCESS_NO_ACCESS,i.NameSpaceAccess.ACCESS_READER,i.NameSpaceAccess.ACCESS_READER_NO_COMMENT];const qi=()=>(()=>{const e=i.getQueryArgs()[i.BrowseQueryArg.show]||[];return e&&c.DBHistory.remove_query_param(i.BrowseQueryArg.show),e.filter((e=>Object.values(i.BrowseQueryArgShowValue).includes(e)))})().includes(i.BrowseQueryArgShowValue.ADMIN_CHECKLIST);class zi extends s.React$1.Component{constructor(e){super(e),this.scrollContainer=s.React$1.createRef(),this.observingLeftNav=s.React$1.createRef(),this.hasLoggedInFolderActivationExperiment=!1,this.updateScrollContainerWidth=()=>{null!==this.scrollContainer.current&&this.setState({scrollContainerWidth:ge.getWidthOfElement(this.scrollContainer.current)})},this.filesViewActionHandlers={onDelete:e=>{this.postTTIModules.then((({actionHandlers:t})=>{const o={user:this.props.user,files:e,isSearchMode:!1,viewType:this.props.viewType};t.handleDelete(o,this.props.context)}))},onShowRename:e=>this.props.setFileRename({file:e,renameState:i.RenameState.PENDING_INPUT}),onSetClipboard:e=>this.props.setFilesToClipboard({clipboard:e}),onPasteFromClipboard:()=>{this.postTTIModules.then((({fileops:e})=>{this.props.pasteFilesFromClipboard({copyFiles:Se.portableCopy,moveFiles:e.moveFiles})}))},onNewFolderSubmit:e=>p.browseActions.createFolder({pathName:this.props.context.currentFQPath,folderName:e,user:this.props.user,nsId:this.props.context.rootNSID,checkFSWs:!0}),onNewFolderCancel:()=>p.browseActions.cancelCreateFolder(),onRenameSubmit:(e,t)=>this.props.renameFile({file:e,name:t,checkFSWs:!0}),onRenameCancel:e=>this.props.setFileRename({file:e,renameState:null}),onSwitchViewType:e=>{i.logSwitchViewType({uid:this.props.user.id,isSearchMode:!1,viewType:e}),this.props.setViewType(e)},onColumnsChanged:({columns:e,canDisplayFolderSizes:t,numVisibleColumns:o})=>{this.props.setColumns({columns:e,user:this.props.user,viewTypeScope:this.props.viewTypeScope,updateGlobalScope:!0,numVisibleColumns:o}),this.props.setCanDisplayFolderSizes({canDisplayFolderSizes:t})},onCanDisplayFolderSizesChanged:e=>this.props.setCanDisplayFolderSizes({canDisplayFolderSizes:e}),onAddFileJumpKeyCode:e=>this.props.addFileJumpKeyCode({keyChar:e}),onResetFileJump:()=>this.props.resetFileJumpFilter(),onShowShare:p.browseActions.handleShowShareModal},this.shouldShowEmptyStateDropTarget=()=>this.props.context.isInsideMyTeamFolderTree&&this.props.context.isCurrentlyInRoot&&1===this.props.totalNumItems||this.props.isFirstTaskEmptyState,this.shouldShowInFolderActivationForPersonal=()=>!(this.props.loadingState!==i.LoadingState.LOADED||0!==this.props.files.size||void 0===this.props.currentFolderInfo||i.File.isFamilySharedFolder(this.props.currentFolderInfo)||this.props.user.is_team||this.props.context.isCurrentlyInRoot||this.props.context.isInsideVaultFolder||this.props.context.isInsideTeamFolderTree||this.props.isInsideBackupFolder||!this.props.browseExperiments.coreO21nInFolderActivationM2||"OFF"===this.props.browseExperiments.coreO21nInFolderActivationM2),this.shouldShowFilesView=()=>{const{shouldHideFilesAndSidebar:e,shouldShowVaultEmptyState:t,shouldShowFamilyEmptyState:o}=this.props;return!e&&!t&&!o},this.shouldShowFilters=()=>("ON"===_.RECENTS_AND_STARRED_IN_BROWSE||"V1"===_.RECENTS_AND_STARRED_IN_BROWSE)&&this.shouldShowFilesView()&&"/"===this.props.path&&this.props.loadingState!==i.LoadingState.LOADING_FIRST_PAGE,this.getDropTargetProps=()=>{const e=[];let t=a.intl.formatMessage({id:"SHYorf",defaultMessage:"Upload files to the team space"});return e.push({iconName:"upload-file",iconSrc:i.UploadFileLine,displayName:a.intl.formatMessage({id:"Qayhb5",defaultMessage:"Upload files"}),handleClick:()=>this.props.handleUploadButtonClick(!1,"dropzone-upload-button")}),he.is_input_webkitdirectory_supported()&&(t=a.intl.formatMessage({id:"ZmstxO",defaultMessage:"Add files and folders to the team space"}),e.push({iconName:"upload-folder",iconSrc:i.UploadFolderLine,displayName:a.intl.formatMessage({id:"53oUlv",defaultMessage:"Upload folder"}),handleClick:()=>this.props.handleUploadButtonClick(!0,"dropzone-upload-button")})),{popoverOptions:e,ariaLabel:t,isDropTargetRoot:!this.state.currentDropTarget,isDraggingFiles:this.props.isDraggingExternalFiles||this.props.isDraggingInternalFiles,isLoading:this.props.loadingState===i.LoadingState.LOADING_FIRST_PAGE}},this.getIsFileJumping=()=>this.props.isFileJumping,this.handleOnboardingTaskCountChange=(e,t)=>{void 0===this.state.initialIncompleteOnboardingTaskCount&&this.setState({initialIncompleteOnboardingTaskCount:e-t})},this.handleUpdateDropTarget=e=>{this.props.isFirstTaskEmptyState&&this.setState({currentDropTarget:e})},this.handleDragStart=(e,t)=>{this.setState({internalDraggedFiles:t})},this.handleDragEnd=e=>{this.setState({internalDraggedFiles:void 0})},this.handleFixedHeaderHeightChange=e=>{const t=this.props.browsePostTTIData.firstTaskProps.is_eligible_team?38:0;this.setState({fixedHeaderHeight:(e||0)+t})},this.handleGetOverflowMenuActions=(e,t,o)=>[new Array],this.handleLocationLinkClick=(e,t)=>{if(!t){const t=i.parent_dir(e.fq_path);this.props.setUrl({path:t})}},this.handleOpenPaper=e=>{i.redirect(e.url)},this.handleFocusSearchBar=()=>{document.getElementsByClassName("dig-GlobalHeader-Search__input")[0].focus()},this.handleFileListSortChange=(e,t)=>{this.props.setAndStoreSortOrder({sortField:e,sortDirection:t})},this.handleSelectionChange=(e,t)=>{this.props.setSelection({selection:e,actionSource:t})},this.handleStarClick=(e,t)=>{const o=t?i.WebUserActionLogEvent.STAR:i.WebUserActionLogEvent.REMOVE_STAR,{user:s,viewType:a,selectedFiles:n}=this.props,{num_files_selected:r,num_folders_selected:l}=i.countFilesAndFolders(n);this.shouldShowFilters()&&this.props.selectedFilter===i.BrowseFilterType.STARRED&&!t&&this.props.updateStarredView(e),i.logBrowseAction({uid:s.id,source:"BROWSE",action:o,num_files_selected:r,num_folders_selected:l,view_type:a,result:e})},this.handleOpenFileSharedWithMe=e=>{i.redirect(e.href)},this.handleNavigateToParentFolder=()=>{Sa.navigateUpFolder();const e=i.parent_dir(this.props.path);if(i.isBackupBrowse()){const t=this.props.context.rootNSID,o=!!this.props.backupFolderPath;if(t&&i.isUnmountedBackupBrowse(this.props.user,t))o&&this.props.setUrl({path:e});else{const t=this.props.backupFolderPath===this.props.path;o&&!t&&this.props.setUrl({path:e})}}else this.props.setUrl({path:e})},this.onContainerClick=e=>{i.shouldClickDeselect(e)&&this.props.onClearSelection({actionSource:i.ActionSourceValue.WHITESPACE})},this.renderSharedWithController=(e,t)=>e.type===i.FileTypes.TEAM_SHARED_FOLDER&&("archived"===e.team_folder_status||"archive_in_progress"===e.team_folder_status)?null:s.React$1.createElement("div",{className:"brws-vertically-center brws-shared-with-wrapper"},s.React$1.createElement($i,{tabIndex:t,file:e})),this.hrefForFile=(e,t)=>i.href_for_file(e,t,Object.assign({context:"standalone_preview"},this.props.isInsideBackupFolder?{[i.BACKUP_QUERY_PARAM]:"true"}:{})),this.handleSuggestionHeightChanged=e=>{this.setState({suggestionHeight:e})},this.handleSuggestedFoldersCountChange=e=>{this.setState({suggestedFoldersCount:e})},this.handleSuggestedSharingActionsCountChange=e=>{this.setState({suggestedSharingActionsCount:e})},i.getStoreForSharedWith(),this.state={fixedHeaderHeight:0,suggestionHeight:0,suggestedFoldersCount:void 0,suggestedSharingActionsCount:void 0,activationBoltSME:void 0,hasBoltSMEShareFiredDuringPageLifetime:!1},this.resizeObserver=new v.index(this.updateScrollContainerWidth)}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){Sa.register(),this.updateScroll(),this.shouldShowFilesView()||this.props.handleComponentTTI("FilesViewController");const t=this.props.responsive.isMatchedLarge;this.postTTIModules=new Promise((s=>{i.waitForTTI().then((()=>o.__awaiter(this,void 0,void 0,(function*(){const[o,a]=yield Promise.all([new Promise((function(t,o){e(["./c_browse_file_actions_action_handlers"],t,o)})).then((function(e){return e.action_handlers_esnext})),new Promise((function(t,o){e(["./c_ui_fileops_actions"],t,o)}))]);t&&!this.state.scrollContainerWidth&&this.updateScrollContainerWidth(),s({actionHandlers:o,fileops:a})}))))})),window.addEventListener("resize",this.updateScrollContainerWidth),t&&this.updateScrollContainerWidth();const s=document.querySelector(".maestro-secondary-sidebar-v2");s&&this.resizeObserver.observe(s),this.setState({showAdminChecklistQarg:qi()})}))}componentWillUnmount(){window.removeEventListener("resize",this.updateScrollContainerWidth),Sa.unregister(),this.resizeObserver.disconnect(),this.state.activationBoltSME&&this.state.activationBoltSME.unsubscribe()}componentDidUpdate(e){if(e.loadingState===i.LoadingState.LOADING_FIRST_PAGE&&this.props.loadingState!==e.loadingState&&this.updateScroll(),!this.observingLeftNav.current){const e=document.querySelector(".maestro-nav__container");e&&(this.resizeObserver.observe(e),this.observingLeftNav.current=!0)}this.state.activationBoltSME||this.registerSharingMadeEasyBoltListener(),this.props.forYouVariant!==e.forYouVariant&&["CONTROL","V1"].includes(this.props.forYouVariant||"OFF")&&i.logExposure({feature:"core_tact_welcome_mat",variant:this.props.forYouVariant}),this.props.welcomeMatM2Variant!==e.welcomeMatM2Variant&&["CONTROL","V1","V2"].includes(this.props.welcomeMatM2Variant||"OFF")&&i.logExposure({feature:"core_tact_welcome_mat_m2",variant:this.props.welcomeMatM2Variant})}updateScroll(){var e;const t=Sa.getLastScrollPosition(this.props.path);if(t){const{selection:e,setSelection:o}=this.props;o({selection:e.set("selected",i.immutableExports.OrderedSet([t])).set("anchor",t),skipLogging:!0})}0===this.props.files.size&&!this.props.context.isCurrentlyInRoot&&(null===(e=this.scrollContainer)||void 0===e?void 0:e.current)&&this.scrollContainer.current.scroll(0,0)}isListView(){return this.props.viewType===i.ViewType.CondensedList||this.props.viewType===i.ViewType.List}logInFolderActivationQualifiedUser(t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){if(this.hasLoggedInFolderActivationExperiment)return;this.hasLoggedInFolderActivationExperiment=!0;(yield new Promise((function(t,o){e(["./c_activation_sharing_made_easy_logger_utils"],t,o)}))).logInFolderActivationQualify(t,s)}))}render(){var e;const{files:o,context:a,selectedFiles:n,isDraggingExternalFiles:r,isDraggingInternalFiles:l,loadingState:c,browsePostTTIExperiments:d,browsePostTTIData:u,responsive:p,user:g,path:m,autoTeamGroupId:h,onNavigateToFileOrFolder:f,viewType:E,isRewindVisible:v,createNewFolderState:A,currentSort:S,fileRename:R,isFileViewerShown:y,handleComponentTTI:w,selection:T,totalNumItems:b,isQueryingFolderSizes:M,viewTypeColumns:F,viewTypeScope:C,contentSlot:O,emptyContentSlot:N,shouldHideFilesAndSidebar:D,clipboard:P,isActive:L,currentFolderInfo:x,isInsideBackupFolder:k,context:{isCurrentlyInRoot:B},selectedFilter:U}=this.props,$=o,V=function({internalDraggedFiles:e,context:t,isDraggingInternalFiles:o,isDraggingExternalFiles:s}){return t.isInsideSharedFolder&&Yi.includes(t.currentSharedFolderPermissionRole)?i.DropTargetHighlightMode.NONE:o&&e?e.some((e=>e.isDeleted||e.type===i.FileTypes.TEAM_SHARED_FOLDER))?i.DropTargetHighlightMode.NONE:e.some((e=>e.type===i.FileTypes.SHARED_FOLDER))?t.currentNSAllowsNesting?i.DropTargetHighlightMode.ALL_FOLDERS:i.DropTargetHighlightMode.NONSHARED_FOLDERS:i.DropTargetHighlightMode.ALL_FOLDERS:s||o?i.DropTargetHighlightMode.ALL_FOLDERS:i.DropTargetHighlightMode.NONE}({context:a,internalDraggedFiles:this.state.internalDraggedFiles,isDraggingExternalFiles:r,isDraggingInternalFiles:l}),G=0===o.size&&!B,W=p.isMatchedLarge,j=i.BROWSE_RIGHT_RAIL_ACTION_BAR_HEIGHT+(this.shouldShowFilters()?i.BROWSE_FILTERS_HEIGHT:0),H=this.shouldShowEmptyStateDropTarget(),Y=i.cx("maestro-browse-app-content","maestro-content-scroll",{"maestro-content-scroll_scroll-disabled":c===i.LoadingState.LOADING_FIRST_PAGE||G,"maestro-browse-app-content--empty-state":H,"maestro-content-scroll--horizontal-scrollable":W,"maestro-browse-app-content--empty-state-content":W&&H}),q=s.React$1.createElement(ge.FilesViewController,Object.assign({id:i.BROWSE_FILES_VIEW_ID},this.filesViewActionHandlers,{disabledMultiselect:v,getOverflowMenuActions:this.handleGetOverflowMenuActions,renderSharedWithController:this.renderSharedWithController,hrefForFile:this.hrefForFile,onLocationLinkClick:this.handleLocationLinkClick,onNavigateToFileOrFolder:f,onOpenFileSharedWithMe:this.handleOpenFileSharedWithMe,onNavigateToParentFolder:this.handleNavigateToParentFolder,onOpenPaper:this.handleOpenPaper,onFocusSearchBar:this.handleFocusSearchBar,context:a,createNewFolderState:A,currentSort:S,dropTargetHighlightMode:V,fileRename:R,items:$,responsive:p,getIsFileJumping:this.getIsFileJumping,isDraggingExternalFiles:r,isDraggingInternalFiles:l,isFileViewerShown:y,isOverFreeQuota:u.isOverFreeQuota,loadingState:c,onComponentTTI:w,onSelectionChange:this.handleSelectionChange,onSortChange:this.handleFileListSortChange,onStarClick:this.handleStarClick,path:m,selectedFiles:n,selection:T,setFileUploaderPath:I.FileUploaderController.setPathAndPermissions,totalNumFiles:b,user:g,isQueryingFolderSizes:M,columns:F[E],viewTypeColumns:F,viewTypes:i.AllViewTypes,viewTypeScope:C,stickyOffsetTop:j,scrollContainer:this.scrollContainer,isStickyColumnHeader:!0,scrollPositionOffset:this.state.fixedHeaderHeight+this.state.suggestionHeight,highDensity:!0,updateDropTarget:this.handleUpdateDropTarget,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,eligibleForFirstTaskSubtitle:u.firstTaskProps.is_subtitle,expVaultEnableViewOnlySharing:d.expVaultEnableViewOnlySharing||!1,customEmptyFolderView:({handleTTI:e,isDraggingExternalFiles:n,isColumnResizingEnabled:r,width:l})=>{var c,d;if(this.shouldShowFilters()&&this.props.selectedFilter!==i.BrowseFilterType.NONE)return s.React$1.createElement(va,{selectedFilter:this.props.selectedFilter,responsive:this.props.responsive});if(mi({isPersonal:!this.props.user.is_team,isCurrentlyInRoot:this.props.context.isCurrentlyInRoot,initialTotalNumItems:this.props.initialTotalNumItems,suggestedFoldersCount:this.state.suggestedFoldersCount}))return e(),["V1","V2"].includes(null!==(d=null===(c=this.props.browseExperiments.coreActSfProM2)||void 0===c?void 0:c.variant)&&void 0!==d?d:"OFF")?s.React$1.createElement("div",{className:"suggested-folders-drop-target-container"},s.React$1.createElement(Fa,{popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n})):s.React$1.createElement("div",{className:"suggested-folders-empty-state"});if(this.props.context.isCurrentlyInRoot&&("OFF"===_.DEFAULT_DRAG_AND_DROP||"CONTROL"===_.DEFAULT_DRAG_AND_DROP))return s.React$1.createElement(Fa,{popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n});if(this.shouldShowInFolderActivationForPersonal()){const i=t.InFolderActivationExperiment.core_o21n_in_folder_activation_m2,c=this.props.browseExperiments.coreO21nInFolderActivationM2;if(this.logInFolderActivationQualifiedUser(i,c),c!==t.InFolderActivationM2Variant.CONTROL)return s.React$1.createElement(Gi,{responsive:this.props.responsive,location:"dedicated_dropzone",shouldHideOutline:!0},s.React$1.createElement(Na,{user:g,context:a,isColumnResizingEnabled:r,width:l,popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n,numItems:o.size,experiment:i,variant:c,currentFolderInfo:x}))}},isActionBarEnabled:!0,inlineActionBar:Tt,enableUnity:!0,clipboard:P,isActive:L,isColumnResizingEnabled:W,columnResizeStorageSetting:ge.localStorage,scrollContainerWidth:this.state.scrollContainerWidth,isDragToSelectEnabled:!0,expFlowsAutomatedFolderUI:null!==(e=d.expFlowsAutomatedFolderUI)&&void 0!==e&&e,currentFolderInfo:x,useSkinnyCheckboxes:!0,preventSelectionOnDrag:!0,isInsideBackupFolder:k,isRightClickEnabled:!0,selectedFilter:U})),z=()=>ge.isBrowseSuggestionsEnabled_TTVCTest()&&_e.isBrowseSuggestionsEnabled(this.props.browseExperiments.browseContentSuggestionsVariant)&&!this.props.isInsideBackupFolder&&!!this.scrollContainer.current,K=this.shouldShowFilters()&&U!==i.BrowseFilterType.NONE&&0===o.size,Q=e=>this.props.isValidEnhancedRightClickVariant&&null!==e?s.React$1.createElement(Ca,null,e):e;return s.React$1.createElement("div",{className:Y,ref:this.scrollContainer,onClick:this.onContainerClick},s.React$1.createElement(Vi,{shouldHideOutline:this.props.isInsideBackupFolder||("V1"===_.DEFAULT_DRAG_AND_DROP||"V2"===_.DEFAULT_DRAG_AND_DROP)&&0===this.props.files.size,shouldActivatePersistentOutline:!0,location:"outer_dropzone","data-testid":"dropzone-outline"},s.React$1.createElement("div",{className:i.cx({"maestro-browse-app-content--browse-sticky-hack":!0,"maestro-browse-app-content--empty-state-content":H})},s.React$1.createElement(ga,{responsive:p,fixedWidth:W?this.state.scrollContainerWidth:void 0}),"V1"===_.DEFAULT_DRAG_AND_DROP&&ge.isDragAndDropEnabled_TTVCTest()&&Q(s.React$1.createElement(Hi,{responsive:p,shouldShowInFolderActivationForPersonal:this.shouldShowInFolderActivationForPersonal(),handleUploadButtonClick:this.props.handleUploadButtonClick,emptyFilteredView:K,shouldShowSuggestions:z(),hasFolderWritePermissions:!(a.isInsideSharedFolder&&Yi.includes(a.currentSharedFolderPermissionRole))})),(()=>{if(z()&&this.props.initialTotalNumItems>0){const e=ge.getWidthOfElement(this.scrollContainer.current);if(e)return s.React$1.createElement(Gi,{location:"browse_suggestions",responsive:this.props.responsive,shouldHideOutline:!0},s.React$1.createElement("div",{className:"browse-suggest"},ye.CONTENT_SUGGESTIONS_CVC_MEASUREMENT?s.React$1.createElement(Ha,{containerWidth:e,onHeightChanged:this.handleSuggestionHeightChanged,responsive:this.props.responsive,variant:this.props.browseExperiments.browseContentSuggestionsVariant}):s.React$1.createElement(za,{containerWidth:e,onHeightChanged:this.handleSuggestionHeightChanged,responsive:this.props.responsive,variant:this.props.browseExperiments.browseContentSuggestionsVariant})))}return null})(),"V2"===_.DEFAULT_DRAG_AND_DROP&&ge.isDragAndDropEnabled_TTVCTest()&&Q(s.React$1.createElement(Hi,{responsive:p,shouldShowInFolderActivationForPersonal:this.shouldShowInFolderActivationForPersonal(),handleUploadButtonClick:this.props.handleUploadButtonClick,emptyFilteredView:K,shouldShowSuggestions:z(),hasFolderWritePermissions:!(a.isInsideSharedFolder&&Yi.includes(a.currentSharedFolderPermissionRole))})),(a.isInsideVaultFolder||a.isInFamilySharedFolder)&&(W?s.React$1.createElement("div",{style:{position:"sticky",left:0,width:this.state.scrollContainerWidth}},s.React$1.createElement("div",{ref:O})):s.React$1.createElement("div",{ref:O})),(a.isInsideVaultFolder||a.isInFamilySharedFolder)&&!D&&s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(pa,{responsive:p}),s.React$1.createElement("div",{className:i.cx({"brws-vault-empty-content":!!a.isInsideVaultFolder,"brws-family-empty-content":!!a.isInFamilySharedFolder}),ref:N})),this.shouldShowFilesView()&&s.React$1.createElement(s.React$1.Fragment,null,this.shouldShowFilters()&&s.React$1.createElement(Ii,{responsive:this.props.responsive,user:g}),s.React$1.createElement(Ca,null,q)),s.React$1.createElement(ai,{coreActSfProM2:this.props.browseExperiments.coreActSfProM2},g.is_team&&s.React$1.createElement(oi,{user:g,context:a,files:o,browsePostTTIExperiments:this.props.browsePostTTIExperiments,browsePostTTIData:this.props.browsePostTTIData,isEligibleForOnboardingChecklist:this.props.isEligibleForOnboardingChecklist,showAdminChecklistQarg:this.state.showAdminChecklistQarg,initialIncompleteOnboardingTaskCount:this.state.initialIncompleteOnboardingTaskCount,handleOnboardingTaskCountChange:this.handleOnboardingTaskCountChange,responsive:p,isEligibleForSuggestedItemsToMove:this.props.isEligibleForSuggestedItemsToMove,autoTeamGroupId:h,shouldShowTeamSpaceEmptyZone:this.props.shouldShowTeamSpaceEmptyZone,totalNumItems:this.props.totalNumItems,initialTotalNumItems:this.props.initialTotalNumItems,getDropTargetProps:this.getDropTargetProps(),accM3Variant:this.props.browseExperiments.coreActAccM3}),!g.is_team&&s.React$1.createElement(ni,{componentTag:"browse-footer-personal",fallback:null},s.React$1.createElement(Ri,{user:g,context:a,files:o,browsePostTTIData:this.props.browsePostTTIData,isCurrentlyInRoot:this.props.context.isCurrentlyInRoot,suggestedSharingActionsCount:this.state.suggestedSharingActionsCount,handleSuggestedSharingActionsCountChange:this.handleSuggestedSharingActionsCountChange,isProTrialUser:this.props.isProTrialUser,hasBoltSMEShareFiredDuringPageLifetime:this.state.hasBoltSMEShareFiredDuringPageLifetime,hasUserEverSharedFileOrFolder:this.props.userHasSharedFileOrFolder,suggestedFoldersCount:this.state.suggestedFoldersCount,handleSuggestedFoldersCountChange:this.handleSuggestedFoldersCountChange,initialTotalNumItems:this.props.initialTotalNumItems,isColumnResizingEnabled:W,scrollContainerWidth:this.state.scrollContainerWidth}))))))}registerSharingMadeEasyBoltListener(){var e,t;if(!(({hasUserEverSharedFileOrFolder:e,sfProVariant:t})=>void 0!==t&&(t===i.Variant.V1||!e))({hasUserEverSharedFileOrFolder:this.props.userHasSharedFileOrFolder,sfProVariant:this.props.sfProVariant}))return;const o=null===(t=null===(e=this.props.browsePostTTIData)||void 0===e?void 0:e.activationBoltInfo)||void 0===t?void 0:t.CoreActSharingMadeEasyBoltInfo;if(!o)return;const{id:s,token:a,revision:n,revision_string:r}=o,l=null!=r?r:n;if(!s||!a||void 0===l)return;const c=le.ActivationBolt(s,l.toString(),a,(e=>{e.find((e=>e.unique_id===s))&&(this.setState({hasBoltSMEShareFiredDuringPageLifetime:!0}),i.attemptLogDismissRecommendationTooltip("share_tooltip","file_shared"),this.props.updateRecommendedFeature({featureRecommendationType:"share_file",isCompleted:!0}))}),(()=>{F.reportException({err:new Error("ActivationBolt BoltRefreshCallback invoked."),severity:O.SEVERITY.NONCRITICAL,tags:["activation-bolt:refresh","activation:general-activation"],force:!0})}));c.start(),this.setState({activationBoltSME:c})}}zi.displayName="BrowseFilesViewController";const Ki=i.connect(((e,t)=>{const{context:o,sortedFilesWithFolderSizes:s,sortedFilesWithFolderSizesAndTags:a,path:n,selection:r,selectedFiles:l,newFolderCreationState:c,isRewindVisible:d,sortOrder:u,isQueryingFolderSizes:p,user:g,browsePostTTIExperiments:m,isFileJumping:h,shouldShowTeamSpaceEmptyZone:_,browsePostTTIData:f,autoTeamGroupId:E,experiments:v,selectViewTypeScope:A,shouldHideFilesAndSidebar:S,clipboard:R,selectIsTagsColumnEnabled:y,getCurrentFolderInfo:w,isEligibleForSuggestedItemsToMove:T,browseLoadingState:b,isEligibleForOnboardingChecklist:M,isInsideBackupFolder:I,isProTrialUser:F,userHasSharedFileOrFolder:C,backupFolderPath:O,selectedFilter:N}=i.Selectors$1,{paginatedTotalNumFiles:D,shouldShowVaultEmptyState:P,shouldShowFamilyEmptyState:L}=k.FolderOverviewSelectors,{selectViewType:x}=i.FilesViewInstanceSelectors,{isValidEnhancedRightClickVariant:B,forYouVariant:U,welcomeMatM2Variant:$}=i.ActivationSelectors;let V=i.viewTypeColumns(e),G=A(e);switch(N(e)){case i.BrowseFilterType.RECENTS:V=i.recentsViewTypeColumns,G=i.VIEW_TYPE_SCOPE_RECENTS_VIEW;break;case i.BrowseFilterType.STARRED:V=i.starredViewTypeColumns,G=i.VIEW_TYPE_SCOPE_STARRED_VIEW}return{files:y(e)?a(e):s(e),user:g(e),context:o(e),path:n(e),selection:r(e),selectedFiles:l(e),browsePostTTIExperiments:m(e),viewType:x(e,{instanceId:i.BROWSE_FILES_VIEW_ID}),isRewindVisible:d(e),currentSort:u(e),isFileJumping:h(e),loadingState:b(e),viewTypeColumns:V,isQueryingFolderSizes:p(e),totalNumItems:D(e),fileRename:i.fileRename$1(e),createNewFolderState:c(e),shouldShowTeamSpaceEmptyZone:_(e),browsePostTTIData:f(e),autoTeamGroupId:E(e),browseExperiments:v(e),viewTypeScope:G,shouldShowVaultEmptyState:P(e),shouldShowFamilyEmptyState:L(e),shouldHideFilesAndSidebar:S(e),clipboard:R(e),currentFolderInfo:w(e),isDraggingInternalFiles:me.getIsDraggingInternalFiles(e),isDraggingExternalFiles:!me.getIsDraggingInternalFiles(e),isEligibleForSuggestedItemsToMove:T(e),isEligibleForOnboardingChecklist:M(e),isInsideBackupFolder:I(e),backupFolderPath:O(e),isValidEnhancedRightClickVariant:B(e),isProTrialUser:F(e),userHasSharedFileOrFolder:C(e),sfProVariant:i.getSFProVariant(e),forYouVariant:U(e),welcomeMatM2Variant:$(e),selectedFilter:N(e)}}),(e=>i.bindActionCreators({addFileJumpKeyCode:k.addFileJumpKeyCode,resetFileJumpFilter:k.resetFileJumpFilter,setAndStoreSortOrder:k.setAndStoreSortOrder,onClearSelection:k.clearSelection,setSelection:k.setSelection,setUrl:k.setUrl,setFilesToClipboard:k.setFilesToClipboard,pasteFilesFromClipboard:k.pasteFilesFromClipboard,renameFile:p.renameFile,setCanDisplayFolderSizes:k.setCanDisplayFolderSizes,setFileRename:i.setFileRename,setViewType:k.setViewType,setColumns:i.setColumns,filterOutColumns:i.filterOutColumns,updateStarredView:k.updateStarredView,updateRecommendedFeature:i.activationActions.updateRecommendedFeature},e)))(zi),Qi={selectedFilesSelector:i.selectedFiles$1,userSelector:i.user$1,contextSelector:i.context,overQuotaDataSelector:bo,experimentSelector:Mo,isSearchMode:!1,actionSurface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,currentFolderInfo:i.getCurrentFolderInfo,flowsUserAutomation:$.getUserAutomation,rightRailCollapsedState:i.isRightRailCollapsed,isInsideBackupFolder:i.isInsideBackupFolder,isSelectedBackupFolder:i.isSelectedBackupFolder,backupInfoByFile:i.folderBackupInfoByFile,backupInfoByPath:i.folderBackupInfoByPath},Xi=i.createSelector(i.user$1,(e=>i.RestorationStepsLogger.generate_restore_id(e.id))),Ji=(e,t)=>t.size>0?t.toList():e?i.immutableExports.List([e]):i.immutableExports.List([]),Zi=i.createSelector(i.getCurrentFolderInfo,i.selectedFiles$1,Ji),en=i.createSelector(i.selectCurrentFolderInfoWithTags,i.selectedFilesWithTags,Ji),tn=e=>i.getStateAtNamespace(e,i.DELOREAN_NAMESPACE_KEY),on=e=>tn(e).events;var sn,an,nn,rn,ln,cn;t.RewindState=void 0,(sn=t.RewindState||(t.RewindState={}))[sn.InProgress=0]="InProgress",sn[sn.Done=1]="Done",t.DeloreanActionType=void 0,(an=t.DeloreanActionType||(t.DeloreanActionType={})).initialize="DELOREAN/initialize",an.dismissNUX="DELOREAN/hide-nux",an.setHasDismissedNUX="DELOREAN/set-has-dismissed-NUX",an.setEventsLoaded="DELOREAN/set-folder-history-events-loaded",an.setFolderHistoryEventsError="DELOREAN/set-folder-history-events-error",an.setFolderHistoryPaginationLoading="DELOREAN/set-folder-history-events-loading-more",an.setFolderHistoryPaginationLoaded="DELOREAN/set-folder-history-events-loaded-more",an.setEventCountsInitialLoad="DELOREAN/set-folder-history-event-counts-initial-load",an.loadEventCounts="DELOREAN/load-event-counts",an.setRewindEventCountsError="DELOREAN/set-folder-history-event-counts-error",an.setLoadingGraphWeek="DELOREAN/set-loading-graph-week",an.setRewindPanelSelectedDate="DELOREAN/set-rewind-panel-selected-date",an.clearEventList="DELOREAN/clear-event-list",an.changeRewindPageToNone="DELOREAN/change-rewind-page-to-none",an.changeRewindPageToNUX="DELOREAN/change-rewind-page-to-nux",an.changeRewindPageToNUXOrDayResolution="DELOREAN/change-rewind-page-to-nux-or-day-resolution",an.changeRewindPageToGraphPage="DELOREAN/change-rewind-page-to-graph-page",an.changeRewindPageToActivityListPage="DELOREAN/change-rewind-page-to-activity-list-page",an.changeRewindPageToConfirmationPage="DELOREAN/change-rewind-page-to-confirmation-page",an.changeRewindPageToRewindStarted="DELOREAN/change-rewind-page-to-rewind-started",an.changeRewindPageToUpsell="DELOREAN/change-rewind-page-to-upsell",an.setGraphRangeForward="DELOREAN/navigate-graph-forward",an.setGraphRangeBack="DELOREAN/navigate-graph-backward",an.setGraphLoadFinished="DELOREAN/set-graph-load-finished",an.changeRewindPageFromConfirmationPageToGraphPage="DELOREAN/cancel-confirmation-page",an.goBackFromActivityListPage="DELOREAN/go-back-from-activity-list-page",an.goBackFromConfirmationPage="DELOREAN/go-back-from-confirmation-page",an.setRewindComplete="DELOREAN/set-rewind-complete",an.setRewindInProgress="DELOREAN/set-rewind-in-progress",t.RewindFlowPage=void 0,(nn=t.RewindFlowPage||(t.RewindFlowPage={})).notVisible="notVisible",nn.NUXPage="NUXPage",nn.graphPage="graphPage",nn.activityListPage="activityListPage",nn.confirmationPage="confirmationPage",nn.startedPage="startedPage",nn.upsellPage="upsellPage",t.PaginationDirection=void 0,(rn=t.PaginationDirection||(t.PaginationDirection={})).future="future",rn.past="past",function(e){e.neverLoaded="neverLoaded",e.loadingEntirePanel="loadingEntirePanel",e.hasContent="hasContent",e.error="error"}(ln||(ln={})),function(e){e.event="event",e.dateBanner="date-banner",e.emptyDay="empty-day"}(cn||(cn={}));const dn=e=>{const{isInRightRail:t}=e;return s.React$1.createElement("div",{className:i.cx("folder-history-event-header",{"folder-history-event-header--right-rail":t})},s.React$1.createElement("div",null,s.React$1.createElement(i.Text,{size:"small",color:t?"standard":"faint",isBold:!0},e.segmentName)))},un=e=>{const{actor:t,toBeRolledBack:o}=e;if(!t)return null;const a=t.photo_url?t.photo_url:void 0,n=i.getInitials(t.display_name),r=i.cx({"folder-history-event-card__avatar":!0,"folder-history-event-card__avatar--to-be-rolled-back":o});return s.React$1.createElement("div",{className:"folder-history-event-card__avatar-container"},s.React$1.createElement(i.Avatar,{className:r,src:a,backgroundColor:i.avatarColorForUserIdentifier(n),size:"small",hasNoOutline:!0},n))},pn=e=>{const{style:t}=e;return s.React$1.createElement("div",{className:"folder-history-event-card__line-container"},s.React$1.createElement("div",{className:i.cx({"folder-history-event-card__line":!0,"folder-history-event-card__line--pulse":"pulsing"===t,"folder-history-event-card__line--normal":"default"===t,"folder-history-event-card__line--hovered":"dashed"===t,"folder-history-event-card__line--selected":"solid"===t,"folder-history-event-card__line--invisible":"none"===t})}),e.text&&s.React$1.createElement("div",{className:"folder-history-event-card__line__text"},e.text))},gn=e=>s.React$1.createElement("div",{className:i.cx("folder-history-event-card__card-heading",{"folder-history-event-card__card-heading--right-rail":e.isInRightRail})},be.legacyFormatHtmlAsReact(e.event.eventHeadline,{strong:e=>s.React$1.createElement("strong",null,e)})),mn=e=>s.React$1.createElement("div",{className:i.cx("folder-history-event-card__card-subheading",{"folder-history-event-card__card-subheading--right-rail":e.isInRightRail})},s.React$1.createElement(i.Text,{size:"small",color:"faint"},e.event.timeAgo,e.event.cardSubheading?s.React$1.createElement("span",null," • ",e.event.cardSubheading):void 0));class hn extends s.React$1.Component{constructor(e){super(e),this.handleMouseOver=e=>{const t=e.currentTarget.getBoundingClientRect();this.props.onMouseOver(this.props.event,(e.clientY-t.top)/t.height>.5?"bottom":"top")},this.handleMouseOut=()=>{this.props.onMouseOut(this.props.event)},this.onClickOnEvent=()=>{this.props.onClick(this.props.event)}}render(){const{event:e,rewindMode:t,dividerLineStateTop:o,dividerLineStateBottom:a,isInRightRail:n}=this.props,r=s.React$1.createElement("div",{className:i.cx("folder-history-event-card__border",{"folder-history-event-card__border--right-rail":n})},s.React$1.createElement(un,{actor:e.actor,toBeRolledBack:this.props.willRewindEvent}),s.React$1.createElement("div",{className:i.cx({"folder-history-event-card__card-text":!0,"folder-history-event-card__card-text--right-rail":n})},s.React$1.createElement(gn,{event:e,isInRightRail:n}),s.React$1.createElement(mn,{event:e,isInRightRail:n}))),l=t?s.React$1.createElement("button",{className:i.cx("for-rewind",{"include-in-rewind":!this.props.willRewindEvent,"event-text-faded":this.props.isFaded}),onClick:this.onClickOnEvent},r):s.React$1.createElement("div",null,r);return s.React$1.createElement("div",{onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseOut,className:i.cx({"folder-history-event-card":!0,"folder-history-event-card--right-rail":n})},s.React$1.createElement(pn,Object.assign({},o)),l,s.React$1.createElement(pn,Object.assign({},a)))}}function _n(e){return e}function fn(e,t){return e[".tag"]===t}function En(e,t){return e[".tag"]===t}function vn(e){return fn(e,"single_object_metadata")||fn(e,"move_metadata")||fn(e,"move_in_metadata")||fn(e,"move_out_metadata")||fn(e,"rollback_metadata")||fn(e,"edit_metadata")?e.name:fn(e,"rename_metadata")?e.to_name:fn(e,"other")||fn(e,"multi_object_metadata")?"":e}hn.displayName="FolderHistoryEventCard";let An=0;function Sn(){return String(++An)}function Rn(e,t){return e.filter(t)}function yn(e,t){for(let o=0;o<e.length;o++)if(t(e[o]))return o}const wn=()=>{};function Tn(e){return a.intl.formatDate(e,{weekday:"short",month:"short",day:"numeric"})}function bn(e){const t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Mn(e){const t=new Date(e.getTime()),o=bn(t),s=bn(t);return s.setDate(s.getDate()+1),Math.abs(t.getTime()-o.getTime())<Math.abs(t.getTime()-s.getTime())?o.getTime():s.getTime()}function In(e){const{err:t,isForRewindFlow:o}=e,s=t&&t.error&&t.error.err&&t.error.err[".tag"];return t&&t.raw&&504===t.raw.status?o?a.intl.formatMessage({id:"Z1gIYu",defaultMessage:"There were too many changes for us to display, but we can still help you use Rewind."}):a.intl.formatMessage({id:"48nq81",defaultMessage:"There were too many changes for us to display."}):"unsupported_version"===s?a.intl.formatMessage({id:"h4NBWz",defaultMessage:"Please refresh your browser."}):"access_error"===s?a.intl.formatMessage({id:"+C1mk4",defaultMessage:"You do not have permission to view this location."}):o?a.intl.formatMessage({id:"kvj0Bl",defaultMessage:"There was an internal Dropbox error, but we can still help you use Rewind."}):a.intl.formatMessage({id:"DuR7iM",defaultMessage:"There was an internal Dropbox error."})}function Fn(){i.open_tab("https://www.dropbox.com/support")}const Cn=0,On=91,Nn=500,Dn=2,Pn=i.BrowseQueryArg.rewind;var Ln;!function(e){e[e.Avatar=0]="Avatar",e[e.Heading=1]="Heading",e[e.Subheading=2]="Subheading"}(Ln||(Ln={}));const xn=e=>{const{type:t,animated:o}=e,a=o&&t!==Ln.Avatar,n=i.cx({"folder-history-skeleton__skeleton-card":!0,"folder-history-skeleton__avatar":t===Ln.Avatar,"folder-history-skeleton__heading":t===Ln.Heading,"folder-history-skeleton__subheading":t===Ln.Subheading});return s.React$1.createElement("div",{className:n},a&&s.React$1.createElement("div",{className:"folder-history-skeleton__glint"}))};class kn extends s.React$1.PureComponent{render(){return s.React$1.createElement("div",{className:"folder-history-event-card folder-history-event-skeleton"},s.React$1.createElement("div",{className:"folder-history-event-card__border"},s.React$1.createElement("div",{className:"folder-history-event-card__avatar-container"},s.React$1.createElement(xn,{type:Ln.Avatar,animated:this.props.animated})),s.React$1.createElement("div",{className:"folder-history-event-card__card-text"},s.React$1.createElement("div",{className:"folder-history-event-card__card-heading"},s.React$1.createElement(xn,{type:Ln.Heading,animated:this.props.animated})),s.React$1.createElement("div",{className:"folder-history-event-card__card-subheading"},s.React$1.createElement(xn,{type:Ln.Subheading,animated:this.props.animated})))))}}kn.displayName="FolderHistoryCardSkeleton";class Bn extends s.React$1.PureComponent{constructor(e){super(e),this.setRef=e=>{this.element=e},this.state={height:Nn}}componentDidMount(){this.setState({height:this.element&&this.element.clientHeight||Nn})}render(){const e=On,t=Math.ceil(this.state.height/e),o=[];for(let e=0;e<t;e++)o.push(s.React$1.createElement(kn,{key:e,animated:this.props.animated}));return s.React$1.createElement("div",{className:"folder-history-skeleton",ref:this.setRef},o)}}Bn.displayName="FolderHistoryEventCardsSkeleton";const Un={move:{generateWithYou:e=>1===e?a.defineMessage({id:"kRLsxP",defaultMessage:"You moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to this folder"}):a.defineMessage({id:"8zDWI3",defaultMessage:"{count, plural, one{You moved {count} item from <strong>{src_folder}</strong> to this folder} other{You moved {count} items from <strong>{src_folder}</strong> to this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"X1BqiH",defaultMessage:"{name} moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to this folder"}):a.defineMessage({id:"Cl/4Rx",defaultMessage:"{count, plural, one{{name} moved {count} item from <strong>{src_folder}</strong> to this folder} other{{name} moved {count} items from <strong>{src_folder}</strong> to this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"d/RzfK",defaultMessage:"You moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>"}):a.defineMessage({id:"dSRYcI",defaultMessage:"{count, plural, one{You moved {count} item from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>} other{You moved {count} items from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"QKMF0j",defaultMessage:"{name} moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>"}):a.defineMessage({id:"TURZT1",defaultMessage:"{count, plural, one{{name} moved {count} item from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>} other{{name} moved {count} items from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>}}"})},move_in:{generateWithYou:e=>1===e?a.defineMessage({id:"XJqVGH",defaultMessage:"You moved <strong>{single_item_name}</strong> into this folder"}):a.defineMessage({id:"JxriCD",defaultMessage:"{count, plural, one{You moved {count} item into this folder} other{You moved {count} items into this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"filSNo",defaultMessage:"{name} moved <strong>{single_item_name}</strong> into this folder"}):a.defineMessage({id:"8gVsSR",defaultMessage:"{count, plural, one{{name} moved {count} item into this folder} other{{name} moved {count} items into this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"trPbPE",defaultMessage:"You moved <strong>{single_item_name}</strong> into <strong>{dst_folder}</strong>"}):a.defineMessage({id:"axxaX3",defaultMessage:"{count, plural, one{You moved {count} item into <strong>{dst_folder}</strong>} other{You moved {count} items into <strong>{dst_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"pWAwtE",defaultMessage:"{name} moved <strong>{single_item_name}</strong> into <strong>{dst_folder}</strong>"}):a.defineMessage({id:"TKRX3z",defaultMessage:"{count, plural, one{{name} moved {count} item into <strong>{dst_folder}</strong>} other{{name} moved {count} items into <strong>{dst_folder}</strong>}}"})},move_out:{generateWithYou:e=>1===e?a.defineMessage({id:"i7aMt9",defaultMessage:"You moved <strong>{single_item_name}</strong> out of this folder"}):a.defineMessage({id:"cPrY3T",defaultMessage:"{count, plural, one{You moved {count} item out of this folder} other{You moved {count} items out of this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"uIVHWb",defaultMessage:"{name} moved <strong>{single_item_name}</strong> out of this folder"}):a.defineMessage({id:"vzdkNF",defaultMessage:"{count, plural, one{{name} moved {count} item out of this folder} other{{name} moved {count} items out of this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"Xrh3zC",defaultMessage:"You moved <strong>{single_item_name}</strong> out of <strong>{src_folder}</strong>"}):a.defineMessage({id:"coNoZH",defaultMessage:"{count, plural, one{You moved {count} item out of <strong>{src_folder}</strong>} other{You moved {count} items out of <strong>{src_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"5N4vbB",defaultMessage:"{name} moved <strong>{single_item_name}</strong> out of <strong>{src_folder}</strong>"}):a.defineMessage({id:"+IBZTK",defaultMessage:"{count, plural, one{{name} moved {count} item out of <strong>{src_folder}</strong>} other{{name} moved {count} items out of <strong>{src_folder}</strong>}}"})}},$n={rename:{you:e=>1===e?a.defineMessage({id:"H0eBAl",defaultMessage:"You renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong>"}):a.defineMessage({id:"JrID4H",defaultMessage:"{count, plural, one{You renamed {count} item} other{You renamed {count} items}}"}),name:e=>1===e?a.defineMessage({id:"kiIqI2",defaultMessage:"{name} renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong>"}):a.defineMessage({id:"ASnOd4",defaultMessage:"{count, plural, one{{name} renamed {count} item} other{{name} renamed {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"fWzfms",defaultMessage:"You renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong> in {folder_path}"}):a.defineMessage({id:"6a1Rvf",defaultMessage:"{count, plural, one{You renamed {count} item in {folder_path}} other{You renamed {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"2NFHH7",defaultMessage:"{name} renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong> in {folder_path}"}):a.defineMessage({id:"ben5Q2",defaultMessage:"{count, plural, one{{name} renamed {count} item in {folder_path}} other{{name} renamed {count} items in {folder_path}}}"})},unshare:{you:e=>1===e?a.defineMessage({id:"sinwN6",defaultMessage:"You unshared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"GcYOVe",defaultMessage:"{count, plural, one{You unshared {count} item} other{You unshared {count} items}}"}),name:e=>1===e?a.defineMessage({id:"2v0dx6",defaultMessage:"{name} unshared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"ZB5/iN",defaultMessage:"{count, plural, one{{name} unshared {count} item} other{{name} unshared {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"eqyScK",defaultMessage:"You unshared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"TsV/DS",defaultMessage:"{count, plural, one{You unshared {count} item in {folder_path}} other{You unshared {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"vM9XAD",defaultMessage:"{name} unshared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"hELrb9",defaultMessage:"{count, plural, one{{name} unshared {count} item in {folder_path}} other{{name} unshared {count} items in {folder_path}}}"})},unmount:{you:e=>1===e?a.defineMessage({id:"mPhnVF",defaultMessage:"You deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"eXwZkw",defaultMessage:"{count, plural, one{You deleted {count} item} other{You deleted {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AX/4il",defaultMessage:"{name} deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"tR8p1/",defaultMessage:"{count, plural, one{{name} deleted {count} item} other{{name} deleted {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"ITG2x1",defaultMessage:"You deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"Rdz77s",defaultMessage:"{count, plural, one{You deleted {count} item in {folder_path}} other{You deleted {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"Re3uD/",defaultMessage:"{name} deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"ON/b0t",defaultMessage:"{count, plural, one{{name} deleted {count} item in {folder_path}} other{{name} deleted {count} items in {folder_path}}}"})},share:{you:e=>1===e?a.defineMessage({id:"hDr6DO",defaultMessage:"You shared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"dd/i5u",defaultMessage:"{count, plural, one{You shared {count} item} other{You shared {count} items}}"}),name:e=>1===e?a.defineMessage({id:"ITkgMJ",defaultMessage:"{name} shared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"Thllsi",defaultMessage:"{count, plural, one{{name} shared {count} item} other{{name} shared {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"14X21j",defaultMessage:"You shared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"tkfLxs",defaultMessage:"{count, plural, one{You shared {count} item in {folder_path}} other{You shared {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"CUocxO",defaultMessage:"{name} shared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"bbivSg",defaultMessage:"{count, plural, one{{name} shared {count} item in {folder_path}} other{{name} shared {count} items in {folder_path}}}"})},mount:{you:e=>1===e?a.defineMessage({id:"AJk/mG",defaultMessage:"You added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"gRr0Xj",defaultMessage:"{count, plural, one{You added {count} item} other{You added {count} items}}"}),name:e=>1===e?a.defineMessage({id:"bvecjC",defaultMessage:"{name} added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"rVz+0L",defaultMessage:"{count, plural, one{{name} added {count} item} other{{name} added {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"uiGNOZ",defaultMessage:"You added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"gY6USQ",defaultMessage:"{count, plural, one{You added {count} item in {folder_path}} other{You added {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"G6pT4u",defaultMessage:"{name} added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GSjEU0",defaultMessage:"{count, plural, one{{name} added {count} item in {folder_path}} other{{name} added {count} items in {folder_path}}}"})},lost_access:{you:e=>1===e?a.defineMessage({id:"nKTH5m",defaultMessage:"You were removed from <strong>{single_item_name}</strong>"}):a.defineMessage({id:"m5kUfa",defaultMessage:"{count, plural, one{You were removed from {count} item} other{You were removed from {count} items}}"}),name:e=>1===e?a.defineMessage({id:"nKTH5m",defaultMessage:"You were removed from <strong>{single_item_name}</strong>"}):a.defineMessage({id:"m5kUfa",defaultMessage:"{count, plural, one{You were removed from {count} item} other{You were removed from {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"DWyepJ",defaultMessage:"You were removed from <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"6wETc+",defaultMessage:"{count, plural, one{You were removed from {count} item in {folder_path}} other{You were removed from {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"DWyepJ",defaultMessage:"You were removed from <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"6wETc+",defaultMessage:"{count, plural, one{You were removed from {count} item in {folder_path}} other{You were removed from {count} items in {folder_path}}}"})},add:{you:e=>1===e?a.defineMessage({id:"AJk/mG",defaultMessage:"You added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"gRr0Xj",defaultMessage:"{count, plural, one{You added {count} item} other{You added {count} items}}"}),name:e=>1===e?a.defineMessage({id:"bvecjC",defaultMessage:"{name} added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"rVz+0L",defaultMessage:"{count, plural, one{{name} added {count} item} other{{name} added {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"uiGNOZ",defaultMessage:"You added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"gY6USQ",defaultMessage:"{count, plural, one{You added {count} item in {folder_path}} other{You added {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"G6pT4u",defaultMessage:"{name} added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GSjEU0",defaultMessage:"{count, plural, one{{name} added {count} item in {folder_path}} other{{name} added {count} items in {folder_path}}}"})},edit:{you:e=>1===e?a.defineMessage({id:"i2Xj04",defaultMessage:"You edited <strong>{single_item_name}</strong>"}):a.defineMessage({id:"brKsol",defaultMessage:"{count, plural, one{You edited {count} item} other{You edited {count} items}}"}),name:e=>1===e?a.defineMessage({id:"5WdAIs",defaultMessage:"{name} edited <strong>{single_item_name}</strong>"}):a.defineMessage({id:"6GvPYk",defaultMessage:"{count, plural, one{{name} edited {count} item} other{{name} edited {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"/LISaT",defaultMessage:"You edited <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"46onFW",defaultMessage:"{count, plural, one{You edited {count} item in {folder_path}} other{You edited {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"4/u0CZ",defaultMessage:"{name} edited <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"XX70v0",defaultMessage:"{count, plural, one{{name} edited {count} item in {folder_path}} other{{name} edited {count} items in {folder_path}}}"})},delete:{you:e=>1===e?a.defineMessage({id:"mPhnVF",defaultMessage:"You deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"eXwZkw",defaultMessage:"{count, plural, one{You deleted {count} item} other{You deleted {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AX/4il",defaultMessage:"{name} deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"tR8p1/",defaultMessage:"{count, plural, one{{name} deleted {count} item} other{{name} deleted {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"ITG2x1",defaultMessage:"You deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"Rdz77s",defaultMessage:"{count, plural, one{You deleted {count} item in {folder_path}} other{You deleted {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"Re3uD/",defaultMessage:"{name} deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"ON/b0t",defaultMessage:"{count, plural, one{{name} deleted {count} item in {folder_path}} other{{name} deleted {count} items in {folder_path}}}"})},restore:{you:e=>1===e?a.defineMessage({id:"VV/eYK",defaultMessage:"You restored <strong>{single_item_name}</strong>"}):a.defineMessage({id:"ExAvCI",defaultMessage:"{count, plural, one{You restored {count} item} other{You restored {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AsODc2",defaultMessage:"{name} restored <strong>{single_item_name}</strong>"}):a.defineMessage({id:"WXFbJn",defaultMessage:"{count, plural, one{{name} restored {count} item} other{{name} restored {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"nbcoHm",defaultMessage:"You restored <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GBuqK+",defaultMessage:"{count, plural, one{You restored {count} item in {folder_path}} other{You restored {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"LThlyI",defaultMessage:"{name} restored <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"v7lRJw",defaultMessage:"{count, plural, one{{name} restored {count} item in {folder_path}} other{{name} restored {count} items in {folder_path}}}"})},restore_version:{you:e=>1===e?a.defineMessage({id:"Naoobk",defaultMessage:"You restored a previous version of <strong>{single_item_name}</strong>"}):a.defineMessage({id:"W5uw4O",defaultMessage:"{count, plural, one{You restored a previous version of {count} item} other{You restored a previous version of {count} items}}"}),name:e=>1===e?a.defineMessage({id:"2cWry4",defaultMessage:"{name} restored a previous version of <strong>{single_item_name}</strong>"}):a.defineMessage({id:"4+3wxk",defaultMessage:"{count, plural, one{{name} restored a previous version of {count} item} other{{name} restored a previous version of {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"wyxc8i",defaultMessage:"You restored a previous version of <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"5c+qgK",defaultMessage:"{count, plural, one{You restored a previous version of {count} item in {folder_path}} other{You restored a previous version of {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"KZq2LH",defaultMessage:"{name} restored a previous version of <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"RLihov",defaultMessage:"{count, plural, one{{name} restored a previous version of {count} item in {folder_path}} other{{name} restored a previous version of {count} items in {folder_path}}}"})},rollback:{you:e=>1===e?a.defineMessage({id:"9U9gjD",defaultMessage:"You rolled back <strong>{single_item_name}</strong>"}):a.defineMessage({id:"y2iJBv",defaultMessage:"{count, plural, one{You rolled back {count} item} other{You rolled back {count} items}}"}),name:e=>1===e?a.defineMessage({id:"l3ZNyl",defaultMessage:"{name} rolled back <strong>{single_item_name}</strong>"}):a.defineMessage({id:"T49I/A",defaultMessage:"{count, plural, one{{name} rolled back {count} item} other{{name} rolled back {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"J6Utpo",defaultMessage:"You rolled back <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"HcGUcR",defaultMessage:"{count, plural, one{You rolled back {count} item in {folder_path}} other{You rolled back {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"eET7px",defaultMessage:"{name} rolled back <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"2b/+g/",defaultMessage:"{count, plural, one{{name} rolled back {count} item in {folder_path}} other{{name} rolled back {count} items in {folder_path}}}"})},unknown:{you:()=>null,name:()=>null,youFolder:()=>null,nameFolder:()=>null},other:{you:()=>null,name:()=>null,youFolder:()=>null,nameFolder:()=>null}};function Vn(e){const{event:t,itemCount:o,relativeFolderDisplayPath:s}=e,n=t.op_type;let r={single_item_name:vn(t.object_metadata),count:o,name:t.actor.display_name,folder_path:s,strong:e=>`<strong>${e[0]}</strong>`};if(En(n,"move")||En(n,"move_in")||En(n,"move_out"))return function(e){const{event:t,itemCount:o,i18nParams:s}=e,n=t.object_metadata;if(!t.op_type)return"";const r=t.op_type[".tag"];if("move_in"!==r&&"move_out"!==r&&"move"!==r)throw new Error("Unhandled move type in getMoveTooltip");let l=!1,c=!1,d="",u="";if(fn(n,"move_metadata"))d=i.child_dir(n.from_containing_path),u=i.child_dir(n.to_containing_path);else if(fn(n,"move_in_metadata"))d="",u=i.child_dir(n.to_containing_path);else{if(!fn(n,"move_out_metadata"))throw new Error("Unknown type for move metadata.");d=i.child_dir(n.from_containing_path),u=""}l=i.normalize(u)===i.normalize(e.path),c=i.normalize(d)===i.normalize(e.path);const p=Object.assign(Object.assign({},s),{count:o,src_folder:d,dst_folder:u}),{generateWithYou:g,generateWithYouAndFolder:m,generateWithName:h,generateWithNameAndFolder:_}=Un[r];return"move"===r||"move_in"===r?l?e.isYou?a.intl.formatMessage(g(o),p):a.intl.formatMessage(h(o),p):e.isYou?a.intl.formatMessage(m(o),p):a.intl.formatMessage(_(o),p):"move_out"===r?c?e.isYou?a.intl.formatMessage(g(o),p):a.intl.formatMessage(h(o),p):e.isYou?a.intl.formatMessage(m(o),p):a.intl.formatMessage(_(o),p):r}(Object.assign(Object.assign({},e),{i18nParams:r}));if(En(n,"rename")){const e=t.object_metadata;if(!fn(e,"rename_metadata"))throw new Error("rename optype without associated rename metadata?");r=Object.assign(Object.assign({},r),{single_item_name_prev:e.from_name,single_item_name_next:e.to_name,count:o})}const{you:l,youFolder:c,name:d,nameFolder:u}=$n[n[".tag"]];return void 0===s?e.isYou?l(o)?a.intl.formatMessage(l(o),r):"":d(o)?a.intl.formatMessage(d(o),r):"":e.isYou?c(o)?a.intl.formatMessage(c(o),r):"":u(o)?a.intl.formatMessage(u(o),r):""}const Gn={delete:{generateWithYou:()=>a.defineMessage({id:"dI/OK5",defaultMessage:"You deleted <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"XeXPUa",defaultMessage:"{name} deleted <strong>{item_name}</strong>"})},edit:{generateWithYou:()=>a.defineMessage({id:"LBOymk",defaultMessage:"You edited <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"bOQ/DU",defaultMessage:"{name} edited <strong>{item_name}</strong>"})},add:{generateWithYou:()=>a.defineMessage({id:"+6lkxP",defaultMessage:"You added <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"KtZq4r",defaultMessage:"{name} added <strong>{item_name}</strong>"})},lost_access:{generateWithYou:()=>a.defineMessage({id:"GnRAIi",defaultMessage:"You were removed from <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"GnRAIi",defaultMessage:"You were removed from <strong>{item_name}</strong>"})},mount:{generateWithYou:()=>a.defineMessage({id:"+6lkxP",defaultMessage:"You added <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"KtZq4r",defaultMessage:"{name} added <strong>{item_name}</strong>"})},move:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},move_in:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},move_out:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},rename:{generateWithYou:()=>a.defineMessage({id:"dkI8Ly",defaultMessage:"You renamed {from_name} to <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"BKfMXQ",defaultMessage:"{name} renamed {from_name} to <strong>{item_name}</strong>"})},restore:{generateWithYou:()=>a.defineMessage({id:"r8n/88",defaultMessage:"You restored <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"dSxBG5",defaultMessage:"{name} restored <strong>{item_name}</strong>"})},restore_version:{generateWithYou:()=>a.defineMessage({id:"zRWIxa",defaultMessage:"You restored a previous version of <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"ctbg/G",defaultMessage:"{name} restored a previous version of <strong>{item_name}</strong>"})},rollback:{generateWithYou:()=>a.defineMessage({id:"B70y83",defaultMessage:"You rewound <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"UqoZNX",defaultMessage:"{name} rewound <strong>{item_name}</strong>"})},share:{generateWithYou:()=>a.defineMessage({id:"wGoymc",defaultMessage:"You shared <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"TYVys/",defaultMessage:"{name} shared <strong>{item_name}</strong>"})},unmount:{generateWithYou:()=>a.defineMessage({id:"dI/OK5",defaultMessage:"You deleted <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"XeXPUa",defaultMessage:"{name} deleted <strong>{item_name}</strong>"})},unshare:{generateWithYou:()=>a.defineMessage({id:"U/bb2x",defaultMessage:"You unshared <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"USM+is",defaultMessage:"{name} unshared <strong>{item_name}</strong>"})},unknown:{generateWithYou:()=>({}),generateWithName:()=>({})},other:{generateWithYou:()=>({}),generateWithName:()=>({})}};function Wn(e){const t=e.getTime(),o=i.getTimeBands(Date.now());return t>=o.today?a.intl.formatMessage({id:"JDRaFD",defaultMessage:"Today"}):t>=o.yesterday?a.intl.formatMessage({id:"2iSDDx",defaultMessage:"Yesterday"}):a.intl.formatDate(e,{year:"numeric",month:"short",day:"numeric"})}function jn(e){const{eventPath:t,user:o}=e;return void 0===t?void 0:""===t?i.Viewer.get_root_name(o):i.child_dir(t)}function Hn({event:e,path:t,currentFolder:o,user:n}){let r=0;if(e.object_metadata)if(fn(e.object_metadata,"single_object_metadata")||fn(e.object_metadata,"multi_object_metadata")||fn(e.object_metadata,"rename_metadata")||fn(e.object_metadata,"move_metadata")||fn(e.object_metadata,"move_in_metadata")||fn(e.object_metadata,"move_out_metadata")||fn(e.object_metadata,"rollback_metadata"))r=e.object_metadata.contents_count||0;else if(fn(e.object_metadata,"edit_metadata"))r=1;else{if(!fn(e.object_metadata,"other"))return e.object_metadata;r=1}0===r&&(r=1);const l=new Date(e.timestamp_us/1e3);let c=null;e.object_metadata&&fn(e.object_metadata,"rollback_metadata")&&0!==e.object_metadata.to_timestamp&&(c=new Date(e.object_metadata.to_timestamp/1e3));const d={month:"short",day:"numeric",hour:"numeric",minute:"2-digit"},u=a.intl.formatDate(l,d),p=a.intl.formatDate(l,{weekday:"short",month:"short",day:"numeric"}),g=c?a.intl.formatDate(c,d):null,m=a.intl.formatDate(l,{hour:"numeric",minute:"2-digit"}),h=i.normalize(fn(_=e.object_metadata,"multi_object_metadata")||fn(_,"single_object_metadata")||fn(_,"edit_metadata")||fn(_,"rename_metadata")||fn(_,"rollback_metadata")?i.normalize(_.containing_path):fn(_,"move_metadata")||fn(_,"move_in_metadata")?i.normalize(_.to_containing_path):fn(_,"move_out_metadata")?i.normalize(_.from_containing_path):fn(_,"other")?"":_);var _;const f=h+i.normalize(vn(e.object_metadata))===t,E=e.actor.account_id===n.id,v=Vn({isYou:E,event:e,itemCount:r,path:t,relativeFolderDisplayPath:""}),A=function(e){const{event:t,user:o}=e,s=t.actor.display_name,n=t.op_type,r={item_name:vn(t.object_metadata),name:s,from_name:t.object_metadata&&"from_name"in t.object_metadata&&t.object_metadata.from_name,to_name:t.object_metadata&&"to_name"in t.object_metadata&&t.object_metadata.to_name,from_containing_path:t.object_metadata&&"from_containing_path"in t.object_metadata?t.object_metadata.from_containing_path:"",to_containing_path:t.object_metadata&&"to_containing_path"in t.object_metadata?t.object_metadata.to_containing_path:"",rollback_date:e.fullRollbackDate,strong:e=>`<strong>${e.join("")}</strong>`};return""===r.from_containing_path&&(r.from_containing_path=i.Viewer.get_root_name(o)),""===r.to_containing_path&&(r.to_containing_path=i.Viewer.get_root_name(o)),""===r.item_name&&(r.item_name=i.Viewer.get_root_name(o)),null!==e.fullRollbackDate?e.objectIsCurrentFolder?e.isYou?a.intl.formatMessage({id:"TlB3sY",defaultMessage:"You rewound this folder to {rollback_date}"},r):a.intl.formatMessage({id:"fSDEDR",defaultMessage:"{name} rewound this folder to {rollback_date}"},r):e.isYou?a.intl.formatMessage({id:"gtjB22",defaultMessage:"You rewound <strong>{item_name}</strong> to {rollback_date}"},r):a.intl.formatMessage({id:"PZQMga",defaultMessage:"{name} rewound <strong>{item_name}</strong> to {rollback_date}"},r):e.isYou?a.intl.formatMessage(Gn[n[".tag"]].generateWithYou(),r):a.intl.formatMessage(Gn[n[".tag"]].generateWithName(),r)}({event:e,isYou:E,user:n,objectIsCurrentFolder:f,fullRollbackDate:g});let S;S=En(e.op_type,"delete")?new s.URI({scheme:"https",authority:"www.dropbox.com",path:"/deleted_files"}):i.browse_uri_for_fq_path(n,h);const R=f?void 0:function({event:e,user:t,path:o}){const s=e.object_metadata;if("from_containing_path"in s&&"to_containing_path"in s){const e=jn({eventPath:s.from_containing_path,user:t}),o=jn({eventPath:s.to_containing_path,user:t});return a.intl.formatMessage({id:"L2sa5J",defaultMessage:"from {src} to {dst}"},{src:e,dst:o})}if("from_containing_path"in s){const e=jn({eventPath:s.from_containing_path,user:t});return a.intl.formatMessage({id:"sSt7o/",defaultMessage:"from {location}"},{location:e})}if("to_containing_path"in s){const e=jn({eventPath:s.to_containing_path,user:t});return i.normalize(s.to_containing_path)!==i.normalize(o)?a.intl.formatMessage({id:"/0++y2",defaultMessage:"to {location}"},{location:e}):void 0}if("containing_path"in s){const e=jn({eventPath:s.containing_path,user:t});return""===i.normalize(s.containing_path)&&"name"in s&&""===s.name?void 0:i.normalize(s.containing_path)!==i.normalize(o)?a.intl.formatMessage({id:"N9Moi6",defaultMessage:"in {location}"},{location:e}):void 0}if(!fn(s,"other"))return s}({event:e,user:n,path:t});return{type:cn.event,actor:e.actor,count:r,browseHref:S,eventCardDate:Wn(l),confirmationCardDate:u,formattedDate:p,date:l,tooltip:v,uid:Sn(),eventHeadline:A,timestamp:l.getTime(),displayTooltip:v!==A,cardSubheading:R,operationName:(y=e.op_type,En(y,"add")?"added":En(y,"delete")?"deleted":En(y,"edit")?"edited":En(y,"lost_access")?"lost access":En(y,"mount")?"mounted":En(y,"move")?"moved":En(y,"move_in")?"moved in":En(y,"move_out")?"moved out":En(y,"rename")?"renamed":En(y,"restore")?"restore":En(y,"restore_version")?"restore_version":En(y,"rollback")?"rollback":En(y,"share")?"shared":En(y,"unmount")?"unmounted":En(y,"unshare")?"unshared":En(y,"other")||En(y,"unknown")?"error":y),timeAgo:m};var y}function Yn(e,t,o){return e.slice(e.length-t,e.length-o).reduce(((e,t)=>e+t.count),0)>0}i.injectInternalStyle("metaserver/static/js/delorean/components/folder_history/folder_history.module.out.css",(e=>"._folder-history-loading_eqmc6_1{align-items:center;display:flex;height:100%;justify-content:center}"));const qn="_folder-history-loading_eqmc6_1",zn=e=>{const{cursor:o,direction:n,isInRightRail:r}=e;return s.React$1.createElement("div",{className:i.cx({"folder-history-show-more-card":!0,"folder-history-show-more-card--future":n===t.PaginationDirection.future,"folder-history-show-more-card--past":n===t.PaginationDirection.past,"folder-history-show-more-card--right-rail":r})},s.React$1.createElement(i.Button$1,{variant:"transparent",size:"small",withIconLeft:e.direction===t.PaginationDirection.future?s.React$1.createElement(i.UIIcon,{src:i.ChevronUpLine,size:"small"}):s.React$1.createElement(i.UIIcon,{src:i.ChevronDownLine,size:"small"}),onClick:()=>{e.onShowMore(o)}},e.direction===t.PaginationDirection.future?a.intl.formatMessage({id:"aJv1kI",defaultMessage:"Show newer history"}):a.intl.formatMessage({id:"N8asgh",defaultMessage:"Show older history"})))};class Kn extends s.React$1.PureComponent{constructor(e){super(e),this.previousTopOfListRef=null,this.topOfListRef=null,this.selectedDateOnGraphRef=null,this.onMouseOverEvent=(e,t)=>{if(this.props.events.type===ln.hasContent){const o=this.getProcessedEvents(this.props.events.processedEvents),s=yn(o,(t=>t.type===cn.event&&t.uid===e.uid));if(void 0===s)return;let a,i;if(1===s&&"top"===t&&(t="bottom"),"top"===t){i=o[s];for(let e=s-1;e>=0;e--){const t=o[e];if(t.type===cn.event){a=t;break}}}if("bottom"===t){a=o[s];for(let e=s+1;e<o.length;e++){const t=o[e];if(t.type===cn.event){i=t;break}}}a&&i?this.setState({hoveredEvents:{topEvent:a,botEvent:i}}):a&&!i?this.setState({hoveredEvents:{topEvent:a}}):this.setState({hoveredEvents:void 0})}},this.handleClick=e=>{this.props.isForARewind&&this.setState({selectedEvents:this.state.hoveredEvents}),this.state.hoveredEvents&&this.props.onClickEvent(this.state.hoveredEvents)},this.eventRef=e=>{e!==this.topOfListRef&&null!==e&&(this.previousTopOfListRef=this.topOfListRef,this.topOfListRef=s.ReactDOM.findDOMNode(e))},this.setSelectedDateOnGraphRef=e=>{this.selectedDateOnGraphRef=null!==e?s.ReactDOM.findDOMNode(e):null},this.setContainerRef=e=>{this.containerRef=e},this.hoverOut=()=>{this.setState({hoveredEvents:void 0})},this.state={hoveredEvents:void 0,selectedEvents:void 0}}componentDidUpdate(e){if((this.topOfListRef&&!document.body.contains(this.topOfListRef)||this.previousTopOfListRef&&!document.body.contains(this.previousTopOfListRef))&&(this.topOfListRef=null,this.previousTopOfListRef=null,this.selectedDateOnGraphRef=null),this.props.events.type===ln.hasContent&&this.props.pagesLoaded!==e.pagesLoaded&&this.props.pagesLoaded&&this.props.pagesLoaded)if(this.props.isInitialLoad)this.selectedDateOnGraphRef&&this.selectedDateOnGraphRef.scrollIntoView(!0);else if(this.containerRef&&this.previousTopOfListRef&&this.topOfListRef){const e=this.containerRef,t=this.previousTopOfListRef.offsetTop-this.topOfListRef.offsetTop;e.scrollBy(0,t)}}getProcessedEvents(e){if(this.props.selectedDateTsInMs){const o=bn(new Date(this.props.selectedDateTsInMs));if(!(e.filter((e=>e.type===cn.dateBanner&&e.date.getTime()===o.getTime())).length>0)){const s=(t=o,{type:cn.dateBanner,eventCardDate:Wn(t),date:bn(t)}),a=function(e){return{type:cn.emptyDay,date:e,uid:Sn()}}(o);if(e[0].date<o)e=this.props.events.type===ln.hasContent&&"reached-end"===this.props.events.cursorFuture.type?[s,...e]:[s,a,...e];else if(e[e.length-1].date>o)e=this.props.events.type===ln.hasContent&&"reached-end"===this.props.events.cursorPast.type?[...e,s]:[...e,s,a];else for(let t=0;t<e.length-1;t++)if(e[t].date>o&&e[t+1].date<o){e.splice(t+1,0,s,a);break}}}var t;return e}renderNeverLoaded(){return null}renderError(e){const{isInRightRail:t}=this.props;return s.React$1.createElement("div",null,s.React$1.createElement("div",{className:i.cx("folder-history-event-list__empty-text",{"folder-history-event-list__empty-text--right-rail":t})},s.React$1.createElement(i.Text,{color:"faint"},e," "),s.React$1.createElement(i.Link,{href:"#",variant:"monochromatic",onClick:t?this.props.reloadEvents:Fn},t?a.intl.formatMessage({id:"JXEmzE",defaultMessage:"Try again."}):a.intl.formatMessage({id:"K2WP/Z",defaultMessage:"Contact support"}))))}renderLoading(){const{isInRightRail:e}=this.props;return e?s.React$1.createElement("div",{className:qn},s.React$1.createElement(i.Spinner,{"data-testid":"rewind-activity-list-spinner","aria-valuetext":a.intl.formatMessage({id:"FysXyj",defaultMessage:"Loading folder history"})})):s.React$1.createElement(Bn,{animated:!0})}renderEvents(e){const{isInRightRail:o}=this.props;let n,r;switch(e.cursorPast.type){case"never-fetched":n=s.React$1.createElement("div",{className:"folder-history-show-more-card"},s.React$1.createElement(i.Spinner,{"data-testid":"rewind-activity-list-spinner",size:"xsmall","aria-valuetext":"Loading"}));break;case"reached-end":n=s.React$1.createElement("div",{className:i.cx("folder-history-empty-event-card",{"folder-history-empty-event-card--right-rail":o})},s.React$1.createElement(i.Text,{size:o?"small":void 0},a.intl.formatMessage({id:"WXQmpV",defaultMessage:"That’s as far back as it goes"})));break;default:n=s.React$1.createElement(zn,{cursor:e.cursorPast,direction:t.PaginationDirection.past,onShowMore:this.props.onShowMorePast,isInRightRail:o})}if(this.props.isForARewind)switch(e.cursorFuture.type){case"never-fetched":r=s.React$1.createElement("div",{className:"folder-history-show-more-card"},s.React$1.createElement(i.Spinner,{"data-testid":"rewind-activity-list-spinner",size:"xsmall","aria-valuetext":"Loading"}));break;case"reached-end":r=s.React$1.createElement("div",{className:i.cx("folder-history-empty-event-card",{"folder-history-empty-event-card--right-rail":o})},s.React$1.createElement(i.Text,{size:o?"small":void 0},a.intl.formatMessage({id:"ooTeZE",defaultMessage:"That’s all that happened"})));break;default:r=s.React$1.createElement(zn,{cursor:e.cursorFuture,direction:t.PaginationDirection.future,onShowMore:this.props.onShowMoreFuture})}const l=this.getProcessedEvents(e.processedEvents),c=this.state.hoveredEvents?yn(l,(e=>e.type===cn.event&&e.uid===this.state.hoveredEvents.topEvent.uid)):void 0,d=this.state.selectedEvents?yn(l,(e=>e.type===cn.event&&e.uid===this.state.selectedEvents.topEvent.uid)):void 0,[u,...p]=l;return s.React$1.createElement(ge.StickyContainer,{offsetTop:o?27:0},this.renderEvent({event:u,willRewindEvent:!1,isTopmostEvent:!1,isAnythingInListSelectedOrHovered:void 0!==this.state.selectedEvents}),r,p.map(((e,t)=>{let o=!1;return this.props.isForARewind&&(this.state.selectedEvents&&void 0!==d&&t<d&&(o=!0),!this.state.selectedEvents&&void 0!==c&&t<c&&(o=!0),e.type===cn.emptyDay&&(this.state.selectedEvents?e.date<this.state.selectedEvents.topEvent.date&&(!this.state.selectedEvents.botEvent||e.date>this.state.selectedEvents.botEvent.date)&&(o=!0):this.state.hoveredEvents&&e.date<this.state.hoveredEvents.topEvent.date&&(!this.state.hoveredEvents.botEvent.date||e.date>this.state.hoveredEvents.botEvent.date)&&(o=!0)),void 0===c&&void 0===d&&(o=!0)),this.renderEvent({event:e,willRewindEvent:o,isTopmostEvent:0===t,isAnythingInListSelectedOrHovered:!!this.state.selectedEvents||!!this.state.hoveredEvents})})),n)}renderEvent({event:e,willRewindEvent:t,isTopmostEvent:o,isAnythingInListSelectedOrHovered:n}){const{isInRightRail:r}=this.props;if(e.type===cn.event){const i={top:{style:"none",position:"top",text:""},bottom:{style:"none",position:"bottom",text:""}};if(this.props.isForARewind){const t=a.intl.formatMessage({id:"4EZH1k",defaultMessage:"Choose what to keep"});this.state.hoveredEvents&&this.state.hoveredEvents.botEvent&&this.state.hoveredEvents.botEvent.uid===e.uid&&(i.top={position:"top",style:"dashed",text:t}),this.state.hoveredEvents&&!this.state.hoveredEvents.botEvent&&this.state.hoveredEvents.topEvent.uid===e.uid&&(i.bottom={position:"bottom",style:"dashed",text:t}),this.state.selectedEvents&&this.state.selectedEvents.botEvent&&this.state.selectedEvents.botEvent.uid===e.uid&&(i.top={position:"top",style:"solid",text:this.state.selectedEvents.botEvent.confirmationCardDate}),this.state.selectedEvents&&!this.state.selectedEvents.botEvent&&this.state.selectedEvents.topEvent.uid===e.uid&&(i.bottom={position:"bottom",style:"solid",text:this.state.selectedEvents.topEvent.confirmationCardDate}),n||(i.top={position:"top",style:"pulsing",text:""})}return s.React$1.createElement(hn,{key:e.uid,ref:o?this.eventRef:void 0,rewindMode:this.props.isForARewind,onClick:this.handleClick,onMouseOver:this.onMouseOverEvent,onMouseOut:wn,event:e,willRewindEvent:t,isFaded:t&&!!this.state.hoveredEvents,isSelected:!1,dividerLineStateTop:i.top,dividerLineStateBottom:i.bottom,isInRightRail:r})}return e.type===cn.dateBanner?s.React$1.createElement(ge.Sticky,{ref:this.props.selectedDateTsInMs&&Mn(e.date)===Mn(new Date(this.props.selectedDateTsInMs))?this.setSelectedDateOnGraphRef:void 0,className:"folder-history-sticky-header"},s.React$1.createElement(dn,{segmentName:e.eventCardDate,isInRightRail:this.props.isInRightRail})):e.type===cn.emptyDay?s.React$1.createElement("div",{className:i.cx({"folder-history-empty-event-card":!0,"folder-history-empty-event-card--right-rail":r,"folder-history-empty-event-card__include-in-rewind":this.props.isForARewind&&!t})},s.React$1.createElement(i.Text,{color:r?"standard":"faint",size:r?"small":void 0},a.intl.formatMessage({id:"l0PRXC",defaultMessage:"Nothing happened on this day"}))):e}renderEmptyList(){const{isInRightRail:e}=this.props;return this.props.events.type!==ln.hasContent?null:s.React$1.createElement("div",null,!e&&s.React$1.createElement(dn,{segmentName:a.intl.formatMessage({id:"JDRaFD",defaultMessage:"Today"})}),!e&&s.React$1.createElement("img",{alt:"",className:"folder-history-event-list__empty-img",src:s.static_url("/static/metaserver/static/images/delorean/illo-no-activity-vflHN_Psx.png")}),s.React$1.createElement("div",{className:i.cx("folder-history-event-list__empty-text",{"folder-history-event-list__empty-text--right-rail":e})},s.React$1.createElement(i.Text,{color:"faint",size:e?"small":"standard"},e?a.intl.formatMessage({id:"vzvhs0",defaultMessage:"Updates to this folder will show up here."}):a.intl.formatMessage({id:"LUEaoA",defaultMessage:"There’s nothing in our records"}))))}render(){let e;return this.props.events.type===ln.error?e=this.renderError(this.props.events.errorString):this.props.events.type===ln.loadingEntirePanel?e=this.renderLoading():this.props.events.type===ln.hasContent?e=0===this.props.events.processedEvents.length?this.renderEmptyList():this.renderEvents(this.props.events):(this.props.events,e=null),s.React$1.createElement("div",{onMouseLeave:this.hoverOut,ref:this.setContainerRef,className:i.cx("folder-history-event-list",{"folder-history-event-list--right-rail":this.props.isInRightRail})},e)}}function Qn(e){"unsupported_version"===(e&&e.error&&e.error.err&&e.error.err[".tag"])&&i.Snackbar.fail(a.intl.formatMessage({id:"H0vBqO",defaultMessage:"Dropbox is out of date. Please refresh your browser."}),"delorean-unsupported-version")}function Xn(e){return(s,a)=>o.__awaiter(this,void 0,void 0,(function*(){let a;try{a=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o={path:e.fqpath,version:Dn,direction:e.direction===t.PaginationDirection.future?{".tag":"future"}:{".tag":"past"},timestamp:e.timestampInSeconds?e.timestampInSeconds:Cn,filter:{only_rewindable:e.onlyRewindableEvents,op_type_filters:e.opTypeFilters},ns_id:e.rootNsId};try{return yield(new i.UserApiV2Client).ns("chronicle").rpc("list_events",o,{subjectUserId:e.user.id})}catch(e){throw Qn(e),e}}))}(e)}catch(o){const a=In({err:o,isForRewindFlow:e.onlyRewindableEvents});return void s({type:t.DeloreanActionType.setFolderHistoryEventsError,errorString:a})}e.clearEventList&&s({type:t.DeloreanActionType.clearEventList}),s({type:t.DeloreanActionType.setEventsLoaded,events:a.events||[],user:e.user,direction:e.direction,cursor:a.cursor?{type:"has-cursor",cursor:a.cursor}:{type:"reached-end"},hasMore:a.has_more||!1,fqPath:e.fqpath}),e.done&&e.done()}))}function Jn(e){const{fqPath:o,user:s,openToRewind:a}=e;return{type:t.DeloreanActionType.initialize,fqPath:o,user:s,openToRewind:a,viewer:i.Viewer.get_viewer()}}function Zn(e){const{direction:s}=e;return(a,n)=>o.__awaiter(this,void 0,void 0,(function*(){a({type:t.DeloreanActionType.setFolderHistoryPaginationLoading,direction:e.direction});const r=on(n());if(!("processedEvents"in r))return;if(r.processedEvents[r.processedEvents.length-1].type!==cn.event)return;let l;try{l=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const{cursorObj:o,fqpath:s,direction:a,rootNsId:n}=e,r={cursor:o.cursor,path:s,direction:a===t.PaginationDirection.future?{".tag":"future"}:{".tag":"past"},version:Dn,ns_id:n};try{return(new i.UserApiV2Client).ns("chronicle").rpc("list_events",r,{subjectUserId:e.userId})}catch(e){throw Qn(e),e}}))}({userId:e.user.id,fqpath:e.fqpath,cursorObj:e.direction===t.PaginationDirection.future?e.futureCursor:e.pastCursor,direction:s,rootNsId:e.rootNsId})}catch(o){const s=In({err:o,isForRewindFlow:e.isForRewindFlow});return void a({type:t.DeloreanActionType.setFolderHistoryEventsError,errorString:s})}a({type:t.DeloreanActionType.setFolderHistoryPaginationLoaded,user:e.user,events:l.events||[],cursor:l.has_more?{type:"has-cursor",cursor:l.cursor}:{type:"reached-end"},hasMore:l.has_more||!1,direction:s,fqPath:e.fqpath}),e.done&&e.done(l.events?l.events.length:0)}))}Kn.displayName="FolderHistory";class er extends s.React$1.Component{constructor(e){super(e)}render(){const e=this.props.currentStep>1;return s.React$1.createElement("div",{className:"rewind-graph-title-container"},s.React$1.createElement("div",{className:"rewind-step-header"},e?s.React$1.createElement(i.IconButton,{className:"rewind-step-back",variant:"transparent",size:"small",onClick:this.props.onGoBack},s.React$1.createElement(i.UIIcon,{size:"small",src:i.ChevronLeftLine})):s.React$1.createElement("span",{className:"rewind-step-back"}),s.React$1.createElement(i.Text,{className:"rewind-step-header__text",size:"large"},a.intl.formatMessage({id:"i62rvF",defaultMessage:"{current_step} of {max_step}:"},{current_step:this.props.currentStep,max_step:this.props.maxStep})," "),s.React$1.createElement(i.Text,{className:"rewind-step-header__text",size:"large",isBold:!0},this.props.instructions)))}}er.displayName="RewindStepHeader";class tr extends s.React$1.Component{constructor(e){super(e)}render(){return this.props.visible?s.React$1.createElement("div",{className:"rewind-continue-widget"},s.React$1.createElement("span",{className:"rewind-continue-widget--text"},s.React$1.createElement(i.Text,null,this.props.text)),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:this.props.onContinue,className:"rewind-continue-widget__button"},a.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))):null}}var or,sr,ar;tr.displayName="RewindContinueWidget",function(e){e.load_callout="delorean_browse_load_callout",e.exit_callout="delorean_browse_exit_callout",e.load_preview="delorean_browse_load_preview",e.click_preview_cancel="delorean_browse_click_preview_cancel",e.click_preview_rb="delorean_browse_click_preview_rb",e.click_preview_back="delorean_browse_click_preview_back",e.click_help="delorean_browse_click_help",e.click_nux_next="delorean_browse_click_nux_next",e.load_day_graph="delorean_browse_load_day_graph",e.click_day_graph_date="delorean_browse_click_day_graph_date",e.click_day_graph_next="delorean_browse_click_day_graph_next",e.load_events="delorean_browse_load_events",e.click_events_back="delorean_browse_click_events_back",e.click_events_load_new="delorean_browse_click_events_load_new",e.click_events_load_old="delorean_browse_click_events_load_old",e.click_events_next="delorean_browse_click_events_next",e.load_progress="delorean_browse_load_progress",e.load_completion="delorean_browse_load_completion",e.exit_drawer="delorean_browse_exit_drawer",e.load_nux="delorean_browse_load_nux",e.load_upsell="delorean_browse_load_upsell",e.click_upsell="delorean_browse_click_upsell"}(or||(or={})),t.DeloreanCloseReason=void 0,(sr=t.DeloreanCloseReason||(t.DeloreanCloseReason={})).click_close="click_close",sr.page_exit="page_exit",sr.browse_folder="browse_folder",t.DeloreanPage=void 0,(ar=t.DeloreanPage||(t.DeloreanPage={})).nux="nux",ar.day_graph="day_graph",ar.events="events",ar.preview="preview",ar.progress="progress",ar.completion="completion",ar.upsell="upsell",ar.error_1="error_1",ar.error_2="error_2";const ir=e=>e.isInsideSharedFolder?"sf":e.isInsideTeamFolderTree?"team_space":"home_ns",nr=e=>{const{user:t,restoreId:o,startTsInMs:s,count:a}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_events_load_new,extra:{tti:String(Date.now()-s),num_events:String(a)}})};class rr extends s.React$1.Component{constructor(e){super(e),this.initialEventTimestamp=null,this.startLoadTsInMs=null,this.loadEvents=()=>{const e=Math.floor((this.props.selectedDateTsInMs+Me.ONE_DAY_MS)/1e3);this.props.dispatch(Xn({user:this.props.user,fqpath:this.props.fqpath,onlyRewindableEvents:this.props.isForRewindFlow,direction:t.PaginationDirection.past,timestampInSeconds:e,opTypeFilters:[],done:this.loadPageOfEvents,clearEventList:!1,rootNsId:this.props.rootNsId})),this.props.isForRewindFlow&&this.props.dispatch(Xn({user:this.props.user,fqpath:this.props.fqpath,direction:t.PaginationDirection.future,onlyRewindableEvents:this.props.isForRewindFlow,timestampInSeconds:e,opTypeFilters:[],done:this.loadPageOfEvents,clearEventList:!1,rootNsId:this.props.rootNsId}))},this.loadPageOfEvents=()=>{const{user:e,restoreId:t,events:o}=this.props;this.setState((s=>{const a=s.pagesLoaded+1;if(a===(this.props.isForRewindFlow?2:1)&&((e=>{const{user:t,restoreId:o,events:s,startLoadTsInMs:a}=e;let n;null!==a&&(n=Date.now()-a);const r=s.type===ln.hasContent?s.processedEvents.filter((e=>e.type===cn.event)).length:0;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.load_events,extra:{num_events:String(r),tti:String(n)}})})({user:e,restoreId:t,startLoadTsInMs:this.startLoadTsInMs,events:o}),this.props.events.type===ln.hasContent))for(const e of this.props.events.processedEvents)if(e.type===cn.event){this.initialEventTimestamp=e.timestamp;break}return Object.assign(Object.assign({},s),{pagesLoaded:a})}))},this.onGoBack=()=>{const{user:e,restoreId:o}=this.props;(e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_events_back})})({user:e,restoreId:o}),this.props.dispatch({type:t.DeloreanActionType.goBackFromActivityListPage})},this.showMoreFuture=e=>{const o=Date.now();this.props.dispatch(Zn({user:this.props.user,fqpath:this.props.fqpath,futureCursor:e,direction:t.PaginationDirection.future,isForRewindFlow:this.props.isForRewindFlow,rootNsId:this.props.rootNsId,done:e=>{const{user:t,restoreId:s}=this.props;nr({user:t,restoreId:s,startTsInMs:o,count:e})}}))},this.showMorePast=e=>{const o=Date.now();this.props.dispatch(Zn({user:this.props.user,fqpath:this.props.fqpath,pastCursor:e,direction:t.PaginationDirection.past,isForRewindFlow:this.props.isForRewindFlow,rootNsId:this.props.rootNsId,done:e=>{const{user:t,restoreId:s}=this.props;nr({user:t,restoreId:s,startTsInMs:o,count:e})}}))},this.selectEventForRewind=e=>{this.setState({eventAboveDivider:e.topEvent})},this.onContinue=()=>{this.state.eventAboveDivider&&(this.logContinue(this.state.eventAboveDivider),this.props.dispatch({type:t.DeloreanActionType.changeRewindPageToConfirmationPage,eventAboveDivider:this.state.eventAboveDivider}))},this.logContinue=e=>{if(this.props.events.type!==ln.hasContent)return;const t=this.initialEventTimestamp,{user:o,restoreId:s}=this.props;(e=>{const{user:t,events:o,initialEventTimestamp:s,selectedEvent:a,restoreId:n}=e,r=s,l=a.timestamp,c=yn(o,(e=>e.type===cn.event&&e.timestamp===r))||0,d=yn(o,(e=>e.type===cn.event&&e.timestamp===l))||0;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:n,step:or.click_events_next,extra:{num_events_offset:String(Math.abs(c-d))}})})({selectedEvent:e,events:this.props.events.processedEvents,restoreId:s,initialEventTimestamp:t,user:o})},this.state={pagesLoaded:0,eventAboveDivider:void 0}}componentDidMount(){this.startLoadTsInMs=Date.now(),this.props.dispatch({type:t.DeloreanActionType.clearEventList}),this.loadEvents()}render(){const{isInRightRail:e}=this.props;return s.React$1.createElement("div",{className:i.cx("folder-history-ie11fix",{"folder-history-ie11fix--right-rail":e})},s.React$1.createElement("div",{className:i.cx("folder-history-event-list-container",{"folder-history-event-list-container--right-rail":e})},this.props.isForRewindFlow&&s.React$1.createElement(er,{currentStep:2,maxStep:3,instructions:a.intl.formatMessage({id:"nfkI3y",defaultMessage:"Fine tune"}),onGoBack:this.onGoBack}),s.React$1.createElement(Kn,{selectedDateTsInMs:this.props.selectedDateTsInMs,events:this.props.events,isForARewind:this.props.isForRewindFlow,isInitialLoad:this.props.isInitialLoad,onShowMoreFuture:this.showMoreFuture,onShowMorePast:this.showMorePast,onClickEvent:this.props.isForRewindFlow?this.selectEventForRewind:wn,reloadEvents:this.loadEvents,pagesLoaded:this.state.pagesLoaded,isInRightRail:e}),s.React$1.createElement(tr,{onContinue:this.onContinue,visible:!!this.state.eventAboveDivider,text:a.intl.formatMessage({id:"BRqDy1",defaultMessage:"Now, let’s review"})})))}}rr.displayName="RewindActivityListPage";const lr={hasDismissedNUX:!1,isInitialLoad:!0,pageData:{[t.RewindFlowPage.notVisible]:{page:t.RewindFlowPage.notVisible},[t.RewindFlowPage.NUXPage]:{page:t.RewindFlowPage.NUXPage},[t.RewindFlowPage.graphPage]:{page:t.RewindFlowPage.graphPage,contents:{type:"initial-load"},graphStartOffset:7,graphEndOffset:0},[t.RewindFlowPage.confirmationPage]:{page:t.RewindFlowPage.confirmationPage,eventAboveDivider:void 0},[t.RewindFlowPage.activityListPage]:{page:t.RewindFlowPage.activityListPage,selectedDateTsInMs:0,selectedDateString:""},[t.RewindFlowPage.startedPage]:{page:t.RewindFlowPage.startedPage,rewindState:t.RewindState.InProgress,rewindId:"",selectedEvent:void 0},[t.RewindFlowPage.upsellPage]:{page:t.RewindFlowPage.upsellPage}},activePage:t.RewindFlowPage.notVisible,folderDisplayName:"",rootDisplayName:"",folderName:"",fqpath:"",events:{type:ln.loadingEntirePanel}};function cr(e,o){const{user:s,viewer:n,openToRewind:r}=o,l=i.normalize(o.fqPath),c=function(e,t){let o="";return o="personal"===e.role?t.is_paired||t.linked_users_set.has_linked_or_paired_users()?a.intl.formatMessage({id:"QPBzI3",defaultMessage:"Personal"}):a.intl.formatMessage({id:"rIir19",defaultMessage:"Dropbox"}):t.team_name,o}(s,n);let d="";d=""===l?c:i.child_dir(l);const u=lr;return Object.assign(Object.assign({},u),{folderDisplayName:d,rootDisplayName:c,folderName:i.child_dir(l),fqpath:l,activePage:r?t.RewindFlowPage.NUXPage:t.RewindFlowPage.notVisible})}function dr(e,o){if(i.normalize(e.fqpath)!==i.normalize(o.fqPath))return e;const s=e.events.type===ln.hasContent?e.events.processedEvents:[],a=o.events.map((t=>Hn({event:t,path:e.fqpath,currentFolder:e.folderName,user:o.user})));let n,r=e.events.type===ln.hasContent?e.events.cursorFuture:{type:"never-fetched"},l=e.events.type===ln.hasContent?e.events.cursorPast:{type:"never-fetched"};o.direction===t.PaginationDirection.future?(n=Rn([...a,...s],(e=>e.type===cn.event)),r=o.hasMore?o.cursor:{type:"reached-end"}):(n=Rn([...s,...a],(e=>e.type===cn.event)),l=o.hasMore?o.cursor:{type:"reached-end"}),n=n.sort(((e,t)=>t.timestamp-e.timestamp));const c=[];let d;for(const e of n)d&&e.eventCardDate===d.eventCardDate||c.push({type:cn.dateBanner,eventCardDate:e.eventCardDate,date:bn(new Date(e.timestamp))}),c.push(e),d=e;let u=!1,p=!1;return e.events.type===ln.hasContent&&(u=o.direction!==t.PaginationDirection.past&&e.events.loadingPastPage,p=o.direction!==t.PaginationDirection.future&&e.events.loadingFuturePage),Object.assign(Object.assign({},e),{isInitialLoad:o.type===t.DeloreanActionType.setEventsLoaded,events:{type:ln.hasContent,loadingPastPage:u,loadingFuturePage:p,processedEvents:c,cursorFuture:r,cursorPast:l}})}function ur(e,o){if("loaded"!==e.pageData.graphPage.contents.type)return e;const s=o.type===t.DeloreanActionType.setGraphRangeBack,a=e.pageData.graphPage.graphStartOffset+(s?o.length:-o.length),i=e.pageData.graphPage.graphEndOffset+(s?o.length:-o.length);return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{graphStartOffset:a,graphEndOffset:i,contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{type:"loaded",hasDataThisWeek:Yn(e.pageData.graphPage.contents.data,a,i)})})})})}function pr(e=lr,o){switch(o.type){case t.DeloreanActionType.initialize:return cr(0,o);case t.DeloreanActionType.dismissNUX:return function(e,t){return Object.assign(Object.assign({},e),{hasDismissedNUX:!0})}(e);case t.DeloreanActionType.setFolderHistoryPaginationLoading:return function(e,o){return e.events.type===ln.hasContent?Object.assign(Object.assign({},e),{events:Object.assign(Object.assign({},e.events),{loadingPastPage:o.direction===t.PaginationDirection.past,loadingFuturePage:o.direction===t.PaginationDirection.future})}):e}(e,o);case t.DeloreanActionType.setEventsLoaded:return dr(e,o);case t.DeloreanActionType.setFolderHistoryEventsError:return function(e,t){return Object.assign(Object.assign({},e),{events:{type:ln.error,errorString:t.errorString}})}(e,o);case t.DeloreanActionType.setFolderHistoryPaginationLoaded:return dr(e,o);case t.DeloreanActionType.setHasDismissedNUX:return function(e,t){return Object.assign(Object.assign({},e),{hasDismissedNUX:t.hasDismissedNUX})}(e,o);case t.DeloreanActionType.changeRewindPageToNone:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.notVisible})}(e);case t.DeloreanActionType.changeRewindPageToGraphPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.changeRewindPageToNUX:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.NUXPage})}(e);case t.DeloreanActionType.changeRewindPageToRewindStarted:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.startedPage,pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:{page:t.RewindFlowPage.startedPage,selectedEvent:o.event,rewindId:o.rewindId,rewindState:t.RewindState.InProgress}})})}(e,o);case t.DeloreanActionType.changeRewindPageToNUXOrDayResolution:return function(e,o){return e.hasDismissedNUX?Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage}):Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.NUXPage})}(e);case t.DeloreanActionType.changeRewindPageToConfirmationPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.confirmationPage,pageData:Object.assign(Object.assign({},e.pageData),{confirmationPage:{page:t.RewindFlowPage.confirmationPage,eventAboveDivider:o.eventAboveDivider}})})}(e,o);case t.DeloreanActionType.changeRewindPageFromConfirmationPageToGraphPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.changeRewindPageToUpsell:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.upsellPage})}(e);case t.DeloreanActionType.loadEventCounts:return function(e,o){const s=e.pageData.graphPage.contents,a=[..."loaded"===s.type?s.data:[],...o.eventCounts],i={};for(const e of a)i[e.dateTsInMs]=e;const n=Object.keys(i).map((e=>i[Number(e)])).sort(((e,t)=>e.dateTsInMs-t.dateTsInMs)),r="loaded"===s.type?s.selectedDateTsInMs:void 0,l="loaded"===s.type?s.selectedDateString:void 0;return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:{type:"loaded",data:n,hasDataThisWeek:Yn(n,e.pageData.graphPage.graphStartOffset,e.pageData.graphPage.graphEndOffset),selectedDateTsInMs:r,selectedDateString:l,loadingNextWeek:!1,loadingPreviousWeek:!1,namespaceCount:o.namespaceCount,changedNamespaceCount:o.changedNamespaceCount}}})})}(e,o);case t.DeloreanActionType.setRewindEventCountsError:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:{type:"error",errorString:o.errorString}}})})}(e,o);case t.DeloreanActionType.setRewindPanelSelectedDate:return function(e,o){return e.activePage!==t.RewindFlowPage.graphPage||"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{selectedDateTsInMs:o.selectedDateTsInMs,selectedDateString:o.selectedDateString})}})})}(e,o);case t.DeloreanActionType.changeRewindPageToActivityListPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.activityListPage,pageData:Object.assign(Object.assign({},e.pageData),{activityListPage:{page:t.RewindFlowPage.activityListPage,selectedDateTsInMs:o.selectedDateTsInMs,selectedDateString:o.selectedDateString}})})}(e,o);case t.DeloreanActionType.clearEventList:return function(e,t){return Object.assign(Object.assign({},e),{isInitialLoad:!0,events:{type:ln.loadingEntirePanel}})}(e);case t.DeloreanActionType.goBackFromActivityListPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.goBackFromConfirmationPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.activityListPage})}(e);case t.DeloreanActionType.setGraphRangeBack:case t.DeloreanActionType.setGraphRangeForward:return ur(e,o);case t.DeloreanActionType.setRewindComplete:return function(e,o){return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:Object.assign(Object.assign({},e.pageData.startedPage),{rewindState:t.RewindState.Done})})})}(e);case t.DeloreanActionType.setRewindInProgress:return function(e,o){return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:Object.assign(Object.assign({},e.pageData.startedPage),{rewindState:t.RewindState.InProgress})})})}(e);case t.DeloreanActionType.setLoadingGraphWeek:return function(e,o){return"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{loadingNextWeek:"forward"===o.graphPositionChange,loadingPreviousWeek:"backward"===o.graphPositionChange})})})})}(e,o);case t.DeloreanActionType.setGraphLoadFinished:return function(e,o){return"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{loadingNextWeek:!1,loadingPreviousWeek:!1})})})})}(e);default:return e}}const gr=r.once((()=>{const e=i.getStoreAndRegisterReducers({[i.DELOREAN_NAMESPACE_KEY]:pr});return i.getStoreForBackup(),e})),mr={includeAdds:!1,includeDeletes:!1,includeEdits:!1,includeMovesRenames:!1,includeRollbacks:!1},hr={includeAdds:!0,includeDeletes:!0,includeEdits:!0,includeMovesRenames:!0,includeRollbacks:!0},_r=Object.keys(hr).length,fr={includeAdds:a.intl.formatMessage({id:"ZZaddC",defaultMessage:"Added"}),includeDeletes:a.intl.formatMessage({id:"hH81BT",defaultMessage:"Deleted"}),includeEdits:a.intl.formatMessage({id:"70WThr",defaultMessage:"Edited"}),includeMovesRenames:a.intl.formatMessage({id:"r98g8J",defaultMessage:"Moved or renamed"}),includeRollbacks:a.intl.formatMessage({id:"zN84c7",defaultMessage:"Rewound"})},Er=e=>Object.keys(e).filter((t=>e[t])).length,vr=e=>Er(e)===_r,Ar=e=>0===Er(e),Sr=e=>vr(e)||Ar(e),Rr=e=>s.React$1.createElement(i.Menu.ActionItem,{key:e.value,value:e.value,role:"menuitemcheckbox","aria-checked":e.isChecked,"aria-label":e.label,withLeftAccessory:s.React$1.createElement(i.Checkbox,{"data-testid":"filter-menu-item-checkbox",checked:e.isChecked,onChange:e.callback,readOnly:!0,tabIndex:-1})},s.React$1.createElement("span",{className:i.cx({"folder-history-filter-item-label--right-rail":e.isInRightRail})},e.label));class yr extends s.React$1.Component{constructor(e){super(e),this.handleMenuSelection=e=>{const t=!this.state[e];this.updateEvents(Object.assign(Object.assign({},this.state),{[e]:t})),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(t?i.WebUserActionLogEvent.SELECT_HISTORY_TYPE:i.WebUserActionLogEvent.CLEAR_SELECT_HISTORY_TYPE)},this.toggle=()=>{vr(this.state)?(this.updateEvents(mr),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(i.WebUserActionLogEvent.CLEAR_SELECT_HISTORY_TYPE)):(this.updateEvents(hr),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(i.WebUserActionLogEvent.SELECT_ALL_HISTORY_TYPE))},this.updateEvents=e=>{if(this.setState(Object.assign({},e)),o=this.state,s=e,o.includeAdds===s.includeAdds&&o.includeDeletes===s.includeDeletes&&o.includeEdits===s.includeEdits&&o.includeMovesRenames===s.includeMovesRenames&&o.includeRollbacks===s.includeRollbacks||vr(o)&&Ar(s)||Ar(o)&&vr(s))return;var o,s;const a=(e=>{const t=[];return Sr(e)||(e.includeAdds&&t.push({".tag":"include_adds"}),e.includeDeletes&&t.push({".tag":"include_deletes"}),e.includeEdits&&t.push({".tag":"include_edits"}),e.includeMovesRenames&&t.push({".tag":"include_moves_and_renames"}),e.includeRollbacks&&t.push({".tag":"include_rollbacks"})),t})(e);this.props.dispatch({type:t.DeloreanActionType.clearEventList}),this.props.dispatch(Xn({user:this.props.user,fqpath:this.props.fqpath,direction:t.PaginationDirection.past,timestampInSeconds:0,onlyRewindableEvents:!1,opTypeFilters:a,clearEventList:!0,rootNsId:this.props.rootNsId}))},this.state=mr}componentDidMount(){this.state=mr}updateFilter(e){return()=>{this.updateEvents(Object.assign(Object.assign({},this.state),{[e]:!this.state[e]}))}}render(){const e=Er(this.state),{isInRightRail:t}=this.props,o=t?a.intl.formatMessage({id:"k7FRk3",defaultMessage:"Filter"}):a.intl.formatMessage({id:"zlnfYS",defaultMessage:"History type"});return s.React$1.createElement(i.Menu.Wrapper,{closeOnSelection:!1,isPortaled:!1,className:"",onSelection:this.handleMenuSelection},(({getContentProps:n,getTriggerProps:r})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.FilterChip,Object.assign({withDropdownIcon:!0,isSelected:!Sr(this.state)&&!t,size:t?"small":void 0,"data-testid":"folder-history-filter-chip"},r()),o,e>0?t?` • ${e}`:s.React$1.createElement(i.NotificationBadge,{className:"folder-history-filter__badge"},e):null),s.React$1.createElement(i.Menu.Content,Object.assign({},n(),{style:t?{width:296}:void 0}),s.React$1.createElement(i.Menu.Segment,{withLabel:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("span",{className:i.cx({"folder-history-filter-dropdown-label--right-rail":t})},a.intl.formatMessage({id:"kF0BIo",defaultMessage:"Select type"})),s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:this.toggle},s.React$1.createElement("span",{className:i.cx({"folder-history-filter-dropdown-filter-button--right-rail":t})},vr(this.state)?a.intl.formatMessage({id:"cZ6jlq",defaultMessage:"Clear"}):a.intl.formatMessage({id:"kTr/8f",defaultMessage:"Select all"}))))},Object.keys(hr).map((e=>s.React$1.createElement(Rr,{key:e,value:e,label:fr[e],isChecked:this.state[e],callback:this.updateFilter(e)}))))))))}}yr.displayName="FolderHistoryFilter";i.injectInternalStyle("metaserver/static/js/right_rail/folder_activity/folder_activity.module.out.css",(e=>"._container_8liyr_1{display:flex;flex-direction:column;height:auto}._container-loading_8liyr_8,._events-list_8liyr_13{flex-grow:1;height:100%}._events-list_8liyr_13,._filter-row_8liyr_20{display:flex}._filter-row_8liyr_20{background-color:var(--color__standard__background);padding-top:3px;position:-webkit-sticky;position:sticky;top:0;white-space:nowrap;z-index:2}._filter-row-rewind_8liyr_33{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight);margin-left:var(--spacing__base_unit)}"));const wr="_container_8liyr_1",Tr="_container-loading_8liyr_8",br="_events-list_8liyr_13",Mr="_filter-row_8liyr_20",Ir="_filter-row-rewind_8liyr_33",Fr=gr(),Cr=e=>!e.isSelection&&1===e.files.size&&Te.isListBladeDirectory(e.files),Or=({user:e,files:t,restoreId:o,rewindAction:n,onRewindButtonClick:r,onLogEvent:l})=>{const c=a.useIntl(),d=i.useDispatch(),u=i.useSelector(on),p=i.normalize(t.first().fq_path);s.reactExports.useEffect((()=>{d(Jn({fqPath:p,user:e,openToRewind:!1}))}),[p,e,d]);const g=s.reactExports.useCallback((()=>{r&&(r(),l({eventName:i.WebUserActionLogEvent.REWIND_MODAL_LAUNCH}))}),[r,l]),m=s.reactExports.useCallback((e=>{l({eventName:e})}),[l]);return s.reactExports.createElement("div",{className:i.cx(wr,{[Tr]:u.type===ln.loadingEntirePanel})},s.reactExports.createElement("div",{className:Mr},s.reactExports.createElement(yr,{dispatch:d,user:e,fqpath:p,isInRightRail:!0,onLogFilterUpdate:m}),n&&s.reactExports.createElement(i.Tooltip,{title:c.formatMessage({id:"9qF084",defaultMessage:"Rewind"})},s.reactExports.createElement(i.IconButton,{variant:"transparent",onClick:g,className:Ir,size:"small",disabled:!n.isEnabled},s.reactExports.createElement(i.UIIcon,{src:i.RewindLine,"aria-label":c.formatMessage(n.text),size:"small"})))),s.reactExports.createElement("div",{className:br},s.reactExports.createElement(rr,{dispatch:d,user:e,fqpath:p,events:u,selectedDateTsInMs:(new Date).getTime(),restoreId:o,isForRewindFlow:!1,isInitialLoad:!0,key:p,isInRightRail:!0})))};Or.displayName="FolderActivityWithoutStore";const Nr=s.reactExports.memo((e=>{const t=a.useIntl(),{id:o,files:n}=e;return Cr(e)&&Te.isListBladeDirectory(n)?s.reactExports.createElement(we.RightRail.Blade,{withTitle:t.formatMessage({id:"CyQ/TZ",defaultMessage:"Activity"}),withIcon:s.reactExports.createElement(i.UIIcon,{src:i.FolderHistoryLine}),id:o},s.reactExports.createElement(i.Provider,{store:Fr},s.reactExports.createElement(Or,Object.assign({},e,{files:n})))):null}));Nr.displayName="FolderActivity";const Dr=s.reactExports.memo((e=>{const{id:t}=e,o=a.useIntl();return Cr(e)?s.reactExports.createElement(we.RightRail.CollapsedBladeIcon,{id:t,withIcon:s.reactExports.createElement(i.UIIcon,{src:i.FolderHistoryLine,"aria-label":o.formatMessage({id:"HEBotB",defaultMessage:"Open Activity"})}),tooltip:o.formatMessage({id:"1063Dm",defaultMessage:"Activity"})}):null}));Dr.displayName="CollapsedFolderActivityButton";const Pr={CollapsedButton:Dr,Blade:Nr,isBladeSupported:Cr},Lr=y.createRewindActionSelector(),xr=Te.enhanceBladeUI(Pr,(()=>{const e=i.useSelector(Xi),t=i.useSelector((e=>Lr(e,Qi))),o=i.useDispatch();return{restoreId:e,rewindAction:t,onRewindButtonClick:s.reactExports.useCallback((()=>{o(((e,t)=>{const o=t();y.rewindActionHandler(o,Qi)}))}),[o])}})),kr=Te.enhanceBladeUI(Te.InfoBladeUI,(()=>{var e;const t=i.useDispatch(),o=i.useSelector(i.browsePostTTIExperiments).expBrowseManualTagging,a=i.useSelector(i.browsePostTTIExperiments).expFlowsAutomatedFolderUI,n=i.useSelector(i.browsePostTTIExperiments).expFlowsAutoTagUi,r=i.useSelector(i.browsePostTTIExperiments).expAutoTaggingAwarenessVariant,l=i.useSelector(i.browsePostTTIExperiments).expFlowsApprovalFlowVariant,c=i.useSelector(i.isInsideBackupFolder),d=null!==(e=i.useSelector(i.backupFolderPath))&&void 0!==e?e:void 0,u=i.useSelector(i.structuredTaggingVariant);return{setUrl:s.React$1.useCallback((e=>t(k.setUrl({path:e}))),[t]),manualTaggingVariant:o,flowsAutomatedFolderUiVariant:a,flowsAutoTagUiVariant:n,autoTaggingAwarenessVariant:r,flowsApprovalVariant:l,isInsideBackup:c,structuredTaggingVariant:u,backupFolderPath:d,navigateToBlade:e=>{t(k.expandBlade(e))}}}));i.injectInternalStyle("metaserver/static/js/right_rail/pinned_blade/pinned_items_list.module.out.css",(e=>"._list_dk35q_1{flex-direction:column;justify-content:center}._list_dk35q_1,._row_dk35q_7{display:flex}._row_dk35q_7{align-items:center;height:40px}._row_dk35q_7 svg{height:24px;min-height:24px;min-width:24px;width:24px}._row_dk35q_7:not(:first-child){margin-top:var(--spacing__base_unit)}._row-name_dk35q_22{flex-grow:1;margin-left:var(--spacing__unit--0_5);margin-right:var(--spacing__base_unit);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._row-name_dk35q_22:focus{box-shadow:none;margin:0;margin-left:var(--spacing__unit--0_5);padding:0;text-decoration:underline}._row-name_dk35q_22:focus:not([data-focus-visible-added]){box-shadow:none;text-decoration:none}._row_dk35q_7:hover ._row-name_dk35q_22:hover{text-decoration:underline}._unpin-button_dk35q_50{color:var(--color__faint__text);margin-left:auto;opacity:0}._row-name_dk35q_22:focus~._unpin-button_dk35q_50,._unpin-button_dk35q_50:focus{opacity:1}._row_dk35q_7:not(:hover) ._row-name_dk35q_22:focus:not([data-focus-visible-added])~._unpin-button_dk35q_50{opacity:0}._row_dk35q_7:hover ._unpin-button_dk35q_50{opacity:1}"));const Br="_list_dk35q_1",Ur="_row_dk35q_7",$r="_row-name_dk35q_22",Vr="_unpin-button_dk35q_50",Gr=({file:e})=>e.is_dir?s.reactExports.createElement(i.IconContent,{name:Ie.convertLegacyFolderIconToSpectrum(e.icon,"small"),"aria-label":i.File.getFilename(e)}):s.reactExports.createElement(i.FileIcon,{path:e.fq_path,variant:"small","aria-label":i.File.getFilename(e)});Gr.displayName="PinnedItemsIcon";const Wr=({file:e,onNavigateToFileOrFolder:t,onUnpin:o,isCurrentFolderReadOnly:n})=>{const r=s.reactExports.useCallback((()=>{t(e,{actionSource:i.ActionSourceValue.PINNED_BLADE})}),[t,e]),l=s.reactExports.useCallback((()=>{o(e)}),[o,e]),c=a.useIntl();return s.reactExports.createElement("div",{className:Ur},s.reactExports.createElement(Gr,{file:e}),s.reactExports.createElement(i.Link,{hasNoUnderline:!0,variant:"monochromatic",href:r,className:$r},s.reactExports.createElement(i.Text,{size:"small"},s.reactExports.createElement(H.Truncate,{location:.5,tooltipControlProps:{placement:"top",openDelay:500}},i.File.getFilename(e)))),!n&&s.reactExports.createElement(i.Tooltip,{title:c.formatMessage({id:"iOpE6C",defaultMessage:"Unpin"})},s.reactExports.createElement(i.IconButton,{variant:"transparent",size:"small",className:Vr,"aria-label":c.formatMessage({id:"4mXyBy",defaultMessage:"Unpin {file}"},{file:i.File.getFilename(e)}),onClick:l},s.reactExports.createElement(i.UIIcon,{src:i.CloseLine,size:"small"}))))};Wr.displayName="PinnedItemsListRow";const jr=s.reactExports.memo((e=>{var{files:t}=e,a=o.__rest(e,["files"]);return s.reactExports.createElement("div",{className:Br},t.map((e=>s.reactExports.createElement(Wr,Object.assign({file:e},a,{key:e.fq_path})))))}));jr.displayName="PinnedItemsList";i.injectInternalStyle("metaserver/static/js/right_rail/pinned_blade/pinned_blade.module.out.css",(e=>"._container_bcbqe_1{flex-grow:1}._drop-target_bcbqe_5{align-items:center;background-color:var(--color__standard__background);border:1px dashed var(--color__disabled__border);display:flex;justify-content:center;margin-bottom:8px;min-height:40px;padding:var(--spacing__unit--1_5);position:-webkit-sticky;position:sticky;top:0}._drop-target-active_bcbqe_18{background-color:var(--color__theme__primary--lightest);border-color:var(--color__core__accent)}._drop-target-text_bcbqe_25{pointer-events:none}"));const Hr="_container_bcbqe_1",Yr="_drop-target_bcbqe_5",qr="_drop-target-active_bcbqe_18",zr="_drop-target-text_bcbqe_25",Kr=e=>!e.isInsideBackup&&!e.isSelection&&1===e.files.size&&Te.isListBladeDirectory(e.files)&&!e.files.first().is_in_vault_folder,Qr=k.makePinnedItemsSelector(),Xr=k.makeFolderFileIdSelector(),Jr=({files:e,user:t,onNavigateToFileOrFolder:o,onSnackbarShow:n,onLogEvent:r})=>{const[l,c]=s.reactExports.useState(!1),d=e.first(),u=i.filename(d.fq_path,i.Viewer.get_root_name(t)),p=i.useSelector((e=>Qr(e,{path:d.fq_path}))),g=i.useSelector((e=>Xr(e,{path:d.fq_path})))||i.fileToContentReferenceId(d),m=!i.canEditOverviewForFile(d),h=i.useDispatch(),_=a.useIntl();s.reactExports.useEffect((()=>{h(k.reloadContentReferences({folderFileId:g,componentNamespace:"pinned_blade"}))}),[g,h]);const f=s.reactExports.useCallback((e=>{h(k.removeContentReferences({componentNamespace:"pinned_blade",fileIds:[e.file_id],folderFileId:g,snackbarConfig:{folderName:u,onShow:()=>{n(d.fq_path)}}})),r({eventName:i.WebUserActionLogEvent.FOLDER_OVERVIEW_UNPIN})}),[h,g,u,r,d.fq_path,n]),E=s.reactExports.useCallback((e=>{e.dataTransfer.types.includes(he.INTERNAL_FILE_DATA_TRANSFER_TYPE)&&c(!0)}),[c]),v=s.reactExports.useCallback((e=>{c(!1)}),[c]),A=s.reactExports.useCallback((e=>{const t=e.dataTransfer;if(l&&t.types.includes(he.INTERNAL_FILE_DATA_TRANSFER_TYPE)){const e=t&&t.getData(he.INTERNAL_FILE_DATA_TRANSFER_TYPE),{fileInfos:o}=JSON.parse(e);o&&h(k.addContentReferences({componentNamespace:"pinned_blade",fileIds:o.map(i.fileToContentReferenceId),folderFileId:g,snackbarConfig:{folderName:u,onShow:()=>{n(d.fq_path)}}}))}c(!1),e.stopPropagation(),e.preventDefault()}),[c,d.fq_path,n,g,u,h,l]),S=s.reactExports.useCallback((e=>{m&&e.dataTransfer.types.includes(he.INTERNAL_FILE_DATA_TRANSFER_TYPE)&&i.Snackbar.fail(_.formatMessage({id:"uLAlio",defaultMessage:"Can’t pin files or folders to a read-only folder"}))}),[m,_]);return s.reactExports.createElement("div",{onDrop:S,className:Hr},!m&&s.reactExports.createElement("div",{className:i.cx(Yr,{[qr]:l}),onDragEnter:E,onDrop:A,onDragLeave:v},s.reactExports.createElement(i.Text,{color:"faint",size:"small",className:zr},_.formatMessage({id:"DBhFpB",defaultMessage:"Drag files or folders into here to quickly find them later."}))),!!(null==p?void 0:p.length)&&s.reactExports.createElement(jr,{files:p,onNavigateToFileOrFolder:o,onUnpin:f,isCurrentFolderReadOnly:m}))};Jr.displayName="PinnedBladeWithoutStore";const Zr=s.reactExports.memo((e=>{const t=a.useIntl(),{id:o,files:n}=e;return Kr(e)&&Te.isListBladeDirectory(n)?s.reactExports.createElement(we.RightRail.Blade,{withTitle:t.formatMessage({id:"2H0C/o",defaultMessage:"Pinned items"}),withIcon:s.reactExports.createElement(i.UIIcon,{src:i.PinLine}),id:o},s.reactExports.createElement(i.Provider,{store:i.getStoreForFolderOverview()},s.reactExports.createElement(Jr,Object.assign({},e,{files:n})))):null}));Zr.displayName="PinnedBlade";const el=s.reactExports.memo((e=>{const{id:t}=e,o=a.useIntl();return Kr(e)?s.reactExports.createElement(we.RightRail.CollapsedBladeIcon,{id:t,withIcon:s.reactExports.createElement(i.UIIcon,{src:i.PinLine,"aria-label":o.formatMessage({id:"Qf32GQ",defaultMessage:"Open pinned items"})}),tooltip:o.formatMessage({id:"GQQdjj",defaultMessage:"Pinned items"})}):null}));el.displayName="CollapsedPinnedBladeButton";const tl={CollapsedButton:el,Blade:Zr,isBladeSupported:Kr};const ol={info:kr,pinned_items:Te.enhanceBladeUI(tl,(function(){const e=i.useDispatch();return{onSnackbarShow:s.reactExports.useCallback((t=>{e(k.setUrl({path:t,expandedBlade:"pinned_items"}))}),[e])}})),comments:Te.enhanceBladeUI(Te.CommentsBladeUI,(({onLogEvent:e,files:t})=>({onClickAnnotation:s.React$1.useCallback((o=>{const s=t.first();s instanceof i.File&&(g.browseNavigateActions.navigateToFileOrFolder({file:s,activeCommentThreadId:o.threadID}),e({eventName:i.WebUserActionLogEvent.BROWSE_COMMENT_ACTION,extra:{action:"click_annotation"}}),o.e.stopPropagation())}),[t,e])}))),folder_activity:xr,file_activity:Te.enhanceBladeUI(Te.FileActivityBladeUI,(()=>{const e=i.useSelector((e=>i.selectViewType(e,{instanceId:i.BROWSE_FILES_VIEW_ID})));return{handleVersionHistory:s.React$1.useCallback(((t,o)=>g.handleVersions({user:t,files:o,isSearchMode:!1,viewType:e,isSidebar:!0,actionSurface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,rightRailState:"opened"})),[e])}}))},sl={info:i.WebUserActionLogEvent.CLICK_ON_INFO,pinned_items:i.WebUserActionLogEvent.VIEW_PINNED_ITEMS,folder_activity:i.WebUserActionLogEvent.VIEW_FOLDER_ACTIVITY,file_activity:i.WebUserActionLogEvent.VIEW_FILE_ACTIVITY,comments:i.WebUserActionLogEvent.VIEW_COMMENTS},al=({isCollapsed:e})=>{const t=a.useIntl(),o=e?"right-rail-loading-indicator--collapsed":"right-rail-loading-indicator",n=e?"small":"large";return s.reactExports.createElement("div",{className:o},s.reactExports.createElement(i.Spinner,{className:"right-rail-loading-spinner",size:n,"aria-valuetext":t.formatMessage({id:"SociMV",defaultMessage:"Loading"})}))};al.displayName="LoadingPlaceholder";const il=({responsive:e,onNavigateToFileOrFolder:t})=>{const o=i.useSelector(Zi),n=i.useSelector(i.selectedFiles$1),r=i.useSelector(i.isContinuousOnboardingBackgroundActive),l=i.useSelector(i.user$1),c=i.useSelector((e=>i.selectViewType(e,{instanceId:i.BROWSE_FILES_VIEW_ID}))),d=i.useSelector(i.context),u=i.useSelector(i.isRightRailCollapsed),p=i.useSelector(i.browseLoadingState),m=i.useSelector(i.isInsideBackupFolder),h=i.useSelector((e=>{if(m&&1===o.size&&Te.isBladeDirectory(o.first()))return i.backupFolderTimestampSelector(e,o.first().fq_path)})),_=i.useSelector(i.backups),f=i.useSelector(i.selectIsTaggingEnabled),E=i.useSelector(en),{num_files_selected:v,num_folders_selected:A}=i.countFilesAndFolders(o),S=i.useDispatch(),R=s.reactExports.useCallback((e=>{S(k.setRightRailIsCollapsed(e)),i.logBrowseAction({uid:l.id,num_files_selected:v,num_folders_selected:A,view_type:c,action:e?i.WebUserActionLogEvent.COLLAPSE_RIGHT_SIDEBAR:i.WebUserActionLogEvent.OPEN_RIGHT_SIDEBAR,action_surface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,right_sidebar_state:e?"opened":"collapsed"})}),[S,l,v,A,c]),y=s.reactExports.useCallback((e=>{S(k.expandBlade(e))}),[S]),w=s.reactExports.useCallback(((e,o)=>{e instanceof i.File?t(e,o):F.reportException({err:new Error("Received FSWM in browse"),severity:"non-critical"})}),[t]),T=Ce.useStabilizedCallback((e=>{g.logUserEventOnFile({args:{files:o,isSearchMode:!1,user:l,viewType:c,actionSurface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,rightRailState:u?"collapsed":"opened"},action_type:e.eventName,extra:e.extra})})),b={files:f?E:o,user:l,viewType:c,isSearchMode:!1,isSelection:n.size>0,onNavigateToFileOrFolder:w,onLogEvent:T,isInsideBackup:m,lastBackupTime:h},M=!(!e||!e.isResponsive||e.isMatchedLarge),I=a.useIntl(),C=null==_?void 0:_.find((e=>e.fqPath===d.currentFQPath));let O;O=m?C&&i.getDisplayedFilename(ce.getTitle(o,l,d,I))===i.filename_without_extension(i.filename(C.fqPath))?C.displayName:_?i.getDisplayedFilename(ce.getTitle(o,l,d,I)):"":i.getDisplayedFilename(ce.getTitle(o,l,d,I));const N=((e,t)=>{const o=i.useSelector(i.expandedBlade$1),a=!!ol[o]&&ol[o].isBladeSupported(Object.assign(Object.assign({},e),{id:o}));return s.reactExports.useEffect((()=>{a||t(i.DEFAULT_BROWSE_BLADE)}),[a,t]),a?o:i.DEFAULT_BROWSE_BLADE})(b,y),D=s.reactExports.useCallback((e=>{if(!u&&e===N)return;y(e);const t=sl[e];t&&i.logBrowseAction({uid:l.id,num_files_selected:v,num_folders_selected:A,view_type:c,action:t,action_surface:i.ActionSurfaceLogValue.RIGHT_SIDEBAR,right_sidebar_state:u?"collapsed":"opened"})}),[y,l,v,A,c,u,N]),P=s.reactExports.useCallback((e=>{D(e),R(!1)}),[D,R]),L=s.reactExports.useCallback((()=>{R(!1)}),[R]),x=s.reactExports.useCallback((()=>{R(!0)}),[R]);if(M)return null;if(p===i.LoadingState.LOADING_FIRST_PAGE)return s.reactExports.createElement(al,{isCollapsed:u});const B=ge.isFacePileEnabled_TTVCTest()?s.reactExports.createElement(is,null):null,U=b.files.size>0?Object.entries(ol).map((([e,{Blade:t}])=>s.reactExports.createElement(t,Object.assign({},b,{key:e,id:e})))):[],$=b.files.size>0?Object.entries(ol).map((([e,{CollapsedButton:t}])=>s.reactExports.createElement(t,Object.assign({},b,{key:e,id:e})))):[],V=i.cx({"browse-right-rail--collapsed-container":u,"browse-right-rail--expanded-container":!u});return s.reactExports.createElement(s.reactExports.Fragment,null,s.reactExports.createElement(we.RightRail.RightRailWrapper,{isExpanded:!u,onExpand:L,onExpandBlade:u?P:D,className:V,expandedBlade:N,onCollapse:x,withTitle:O,header:B,expandedChildren:U,collapsedChildren:$}),s.reactExports.createElement(Fe.AsyncContinuousOnboarding,{userId:l.id,isBackgroundActive:r}))};il.displayName="BrowseRightRailWithoutCss";const nl=i.requireCssWithComponent(il,["/static/metaserver/static/css/right_rail/right_rail-vflKsUXs7.css","/static/metaserver/static/css/delorean/delorean-vflhckSBA.css","/static/typescript/component_libraries/dig-experimental/src/index.web-vflMgkV3K.css","/static/typescript/libraries/comments2/src/index-vfljiK9YC.css"]),rl=({onNavigateToFileOrFolder:e})=>{const t=i.useSelector(i.shouldHideFilesAndSidebar),o=i.useSelector(i.isRightRailCollapsed),a=Oe.useResponsiveProps();return t?null:s.React$1.createElement("div",{className:o?"brws-right-rail-wrapper--collapsed":"brws-right-rail-wrapper"},s.React$1.createElement(nl,{responsive:a,onNavigateToFileOrFolder:e}))},ll=()=>{const e=i.useDispatch();return s.reactExports.useCallback((t=>{e(k.setHideFilesAndSidebar({shouldHideFilesAndSidebar:t}))}),[e])},cl=s.reactExports.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FamilyBrowseRoot:t}=yield new Promise((function(t,o){e(["./c_family_ui_family_browse_root"],t,o)}));return{default:t}})))),dl=e=>{const t=i.useSelector(k.shouldShowFamilyEmptyState),o=ll(),a=Object.assign(Object.assign({},e),{shouldShowFamilyEmptyState:t,setHideFilesAndSidebar:o});return s.React$1.createElement(s.reactExports.Suspense,{fallback:s.React$1.createElement("div",null)},s.React$1.createElement(cl,Object.assign({},a)))},ul=i.Loadable({displayName:"AsyncCustomizationModal",loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{CustomizationModalController:t}=yield new Promise((function(t,o){e(["./c_folder_subscriptions_customization_customization_modal_controller"],t,o)}));return t}))}),pl=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FolderUnfollower:t}=yield new Promise((function(t,o){e(["./c_folder_subscriptions_follow_folder_unfollower"],t,o)}));return{default:t}})))),gl=()=>s.React$1.createElement(s.React$1.Suspense,{fallback:null},s.React$1.createElement(pl,null)),ml=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ActivationRoot:t}=yield new Promise((function(t,o){e(["./c_activation_activation_root"],t,o)}));return t}))});ml.displayName="AsyncActivationRoot";const{lazy:hl,Suspense:_l}=s.React,fl=hl((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{VaultRoot:t}=yield new Promise((function(t,o){e(["./c_vault_vault_browse_root"],t,o)}));return{default:t}})))),El=e=>{const t=i.useSelector(k.shouldShowVaultEmptyState),o=ll(),a=Object.assign(Object.assign({},e),{shouldShowVaultEmptyState:t,setHideFilesAndSidebar:o});return s.reactExports.createElement(_l,{fallback:s.reactExports.createElement("div",null)},s.reactExports.createElement(fl,Object.assign({},a)))},{lazy:vl,Suspense:Al}=s.React,Sl=vl((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FlowsRoot:t}=yield new Promise((function(t,o){e(["./c_flows_components_flows_browse_root"],t,o)}));return{default:t}})))),Rl=e=>s.reactExports.createElement(Al,{fallback:s.reactExports.createElement("div",null)},s.reactExports.createElement(Sl,Object.assign({},e))),yl=s.React$1.createContext({}),wl=e=>o.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation()})),Tl=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{MigrationModal:t}=yield new Promise((function(t,o){e(["./c_gg_to_cdm_migration_migration_modal"],t,o)}));return{default:t}})))),bl=e=>{const t=i.useSelector(i.ggToCdmMigrationVariant),o=i.useSelector(i.isGgToCdmMigrationExperimentActive);return s.React$1.createElement(s.React$1.Fragment,null,o&&s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null)},s.React$1.createElement(Tl,Object.assign({},e,{ggToCdmMigrationVariant:t}))))};function Ml(e){const t=function(e){const t=i.getStoreForBrowse().getState();return i.unsortedFiles(t).get(e)}(e);if(t){const e=i.getStoreForBrowse(),o=e.getState(),s=i.user$1(o),a=i.context(o);De.asyncShowShareModal(s,t,{browseContext:a,origin:i.SHARE_ACTION_ORIGIN_TYPE.ONBOARDING_CHECKLIST},(({path:t,qargs:o})=>e.dispatch(k.setUrl({path:t,qargs:o}))))}}const Il=e=>{const t=e=>Pe.TASK_ORDER.indexOf(e.type[".tag"]);return e.sort(((e,o)=>t(e)-t(o)))};const Fl=["intro","install_desktop","install_mobile","upload_personal","upload_team","end"];function Cl(e){return Fl.find((t=>t===(null==e?void 0:e.toLowerCase())))}const Ol="onboarding_task_carousel",Nl="carousel_seen",Dl=e=>{F.reportException({err:new Error(e),severity:O.SEVERITY.NONCRITICAL,force:!1,tags:["team-activation",Ol,"upload_to_member_folder"]})},Pl=()=>{I.FileUploaderController.handleUploadButtonClick({folderUpload:!1,source:i.ActionSourceValue.ONBOARDING_TASK_CAROUSEL,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"continuous_onboarding"})},Ll=i.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{OnboardingTaskCarousel:t}=yield new Promise((function(t,o){e(["./c_activation_onboarding_task_carousel"],t,o)}));return t}))}),xl=(e,t)=>o.__awaiter(void 0,void 0,void 0,(function*(){if("/"!==t)return;if(!["V1","V2"].includes(e.accM3Variant))return;if(he.is_mobile_or_tablet())return;const a=yield(n=e.user.id,o.__awaiter(void 0,void 0,void 0,(function*(){const e=new i.UserApiV2Client;return(yield e.ns("growth").rpc("performed_user_action",{project:"acc",action:Nl},{subjectUserId:n})).has_performed})));var n;if("V2"===e.accM3Variant&&a)return;const r=(yield W.getTasks())||[];if(0===r.length)return;if(r.every((e=>e.is_completed))&&a)return;const l=Il(r);i.mountModal(s.React$1.createElement(Ll,Object.assign({onboardingTasks:l},e)),!0,"onboarding-task-carousel")})),kl=({className:e})=>{const t=a.useIntl();return s.React$1.createElement(i.AccessoryBadge,{className:e},t.formatMessage(ke.UNLIMITED))};kl.displayName="UnlimitedBadge";const Bl=({backups:e,quota:t,getIdForExemptAPI:o,onSave:n})=>{const r=a.useIntl(),[l,c]=s.React$1.useState(!1),[d,u]=s.React$1.useState({}),p=t=>{const s=t?Object.assign({},d):{};[i.BackupType.COMPUTER,i.BackupType.EXTERNAL_DRIVE].forEach((t=>{if(!s[t]&&!e.find((e=>e.type===t&&e.quotaExempt))){const a=e.filter((e=>e.type===t)).sort(((e,t)=>(e.size||0)<(t.size||0)?1:-1))[0];s[t]=a?o(a):""}})),n(s)};s.React$1.useEffect((()=>{Ue.logEvent({event:"show_sku_modal",page_source:"backup"})}),[]);const g=()=>{Ue.logEvent({event:"close_sku_modal",action_surface:"sku_modal",page_source:"backup"}),p(!1)};return l?s.React$1.createElement(i.Modal$1,{open:!0,isCentered:!0,width:500,onRequestClose:g,"data-testid":"backup-sku-modal"},s.React$1.createElement(i.Modal$1.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(i.Modal$1.Title,null,s.React$1.createElement(a.FormattedMessage,Object.assign({},ke.SKU_MODAL_EDB_TITLE)))),s.React$1.createElement(i.Modal$1.Body,{hasVerticalSpacing:!0},ke.SKU_MODAL_EDB_CONTENT(r)),s.React$1.createElement(i.Modal$1.Footer,null,s.React$1.createElement(i.Button$1,{variant:"primary",onClick:g},s.React$1.createElement(a.FormattedMessage,Object.assign({},ke.SKU_MODAL_EDB_OK_BUTTON))))):s.React$1.createElement(i.Modal$1,{open:!0,isCentered:!0,width:700,onRequestClose:g,"data-testid":"backup-sku-modal"},s.React$1.createElement(i.Modal$1.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(i.Modal$1.Title,{className:"sku-modal-title"},s.React$1.createElement(i.GlyphLogo,{src:i.BackupGlyph,size:32}),s.React$1.createElement(a.FormattedMessage,Object.assign({},ke.SKU_MODAL_TITLE)))),s.React$1.createElement(i.Modal$1.Body,{hasVerticalSpacing:!0},ke.SKU_MODAL_DESCRIPTION(r,t?i.format_bytes(t):void 0),s.React$1.createElement("div",{className:"sku-modal-content"},[i.BackupType.COMPUTER,i.BackupType.EXTERNAL_DRIVE].map((t=>{const a=e.filter((({type:e})=>e===t)),n=a.find((({quotaExempt:e})=>!!e)),l=d[t]||(n?o(n):"");return s.React$1.createElement("div",{key:t,className:"sku-modal-section"},a.length?s.React$1.createElement(i.Select,{id:t,value:l,onChange:e=>u((o=>Object.assign(Object.assign({},o),{[t]:e})))},a.map((e=>s.React$1.createElement(i.Select.Option,{key:o(e),value:o(e),withAccessory:s.React$1.createElement(i.UIIcon,{src:e.type===i.BackupType.EXTERNAL_DRIVE?i.ExternalDriveLine:"mac"===e.platform?i.AppleExternalLogo:"win"===e.platform?i.WindowsExternalLogo:i.BackupLine})},s.React$1.createElement(s.React$1.Fragment,null,e.name,o(e)===l&&s.React$1.createElement(kl,{className:"sku-modal-badge"})))))):s.React$1.createElement(i.Button$1,{variant:"outline",onClick:()=>t===i.BackupType.COMPUTER?Be.launchBackupOnDesktop():c(!0),withIconLeft:s.React$1.createElement(i.UIIcon,{src:t===i.BackupType.COMPUTER?i.ComputerLine:i.ExternalDriveLine})},ke.SKU_MODAL_BACKUP_BUTTON(r,t)),s.React$1.createElement(i.Text,{color:"faint",size:"small",className:"sku-modal-subtitle"},ke.SKU_MODAL_SUBTITLE(r,t,a.length)))})))),s.React$1.createElement(i.Modal$1.Footer,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:g},s.React$1.createElement(a.FormattedMessage,Object.assign({},ke.SKU_MODAL_CLOSE_BUTTON))),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:()=>{Ue.logEvent({event:"close_sku_modal",action_surface:"sku_modal",page_source:"backup",extra:{button:"cta"}}),p(!0)}},s.React$1.createElement(a.FormattedMessage,Object.assign({},ke.SKU_MODAL_CTA_BUTTON)))))},Ul=({skuModalEnabled:e,userSKU:t,allBackups:o,userQuota:n,updateBackupExemptInfoCB:r})=>{const c=i.getActiveUser(),d=a.useIntl(),[u,p]=s.React$1.useState(!1);s.React$1.useEffect((()=>{l.require_css("/static/metaserver/static/css/sync_everything/backup_web-vfl1_5vuj.css")}),[]);const g=()=>{const e={accountId:null==c?void 0:c.account_id,source:"backup_web"};Be.launchBackupOnDesktop(e),Ue.logEvent({event:"open_desktop_app",page_source:"backup",extra:{action:"manage_backups"}})};return s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Menu.Wrapper,null,(({getTriggerProps:a,getContentProps:n})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,Object.assign({},a(),{variant:"transparent",withDropdownIcon:!0,withIconLeft:s.React$1.createElement(i.UIIcon,{src:i.SettingsLine}),className:"backup-settings-button"}),d.formatMessage(ke.MANAGE_BACKUPS)),s.React$1.createElement(i.Menu.Content,Object.assign({},n()),s.React$1.createElement(i.Menu.Segment,null,e&&t===i.ProductPlanType.SYNC_EVERYTHING&&s.React$1.createElement(i.Menu.ActionItem,{withLeftAccessory:s.React$1.createElement(i.UIIcon,{src:i.RepeatLine}),withTitle:d.formatMessage(ke.MANAGE_BACKUP_SKU),onClick:()=>p(!0),disabled:(null!=o?o:[]).length<2}),s.React$1.createElement(i.Menu.ActionItem,{withLeftAccessory:s.React$1.createElement(i.UIIcon,{src:i.OpenLine}),withTitle:d.formatMessage(ke.OPEN_BACKUP_SETTINGS),onClick:g,disabled:he.is_mobile_or_tablet(),className:"backup-settings-menu-action-button","data-testid":"backup-settings-menu-action-button"})),s.React$1.createElement(i.Menu.Segment,null,s.React$1.createElement(i.Menu.ActionItem,{withTitle:d.formatMessage(ke.LEARN_MORE),onClick:()=>i.open_tab("/account/plan")})))))),e&&u&&o&&s.React$1.createElement(Bl,{backups:o,quota:n,getIdForExemptAPI:i.getIdForExemptAPI,onSave:e=>{const t=[];[{type:i.BackupType.COMPUTER,api:i.setQuotaExemptCB},{type:i.BackupType.EXTERNAL_DRIVE,api:i.setQuotaExemptEDB}].forEach((({type:s,api:a})=>{o&&e[s]&&(a(c,e[s]),o.forEach((o=>{i.getIdForExemptAPI(o)===e[s]&&t.push(o.name)})),r(e))})),p(!1),t.length&&i.Snackbar.complete(ke.SKU_MODAL_SUCCESS_SNACKBAR(d,t),void 0)}}))};Ul.displayName="ManageBackupsButton";i.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/banners/banner_template.module.out.css",(e=>"._bannerTemplateWrapper_169nt_1{padding-left:var(--spacing__unit--2);padding-right:var(--spacing__unit--2);padding-top:var(--spacing__unit--2)}._bannertemplateTextWrapper_169nt_7{white-space:pre-wrap}"));const $l="_bannerTemplateWrapper_169nt_1",Vl="_bannertemplateTextWrapper_169nt_7",Gl=({actions:e,bodyText:t,title:o,type:a,variant:n,withCloseButton:r,withLeftPictogram:l,onRequestClose:c})=>s.React$1.createElement("div",{className:$l},s.React$1.createElement(i.Banner,Object.assign({type:a,withCloseButton:r,onRequestClose:c},"rich"===n?{variant:n,withLeftPictogram:l}:{variant:n}),s.React$1.createElement(i.Banner.Message,null,o&&s.React$1.createElement(i.Title,{size:"small"},o),s.React$1.createElement("span",{className:Vl},t)),e&&s.React$1.createElement(i.Banner.Actions,null,e)));Gl.displayName="BannerTemplate";const Wl={v:"4.8.0",meta:{g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr:60,ip:1,op:175,w:420,h:420,nm:"fss-shortcut",ddd:0,assets:[{id:"image_0",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_1",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_2",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_3",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEt0lEQVR4nO3dT2ibdRzH8c/zRJc10dqyGkXb1bLRHlYEpzAXh/ijeBo7eFnnbSADL94GnnrQCR7moQNhl4HX1lOZl15KFFw8qRXKSgttWhpcbJu1PGmeR5c8+Xlo4rL0T5Ka9vd86ed1GXny0Hzhvf7yPEn6xEIdrpsbtrT+0IJ+G7DeqLc/HYwGstBIa1tPRCIvjdbb39pto+c5l+DjK1h4D8BzLZ+S6tEAFrWlv90r4o5w3pbzIyy8v9t9ZEQGtv9uW1vncvXG/+J43kYvSqFZAG1HPhrVo7VlfRyJvDhe2fA0XN5xwWhB9kw8Gygvj4wWdJal9XeVG7bnbfSWn9Mo+Nq8vHMPAGyUQiPggYgkl4HtpfIDs3NQM7TWrwKAXSg86TY9DDXOsix4nnPJLvolnmALo7V+x247eTJkehBqjuf93WmbHoKa52zm3mQ4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4o4x8UWslncXvmPibT03AKnulx9nWuoxu3zg8jHhswPQosL+9oUw++ks9iaPLLwAerdefCdQz3xY09fiazOmF0qbw9c19cNAAY+W28/k6HzGi4yfS0yYc/MKfgIbk6Z3QGo+Ek/rYFBY8qhTJ+VPl/XO27iGtVBwljqSS+T/1icKKjIzrc6WjXM4fmydV5g9McLS6VQjGcUAwnFMMJxXBCMZxQDCcUwwkVyBPwq30XcTraVXe/eKx/x+2bg1daOstYKol0PtvSn9kKgQx3rS9+oDcr47GBlr/J+WB1LpDhuFQKxXBCBXKpHEslG3rBOB7rr3mRea7lLzSvBHCZBAIartG3Zm4OXtnx7sA3Mz8c1liBwqVSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YQK5GdOGjWWSuJB1dUPgvrBnsMgOlw6nw3kh1WPApdKoYyGO9ch98siexr424bDZDTcrfPDJh/+wG70D6EnesroDEbDxWMDuHPhOtqfl/MV5Df6hwLxH87o1fOqmb42ViN6ol3Gf9OA7avnBeaoMgjXgJSER5VCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFC26/KrwCSyi37R9AzUpGKx4NilUsn0HNSk9J+Z3+2tLbdgehBqXOWpzc4+3vjH8CzUhLX1dSilRm3P835dWz+ef/Eije/7WFvLFoHt04G7y8sr8H3f8FhUz8LiEoq+PwMAtlJqvOj7mw9n5xkvwBYWl/B4YxMAPgOenoB/mnddPJydB8/rgsX3fSwsLqH8dPaTUupnALAqOyQSiXsAPgGAl7tOofv11xAOnzAyLG0He5RZRSbzF4rbK+GCUups5X6reudEIvE1gM8r26ORCDo7O9De/gKikQhCodBRzn7sOLkc3LwHJ5erLIsV00qpt6o3WKgxNTXVa9v2FIAzu/3wcPgEwuFwSwc+zvyij7zr7nX3JoAvlFKjtXfsCFdRDjgC4DKAV/bbl1pqE8AfAO4qpcb32qnhGOWQH5VvDgI4u9/+1LCJ8r+P9gtV61/UNGWGMTmo2wAAAABJRU5ErkJggg==",e:1},{id:"image_4",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEkElEQVR4nO3csU8bZxzG8ec9p7gFYkAtRGqRSqROSChE6tAtnEq7hr1DPTVTJbplTP+Ddu1SOrBFFd0qNchmY0RFcqSoUEdBKQ4OxubsC+DzdbBNUgLYJtjvPc3zkawE28I/5Ru/dz7d2aAFz/OmY6hNhzDTBuF0q+fLBRlkgTCLmpN+7+rVdOunn8L3CxOoOUnAJAF8fKkDSjuKAJZQMwtnRXwtnF8u3gPMPICh7s4m7QiB3w4Og+TIyMjeq/cfhysUCsPxvljaADd6P560UAxCZ2ZwcHCteYfT/IuiRdpQzNTSnucd72M4QH15VLTIG3JMbaH5g1MoFIYb2zSJOAPc8L1SEgCcd9+JzUE7IjRCgzkAcGAwY3kW6UQYzgKAc1Q9+tT2LNI+Y8yA7xcmnGo1GLY9jHSoemXCqQW1AdtzSGf8oxeDTuunSdQUi6VPFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpG6YnuAXAlYXDVY3TAoH9ie5nzXR4E7t0JMjYe2R7H7jsuVgG8XHSxnoh8NAP7eAe7eN3iQOfXqtJ6yGm5xlSPYST+tvOXhVjfs/wNcRPkAWN+yO7vVcIzvtqjQXiUphSOlcKQUjpTCkbJ+5KQdU+PoydGKXAlYjsCH63aQhAvx1WfdD7e+ZbCc6frLXAotlaQUjpTCkVI4UhQ7Jw8ypicHdT2iY6cU4Z6V6jd5SUslKYUjRbFUjiWAa4nuv453UD89gQFFuNnJ3h05uXuf45CXlkpSCkdK4UgpHCmKnZP1LYPF1e6/To7oQz5JOPvnMUaNlkpSCkdK4UhRbOM+nwzxxeTl/K4/MjwnBJ2HIty1xOWd5fXn/2QnR0slKYUjpXCkKLZxudLlfQBnOjpyHopwyxmeM4x7RUslKYUjpXCkFI6UwpFSOFJWw10ftfnqb2YsYff7vKyGu3PL/peZXcTtm2FPTtA9j9VwU+MhvvsyxEDc5hSduX0zxDcR+A9n/cjJ7GSI2cmQ4pySsYT9d1qT9XBNUfgOSCbaqySlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCETo8PPCcIAiqtgeRzjx9mvvL2fe8ou1BpH2Vig8AcPLPd/OWZ5EO7OTzcF037fj+i9938s9tzyNtCIIAO/ndJ0B952Tp8eMnCILA8ljSysZmFtVq9VcAcFzXXasGwUrm4SPFi7CNzSx2C3sA8APw8uPAfLlSQebho+ONn0RDEATY2MyisTn73nXdLAAcX2mRSqWSAH4GgNEP3sf4Rx8iHu+zMKoA9WD/bD/D9nYO1fpK+Ivrusnm4/+5RCaVSs0BWAAwBAAD/f0YGRlGIjGIgf5+xGKx3k3+Firt76NS9lHa328ui00/uq47/+odr13blEqlhlFfR78+7ZfH432Ix4kuaIu4oBqgXKmc9fAKgHuu66ZPPnDmRWmNgHON2wwa70LpuhUAaQBLruuunfWktq8mbIScbvw40bjJm0s3/tw7L9RJ/wKyXU3llhog+AAAAABJRU5ErkJggg==",e:1},{id:"image_5",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEQ0lEQVR4nO3cP0wbZxzG8ed9TTEFB2y1lWiLGoYydIjioVOkSLxSty7MZajXbGztmC5RurVTx1Kp6VhRKUM3G2XMUKRIiZQG4gQpdYqD/x0+B+6964CPImNim/x576c8H8kCn0/4J311r88nbIUBPM/LpxDmI6i8QpQftD+dkUIZiMoIdendc+dKg3fvw/dr8wh1AVAFAOdf6YA0jAaANYRq9bSIJ8L5e42rgFoBMPN6Z6NhRMAfz/dtIZfL1Y9vPwpXq9Wy6fFUSQEX3/x4NEDDRnoxk8lsxBt0/AujJdpMSoUlz/OOzjE0cLg8MlrizWgVrsZ3dK1Wy3Zf0yjhFHDR95oFANAT76SWwBMRMSKFJQDQUFh0PAuNIoq+AAB9EBx87noWGp5Sasr3a/M6CGzW9TA0omBsXoc2nHI9B43GP+hk9ODdKGkajeanDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCTXmegB0HiN8eA1R9SYQNF1P80IqcwFq4TpU9rLrURwfcZ3HsLcvIar8lvhoABB5dxD+9SWiyg3Xo7gNFz68JiJYr/Dvb1yP4DZcVL3p8unPLmgiqt9yOoLbpVLg0ZYUPKsUiuGEYjihGE4ohhOK4YRiOKEYTij3F5n7ULNfARPJ+CaqqPIr0Nl2PcYJyQz34XIirsADQFi/hSiB4bhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCJfJfF9C6g8j1DLGg4XqCvhIZLnzwresREo9LpVAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQTsOpzAWXT/9SlOOPgbkNt3Dd5dOfmZq7Akx84nQGt+Gyl6E/+wkYm3Y5xkjU3BXohe9dj+H+IrOaXUZqdtn5d2MNQ02cd36kxZyHiyXlE6hS8KxSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOIH295972lobuB6ERvPkydMHuuV5yfx0OvXVbvsAAF19tlt1PAuNYKdahTGmpH2/8+dO9ZnreWgI1lrsVHe3gcOTk7VHj7ZhrXU8Fg2yuVVGEAS/A4A2xmwE1q7fvXef8RJsc6uM3VodAH4A/n87sLLXbuPuvftHL36UDNZabG6V0X05+84YUwYAFe9QLBYLAH4GgA/efw9zH3+EdHrcwagEHAb7p/IvKpWnCA5Xwl+MMYX4cXV852KxuARgFcAMAExNTiKXy2J6OoOpyUmkUqk3N/lbqNlqob3no9lqxcti7EdjzMrxDQo9isViFofr6Nf9/ng6PY50Ov0q532r2cBir90+7eF1AFeNMaXeB06Ei3UDLnVvi+gehfTarQMoAVgzxmycttOp4Xp1Q+a7d+e7N3p5pe7P+otC9foPWtooDax4L/UAAAAASUVORK5CYII=",e:1}],layers:[{ddd:0,ind:1,ty:2,nm:"Arrow 3",refId:"image_0",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:25,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:95,s:[0]},{t:135,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[171.649,321.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"Arrow 2",refId:"image_1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:90,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[253.649,167.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"Arrow 1",refId:"image_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[0]},{t:45,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[89.649,167.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"Gsheets",refId:"image_3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[292,131.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"Gdoc",refId:"image_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,285.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:6,ty:2,nm:"Gslides",refId:"image_5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[128,131.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0}],markers:[]},jl=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)})))),Hl=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)}))));i.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/shared_components/radio_button_group.module.out.css",(e=>"._radioButtonGroupRow_1qd9u_1{align-items:flex-start;display:flex;margin-top:var(--spacing__unit--1)}._radioButtonGroupRow_1qd9u_1:first-child{margin-top:0}._rowLabelContainer_1qd9u_11{display:flex;flex-direction:column}._radioButtonGroupRow_1qd9u_1>*+*{margin-left:var(--spacing__base_unit)}"));const Yl="_radioButtonGroupRow_1qd9u_1",ql="_rowLabelContainer_1qd9u_11",zl=({checked:e,disabled:t,id:o,labelText:a,helperText:n,onChange:r})=>s.React$1.createElement("span",{className:Yl},s.React$1.createElement(i.RadioButton,{id:o,checked:e,onChange:r,disabled:t}),s.React$1.createElement("span",{className:ql},s.React$1.createElement(i.Text,{tagName:"label",htmlFor:o},a),n&&s.React$1.createElement(i.Text,{color:"faint"},n)));zl.displayName="RadioButtonGroup";const Kl={v:"4.8.0",meta:{g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr:60,ip:0,op:175,w:420,h:420,nm:"fss-convert",ddd:0,assets:[{id:"image_0",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEQ0lEQVR4nO3cP0wbZxzG8ed9TTEFB2y1lWiLGoYydIjioVOkSLxSty7MZajXbGztmC5RurVTx1Kp6VhRKUM3G2XMUKRIiZQG4gQpdYqD/x0+B+6964CPImNim/x576c8H8kCn0/4J311r88nbIUBPM/LpxDmI6i8QpQftD+dkUIZiMoIdendc+dKg3fvw/dr8wh1AVAFAOdf6YA0jAaANYRq9bSIJ8L5e42rgFoBMPN6Z6NhRMAfz/dtIZfL1Y9vPwpXq9Wy6fFUSQEX3/x4NEDDRnoxk8lsxBt0/AujJdpMSoUlz/OOzjE0cLg8MlrizWgVrsZ3dK1Wy3Zf0yjhFHDR95oFANAT76SWwBMRMSKFJQDQUFh0PAuNIoq+AAB9EBx87noWGp5Sasr3a/M6CGzW9TA0omBsXoc2nHI9B43GP+hk9ODdKGkajeanDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCTXmegB0HiN8eA1R9SYQNF1P80IqcwFq4TpU9rLrURwfcZ3HsLcvIar8lvhoABB5dxD+9SWiyg3Xo7gNFz68JiJYr/Dvb1yP4DZcVL3p8unPLmgiqt9yOoLbpVLg0ZYUPKsUiuGEYjihGE4ohhOK4YRiOKEYTij3F5n7ULNfARPJ+CaqqPIr0Nl2PcYJyQz34XIirsADQFi/hSiB4bhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCJfJfF9C6g8j1DLGg4XqCvhIZLnzwresREo9LpVAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQTsOpzAWXT/9SlOOPgbkNt3Dd5dOfmZq7Akx84nQGt+Gyl6E/+wkYm3Y5xkjU3BXohe9dj+H+IrOaXUZqdtn5d2MNQ02cd36kxZyHiyXlE6hS8KxSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOIH295972lobuB6ERvPkydMHuuV5yfx0OvXVbvsAAF19tlt1PAuNYKdahTGmpH2/8+dO9ZnreWgI1lrsVHe3gcOTk7VHj7ZhrXU8Fg2yuVVGEAS/A4A2xmwE1q7fvXef8RJsc6uM3VodAH4A/n87sLLXbuPuvftHL36UDNZabG6V0X05+84YUwYAFe9QLBYLAH4GgA/efw9zH3+EdHrcwagEHAb7p/IvKpWnCA5Xwl+MMYX4cXV852KxuARgFcAMAExNTiKXy2J6OoOpyUmkUqk3N/lbqNlqob3no9lqxcti7EdjzMrxDQo9isViFofr6Nf9/ng6PY50Ov0q532r2cBir90+7eF1AFeNMaXeB06Ei3UDLnVvi+gehfTarQMoAVgzxmycttOp4Xp1Q+a7d+e7N3p5pe7P+otC9foPWtooDax4L/UAAAAASUVORK5CYII=",e:1},{id:"image_1",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAG00lEQVR4nO3cXUxTZxgH8P85FQqc8tGIEAEnwnSSTSXbgpk342xqlizLwGs/yG5mzExc3NxXsunVFjfNlukudjONZslulN0tkaV4wwLJFi1REEfFOPko1Urb08NHT7uLtoiFftGWcx76/JIGevr27RP+ed/zvuW0ApLw+XzNJgSbQxCaBYSak7VnyyRgBAiNICh2F5eWdidvvgRVddcjKHYAQgeAjVktkKViCkAngsKFeCEuCk5Vpk4CwjEA5bmtjaUiBPw+M6t1WK3WJwuPzwfndrsrzIWmbgHYsfLlsSSmtJDYarFYbkQPiNFfODRDKzcJwW6fzze/xhCB8PTIoRleuSgEL0TviG63uyJyTmMGJwA7VJ+nAwDEogJTG3ghQkZIQBsAiBDQqnMtLB2h0G4AEOcCc6/qXQtLnSAIkqq668VAQKvQuxiWpsCaejGoBSW962DpUeemLWLyZsxopqY8z3NwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRK3Ru4BcCipezNwbwpxzFABQ9sY7OleUPeSDWxjO3OQYZu7dQVDxQr31zzPtil98mYNbaamGk08MExyHkx5dgxv95viKhTPnHMOj337OSl+WllaYN23JSl/LJbic425JKtHlMvS7+2h+bEEsseC5s7+ioKpGl9cfd05+yNuBZQj6fQg4x3StwTDnuFyr3n8UVfs/yKgPpb8Pjo8PZKmizPCII4qDA6DY+6DY+/QuIy15M1Um4jgRnv5MUinWth9C9f6jOleUHI+4BTTFC+flc7h75F1oPo/e5SRk2BFX1NiEmsOfJ2yjDg9CsffC09OVUp+zEw/h6emCp6cLxY1bsf7wF0u2m3YM4r8zn2LjVz+lXfdKMWxwJqkU0raWhG2kbS2obDuIOecoRk4dwfTwQNy2PnsvJi7/mPLre/76E9PDAyhqbEr5OStpVUyVBVU1aDh9CYXVtXHbLGfx4b52JZOycmpVBAeER2hVlhcV6vBgVvvLJsNOlUtxXj43P91Vth/C+vefPQeW7doNnEm/33gb80QjWG+kglvIdfUiCqrrUNl2cP6YSSpFYXUtZiceptUXheV/LLLBAYBi730mOAAoSDE4TfHEPe8VNWyFyVKWlRpzhXRwJmnxH1dTvCk9d9oxOL/xjrX5fKfhgyO9OLHubV90LNGWIFVG3QIsRGrEFVTXQtregsLqOlj3ti/a57mvXc34NcpeezPjPlYCqeCse9ph3bN4lAHRt6tS32DHQ2WhQnqqjNIUL+6fOpL2ajJW3fGvSUyTwCoITunvg+PEgaTvjFS8/nbcSw0Kqmqw8cvzsO7Zl4sSc4LUVKn090G5GQ5IUzzw2ftSXoyYNzRgw2dn4enpgup4+pzihqbwxp0YWsHd7EvrjeKllO3aTTKoWOSnynxFasRlwmfvxcRb6Y1WaVsLGr69lKOKMsMjjqi8GXEmqSzpP2ZjFTduzVE1mcub4IobmzK+rtJIDBucYu9D/1sv6F2GYRk2uGxThwfSvgo50QVFesub4DTFA6Wf1kWvifCqkqi8GXGW7TvRcNqYe7Ll4BFHVN6MuNmJhxmf44x0uV7eBOe+dsXQF7imi6fKZTDXb9H9M+C6jrj1n3yHmZEhBJyj4W9bcI4hMJmbj+ia6zdj3XsfZaevTVsgSqVZ6Wu5dA3OsrMVlp2ti47P3BtCUPHCf+vvyNdo3Mk4VFEqRfFLr2RQrbEY8hwXnYaW+kPnIlSKDBlcIhxqGLngEkkUavSL2FaLvFlV6vVlMrmSN8GtNhwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcQbOzMz5R07SA3oWw9IyOTvwren2+Kb0LYanz+1UAgOh69Nilcy0sDZMuF2RZ7hZVdfqPSdcjvethKdA0DZOuxw+A8OKk8/79B9A0TeeyWDLDjhEEAoErACDKsnwjoGnXbw8McXgGNuwYwWP3EwD4Hni6HTim+P24PTA0f/JjxqBpGoYdI4iczk7JsjwCAEK0gc1m6wDwCwCsq1yLutoamM2FOpTKgHBgY+NOjI9PIBCeCS/KstwRfVxY2Nhms7UBuACgHACkkhJYrRUoK7NAKimByWRaucrzkMfrhV9R4fF6o9Ni1A+yLB9beEBADJvNVoHwPHpoqc7N5kKYzeZs1pvXtIAGxe+P9/B1ACdlWe6OfWBRcFGRANsit1ZERiHLuesAugF0yrJ8I16juMHFigTZHLlbH7mxzHVHfj5JFFSs/wHta2tCkJQHdgAAAABJRU5ErkJggg==",e:1},{id:"image_2",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEv0lEQVR4nO3dz0/adxzH8df3S1tWsYqp87Bpp8mihzapaZYs5eQn7trE7ND2Ni69u6TXJd167Jasf8HczfawuO7iaeCh9LZ4cG00U2g0nUUUQeDb6vcLPQDOYS2g6Ofzjq9HQhT4Bt7JUz58+amFOnK53LAPxeESrGELpeF629MhWUgApQSKdvT8hQvR+pu/h+Ok+1G0w4AVBvBZSwekRmQATKFoTRwUcV84J5+5B1jjADqPdzZqRAn4/e22F+7q6trce/puuHQ6HfSf80Ut4OrJj0d1ZLySPdLe3j5bPcGu/sJoRuv0WcVoLpfb3cewgfLyyGjG67St4kT1iJ1Op4OV+zQynAVcdXLZMADYH531jYE7ImKULIwBgA0LI5pnoWaUSl8BgL3j7nyhexZqnGVZAcdJ99uu6wV1D0NNcs/020WvGNA9BzXH2XnTbtffjEyTyWQ/ZzihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTqgzugdYzq/jwdwTTK/MIrvj6B7ngy4He3H/2i2EeoZ0j6L3FrecX8fo9A94HH9mfDQA+HtzBV//+RMexWO6R9Eb7sHcExHBan331yPdI+gNN70yW38jA2V3HMSS81pn0BpO4q3NFNyrFEr7XuVR3By4jtsDod3jk/EYHsefaZzo5IgOdynQ/b9d81hyQeM0J4tLpVAMJxTDCcVwQjGcUAwnFMMJxXBCGfkA/ObAdVwKdNfdLtQzuO/43Ss3WjrLZDyGlfx6Sy+zFYwMd3sgdKgXK0M9Qy1/kfNpct7IcFwqhWI4oYxcKifjsYaeMA71DNY8yTzf8iealw1cJgFDwzX60szdKzf2vTrw49wfxzWWUbhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQRr7npFGT8Rie7vn2A1Pf2HMcRIdbya8b+WbVk8ClUiit4S4He3Ve/ZH0NfDZhuOkNdz9a7d0Xv2h3RkcRV/gotYZtIYL9Qzh4ZdhdJw9r3OMptwZHDXiD85KJVfTgUCb9v+Tqvu7sRrRF+jWfksDgNXk2rfG7FWa8B2QknCvUiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjiBtrff5mzP81zdg1BzXr16/Y+9lctldA9CjSsUyv/l0k6tb6Q0z0JNWEuloJSK2o7zZnotdTo/8SKN53lYS20sA+Wdk6mXL5fheZ7msaiexaUEXNf9DQBspdSs63kzz18sMJ7BFpcS2EhvAsDPwH8PB8bzhQKev1jYvfMjM3ieh8WlBCp3Z98rpRIAYFU3iEQiYQC/AMDH3RfR++kn8PvPaRiVgHKwf1eTWF19Dbe8Ev6qlApXz7f2bhyJRMYATADoBIBAWxu6uoLo6GhHoK0NPp/v5CY/hbJbWyjkHWS3tqrLYtVDpdT43hMs1IhEIkGU19Fv3nfhfv85+P3+Vs57qnmuh3yhcNDZMwDuKaWitWfsC1dVCThWOYygciukYzcDIApgSik1e9BGB4arVQk5XDnaXznQ0UUrPzc/FKrWO0L2XeSRNX9jAAAAAElFTkSuQmCC",e:1},{id:"image_3",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAHcElEQVR4nO2cX2xTVRzHv/cO2Vi3saIyXJdYrYlsLGMm20AIhBtcjU+C40GNi4MnNSbDBI0PajA8GXiQGCNPgsGgMQzYm7YPHZCMLdsDkjGIsVjDuv/udv2zTuhdfeif3dv139a19xz7+yTLeu793dNf7mfnzz09q4AM+P3+5hIsNYchNAsIN2eKJ9aIABcQdmFJ7NtUWdmXOTwJwaBsxpLYBQhdAJ5d1wSJbJgHcA1LwoVUEleICwbmTwLCcQCb85sbkQ1hoPffR0qX0Wj0qI/HxcmyXF26saRPAHYWPj0iA/NKWDxQUVFxO3ZAjL0gaUyzuURY6vP7/fE5hghEukeSxjybRWHpQqwgyrJcHR3TCMYRgJ1Bv7cLAMSyJ0oOgSYi3BAWcAgARAg4oHMuxGoIh18BAPFx6HGL3rkQ2SMIgiEYlM1iKKRU650MsUpCG8zikrJk0DsPYnUEHy9WiJnDCNaYn/e+QOI4hcRxConjFBLHKSSOU0gcp5A4TiFxnELiOIXEcQqJ4xQSxykkjlNIHKeQOE4hcZxC4jiFxHEKieOUDXonkE98iwHcm3DB7ZkGABx+SdI3oXWEe3FqOeOeGdyb+Au+xQCGXKOauFZzA4krNNnKKSaYEUdyVoeu4j689FXB5Lg9M/jW8cu61HWwvg3bt5nXpa61IsxOT8oGQ7ku29Abvjiix9vmTGVZOa58cAam6q26vP/k9MxH9DiwBnyLC3DLM7rmwMwYl2+6rZ3otr6TUx2Dzjt467uP1ymj3KAWxykkjlNIHKcUzRh31nYRZ20X4+Vdlib89P5pAMDzJ15Neo06hjWYFGdt3IOj+w5rjp3qPYfRcWe8fPrNE6gz1sTLo+NOnOo9V7Ac9YZJcQPOOzj95glUli3/s2xHaztGeyPi6rbUoKOlXXNNz7A9bZ0mYw3qtiyLbqi1xF/vsjQlvUYdwxpMivMG/bg8ZNO0Omvj3niLsu7Yo4n3LQZgG+lPW+eRVmvKxwFWu8N0MDs5OX/zqqZsMm6Nt4COVqvm3Pc3rsIb9BcsNxZgssUBwNjcFHqG7ZousaO1Hd6bftTXPq+J7Rm2Zazv8pANA87f4+WGWgs+f/09AEj5UK2OYQ1mxQFAz5BNI87auBfuuSltzLAdYwnHkuGWp+CWk8cNOu/klqgOMNtVApFJivqmmoxb0f1qpybm/I2riZcVBUy3OCDSotSzPvVMc9B5R/OIkI50a5UPzvyWW5I6wHSLAyJjk1ueTnoucQJTTDDf4gDg/I0r+CxhkuCWpzM+AqgZcP4O2MLxsslYgyPR2al6RUWNOoY1uBA3lmRSMTY3uao6BhPGy12WJpW4H5Neo45hDea7SgArlr+AyE1Vr4QUG8y3uIZaS8olqW5rJz7++UxW9XS0WNHRuvxoUbVpeZJzKcXKiTqGNZgXd3T/ytYWo6OlHad6z2W1alK3pQa7U/wBpDrOMkyLS7aYbL97C+07Xo6Xj+47nHJyoYYmJwWko0V70+x3b6FnyKYRd2x/duJoclIgqjZV4FhCN2kf6YdtpB++xUD8WGWZgdmbm0+YbXHWxj2aVRIA8ec220i/pgvttnbi8lD6heZdlibNWGZSfQibakVFHcMazIrrtmrXJO13b8UnIfYEcSbjVuy2NGEgzWLxbsvOlIIS34sHmBRnbdwDk1G7S9iuWiWJdZfqFnl0/xtpxY3NTWnOV20yxD/fS3WdOoY1mBRnG+lPuYEnxs7P3lhVnT3DNs3nduqNQG+n+DyO5c1CzE5OiPQw2eLyAW0W4hTaLEQwAYnjlKLpKt3yVM6bgrLdJlEIikbc5SFbxtUVnqCucg28uM2M+mfMuuaga4v75q1PcH/SBbc8DbdnGm7PDMY9+fkX3e3bnsWnrx1bl7rqnzGvWEctNLqKO1jfhoP1bSuO3590wRsMYMh1F97FAO5P/JWz1MoyA9qe25FLukzB5BgX+yqKZDc6H1J5hElx6SCpEbgTl450UmNfxPZ/oWhmlXp9mUy+KBpx/zdIHKeQOE4hcZxC4jiFxHEKieMUEscpJI5TSBynkDhOIXGcQuI4hcRxConjFBLHKSSOU0gcp5A4TiFxnELiOOTRo3/9oqIoIb0TIVbH+PjUn6LP75/XOxEiexYWggAAcfafuVmdcyFWwczsLCRJ6hODwcVfZ2b/0TsfIgsURcHM7NxDIDI5ufb33w+hKIrOaRGZcD5wIRQKXQEAUZKk2yFFuT567w+SxzDOBy7MyR4A+BpYfhw4HlhYwOi9P+KDH8EGiqLA+cCF6HD2pSRJLgAQYgEOh6MLwHkAePqpJ1FnqkVp6UYdUiWAiLCJyWlMTk4hFOkJf5AkqSt2XlAHOxyOQwAuANgMAIbychiN1aiqqoChvBwlJSWFy7wI8fp8WAgE4fX5Yt1ijLOSJB1XHxCQgMPhqEakH303WeWlpRtRWlq6nvkWNUpIQWBhIdXp6wBOSpLUl3hihbgYUYGHoj8HEG2FRN65DqAPwDVJkm6nCkopLpGoyOZo0Rz9IXKnL/rbk05UIv8BNkfGvcP0wdUAAAAASUVORK5CYII=",e:1},{id:"image_4",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEkElEQVR4nO3csU8bZxzG8ec9p7gFYkAtRGqRSqROSChE6tAtnEq7hr1DPTVTJbplTP+Ddu1SOrBFFd0qNchmY0RFcqSoUEdBKQ4OxubsC+DzdbBNUgLYJtjvPc3zkawE28I/5Ru/dz7d2aAFz/OmY6hNhzDTBuF0q+fLBRlkgTCLmpN+7+rVdOunn8L3CxOoOUnAJAF8fKkDSjuKAJZQMwtnRXwtnF8u3gPMPICh7s4m7QiB3w4Og+TIyMjeq/cfhysUCsPxvljaADd6P560UAxCZ2ZwcHCteYfT/IuiRdpQzNTSnucd72M4QH15VLTIG3JMbaH5g1MoFIYb2zSJOAPc8L1SEgCcd9+JzUE7IjRCgzkAcGAwY3kW6UQYzgKAc1Q9+tT2LNI+Y8yA7xcmnGo1GLY9jHSoemXCqQW1AdtzSGf8oxeDTuunSdQUi6VPFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpG6YnuAXAlYXDVY3TAoH9ie5nzXR4E7t0JMjYe2R7H7jsuVgG8XHSxnoh8NAP7eAe7eN3iQOfXqtJ6yGm5xlSPYST+tvOXhVjfs/wNcRPkAWN+yO7vVcIzvtqjQXiUphSOlcKQUjpTCkbJ+5KQdU+PoydGKXAlYjsCH63aQhAvx1WfdD7e+ZbCc6frLXAotlaQUjpTCkVI4UhQ7Jw8ypicHdT2iY6cU4Z6V6jd5SUslKYUjRbFUjiWAa4nuv453UD89gQFFuNnJ3h05uXuf45CXlkpSCkdK4UgpHCmKnZP1LYPF1e6/To7oQz5JOPvnMUaNlkpSCkdK4UhRbOM+nwzxxeTl/K4/MjwnBJ2HIty1xOWd5fXn/2QnR0slKYUjpXCkKLZxudLlfQBnOjpyHopwyxmeM4x7RUslKYUjpXCkFI6UwpFSOFJWw10ftfnqb2YsYff7vKyGu3PL/peZXcTtm2FPTtA9j9VwU+MhvvsyxEDc5hSduX0zxDcR+A9n/cjJ7GSI2cmQ4pySsYT9d1qT9XBNUfgOSCbaqySlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCETo8PPCcIAiqtgeRzjx9mvvL2fe8ou1BpH2Vig8AcPLPd/OWZ5EO7OTzcF037fj+i9938s9tzyNtCIIAO/ndJ0B952Tp8eMnCILA8ljSysZmFtVq9VcAcFzXXasGwUrm4SPFi7CNzSx2C3sA8APw8uPAfLlSQebho+ONn0RDEATY2MyisTn73nXdLAAcX2mRSqWSAH4GgNEP3sf4Rx8iHu+zMKoA9WD/bD/D9nYO1fpK+Ivrusnm4/+5RCaVSs0BWAAwBAAD/f0YGRlGIjGIgf5+xGKx3k3+Firt76NS9lHa328ui00/uq47/+odr13blEqlhlFfR78+7ZfH432Ix4kuaIu4oBqgXKmc9fAKgHuu66ZPPnDmRWmNgHON2wwa70LpuhUAaQBLruuunfWktq8mbIScbvw40bjJm0s3/tw7L9RJ/wKyXU3llhog+AAAAABJRU5ErkJggg==",e:1},{id:"image_5",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAHEElEQVR4nO2dP2gbVxzHv3dOrEZ/YhlFActNrEKRhZa4iR0IHexrC+3QEg9ZujSmWwMtKYGSqSSFQocOLYVAu8RZSoZQbOhQCq1sOhTipGRoHNs0QU6w5FhSZPtOUiLrrA7SKU+y/OdsSfee9fuAiXT3dP7lPvn93u+dzxcJ26BpWl8b1vsKkPokFPq2G0/sEgkRoBDBujxxyOWa2H54DbLZlB/r8gggjQDoqWuAxE5YATCGdWl0M4kbxGXTK1cA6SKAjsbGRuyEAjD+IqePdHZ2LrPby+JSqZTb1t42IQEnmh8esQ0rekEecjqd94wNsvGCpHFNR5u0PqFpWrnHkIFieSRp3NMhS+ujxhs5lUq5S3MawTkScCKrrY4AgPzKwbZhUCMiDAUJwwAgQ8KQxbEQZigU3gEAeS2/1m91LMTOkSTJkc2m/HI+r7utDoYwSf6AX17X1x1Wx0GYI7v23ClvP4zgjZWV1ddJnKCQOEEhcYJC4gSFxAkKiRMUEicoJE5QSJygkDhBIXGCQuIEhcQJCokTFBInKCROUEicoJA4QSFxgnLA6gAaiZrJYe7xMqLJNADggzdfszii+iG8OFZOLJHG7OMU1Mwa/pldqhh3svcoiWs2O5XTSnAjjuSYw1Jxl374q2lyYok0fhr/ty7HGnqjG4HjnXU51m6REkuLKYfDbslt6P0f37Ti2+4Z56GD+Pnqe/AdseYm8MWl+Oe0HNgFWnYNsUTa0hi4meMazYVzp3Dh3Mk9HePOdAwjX/1ap4j2BmWcoJA4QSFxgtIyc9y1W3dx7dZdU5/pD3Vh9Mv3GxTR3qCME5SWyTif1wWf12nqM8EeT4Oi2TtciRsIdZVfR+MaFuJqxf6g3wOXvb38fmo6tul+NZPDTCRZ3jc8GNjzcoAnuBJ3nZlPaq2Zvv5kEL1MFrz76c0KuZc/OoP+kvw/78zjs29/b3DE1sGVuDvTsfKJD/ory5TL0V4hzRjDimM/MzUdrRg7NjmH21XbtiPY48Hl82dMfaZZcCXuNiPOaW+Hy9EONZ0DAJwO+TaM7+3x4I+pCACg2+uCkymjbJkEgGhcRbSq9IoMV11ldZawzUF1tgHAaWZOrG48que//QZXGTczX5klAyFfWQAryaCf2TbAZOSdGtLqca2SJ7jKODWdwywjj52zDEmzVXKNMezY2/s82wDOMg4oljijLHaXyh+7TJiJJKGmcy+bmB4PZiLJ8lhgo9zicaO4dqtgKhaf14XhwYDpv0Mz4E4c21QYAtkyODUdw4JXK4sbCHVhbHKuYg6s1T1OTcdMz3v9oS4St1OqT+5AqKtifpuZT5aWAMX5Kuj3VGTk7Hyy3InuZ7gTtxBXEU1o8B0plr6g31POLq10NcTleNn29/Z4qtZvtbPq7GDAdPawV2l4gztxADB1P4qzpZP8dr+/vN1oOowmxiiP7Jjq9ZtBt9dVkZmiw6W4mfkkzpZesy0/u85jm5jKMbUzjpqTJrDZyWezqVZmRRMbL0yzx9xPzQlX6ziDmUgSWmZjg8Ge+FoSpu6buxYpMlxmHFCUx5bA6qshC3EVWiZXeX2yxvrNYCDUZXqO83ldpsY3E27FjU3Obfne2MZez9yqFA6EfPvqkhfX4mrJYvnmxt87Pt5CXDU9x7ns7Rt+vMQL3IqrN+OTcxjf5h9CNXSzEFF3Wibj6GYhQdlvNwtRqRQUEicoLVMqo3G15i0NZthqgd9sWkbcTtaFIkGlchcEjrkROG7tfwJmacb9+MVbuDu7BDWTw+zjZcQSacSSjfkV3cAxNy59WJ+uMnDcbfkPWS0Vdyp4FKeCRzdsnys9KqOeUp329prfS1S4nOOMR1E0S6qIcCluK0hqEeHEbcVWUqMWP96i3rRMV2nVw2QaRcuI22+QOEEhcYJC4gSFxAkKiRMUEicoJE5QSJygkDhBIXGCQuIEhcQJCokTFBInKCROUEicoJA4QSFxgkLiBIXECUgu90KTdV3PWx0IYY5o9Ol/sqppK1YHQuycTCYLAJATyWcJi2MhTBBPJKAoyoSczT7/LZ7g5xf2iM3RdR3xxLMnQLE5GZuffwJd1y0Oi9iOh48iyOfzvwCArCjKvbyuT04/mCN5HPPwUQTPUssA8B3wcjlwMZ3JYPrBXHnyI/hA13U8fBRBaTq7qihKBAAkY0A4HB4BcB0AvEc8eLXbB5uN30fb7nd0XUdscQmLi0+RL1bCG4qijBj7JXZwOBweBjAKoAMAHHY7OjvdOHzYCYfdjra2tuZF3oKsqioy6SxWVdUoiwbfK4pykd0goYpwOOxGsY6er3Vwm60dNputnvG2NHpeRzqT2Wz3JIAriqJMVO/YIM6gJHC49DWEUhYSDWcSwASAMUVR7m02aFNx1ZRE9pXe+ktfxN6ZKP25vJWoav4HGJXNZx2cBsoAAAAASUVORK5CYII=",e:1}],layers:[{ddd:0,ind:1,ty:2,nm:"Slides",refId:"image_0",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[127.75,133.5,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"Powerpoint",refId:"image_1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[127.75,134,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"Sheets",refId:"image_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[291.75,133.5,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"Excel",refId:"image_3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[291.75,134,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"Doc",refId:"image_4",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:1,ix:10},p:{a:0,k:[210.002,286.747,0],ix:2},a:{a:0,k:[54.662,55.765,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:6,ty:2,nm:"Word",refId:"image_5",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[209.998,286.753,0],ix:2},a:{a:0,k:[54.662,55.765,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0}],markers:[{tm:51,cm:"",dr:0}]};i.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/modals/what_do_you_want_to_do_modal.module.out.css",(e=>"._animationElement_kvpdk_1{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:75%}._fadedIn_kvpdk_9{animation:_fade-in_kvpdk_1 1s ease forwards;-webkit-animation:_fade-in_kvpdk_1 1s ease forwards;-moz-animation:_fade-in_kvpdk_1 1s ease forwards;-o-animation:_fade-in_kvpdk_1 1s ease forwards;-ms-animation:_fade-in_kvpdk_1 1s ease forwards}@keyframes _fade-in_kvpdk_1{0%{opacity:0}to{opacity:1}}._fadedOut_kvpdk_26{animation:_fade-out_kvpdk_1 1s ease forwards;-webkit-animation:_fade-out_kvpdk_1 1s ease forwards;-moz-animation:_fade-out_kvpdk_1 1s ease forwards;-o-animation:_fade-out_kvpdk_1 1s ease forwards;-ms-animation:_fade-out_kvpdk_1 1s ease forwards}@keyframes _fade-out_kvpdk_1{0%{opacity:1}to{opacity:0}}"));const Ql={animationElement:"_animationElement_kvpdk_1",fadedIn:"_fadedIn_kvpdk_9",fadeIn:"_fade-in_kvpdk_1",fadedOut:"_fadedOut_kvpdk_26",fadeOut:"_fade-out_kvpdk_1"},Xl=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)}))));$e.Strings;const Jl=e=>{var{altText:t,inverse:a}=e,i=o.__rest(e,["altText","inverse"]);const n="dig-Illustration dig-Illustration-spot"+(a?" dig-Illustration--inverse":"");return s.reactExports.createElement("svg",Object.assign(Object.assign({role:"presentation"},i),{className:n,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),s.reactExports.createElement("title",null,t),s.reactExports.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},s.reactExports.createElement("path",{d:"M220.8 6c-14 30.5-28.7 60.2-54.9 80.4-28.9 22-68.8 21.9-103 17.4 19 10.9 34.2 24.7 42.2 46.5 2.1 4.7 2.3 10.8 3.1 15 .7.4 2.2 9.8 2.6 12.9-2.1 14.9-11 23.1-22.8 34.2-12.1 11.4-26 22-38.9 28.3 23.2 2.5 51.5 8.5 69.9 24.3 13.8 14.7-9.1 53-14.2 75-3.4 10.9-5.7 17-7.2 22.4 15-3.2 44.3-17.8 61-19.1 7.5-.3 13.3-1.7 21.7-1 5.3-.1 8.3 1.3 10.9 0 2.8-3.8-6.4-11.5-6.9-13.2 0-.2 4.5-2.8 4.5-3.1.1-.3-4.5-1.9-4.7-1.7-.1.1 3 1.3 3.5 1.3.9 0-.4.5-2.4 1-2.5.6-2.2.8-4.3-3-1-1.9-3.2-5.4-3.7-6.8 4.4-1.3 12.7-4.4 16.8-6.3 5.9-6.9-3.6-16.1-11.4-22.2-1.6-1.1-3.1-2-3.3-2.1-.4-.1 0-.4 4.7-4.2 3.9-3.2 19.7-16.4 19.8-15.1 3-1 4.4-1 10.2.2 11.2 2.2 12.5 2.9 22.9 12.1 6.9 6.2 18 17.2 21.2 21.2 10.8 11.4 23 45.8 28.8 65 4 11.7 7.8 27.2 13.3 30.9 1-.1.9.4.8-5.4-.6-4 6.4-26.1 10.5-31.7 4.1 13.9 9.5 33.3 12.7 48 .3 5.4 4.2 3.2 3.4-.6-.3-1.8 1.4-18.5 2.9-28.1.5-3.8.6-3.5-1 .1-1.6 4-2.3 5.1-3.4 5.7-2.7 1.6-.8-2.5-.8-4.8 1.9-15.7 8-29.3 14.8-44.4 3.6-10.4 11-24 18.9-31.6 29.6-19.4 54.3-19.5 93.7-15.3-17-12.1-44.8-31.5-53.5-49.3-6.4-13.7-10.4-25.7-8.5-39.7 7.3-14.5 23.9-20.4 42.1-21.7-22.4-9.2-56.4-16.6-71.7-35.3-6.6-11.7-15.1-26.6-14.6-42.1.3-23.5-.7-23 5.2-52.6 1.7-8.4 3-15.3 2.9-15.3-5 2.7-12.1 7.6-16.6 11.3C323.4 55.4 301.5 66 282.3 62c-24.9-5.1-54.7-34.2-57.8-58.5-.8-6.5-.9-2.5-3.7 2.5z",fill:"#FAD24B"}),s.reactExports.createElement("path",{d:"M240.1 81.1c-5.8 1.9-6.2 12.5-8.2 19.4-2.8 8.6-3.5 11-5.2 14.7-3-9.3-5.4-20.8-16.1-17.1-11 4-7.3 15.2-5.9 29.3 2.1 18.2 1 29.6 6.3 46.4 2.2 8.4 4.5 18.3 4 24.7-.3 1.8-4.8 7.3-7.8 9.6-5.9 4.7-10.8-10.9-13.9-15.3-5.6-11.9-11.3-22.1-16.1-33.1-3.3-7.6-8-10.9-13.4-9.3-5.4 2.2-8.2 3.8-7.6 10.1 0 9.3 6.7 18.3 10.6 27.2 4.1 8.5 7.6 14 9.7 21.8.2 2.8.5 3.4 3.1 6.4 3.3 3.6 19.5 27.4 24.3 38 14.5 25.5 22.3 56.9 33.1 82.1 12.4 31.4 18.3 60.4 23.4 93.4 3 13.9 1.3 31.7 13.1 38.9 21.3 12.4 43.2 7.8 63.7-1.3 7-4.7 14.6-13.2 19.8-20.1-11.7-27.2-26.9-68.9-33.4-96.9-7.5-21.4 0-23.7 14.3-36.2 27.8-22.1 13.5-43.3 41.8-67.1 7.8-7.6 8-7.9 7.8-12 .1-4.5-2.6-8.5-6-10-9.7-4.2-27 5.2-33.4 10.9-6.5 3.7-18 29.3-29.9 26.4-4.9-6.5-19.8-62-19.7-75.6-1.4-19.3-4.6-40.1-8.5-61.6-2.5-18.1-2.6-18.8-4-21.3-3.4-6.4-10.3-6.4-15.3-1.1-3.3 1.6-1.4 11.4-4 13.6-5.1-3.1-8.4-11.4-10.1-16.6-.7-2.3-1.1-2.8-1.7-2.7-.3.1-.5-.4-.8-1.8-1.4-7-5.9-16.2-14-13.8z",fill:"#793C23"}),s.reactExports.createElement("path",{d:"M255.5 80.3c-11.8 8.3-15.3 29.4-19.5 43.2-4.9 15.6-14.4 47.6-18 61.3-2.5 5.8-.1-13 .7-13.7 2.7-10.2 11.6-40.2 14.1-47.8 5.1-15.4 14.4-37.6.4-39.1-15.8 3.4-21.5 29.5-28.4 43.4-18.4 40.7-26.8 73.9-36.6 119-11.8-13.2-18.2-34.4-31.9-44-12-9.4-36.2-4.4-20.8 13.1 20.2 17.7 20 37.7 28.6 64 5 14.9 11.4 22.1 16.5 35.6.1 10.5.2 33.7-2.2 37.6-1.5 4.7-3.1 11-5.2 16.1-9.1 25.2-17.3 52.1-29 76.3-10.3 20.2 15-13.7 92.4 24.8 1.3.5 5.7 5.7 6 4.4.6-4.7 1.2-12.8 1.9-17.4 3.6-26.3 9-60.8 18.1-84.8 5.8-19.1 10-17 21.4-33.3 18.3-31.7 21.2-76.2 32.3-110.1 2.4-19.9 17.2-64.9 14.9-81-3.1-7.8-10.8-10.5-16.6-3.5-4.7 2.7-11.9 36.6-15.8 47.2-.9 2.1-2.1 11.3-4.3 10.3-1.8-1.8-.3-4.6-.2-7.4 1.3-14.1 2.5-16 3.5-23.1-.3-2 1.2-8.3 2.1-9.2.7.1 2.1-20.6 2.4-21.5.1-14.2 8.4-42.4-12.8-40.9 2.3-12.1 1.3-22.8-14-19.5z",fill:"#D19063"}),s.reactExports.createElement("path",{d:"M355.6 434.4c-3.4.8-5.1 2.4-5.5 4.9 2.5-.7 4-.7 7.1-1.3 2.9-.8 4.1-.9 4.3-.3-8.4 14.1-35 27.9-50.6 34-4.6 1.6-17.1 1.5-22.7.2-6.7-1.2-8.7-3.6-15.4-3.8-.8-.9-3.2-3.6-3.5-4.2-1.9-1.8-4-3.1-1.6.7-.3.7-3.1-3.3-3.4-4.5.7-1.2 1-3.6 1.8-4.2.2 0-.1-.3-.6-.6-2.1-1.8-2.6 1.5-3.9 2-.5 0-.5.2-.4 2.8 2.8 10.9 1.8 25.2 8.8 35.3 2.2 1.3 2 .9 2.2-.5.1-.4 0-.6-.2-.6-2.4-2.4-5.2-19.8-6.6-25.9-2.2-6.8-2.4-6.5.5-4.2 3.9 2.8 6.6 6 12.2 6.7 10.1 3.2 19.1 5.9 30.4 4.8 18-3.1 43.3-19.6 55.3-32.7 3.2 4.2 8.8 30.1 14.4 32.6-3.4-7.9-8.8-23.9-12-30.4-1.5-2.9-1.6-3.3-1.3-4 .5-3.4-5.4-8.7-9.3-6.8zM143 447c-8 .1-19.5 1.4-26.5 4.6-2.3 2.8-3.3 10.9-5.3 14.9-1.4 3.3-1.7 8.7-3.1 10.8-.7 2.4-2.9 6.6-1.4 8.4 1.7 1.9 2.4-3.6 3.7-5.5 2.5-7.1 4.8-13.3 7.1-20.7 1.1-4.2 1.3-4.6 2.9-5.2 10.8-4.1 17.2-4 30.4-4.2 21.1 1 60.6 12 75.6 28 .2 4.3-.2 11.1-1.4 15.5-.9 1.9-.3 3.1-.7 4.4-.5.3-.3 1 .6 1.4 3.1 2.6 5.1-24.4.9-25.5C207.1 457 168.6 446 143 447z",fill:"currentColor"}),s.reactExports.createElement("path",{d:"M257.1 81.9c-2.4 2-6.5 15.7-3.3 17.9 9.1 6.1 14.3-1.9 15.1-11.4.4-4.1.3-4.5-1.6-4.5-.8 0-.9.1-.8.7.2 1.3-.4 5.7-1.2 8.3-2 4.6-3.3 10.4-8.8 7.4-2.8-1-.8-5-.9-7.1.7-2.8 1.7-12.1 4.2-10.6 1-1-2.3-.8-2.7-.7zm-20.6 3.5c1 1.3 2.8 2.2 1.9 3.8-1.2 4.4-2.5 10.3-5.7 13.9-10.8-.6-5.3-8.7-2.6-14.5.5-1.6 3.6-2.7.9-3.1-1.9-.3-3.5 1.9-5.3 7.3-2.4 7.3-1.5 9.3 4.9 10.6 3.3.7 3.6.7 5-.7 2.5-4.1 5.1-12.5 2.7-.2-3.4 15.1-11.7 36.6-15.5 52.6-2.1 7.3-5.7 19.7-7.1 27.3-.9 2.3-.2 6.5-2.7 6.8-1.4 0 1 1 5.5 2.2 2.4.6 3.4.3 1.3-.4-2.9-.8-.4-2.1.5-6.2 5-14.4 6.9-26.2 11.4-40.5 4.4-13.8 8.1-24.6 12.1-39.4 1.6-5.8 3.8-12.8 6.7-17.5.5-.8.5-.8-.1-1-5.1 1.5-9 17.3-10.8 23.2-7.5 26.4-14.7 47.9-22.1 75.1-1.7 5.8.1-2.6.6-4.5 3.6-14.9 10.5-41.2 14.5-51.9 3.3-12.2 16.7-39.1 3.2-44.1-.1 0 .2.5.7 1.2zm-19.1 12.9c-3.9 5.4-7.4 15.4-9.7 22.1-.7 2.6-3.9 8.3-3 9.6 2.7 1.1 6.8-14.6 8.5-17.8 2.3-7.9 6.4-14.9 4.2-13.9zm51.3 3.1c-4.7 20-9 38.2-15.4 58.8-3.9 13.2-5 22.3-8.6 34.4-1.9 5.7-1.9 5.9-.7 5.7 3.1-.5 1.8-5.3 4.4-5.4 4.4-1.7 10.6 2.8 14.8 5.6 12.8 10.3 5.2 9.4 9.1 15.9 2.7 0 1.2-4.3 3.4-8.8 1.1-3.6 3.3-10.4 4.3-14 4.4-13.4 10.7-34.9 14.4-47.3-1-1-3.1 4.4-3.4 5.2-2.7 6.7-4.5 12.1-6.5 19.9-2.9 10.9-6.7 21.3-9.9 30.9 2.1-21.6 6.9-47.4 8.2-68.8.4-6.9 1.9-20.8.2-27.3-1.4-5.7-9.3-5.5-13.3-3.9l.2-1c.5-1.5-1-1.2-1.2.1zm8.4 1.2c4.7 1.3 2.1 12.6 0 15.7-3.1 2.6-6.2.4-5.4-4.8 0-3.8 1-8 1.7-11 .2-.6 2.1-.5 3.7.1zm-7.2 4c-.9 2-.9 7.5-1 10.6 3 4.7 11.5 3.9 12.8-2.3-1.3 26.3-4.9 52.1-8.4 78-.4 3.4-.4 3.4-1.4 2.1-4.5-5.6-15.1-11.8-22.5-7.9 3.6-17.8 9.1-33.8 13.8-51.5 2.6-9.4 2.3-12.3 4.2-20.3.2-1.2 4.1-16.1 2.5-8.7zm-16.5-.5c0 .7 2.7 1.8 5.2 2.2 1.8.3.9-.2-1.4-.8-1.6-.1-3.1-2.2-3.8-1.4zm-29.6.8c-.7.3 6.7 2.7 8.2 2.3-2.2-.8-5.3-2.4-8.2-2.3zm45.9 16.8c.6.7 3.9 2 5.5 2.2 1.6.1-5.1-2.2-4.9-2.5-.3-.3-1.5-.6-.6.3zm28.1 18.4c-1.7 1.7-3.5 9.9-3.2 15.3 5.9 9.1 15.1 1.3 15.1-8.6.3-2.8.1-3.5-1-3.9-3-1.7-2.3 12.9-6 14.7-1.3 1.5-2 .3-3.5-.2-2.8-.2-2-7-1.8-9.1 1.3-7.8 1.6-8.8 2.9-8.5.5.1.7.1.5-.1-.4-.7-2.2-.4-3 .4zm-89.4 3.8c.5 1.5 1.7 1.2 4.5 1.4 8.4.4-4.7-2.4-4.5-1.4zm32.4 2c.6.9 1.1 1.1 1.1.6.4-.3 6 1.6 5 .6 0 .1-8.1-3.5-6.1-1.2zm23 9.8c.8 1.3 5.6 3.6 6.8 2.6-.4-.6-1.8-.5-3.6-1.6-2.8-1.3-3.2-1.4-3.2-1zm30.3 5.8c0 .9 5.5 2.6 6.5 2 .4-.4-5.8-3-6.5-2zm-1.5 4.5c.5.7 6.7 2.9 8.5 3.1 3 .9-9.7-4.6-8.5-3.1zm-116 8.8c-1.6 1-6.8 3.6-8.5 4.4 3.3 3.3 15.5-6.7 8.5-4.4zm9.3 2.8c-.9 1-14.2 47.7-8.3 34.1 0 1.1 12.8-42.6 8.3-34.1zm70.4 8.6 1.8.5c-1.4 1.3-2.1 3.2-1.2 4.8-3.2-1.5-7.1-.3-9.7 1.1.5-1.2 1.7-6 2.4-6.4 2.3-.6 3-.9 6.7 0zm-39.4.1c0 .7-.6.8-.4 0 .2-.7.4-.8.4 0zm44.9 2.2c2.2 1 .1 2.2-.7 3.5-3.6 1.9-2.6-6.3.7-3.5zm25.7 1.5c8 5.3 6.7 2.2-.6-.6l.6.6zm-20.8 1.9c1.3 1 4.3 4.2 5.7 5.7-.4 9.3-2.6-.4-12.4-4.6 5.8 1.2 3.8-3.8 6.7-1.1zm-69.1 2.1c-.8 3.3-3.8 8.9-1.9 10.4 2 .9 1.8-1.4 2.7-4.4 2.2-7.9 1-9.6-.8-6zm4.2.1c-1.2 1.9-3.1 10.2-.5 10.9.4-1.5 4.7-14 .5-10.9zm72.8 7c-.1.2-.2.2-.2-.2 0-.8.4-.2.2.2zm-45.3 1.7c-.5.9-1.2 10.9-.2 13.1 1.9 7.6 4.9-17.1.2-13.1zm71.3 1.4c-11.6 30.6-13.9 72.1-24 101.8-.4-1.1-3.7 8-3.9 8.6-1.3 4.3-3.6 8.3-5.8 12.8-4.5 10.7-19 24.4-21 33.1.1 1.9 1.3.8 2-.9 1.1-2.8 7.6-10.7 10.1-14.3 13.5-15.9 24.3-42.8 27-62.2 4.1-8.8 17-19.1 23.5-25.2-3.3.3-16.3 12-20.7 16.8-2.2 2.6-1.3 1.3-.8-1.3 3.6-16.2 7.4-36.8 11.1-53.8.2-1.2 5-18.5 2.5-15.4zm-185.3 2.5c-3.1-.1-4.1 3.1-1.4 3.8 1.5.2 0-.4.1-1.4 1-5.1 7.5 2.1 9.2 4.5 2.6 1.4 1.4 8.5 3.1 9.7 1.4.8 2.5-1.5 2.2-4.6-1-5.4-7.2-12.8-13.2-12zm137.4 10.9c-.3 3.6 0 9.1.5 10.2 2 2.2 4 4.2 3.2-2-.3-4.4-.2-5.6-1-9-1.3-1.3-2.7-2.4-2.7.8zm-120.1 6.7c-.7.6-1.9 2.7-2.7 3-.4 0-.7.6-.7 1.3 1.9 2 7-7.6 3.4-4.3zm140.8 4.4c-2.5 13.8 2 18.6 2 2 0-1.9-.9-2.2-2-2zm107.6 4c-4.8 3.3-12.3 8.6-10.9 15.7.1 2.1.5 2.4 1.7 2.4-.6-7.6 5.8-13.3 12.3-17.5 3.6 3.9 2-3.1-3.1-.6zM224.7 237c-2.4 18-1.7 52.6-.1 67.3.7.2 2.2 0 1.8-1.2-.2-1.8-.5-13.9-.4-18.9.4-14.7-.4-28-.3-41.6 0-6.2.3-8.1-1-5.6zm-56.6 9.1c-2.5 3.2-2.8 11.7-5.2 13.1-.6.5-.5.7.5.7 2.9 0 4.4-3.1 6-12.1.2-2 1.5-4.5-1.3-1.7zm191.5 7.8c.6 1.4 3.2 7.1 5.8 7 2.1.2 2.4 0 1.2-1.1-1.2-.6-5.5-8.1-7-5.9zm-12.1 35.7c1.1 1.2 5 2.6 7.1 2.5-1.3 0-7.4-4.1-7.1-2.5zm-49.2 46.8c-4.3 1-11.1.7-14.3 2.9-3.4 1.9 1.6-1.9-.9-1.2-1.5.5-13.3 11.7-12.9 12.1.2.2 2 .4 2.6.5 4.5-5.1 12-11.5 18.8-12.3 5.4-.2 17.2-3.9 6.7-2zm-13.1 25.4c-.9 4.7 6.7 32.7 8.3 41.4.4.9.5 1 1.2.9 2.2-.5-.9-6.5-1-10.2-1.2-7.8-5.7-22.3-6.8-29.5-.5-3.1-.6-3.7-1.7-2.6z",fill:"#1E1919"})))};var Zl;!function(e){e.INTRO="intro",e.WHATS_HAPPENING="whats_happening",e.MIGRATE_NOT_NOW="migrate_not_now",e.WHAT_TO_DO="what_to_do",e.LINK_GOOGLE="link_google",e.CONVERT_TO_MS="convert_to_ms",e.MIGRATE_TO_GOOGLE="migrate_to_google",e.COULD_NOT_CONNECT="could_not_connect"}(Zl||(Zl={}));var ec;!function(e){e.MIGRATE_TO_GOOGLE="MIGRATE_TO_GOOGLE",e.CONVERT_TO_MS="CONVERT_TO_MS"}(ec||(ec={}));const tc=({user:e,gddMigrationDate:t,initialMigrationStep:n,onComplete:r})=>{const[l,c]=s.reactExports.useState(null!=n?n:Zl.INTRO),[d,u]=s.reactExports.useState(),[p,g]=s.reactExports.useState(!0);s.reactExports.useEffect((()=>{$e.getMigrationSettings(e).then((e=>{var t,o,s;g(null===(t=null==e?void 0:e.allow_team_members_to_link_google_account)||void 0===t||t),"ms_office_file"===(null===(o=e.effective_migration_mode)||void 0===o?void 0:o[".tag"])?u(ec.CONVERT_TO_MS):"shortcut_to_gdrive"===(null===(s=e.effective_migration_mode)||void 0===s?void 0:s[".tag"])&&u(ec.MIGRATE_TO_GOOGLE)}))}),[]),s.reactExports.useEffect((()=>{var t,o;t=e.role,o=l,i.logEvent({class:"cloud_docs",action:"shown",object:"configure_gdd_migration_modal",properties:{accountRole:t,configureGddMigrationModalType:o}})}),[e.role,l]);const m=()=>{var t,o;i.Modal.close(),t=e.role,o=l,i.logEvent({class:"cloud_docs",action:"dismiss",object:"configure_gdd_migration_modal",properties:{accountRole:t,configureGddMigrationModalType:o}})},h=()=>{m(),r&&r((e=>{switch(e){case ec.MIGRATE_TO_GOOGLE:return{".tag":"shortcut_to_gdrive"};case ec.CONVERT_TO_MS:return{".tag":"ms_office_file"};case void 0:return{".tag":"other"}}})(d))},_=(t,o)=>{((e,t,o)=>{i.logEvent({class:"cloud_docs",action:"select",object:"configure_gdd_migration_modal",properties:{accountRole:e,configureGddMigrationModalType:t,gddMigrationButtonType:o}})})(e.role,null!=o?o:l,t)},f=e=>{_("next",e),c(e)},E=e=>{_("back",e),c(e)},v=()=>{_("learn_more"),i.open_tab($e.HELP_CENTER_ARTICLE_URL)},A=s.reactExports.useMemo((()=>{const n=a.intl.formatDate(null!=t?t:new Date,{month:"long",day:"numeric",year:"numeric"});switch(l){case Zl.INTRO:return(({onNext:e,onNotNow:t,onLearnMore:o,moveByDate:n})=>({title:a.intl.formatMessage({id:"eZWKVs",defaultMessage:"Google files are moving to Google Drive on {moveByDate}."},{moveByDate:n}),infoTextAboveModalTitle:a.intl.formatMessage({id:"MfPZDB",defaultMessage:"1 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"e0OorB",defaultMessage:"Moving Google files from Dropbox to Google will improve performance and give access to the most up-to-date features when editing your Google Docs, Sheets, and Slides."})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"3k8CIy",defaultMessage:"Shortcuts to Google files will be created in Dropbox, replacing the original files."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},a.intl.formatMessage({id:"p4pvas",defaultMessage:"Remind me later"})),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},$e.Strings.NEXT)),tertiaryActions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,$e.Strings.LOADING_ANIMATION)},s.React$1.createElement(jl,{animationData:Wl,loop:!1,style:{width:"75%"}})),width:$e.DEFAULT_MIGRATION_MODAL_WIDTH,height:$e.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onNext:()=>f(Zl.WHATS_HAPPENING),onNotNow:()=>f(Zl.MIGRATE_NOT_NOW),onLearnMore:v,moveByDate:n});case Zl.WHATS_HAPPENING:return(({onNext:e,onBack:t,onLearnMore:o,moveByDate:n})=>({title:a.intl.formatMessage({id:"uSnLTt",defaultMessage:"What’s happening to your Google files"}),infoTextAboveModalTitle:a.intl.formatMessage({id:"MTMS+F",defaultMessage:"2 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"XA9qNs",defaultMessage:"Your files are still safe. Confirm your preference and move your Google files to Google Drive on {moveByDate}."},{moveByDate:n})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"Tt8Rvv",defaultMessage:"Shortcuts to your Google files will replace the original Google files so you can open your files anytime."})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"5J2/46",defaultMessage:"Your Google files will automatically convert to Microsoft Office files if no action is taken by {moveByDate}."},{moveByDate:n}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},$e.Strings.BACK),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},$e.Strings.NEXT)),tertiaryActions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,$e.Strings.LOADING_ANIMATION)},s.React$1.createElement(Hl,{animationData:b.LinkDropboxToGoogleAnimationData,loop:!1,style:{width:"75%"}})),width:$e.DEFAULT_MIGRATION_MODAL_WIDTH,height:$e.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onNext:()=>f(Zl.WHAT_TO_DO),onBack:()=>E(Zl.INTRO),onLearnMore:v,moveByDate:n});case Zl.WHAT_TO_DO:return(({disabled:e,isConvertToMS:t,isMigrateToGoogle:o,allowTeamMembersToLinkGoogleAccount:n,onNext:r,onBack:l,onLearnMore:c,onCheckMigrateToGoogle:d,onCheckConvertToMS:u})=>({title:a.intl.formatMessage({id:"AMpnzD",defaultMessage:"Confirm your preference"}),infoTextAboveModalTitle:a.intl.formatMessage({id:"7IR9Ol",defaultMessage:"3 of 4"}),bodyText:s.React$1.createElement("div",{role:"group"},s.React$1.createElement(zl,{checked:o,disabled:e,id:"continue-google",labelText:a.intl.formatMessage({id:"mrNUok",defaultMessage:"Move Google files to Google Drive with shortcuts"}),onChange:d,helperText:a.intl.formatMessage({id:"aIrwTU",defaultMessage:"Your Google account will need to be linked in order to move files to Google Drive."})}),s.React$1.createElement(zl,{checked:t,disabled:e,id:"continue-microsoft",labelText:a.intl.formatMessage({id:"iGoIY+",defaultMessage:"Convert Google files to Microsoft Office files"}),onChange:u,helperText:a.intl.formatMessage({id:"NAzO7r",defaultMessage:"No action is needed from you. We’ll take care of it."})})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:l},$e.Strings.BACK),!1===n?s.React$1.createElement(i.Tooltip,{title:$e.Strings.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT},s.React$1.createElement("span",null,s.React$1.createElement(i.Button$1,{variant:"primary",onClick:r,disabled:!0},$e.Strings.NEXT))):s.React$1.createElement(i.Button$1,{variant:"primary",onClick:r},$e.Strings.NEXT)),tertiaryActions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:c},$e.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,$e.Strings.LOADING_ANIMATION)},s.React$1.createElement(Xl,{animationData:Wl,loop:!1,className:[Ql.animationElement,Ql[o?"fadedIn":"fadedOut"]].join(" ")})),s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,$e.Strings.LOADING_ANIMATION)},s.React$1.createElement(Xl,{animationData:Kl,loop:!1,className:[Ql.animationElement,Ql[t?"fadedIn":"fadedOut"]].join(" ")}))),width:$e.DEFAULT_MIGRATION_MODAL_WIDTH,height:$e.DEFAULT_MIGRATION_MODAL_HEIGHT}))({disabled:void 0===d,isConvertToMS:d===ec.CONVERT_TO_MS,isMigrateToGoogle:d===ec.MIGRATE_TO_GOOGLE,allowTeamMembersToLinkGoogleAccount:p,onNext:()=>o.__awaiter(void 0,void 0,void 0,(function*(){if(d===ec.MIGRATE_TO_GOOGLE){yield $e.setMigrationSettings(e,{effective_migration_mode:{".tag":"shortcut_to_gdrive"}});const t=e.email,o=yield $e.fetchUserHasGddMigrationCompatibleLink(e,t);return f(o===$e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK?Zl.MIGRATE_TO_GOOGLE:Zl.LINK_GOOGLE)}if(d===ec.CONVERT_TO_MS)return yield $e.setMigrationSettings(e,{effective_migration_mode:{".tag":"ms_office_file"}}),f(Zl.CONVERT_TO_MS);i.Snackbar.warn(a.intl.formatMessage({id:"Q9RiB1",defaultMessage:"Please choose a migration type"}))})),onBack:()=>E(Zl.WHATS_HAPPENING),onLearnMore:v,onCheckMigrateToGoogle:()=>u(ec.MIGRATE_TO_GOOGLE),onCheckConvertToMS:()=>u(ec.CONVERT_TO_MS)});case Zl.LINK_GOOGLE:return(({onLinkAccount:e,onBack:t})=>({title:a.intl.formatMessage({id:"2PB7hS",defaultMessage:"Link Google account"}),infoTextAboveModalTitle:a.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"/WNsVV",defaultMessage:"You’ll be asked to sign in and link your Google account to this Dropbox account. Select the Google profile for this Dropbox account, and we’ll take care of the rest."})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"pYT44N",defaultMessage:"You’ll be notified when the Google file migration is complete."})),s.React$1.createElement("p",null,s.React$1.createElement("i",null,a.intl.formatMessage({id:"JlYJUS",defaultMessage:"You may need to disable pop-up blockers in order to link your Google account."})))),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},$e.Strings.BACK),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},$e.Strings.LINK_ACCOUNT)),width:"standard"}))({onLinkAccount:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const t=yield(e=>o.__awaiter(void 0,void 0,void 0,(function*(){try{return(yield $e.ensureUserHasGddMigrationCompatibleLink(e))===$e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}catch(e){const t=$e.parseLinkAccountError(e);t&&i.Snackbar.fail(t,"confgure-migration-controller-snackbar")}return!1})))(e);if(!t)return f(Zl.COULD_NOT_CONNECT);f(Zl.MIGRATE_TO_GOOGLE)})),onBack:()=>E(Zl.WHAT_TO_DO)});case Zl.COULD_NOT_CONNECT:return(({onTryAgain:e,onLearnMore:t})=>({title:a.intl.formatMessage({id:"mhpv2Q",defaultMessage:"Couldn’t connect to your Google account"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"IChG+T",defaultMessage:"You can try again, or go to “Learn more” to manually move your Google files to Google Drive and create shortcuts in Dropbox."})),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},$e.Strings.LEARN_MORE),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},a.intl.formatMessage({id:"WteAJ2",defaultMessage:"Try again"}))),width:"standard",withCloseButton:$e.Strings.CLOSE}))({onTryAgain:()=>E(Zl.LINK_GOOGLE),onLearnMore:v});case Zl.MIGRATE_NOT_NOW:return(({onMoveFiles:e,moveByDate:t})=>({title:a.intl.formatMessage({id:"X3l0jP",defaultMessage:"Google files moving to Google Drive"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"vyW3PG",defaultMessage:"We recommend moving all of your Google files to Google Drive. Shortcuts to the files will be added to Dropbox so you can open them at any time."})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"dbGYQX",defaultMessage:"Google files that haven’t been moved by {moveByDate} will be converted to Microsoft Office files and stored in Dropbox."},{moveByDate:t}))),tertiaryActions:s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},a.intl.formatMessage({id:"qbOcoV",defaultMessage:"Move files"})),withCloseButton:$e.Strings.CLOSE,width:"standard"}))({onMoveFiles:()=>f(Zl.INTRO),moveByDate:n});case Zl.CONVERT_TO_MS:return(({onFinish:e,onBack:t})=>({title:a.intl.formatMessage({id:"2YXCXl",defaultMessage:"You’re all set."}),infoTextAboveModalTitle:a.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"W1d9Bc",defaultMessage:"We’ll notify you in Dropbox when your files have been converted to equivalent Microsoft Office files."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},$e.Strings.BACK),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},$e.Strings.FINISH)),rightFrameComponent:s.React$1.createElement(Jl,{style:{width:"75%"}}),width:$e.DEFAULT_MIGRATION_MODAL_WIDTH,height:$e.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onBack:()=>E(Zl.WHAT_TO_DO),onFinish:h});case Zl.MIGRATE_TO_GOOGLE:return(({onFinish:e,onBack:t,moveByDate:o})=>({title:a.intl.formatMessage({id:"2YXCXl",defaultMessage:"You’re all set."}),infoTextAboveModalTitle:a.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,a.intl.formatMessage({id:"5Dcm1b",defaultMessage:"Your Google files will be automatically moved on {moveByDate}. We’ll notify you in Dropbox when the migration is finished. "},{moveByDate:o})),s.React$1.createElement("p",null,a.intl.formatMessage({id:"bsMf9R",defaultMessage:"After the move, you can create new shortcuts in Dropbox to Google files."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:t},$e.Strings.BACK),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:e},$e.Strings.FINISH)),rightFrameComponent:s.React$1.createElement(Jl,{style:{width:"75%"}}),width:$e.DEFAULT_MIGRATION_MODAL_WIDTH,height:$e.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onBack:()=>E(Zl.WHAT_TO_DO),onFinish:h,moveByDate:n});default:i.enforceExhaustive(l)}}),[e,l,c,d,u]);return s.React$1.createElement($e.ModalTemplate,Object.assign({open:!0},A,{onRequestClose:m}))};tc.displayName="ConfigureMigrationControllerWithoutCss";const oc=i.requireCssWithComponent(tc,["/static/metaserver/static/css/dig-illustrations/index.web-vfl45hs-6.css"]),sc=e=>{i.Modal.showInstance(s.React$1.createElement(oc,Object.assign({},e)))};var ac;!function(e){e.INITIAL_REMINDER="initial_reminder",e.MIGRATION_REMINDER="migration_reminder",e.MS_CONVERSION_REMINDER="ms_conversion_reminder",e.TEAM_ADMIN_MIGRATION_REMINDER="team_admin_migration_reminder",e.TEAM_ADMIN_MS_CONVERSION_REMINDER="team_admin_ms_conversion_reminder",e.TEAM_MIGRATION_REMINDER="team_migration_reminder",e.TEAM_MS_CONVERSION_REMINDER="team_ms_conversion_reminder",e.MIGRATION_SUCCEEDED="migration_succeeded",e.MIGRATION_PARTIALLY_SUCCEEDED="migration_partially_succeeded",e.MS_CONVERSION_SUCCEEDED="ms_conversion_succeeded",e.MS_CONVERSION_FAILED="ms_conversion_failed",e.MS_CONVERSION_COMPLETED="ms_conversion_completed",e.MS_CONVERSION_PARTIALLY_COMPLETED="ms_conversion_partially_completed"}(ac||(ac={}));const ic=(e,t,o)=>{i.logEvent({class:"cloud_docs",action:"select",object:"gdd_migration_banner",properties:{accountRole:e,gddMigrationBannerType:t,gddMigrationButtonType:o}})};function nc(){const e=i.Viewer.get_viewer().work_user;return new i.DefaultUserApiV2Client(e)}const rc=({onComplete:e})=>{const[t,n]=s.reactExports.useState(!1),[r,l]=s.reactExports.useState();s.reactExports.useEffect((()=>{nc().ns("cloud_docs").rpc("get_gdd_migration_settings",void 0,{}).then((e=>{var t;l(null===(t=e.settings.allow_team_members_to_link_google_account)||void 0===t||t),n(!0)}))}),[]);const c=()=>n(!1);return s.React$1.createElement(i.Modal$1,{open:t,onRequestClose:c},s.React$1.createElement(i.Modal$1.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(i.Modal$1.Title,null,a.intl.formatMessage({id:"e/+oMd",defaultMessage:"Dropbox for G Suite"}))),s.React$1.createElement(i.Modal$1.Body,null,s.React$1.createElement("div",{style:{display:"flex",flexDirection:"row"}},s.React$1.createElement("div",{style:{flexGrow:1}},s.React$1.createElement(i.Text,{size:"large"},a.intl.formatMessage({id:"DSdEqM",defaultMessage:"Allow team members to move content to Google Drive"})),s.React$1.createElement("br",null),s.React$1.createElement(i.Text,{color:"faint"},a.intl.formatMessage({id:"hPgVia",defaultMessage:"Your team’s Google files will be moving to Google Drive. This will impact your team’s Google storage. If files aren’t moved to Google Drive, they will automatically be converted to Microsoft Office equivalent files."}),s.React$1.createElement("br",null),s.React$1.createElement("br",null),a.intl.formatMessage({id:"vGdr3Z",defaultMessage:"Shortcuts to these Google files will be created in Dropbox and can be organized with the rest of your team’s content."}))),s.React$1.createElement("div",{style:{paddingLeft:"50px"}},s.React$1.createElement(i.Toggle,{isToggled:r,onChange:()=>{l(!r)}})))),s.React$1.createElement(i.Modal$1.Footer,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:()=>{i.open_tab($e.HELP_CENTER_ARTICLE_URL)}},a.intl.formatMessage({id:"4kFWKS",defaultMessage:"Learn more about the move"})),s.React$1.createElement(i.Button$1,{variant:"opacity",onClick:c},a.intl.formatMessage({id:"1ch1PL",defaultMessage:"Cancel"})),s.React$1.createElement(i.Button$1,{variant:"primary",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{yield nc().ns("cloud_docs").rpc("set_gdd_migration_settings",{settings:{allow_team_members_to_link_google_account:r}},{}),null==e||e(null==r||r),c()}catch(e){i.Snackbar.update(s.React$1.createElement(i.Snackbar,{id:"gdd-generic-error-snackbar",isLowPriority:!1,title:a.intl.formatMessage({id:"rkVslm",defaultMessage:"Something went wrong on our end. Please try again."}),variant:"fail",actionButtonText:a.intl.formatMessage({id:"R/Hjn0",defaultMessage:"Close"}),onActionClick:()=>i.Snackbar.close()}))}}))},a.intl.formatMessage({id:"S2uNnI",defaultMessage:"Set"}))))};const lc=({effectiveMigrationMode:e,migrationModeWasSelected:t,preMigrationReminderBannerDismissed:o,preMigrationInXDaysBannerDismissed:s})=>{if(t){if(!s)return"ms_office_file"===e[".tag"]?ac.MS_CONVERSION_REMINDER:ac.MIGRATION_REMINDER}else if(!o)return ac.INITIAL_REMINDER;return null},cc=({effectiveMigrationMode:e,convertToShortcutNumSucceeded:t,convertToShortcutNumFailed:o,convertToMsFileNumSucceeded:s,convertToMsFileNumFailed:a})=>{if("ms_office_file"===e[".tag"]){if(s>0&&0===a)return ac.MS_CONVERSION_SUCCEEDED;if(s>0&&a>0)return ac.MS_CONVERSION_PARTIALLY_COMPLETED;if(0===s&&a>0)return ac.MS_CONVERSION_FAILED}else if("shortcut_to_gdrive"===e[".tag"]){if(t>0&&0===o)return ac.MIGRATION_SUCCEEDED;if(t>0&&o>0)return ac.MIGRATION_PARTIALLY_SUCCEEDED;if(s>0&&0===a)return ac.MS_CONVERSION_COMPLETED;if(s>0&&a>0)return ac.MS_CONVERSION_PARTIALLY_COMPLETED;if(!s&&a>0)return ac.MS_CONVERSION_FAILED;if(!s&&!a)return ac.MS_CONVERSION_FAILED}return null},dc=({gddMigrationDate:e})=>{const[t,n]=s.reactExports.useState(null),[r,l]=s.reactExports.useState(null),c=i.mustGetActiveUser();if(s.reactExports.useEffect((()=>{(function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=yield $e.getMigrationSettings(e),{user_details:s,team_details:a}=yield $e.getMigrationDetails(e),i=null!=a?a:s;if(!i)return null;const{effective_migration_mode:n,migration_mode_was_selected:r,allow_team_members_to_link_google_account:l,pre_migration_reminder_banner_dismissed:c,pre_migration_in_x_days_banner_dismissed:d,pre_migration_team_admin_banner_dismissed:u,post_migration_result_banner_dismissed:p}=o,{overall_status:g,pre_migration_gdd_count:m,convert_to_ms_file_num_succeeded:h,convert_to_ms_file_num_failed:_,convert_to_shortcut_num_succeeded:f,convert_to_shortcut_num_failed:E}=i;if(!t)return null;const v=x.getNumDaysRemaining(t);if(v>30)return null;if("not_started"===g[".tag"]){if(v<0)return null;if(!a)return!1!==l||c?{bannerType:lc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},migrationModeWasSelected:r,preMigrationReminderBannerDismissed:c,preMigrationInXDaysBannerDismissed:d}),numDays:v}:{bannerType:ac.TEAM_ADMIN_MS_CONVERSION_REMINDER};if(void 0===l)return{bannerType:ac.TEAM_ADMIN_MIGRATION_REMINDER};if(!1!==l)return{bannerType:lc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},migrationModeWasSelected:r,preMigrationReminderBannerDismissed:c,preMigrationInXDaysBannerDismissed:d}),numDays:v};if(!u)return{bannerType:ac.TEAM_ADMIN_MS_CONVERSION_REMINDER}}else if("completed"===g[".tag"]&&m&&!p)return{bannerType:cc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},convertToShortcutNumSucceeded:null!=f?f:0,convertToShortcutNumFailed:null!=E?E:0,convertToMsFileNumSucceeded:null!=h?h:0,convertToMsFileNumFailed:null!=_?_:0}),preMigrationGddCount:m,convertToShortcutNumFailed:E,convertToMsFileNumFailed:_};return null}))})(c,e).then(n).catch((e=>i.Snackbar.failSticky($e.Strings.GET_MIGRATION_SETTINGS_ERROR)))}),[c]),s.reactExports.useEffect((()=>{var e,o;(null==t?void 0:t.bannerType)&&(e=c.role,o=null==t?void 0:t.bannerType,i.logEvent({class:"cloud_docs",action:"shown",object:"gdd_migration_banner",properties:{accountRole:e,gddMigrationBannerType:o}}))}),[null==t?void 0:t.bannerType,c.role]),s.reactExports.useEffect((()=>{$e.getMigrationReportUrl(c).then((e=>l(e.url))).catch()}),[c]),null===t)return null;const{bannerType:d,numDays:u}=t;if(null===d)return null;const p=()=>o.__awaiter(void 0,void 0,void 0,(function*(){let e;switch(d){case ac.INITIAL_REMINDER:case ac.TEAM_MIGRATION_REMINDER:case ac.TEAM_MS_CONVERSION_REMINDER:e="pre_migration_reminder_banner_dismissed";break;case ac.MIGRATION_REMINDER:case ac.MS_CONVERSION_REMINDER:e="pre_migration_in_x_days_banner_dismissed";break;case ac.TEAM_ADMIN_MIGRATION_REMINDER:case ac.TEAM_ADMIN_MS_CONVERSION_REMINDER:e="pre_migration_team_admin_banner_dismissed";break;case ac.MIGRATION_SUCCEEDED:case ac.MIGRATION_PARTIALLY_SUCCEEDED:case ac.MS_CONVERSION_SUCCEEDED:case ac.MS_CONVERSION_COMPLETED:case ac.MS_CONVERSION_PARTIALLY_COMPLETED:case ac.MS_CONVERSION_FAILED:e="post_migration_result_banner_dismissed";break;default:i.enforceExhaustive(d)}try{yield $e.setMigrationSettings(c,{[e]:!0}),n(null)}catch(e){i.Snackbar.failSticky($e.Strings.SET_MIGRATION_SETTINGS_ERROR)}var t,o;t=c.role,o=d,i.logEvent({class:"cloud_docs",action:"dismiss",object:"gdd_migration_banner",properties:{accountRole:t,gddMigrationBannerType:o}})})),g=e=>{let o;switch(e[".tag"]){case"shortcut_to_gdrive":o=ac.MIGRATION_REMINDER;break;case"ms_office_file":o=ac.MS_CONVERSION_REMINDER;break;case"other":o=ac.INITIAL_REMINDER;break;default:i.enforceExhaustive(e[".tag"])}n(Object.assign(Object.assign({},t),{bannerType:o}))},m=e=>{n(Object.assign(Object.assign({},t),{bannerType:e?ac.INITIAL_REMINDER:ac.TEAM_ADMIN_MS_CONVERSION_REMINDER}))},h=()=>{ic(c.role,d,"learn_more"),i.open_tab($e.HELP_CENTER_ARTICLE_URL)},_=()=>{r&&(ic(c.role,d,"view_summary"),i.open_tab(r))},f=()=>{ic(c.role,d,"configure_migration"),sc({user:c,gddMigrationDate:e,onComplete:g})},E=()=>{ic(c.role,d,"configure_migration"),sc({user:c,gddMigrationDate:e,initialMigrationStep:Zl.WHATS_HAPPENING,onComplete:g})},v=()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{const e=yield $e.getMigrationFolderURLInGDrive(c.id);i.safe_open_tab_and_redirect(e)}catch(e){i.Snackbar.fail($e.getErrorMessageForApiError(e.error))}}));return s.React$1.createElement(Gl,Object.assign({},(()=>{switch(d){case ac.INITIAL_REMINDER:return(({numDays:e,onLearnMore:t,onConfirmPreference:o})=>({variant:"rich",type:"attention",bodyText:a.intl.formatMessage({id:"kVo71K",defaultMessage:"{numDays, plural, =0{Your Google files will be migrated today} one{Your Google files will be migrated tomorrow} other{Google files stored in Dropbox will move to Google Drive in # days}}. Shortcuts to your files will be added to Dropbox so you can open them at any time.\nConfirm the move or automatically convert files to equivalent Microsoft file formats and keep them stored in Dropbox."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.LEARN_MORE)," ",s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.CONFIRM_PREFERENCE))}))({numDays:null!=u?u:0,onLearnMore:h,onConfirmPreference:f});case ac.MIGRATION_REMINDER:return(({numDays:e,onLearnMore:t,onManagePreference:o})=>({type:"attention",bodyText:a.intl.formatMessage({id:"czUnNb",defaultMessage:"This is a reminder that your Google files will be migrated {numDays, plural, =0{today} one{tomorrow} other{in # days}}."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.LEARN_MORE)," ",s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.MANAGE_PREFERENCE)),withCloseButton:$e.Strings.CLOSE}))({numDays:null!=u?u:0,onLearnMore:h,onManagePreference:E});case ac.MS_CONVERSION_REMINDER:return(({numDays:e,onLearnMore:t,onManagePreference:o})=>({type:"attention",bodyText:a.intl.formatMessage({id:"yyS3oS",defaultMessage:"This is a reminder that your Google files will be converted to Microsoft Office files {numDays, plural, =0{today} one{tomorrow} other{in # days}}."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.LEARN_MORE)," ",s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.MANAGE_PREFERENCE)),withCloseButton:$e.Strings.CLOSE}))({numDays:null!=u?u:0,onLearnMore:h,onManagePreference:E});case ac.TEAM_ADMIN_MIGRATION_REMINDER:return(({onLearnMore:e,onEditAppPermissions:t})=>({variant:"rich",title:a.intl.formatMessage({id:"68Q4L7",defaultMessage:"Google files are changing to shortcuts"}),type:"attention",bodyText:a.intl.formatMessage({id:"4ed2VE",defaultMessage:"Team members will need to link their Google accounts in order to continue using Google files. If you don‘t want team members to link their accounts, change settings from <b>Admin console > App permissions</b>."},{b:e=>s.React$1.createElement("strong",null,e)}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"outline",onClick:t},$e.Strings.EDIT_APP_PERMISSIONS),s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE))}))({onLearnMore:h,onEditAppPermissions:()=>{var e;ic(c.role,d,"edit_app_permissions"),e={onComplete:m},i.Modal.showInstance(s.React$1.createElement(rc,Object.assign({},e)))}});case ac.TEAM_ADMIN_MS_CONVERSION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:a.intl.formatMessage({id:"WtnrdT",defaultMessage:"Google files will be converted to Microsoft Office files"}),type:"neutral",bodyText:a.intl.formatMessage({id:"JlzzZf",defaultMessage:"Google files in your Dropbox will be converted to Microsoft Office files."}),actions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),withCloseButton:$e.Strings.CLOSE,withLeftPictogram:s.React$1.createElement(i.PictogramIcon,{src:i.ConvertFileLine})}))({onLearnMore:h});case ac.TEAM_MIGRATION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:a.intl.formatMessage({id:"68Q4L7",defaultMessage:"Google files are changing to shortcuts"}),type:"attention",bodyText:a.intl.formatMessage({id:"uQ3P8E",defaultMessage:"No action is needed at this time if you want your team to continue working in Google Workspace"}),actions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),withCloseButton:$e.Strings.CLOSE}))({onLearnMore:h});case ac.TEAM_MS_CONVERSION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:a.intl.formatMessage({id:"WtnrdT",defaultMessage:"Google files will be converted to Microsoft Office files"}),type:"neutral",bodyText:a.intl.formatMessage({id:"VjDwBl",defaultMessage:"Google files in your Dropbox will be converted to Microsoft Office files. For questions, reach out to your team admin."}),actions:s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),withCloseButton:$e.Strings.CLOSE,withLeftPictogram:s.React$1.createElement(i.PictogramIcon,{src:i.ConvertFileLine})}))({onLearnMore:h});case ac.MIGRATION_SUCCEEDED:return(({migrationFolder:e,onDismiss:t,onShowInGoogleDrive:o,onViewSummary:n})=>({variant:"rich",title:a.intl.formatMessage({id:"DJOsk5",defaultMessage:"Google files migration is complete"}),type:"success",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"sK2/1g",defaultMessage:"All of your Google files have been moved to Google Drive. You can find them in the <b>{migrationFolder}</b> folder. Shortcuts to the files have been created in Dropbox."},{migrationFolder:e,b:e=>s.React$1.createElement("b",null,e)})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"primary",onClick:o},$e.Strings.SHOW_IN_GOOGLE_DRIVE),n&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:n},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({migrationFolder:$e.Strings.MIGRATION_FOLDER,onDismiss:p,onShowInGoogleDrive:()=>{ic(c.role,d,"show_in_google_drive"),v()},onViewSummary:r?_:void 0});case ac.MIGRATION_PARTIALLY_SUCCEEDED:return(({migrationFolder:e,onLearnMore:t,onViewSummary:o,onShowInGoogleDrive:n})=>({variant:"rich",title:a.intl.formatMessage({id:"ld/nQi",defaultMessage:"Migration complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"IjH+6l",defaultMessage:"Some files couldn’t be moved to Google Drive, so they’ve been converted to Microsoft Office files and saved to Dropbox. Files that were migrated are now in the <b>{migrationFolder}</b> folder in your Google Drive."},{migrationFolder:s.React$1.createElement(i.Link,{href:"#",onClick:n,hasNoUnderline:!0,variant:"monochromatic"},e),b:e=>s.React$1.createElement("b",null,e)})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.LEARN_MORE),o&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:o},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({migrationFolder:$e.Strings.MIGRATION_FOLDER,onLearnMore:h,onViewSummary:r?_:void 0,onShowInGoogleDrive:()=>{ic(c.role,d,"show_in_google_drive"),v()}});case ac.MS_CONVERSION_SUCCEEDED:return(({onViewSummary:e})=>({variant:"rich",title:a.intl.formatMessage({id:"5cDTTm",defaultMessage:"Conversion to Microsoft Office files complete"}),type:"success",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"BwknIx",defaultMessage:"All of your Google files have been converted to Microsoft Office files. You can find them in their original location."})),actions:s.React$1.createElement(s.React$1.Fragment,null,e&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({onViewSummary:r?_:void 0});case ac.MS_CONVERSION_COMPLETED:return(({onLearnMore:e,onViewSummary:t})=>({variant:"rich",title:a.intl.formatMessage({id:"+ozYJK",defaultMessage:"File conversion complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"8UkEm4",defaultMessage:"Your files couldn’t be saved to Google Drive so they were converted to Microsoft Office files."})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),t&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({onLearnMore:h,onViewSummary:r?_:void 0});case ac.MS_CONVERSION_PARTIALLY_COMPLETED:return(({onLearnMore:e,onViewSummary:t})=>({variant:"rich",title:a.intl.formatMessage({id:"+ozYJK",defaultMessage:"File conversion complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"/x3kfY",defaultMessage:"Some files couldn’t be converted to Microsoft Office files. To continue using these files, you can convert these files to shortcuts manually."})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),t&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({onLearnMore:h,onViewSummary:r?_:void 0});case ac.MS_CONVERSION_FAILED:return(({onLearnMore:e,onViewSummary:t})=>({variant:"rich",title:a.intl.formatMessage({id:"/ZCRyD",defaultMessage:"File conversion failed"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,a.intl.formatMessage({id:"Jxdafv",defaultMessage:"Your files couldn’t be converted to Microsoft Office files. To continue using these files, you can convert these files to shortcuts manually."})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:e},$e.Strings.LEARN_MORE),t&&s.React$1.createElement(i.Button$1,{variant:"transparent",onClick:t},$e.Strings.VIEW_SUMMARY)),withCloseButton:$e.Strings.CLOSE}))({onLearnMore:h,onViewSummary:r?_:void 0});default:i.enforceExhaustive(d)}})(),{onRequestClose:p}))};dc.displayName="BannerController";const uc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{MigrationTooltip:t,MigrationTooltipStep:o}=yield new Promise((function(t,o){e(["./c_gg_to_cdm_migration_migration_tooltip"],t,o)}));return{default:e=>s.React$1.createElement(t,Object.assign({},e,{step:o.Three,migrationTooltipRef:e.migrationTooltipRef,ggToCdmMigrationVariant:e.expGgToCdmMigrationVariant,user:e.user,triggerRef:e.migrationTooltipRef}))}})))),pc=({})=>{const e=s.React$1.createRef(),t=i.useSelector(i.user$1),o=i.useSelector(i.postTTIExperiments).expGgToCdmMigrationVariant;return o&&"OFF"!==o?s.React$1.createElement("span",{ref:e},s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement(s.React$1.Fragment,null)},s.React$1.createElement(uc,{user:t,migrationTooltipRef:e,expGgToCdmMigrationVariant:o}))):s.React$1.createElement(s.React$1.Fragment,null)},gc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ContinuousOnboarding:t}=yield new Promise((function(t,o){e(["./c_continuous_onboarding_v2_index"],t,o)}));return{default:t}})))),mc=e=>s.React$1.createElement(s.React$1.Suspense,{fallback:null},s.React$1.createElement(gc,Object.assign({},e)));mc.displayName="AsyncContinuousOnboarding";const hc=s.reactExports.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{TrialOnboarding:t}=yield new Promise((function(t,o){e(["./c_browse_trial_onboarding"],t,o)}));return{default:t}})))),_c=({responsive:e,vaultLockButtonSlotRef:t})=>{const o=i.useDispatch(),a=i.useSelector(i.context),n=i.useSelector(i.path$1),r=i.useSelector(i.user$1),l=i.useSelector(i.selectedFiles$1),c=i.useSelector(i.isRightRailCollapsed),d=i.useSelector(i.isInsideBackupFolder),u=i.useSelector(i.backupFolderPath),p=i.useSelector(i.skuModalEnabled),g=i.useSelector(i.backups),m=i.useSelector(i.userSKU),h=i.useSelector(i.userQuota),_=i.useSelector(i.browsePostTTIData),f=i.useSelector(i.experiments),E=i.useSelector(i.postTTIExperiments),v=f.gddMigrationBanners,A=f.gddMigrationDates,S=E.expTrialOnboardingFeaturesEngagement,R=e=>{o(i.updateBackupExemptInfo(e))},y=s.reactExports.useCallback((e=>{o(k.setUrl({path:e}))}),[o]),w=()=>{var e;const t=_.trialOnboardingFeaturesEngagementProps;return Boolean("V1"===S&&(null===(e=null==t?void 0:t.cardContentList)||void 0===e?void 0:e.length)&&(null==t?void 0:t.displayName)&&(null==t?void 0:t.activeTrialDaysRemaining)>=0)},T=()=>!w()&&!r.is_team&&a.isCurrentlyInRoot,b=v||x.isGddMigrationDateWithinNumDays(A,30),M=a.isInsideFamilySharedFolder,F=!e.isResponsive||e.isMatchedLarge,C=M&&c,O=a.isInsideFamilySharedFolder,N=d&&[p,m,g,h,R].every((e=>void 0!==e)),D=s.reactExports.useMemo((()=>d?s.reactExports.createElement(Te.BackupBreadcrumb,{path:n,basePath:u,size:O?"small":"standard",user:r,useFullPath:!0,isForCurrentPath:!0,setUrl:y,className:"browse-file-pathbar",key:n}):s.reactExports.createElement(xe.FileBreadcrumb,{path:n,size:O?"small":"standard",user:r,useFullPath:!0,isForCurrentPath:!0,setUrl:y,className:"browse-file-pathbar",key:n})),[n,u,O,y,d,r]);return i.useLogExposureOnce$1({feature:"core_act_basic_welcome",variant:E.expBasicWelcome},!T()),s.reactExports.createElement(s.reactExports.Fragment,null,w()&&s.reactExports.createElement(s.reactExports.Suspense,{fallback:s.reactExports.createElement(s.reactExports.Fragment,null)},s.reactExports.createElement(hc,{trialOnboardingFeaturesEngagementProps:_.trialOnboardingFeaturesEngagementProps,handleUploadButtonClick:(e,t)=>{I.FileUploaderController.setPath(n),I.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:t,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})}})),T()&&"V1"===E.expBasicWelcome&&s.reactExports.createElement(mc,{userId:r.id,userName:r.fname}),b&&s.reactExports.createElement(dc,{gddMigrationDate:x.parseGddMigrationDate(A)}),s.reactExports.createElement("div",{className:i.cx("brws-file-pathbar-row",{"family-brws-file-pathbar-row":O,"brws-file-pathbar-row--compact":e.isResponsive&&!e.isMatchedLarge}),onClick:e=>{i.shouldClickDeselect(e,!0)&&o(k.clearSelection({actionSource:i.ActionSourceValue.WHITESPACE}))}},a.isInsideVaultFolder&&s.reactExports.createElement("div",{ref:t}),s.reactExports.createElement("div",{className:"browse-title-file-pathbar"},O&&s.reactExports.createElement(i.Title,{className:"family-browse-title"},i.filename(n)),s.reactExports.createElement("div",{className:"browse-file-pathbar-container"},D,s.reactExports.createElement(i.CampaignSlot,{slotId:"right_of_browse_breadcrumb"}))),s.reactExports.createElement("div",{className:"brws-selection-view-mode-container"},!O&&s.reactExports.createElement(de.SelectionIndicator,{responsive:e,selectedFilesCount:l.size,rightRailCollapsed:c,isInFamilyFolder:a.isInFamilySharedFolder}),N&&s.reactExports.createElement(Ul,{skuModalEnabled:p,userSKU:m,allBackups:g,userQuota:h,updateBackupExemptInfoCB:R}),!M&&s.reactExports.createElement(Fo,{user:r}),C&&s.reactExports.createElement("div",{className:"family-room-sharing-view"},s.reactExports.createElement(bt,{useCompactMode:!F})))),s.reactExports.createElement(pc,null))};class fc extends s.React$1.PureComponent{constructor(e){super(e),this.vaultEmptyContentSlot=s.React$1.createRef(),this.vaultContentSlot=s.React$1.createRef(),this.vaultLockButtonSlot=s.React$1.createRef(),this.handleUploadButtonClick=(e,t)=>{I.FileUploaderController.setPath(this.props.path),I.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:t,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})},this.handleBasicPlusButtonClick=()=>{i.redirect("/manage/subscriptions")},this.showBasicPlusConfirmationSnackbar=()=>{i.Snackbar.show(s.React$1.createElement(i.Snackbar,{title:a.intl.formatMessage({id:"pwDt+e",defaultMessage:"Your purchase is complete! Enjoy the extra space."}),id:i.BASIC_PLUS_CONFIRM_SNACKBAR,customIcon:i.CheckmarkCircleLine,actionButtonText:a.intl.formatMessage({id:"SR6STE",defaultMessage:"View plan details"}),onActionClick:()=>this.handleBasicPlusButtonClick(),timeoutDelayMs:5e3}))},this.isInTeamSpaceRoot=()=>this.props.context.isInsideMyTeamFolderTree&&this.props.context.isCurrentlyInRoot,this.isFirstTaskEmptyState=()=>this.props.browsePostTTIData.firstTaskProps.is_eligible_team&&this.isInTeamSpaceRoot()&&1===this.props.totalNumItems,this.setContentSlot=e=>{this.setState({contentSlot:e}),this.vaultContentSlot.current=e},this.setEmptyContentSlot=e=>{this.setState({emptyContentSlot:e}),this.vaultEmptyContentSlot.current=e},this.renderFilesViewController=(e,t)=>this.props.loadingState===i.LoadingState.LOAD_ERROR?s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,a.intl.formatMessage({id:"zD5i93",defaultMessage:"Something went wrong on our end."}))},s.React$1.createElement(Ec,null)):s.React$1.createElement(Ki,{responsive:e,contentSlot:this.setContentSlot,emptyContentSlot:this.setEmptyContentSlot,isFirstTaskEmptyState:this.isFirstTaskEmptyState(),initialTotalNumItems:this.state.initialTotalNumItems,handleUploadButtonClick:this.handleUploadButtonClick,onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder,isFileViewerShown:this.props.isFileViewerShown,handleComponentTTI:this.props.handleComponentTTI,isActive:!!t}),this.state={initialTotalNumItems:this.props.totalNumItems||1,contentSlot:null,emptyContentSlot:null}}componentDidMount(){var e;return o.__awaiter(this,void 0,void 0,(function*(){yield i.waitForTTI(),I.FileUploaderController.loadCoreComponent(),i.logPageView(this.getPageViewerBrowseLoadedData()),i.UserSurvey.trackEvent("folder_viewed","browse");const t=this.getCurrentFolderType();i.UserSurvey.addAttribute("browseFolderType",t),"root"===t&&C.initBrowseTTS("root"),xl({user:this.props.user,accM3Variant:this.props.browseExperiments.coreActAccM3},this.props.path);const o=this.props.browsePostTTIData.trialOnboardingFeaturesEngagementProps;(null===(e=null==o?void 0:o.cardContentList)||void 0===e?void 0:e.length)&&(null==o?void 0:o.displayName)&&(null==o?void 0:o.activeTrialDaysRemaining)>=0&&i.logExposure({feature:"trial_onboarding_features_engagement",variant:this.props.browsePostTTIExperiments.expTrialOnboardingFeaturesEngagement})}))}componentDidUpdate(e){if(this.props.loadingState===i.LoadingState.LOADED&&e.loadingState===i.LoadingState.LOADING_FIRST_PAGE){i.logBrowseLoaded(this.getPageViewerBrowseLoadedData()),this.setState({initialTotalNumItems:this.props.totalNumItems});const e=this.getCurrentFolderType();i.UserSurvey.addAttribute("browseFolderType",e),"root"===e&&C.initBrowseTTS("root")}r.isEqual(this.props.backups,e.backups)||i.getStoreForBrowse().dispatch(k.setPath({path:this.props.path})),e.loadingState!==this.props.loadingState&&(!function(e){const t=at("browse/loading_state",{cypress:_.BROWSE_ON_CYPRESS,loading_state:e});t.increment(),t.record()}(this.props.loadingState),this.props.loadingState===i.LoadingState.LOAD_ERROR?_t(!1):this.props.loadingState===i.LoadingState.LOADED&&_t(!0))}getCurrentFolderType(){const{context:e,user:t}=this.props;if(e.isInsideVaultFolder)return"vault";if(t.is_cdm_member){if(("/"===e.currentFQPath||""===e.currentFQPath)&&e.currentNSID===e.rootNSID)return"root";if(e.isCurrentlyInRoot)return"team_member_folder"}else if(e.isCurrentlyInRoot)return"root";return e.isInsideTeamFolderTree?"team_shared_folder":e.isInsideSharedFolder&&""===e.currentNSPath?"shared_folder":"folder"}getPageViewerBrowseLoadedData(){const{context:e,user:t,viewType:o,rightRailCollapsed:s}=this.props,a=e.currentFQPath.split("/").filter((e=>!!e)).length,n=t.is_cdm_member&&(i.paths_are_equal(t.cdm_tmf_path,e.currentFQPath)||i.inSubDirectory(t.cdm_tmf_path,e.currentFQPath)),r=s?"collapsed":"opened";return 0===a?{uid:t.id,view_type:o,url:i.get_browse_root(t),baseUrl:i.get_browse_root(t),folder_type:this.getCurrentFolderType(),right_sidebar_state:r,role:t.role}:{uid:t.id,view_type:o,url:i.get_browse_root(t)+"/*",baseUrl:i.get_browse_root(t),folder_type:this.getCurrentFolderType(),right_sidebar_state:r,navigation_depth:a,is_under_tmf:n,role:t.role}}render(){const{user:e,context:t,handleComponentTTI:o,browsePostTTIExperiments:{expVaultAutoLockWeb:a,expFlowsAutomatedFolderUI:n,expEnableCaptureCreate:r,expVaultEnableUserSurvey:l},browsePostTTIData:c,path:d}=this.props,{userHasSharedFileOrFolderInfo:u,activationBoltInfo:p}=c,g=r&&M.canUseRecorder,m=i.cx("exp-details-pane-variants",{"mobile-web-invites":c.mobileWebInvites}),h=i.cx(m,"dig2--enabled","browse-view--chrome","browse-right-rail--v2");return this.props.basicPlusConfirm&&this.showBasicPlusConfirmationSnackbar(),s.React$1.createElement("div",{className:m,onContextMenu:i.isDefaultRightClickContextMenuDisabled(i.getStoreForActivation().getState())?wl:void 0},t.isInsideVaultFolder&&s.React$1.createElement(El,{contentSlot:this.vaultContentSlot,vaultEmptyContentSlot:this.vaultEmptyContentSlot,lockButtonSlot:this.vaultLockButtonSlot,handleComponentTTI:o,encryptionOptions:this.props.encryptionOptions,expVaultAutoLockWeb:a,expVaultEnableUserSurvey:l,path:d,user:e}),n&&s.React$1.createElement(Rl,{path:d}),t.isInFamilySharedFolder&&s.React$1.createElement(dl,{user:e,path:d,contentSlot:this.state.contentSlot,emptyContentSlot:this.state.emptyContentSlot}),i.getQueryArgs().unfollow_folder&&s.React$1.createElement(gl,null),g&&s.React$1.createElement(M.AsyncBrowseRecorder,{user:e}),s.React$1.createElement(ml,null,s.React$1.createElement(bl,{user:e})),s.React$1.createElement(ul,{path:t.currentFQPath}),s.React$1.createElement(yl.Provider,{value:{userHasSharedFileOrFolderInfo:u,activationBoltInfo:p}},s.React$1.createElement(Ne.ChromeWrapper,{user:e,titleRegion:e=>s.React$1.createElement(_c,{responsive:e,vaultLockButtonSlotRef:this.vaultLockButtonSlot}),titleClass:"page-header__title-overflow",embeddedAppRegion:this.renderFilesViewController,actionSidebarRegion:s.React$1.createElement(rl,{onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder}),chromeClass:h,useMaestroPortal:!0,useRightRailOutsideSearch:!0,useRightRail:!0})))}}fc.defaultProps={selectedFiles:i.immutableExports.OrderedMap(),viewType:i.ViewType.List},fc.displayName="BrowseView";const Ec=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ErrorComponent:t}=yield new Promise((function(t,o){e(["./c_components_post_tti_error"],t,o)}));return{default:t}})))),vc=(e,t)=>{var o;const s=t.breadcrumb.length?t.breadcrumb[0]:null;return null!==(o=null==s?void 0:s.url)&&void 0!==o?o:i.browse_uri_for_fq_path(e,"").toString()},Ac=(e,t)=>(o,s,a)=>{if(a)i.logAndNavigate(vc(t,o),s,i.NavigationMethod.NEW_TAB);else if(o.fqPath){const t=o.fqPath.split("/");t.pop();const a=t.join("/");s().then((()=>{e(a)}))}else i.logAndNavigate(vc(t,o),s,i.NavigationMethod.REDIRECT)};class Sc{constructor(e,t,o=null){var s;this.onSuggestPrefetchComplete=e,this.onSuggestPrefetchError=t,this.handlePrefetch=()=>{this.suggestPreloadHandler?this.suggestPreloadHandler(this.handleSuggestPrefetchDataSuccess,this.onSuggestPrefetchError):this.onSuggestPrefetchError("suggest prefetch not found")},this.handleSuggestPrefetchDataSuccess=e=>{if(e)try{const t=i.handlePayload(JSON.parse(e));"ERROR"===t?this.onSuggestPrefetchError("no suggest response"):this.onSuggestPrefetchComplete(t)}catch(e){this.onSuggestPrefetchError(e)}else this.onSuggestPrefetchError("response not found")},this.suggestPreloadHandler=o||(null!==(s=window.__REGISTER_SUGGEST_GRID_PRELOAD_HANDLER)&&void 0!==s?s:null)}}const Rc=(e,t)=>{new Sc(e,t).handlePrefetch()};var yc;!function(e){e.BROWSE="browse",e.TRANSFER="transfer",e.DASH_HOME="dash_home",e.BUY_PLUS="buy_plus",e.SIGNATURES="signatures"}(yc||(yc={}));const wc=e=>{const[t,o]=s.reactExports.useState(!0);return s.React$1.createElement(i.Modal$1,{open:t,isCentered:!0,withCloseButton:i.TooManyFilesModalTranslations.CLOSE_MODAL_BUTTON,onRequestClose:()=>{o(!1)}},s.React$1.createElement(i.Modal$1.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(i.Title,null,i.TooManyFilesModalTranslations.MODAL_TITLE)),s.React$1.createElement(i.Modal$1.Body,null,s.React$1.createElement(i.Text,null,i.TooManyFilesModalTranslations.MODAL_BODY)),s.React$1.createElement(i.Modal$1.Footer,null,s.React$1.createElement(i.Button$1,{variant:"primary",onClick:()=>{i.open_tab("https://www.dropbox.com/install")}},i.TooManyFilesModalTranslations.DOWNLOAD_BUTTON)))};wc.displayName="TooManyFilesModal";const Tc=s.reactExports.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{OAPulsarEffect:t}=yield new Promise((function(t,o){e(["./c_onboarding_survey_components_oa_pulsar_effect"],t,o)}));return{default:t}})))),bc=e=>s.React$1.createElement(s.reactExports.Suspense,{fallback:null},s.React$1.createElement(Tc,Object.assign({},e)));bc.displayName="AsyncOAPulsarEffect";const Mc=()=>{const e=i.useSelector(i.selectPulsarCampaign),t=i.useAppDispatch();s.reactExports.useEffect((()=>{const e=Ic();e&&t(i.activationActions.setPulsarCampaign({pulsarCampaign:e}))}),[t]);const o=i.useSelector(i.selectRecommendationTooltip),a=i.useSelector(i.guidedOnboardingVariant);i.useLogExposureOnce$1({feature:"core_tact_guided_onboarding",variant:a}),s.reactExports.useEffect((()=>{e||i.attemptLogShownRecommendationTooltip(o)}),[e,o]);const n=new Map([["upload_tooltip",i.OAPulsarCampaign.upload_team],["share_tooltip",i.OAPulsarCampaign.share_file],["invite_tooltip",i.OAPulsarCampaign.invite_team_member],["manage_team_tooltip",i.OAPulsarCampaign.admin_console],["other",null],["unknown_tooltip",null]]).get(o),r=null!=e?e:n;return r?s.React$1.createElement(bc,{campaign:r}):null},Ic=()=>{const e=i.getQueryArgs().highlight;return e&&c.DBHistory.remove_query_param(i.BrowseQueryArg.highlight),e&&i.isOAPulsarCampaign(e)?e:null},Fc=({userVersionHistoryLength:e})=>(s.reactExports.useEffect((()=>{o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{bloodHoundInitialize:e}=yield Promise.resolve().then((function(){return qc}));e()}))}),[]),s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(Mc,null),s.React$1.createElement(yt,{userVersionHistoryLength:e})));function Cc(e){return!!e&&e.isShown()}const Oc=(e,t)=>{t>=i.BROWSE_MAX_SUPPORTED_FILE_COUNT&&i.BROWSE_ON_CYPRESS_ENABLED_VARIANTS.includes(e)&&(i.mountModal(s.React$1.createElement(wc,null)),i.showModal())};class Nc extends s.React$1.Component{constructor(t){super(t),this.updateStarredData=r.noop,this.handlePostTTIExperiments=t=>o.__awaiter(this,void 0,void 0,(function*(){new Promise((function(t,o){e(["./c_sharing_share_modal_util"],t,o)})).then((function(e){return e.actions_adapter_esnext})).then((({ActionsAdapter:e})=>{e.on("onSuccessSharing",this.shareBrowseRefresh),e.on("onSuccessUnsharing",this.unshareBrowseRefresh)}))})),this.handlePreviewAndShareModalsOnLoad=e=>{const t=this.getPathFromProps(),{user:o}=this.props,s=!!this.props.openPreview,n=!!this.props.showShareModal,r=this.props.sharePrefillEmail,d=r?r.split(","):void 0;if(s&&!e){l.Notify.error(a.intl.formatMessage({id:"D+KIIm",defaultMessage:"The file doesn’t exist"}));const{urlPrefix:e}=this.props,o=this.getUrlForFQPath(e,t),s=c.DBHistory.deconstruct_url().qargs;delete s.preview,c.DBHistory.replace_state(o,s)}e?(Ve.asyncOpenPreview({containerId:i.BROWSE_FILE_VIEWER_ELEMENT_ID,files:[e],fileViewOrigin:i.FileViewOriginType.BROWSE,indexOfPreviewFile:0,user:o}),n&&i.waitForTTI().then((()=>{this.mounted&&De.asyncShowPrefilledShareModal({user:o,sharePrefillEmails:d,content:e,setUrl:this.props.setUrl})}))):n&&this.showShareModalForCurrentPath(d)},this.handleComponentTTI=e=>{var t;const o=null!==i.time_to_interactive(),s=(null===(t=this.browseLogger)||void 0===t?void 0:t.ttiLogged)&&"FilesViewController"===e;o||s?this.ajaxRequestWebTimer?(this.ajaxRequestWebTimer.markTimeToInteractive(),delete this.ajaxRequestWebTimer):s||i.markTimeToInteractive(!0):this.browseLogger&&this.browseLogger.componentReady(e)},this.getFileByFilename=e=>this.props.files.find((t=>i.filename(t.fq_path)===e))||null,this.showShareModalForCurrentPath=e=>{const{user:t}=this.props,o=this.getPathFromProps();i.waitForTTI().then((()=>{if(!this.mounted)return;const a=this.props.nsId,i=this.props.nsPath;De.asyncShowPrefilledShareModal({user:t,sharePrefillEmails:e,content:{fqPath:o,isFolder:!0,nsId:a&&i?s.toNumber(a):null,targetNsId:a&&!i?s.toNumber(a):null},setUrl:this.props.setUrl})}))},this.handleFileLocationChange=(e,t)=>{var o;e=`/${s.URI.decode(e)}`,this.ensureFileViewerIsOpenedOrClosedIfNeeded(t);const a=!i.paths_are_equal(this.props.path,e);t.share&&!this.props.showShareModal&&this.showShareModalForCurrentPath();const n="1"===t.d!=!!this.props.shouldShowDeletedFiles;if(!(a||n||t.reload))return;t.reload&&(delete t.reload,this.props.setUrl({path:this.props.path,qargs:t})),this.props.setPath({path:e}),this.props.setLoadingState({loadingState:i.LoadingState.LOADING_FIRST_PAGE,path:e}),this.props.setShouldShowDeletedFiles({shouldShowDeletedFiles:"1"===t.d}),(null!==i.time_to_interactive()||(null===(o=this.browseLogger)||void 0===o?void 0:o.ttiLogged))&&this.ensureTimer("browse_ajax","browse_ajax_nav");const r=this.props.currentSort.sortDirection===i.SortDirection.ASCENDING,l="1"===t.d;this.loadPathApi2({path:e,sortIsAscending:r,includeDeleted:l,hasPathChanged:a})},this.sortType=()=>i.SortIsFilename.includes(this.props.currentSort.sortField)?{".tag":"files_by_name"}:this.props.currentSort.sortField===i.SortField.MODIFIED?{".tag":"files_by_modified"}:{".tag":"files_by_size"},this.shareBrowseRefresh=e=>{const t=e.origin;!e.wasFileFolder||t!==i.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&t!==i.SHARE_ACTION_ORIGIN_TYPE.CREATE_SHARED_FOLDER_MODAL||this.uploadBrowseRefresh()},this.unshareBrowseRefresh=e=>{const{isFolder:t}=e;t&&this.uploadBrowseRefresh()},this.uploadBrowseRefresh=()=>{this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===i.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1})},this.loadPathApi2=({path:e,sortIsAscending:t,includeDeleted:n,hasPathChanged:r})=>o.__awaiter(this,void 0,void 0,(function*(){var o;try{const o=yield i.loadPath2({userId:this.props.user.id,path:e,sortType:this.sortType(),sortIsAscending:t,includeDeleted:n,rootNsId:i.isBackupBrowse()?s.toNumber(this.props.rootNsId):void 0});if(o.items){const e=new Set;for(let t=0;t<o.items.length;t++){const s=o.items[t];s&&s.ext&&e.add(s.ext.slice(1))}const t=[];e.forEach((e=>{t.push(e)})),Oc(_.BROWSE_ON_CYPRESS,o.paginatedTotalNumFiles),i.publishEvent(i.CampaignEvents.PAGE_LOAD,{context:{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable}}),i.listenForBrowseRefreshEvent((()=>{i.emitPageLoaded(yc.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable})}))}this.ajaxRequestWebTimer&&(this.ajaxRequestWebTimer.fetchedDataRequiredForTTI(),this.ajaxRequestWebTimer.end()),this.handleFileLocationChangeSuccess(e,o,r)}catch(t){const s=function(e){let t="";return e&&void 0!==e.status&&("auth_failed"===e.status[".tag"]?t=a.intl.formatMessage({id:"8nB2Fu",defaultMessage:"Not authorized to browse {path}."},{path:e.path}):"rate_limited"===e.status[".tag"]?t=a.intl.formatMessage({id:"2NDCop",defaultMessage:"Too many attempts. Try again later."}):"invalid_path"===e.status[".tag"]?t=a.intl.formatMessage({id:"o19fmC",defaultMessage:"Unsupported path provided {path}."},{path:e.path}):"folder_not_found"===e.status[".tag"]?t=a.intl.formatMessage({id:"VZE6IM",defaultMessage:"The folder ‘{path}’ doesn’t exist."},{path:e.path}):"folder_is_deleted"===e.status[".tag"]&&(t=a.intl.formatMessage({id:"qZpUNY",defaultMessage:"The folder ‘{path}’ is deleted."},{path:e.path}))),t}(t.error);if(s?i.Snackbar.fail(s,"browse"):(F.reportException({err:t,force:!0,severity:O.SEVERITY.CRITICAL,tags:["browse","component:browse"],exc_extra:Object.assign({},t)}),i.Snackbar.fail(a.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}),"browse")),this.props.isInsideBackupFolder){const{backupFolderPath:e}=this.props,s=e?this.props.backupInfoByPath(e):void 0;Ue.logEvent({event:"redirect_to_browse_failure",page_source:Ue.getSource(c.DBHistory.get_uri()),extra:{device_id:null==s?void 0:s.deviceId,reason:(null===(o=t.error)||void 0===o?void 0:o.status)?t.error.status[".tag"]:void 0}})}i.paths_are_equal(e,"/")?this.props.setLoadingState({path:e,loadingState:i.LoadingState.LOAD_ERROR}):this.props.setUrl({path:"/"})}})),this.handleFileLocationChangeSuccess=(e,t,o)=>{if(this.props.setFolderMemberCounts({contentId:String(t.context.currentNSID),userId:this.props.user.id}),!i.getQueryArgs().query)if(o&&this.props.handleFolderOverviewPrefetch(Object.assign(Object.assign({},t.folderOverview),{path:e,componentNamespace:i.BrowseFolderOverviewComponentNamespace})),this.props.setPath({path:e}),this.props.setMountPoints({mountPoints:t.mountPoints}),t.hasMore){this.props.setPathData({path:e,files:[],context:t.context,paginatedTotalNumFiles:t.paginatedTotalNumFiles,currentFolderInfo:t.currentFolderInfo?i.File.fromApiV2Object(t.currentFolderInfo):void 0});u.PaginationManager.create({firstPage:{items:t.items,has_more_items:!0,next_request_voucher:t.nextRequestVoucher},keyName:"sjid",userID:this.props.user.id,newDataAvailableCallback:(t,o)=>{const s=t.areAllItemsReady()?i.LoadingState.LOADED:i.LoadingState.LOADING_REMAINING_PAGES;this.props.appendFiles({path:e,files:o.map((e=>e instanceof i.File?e:"object"==typeof e.type?i.File.fromApiV2Object(e):i.File.fromServerObject(e)))}),this.props.setLoadingState({path:e,loadingState:s}),t.areAllItemsReady()&&t.stopAutoFetching()},fetchNextFn:Et}).startAutoFetching()}else this.props.setPathData({path:e,files:t.items.map((e=>"object"==typeof e.type?i.File.fromApiV2Object(e):i.File.fromServerObject(e))),paginatedTotalNumFiles:t.paginatedTotalNumFiles,context:t.context,currentFolderInfo:t.currentFolderInfo?i.File.fromApiV2Object(t.currentFolderInfo):void 0}),this.props.setLoadingState({loadingState:i.LoadingState.LOADED,path:e})},this.getPathFromProps=()=>this.props.initFqPath||"/",this.handleFileListUpdated=()=>{Cc(this.state.fileViewerController)?this.props.files.isEmpty()?this.state.fileViewerController.close():this.state.fileViewerController.updateFiles(this.props.files.toJS()):this.ensureFileViewerIsOpenedOrClosedIfNeeded(i.getQueryArgs()),i.isBackupBrowse()&&(this.props.currentFolderInfo&&this.props.fetchLastBackupTime(this.props.user,this.props.currentFolderInfo.fq_path,s.toNumber(this.props.rootNsId)),this.props.files.forEach((e=>{e.is_dir&&this.props.fetchLastBackupTime(this.props.user,e.fq_path,s.toNumber(this.props.rootNsId))}))),this.prefetchPreviewData(this.props.files.toArray(),this.props.user)},this.handleOnNavigateToFileOrFolder=(e,t={})=>{const{actionSource:o,href:s,middleClick:a}=t,i=window.pageYOffset;this.completeNavigateToFileOrFolder(e,o,s,a,(()=>{window.scrollTo({top:i})}))},this.completeNavigateToFileOrFolder=(e,t,o,s,a)=>{const{user:n,viewer:r,viewType:l,rightRailCollapsed:c}=this.props,{ns_id:d,sjid:u,file_id:p,fq_path:m,bytes:h,ext:_,request_id:f}=e;i.logOpenRow({uid:n.id,entity_type:e.is_dir?"folder":"file",source:"list_browse",view_type:l,file_nsid:d,file_sjid:u,file_id:p,file_name:i.filename(e.fq_path),file_path:m,file_size:h,file_type:e.type,file_extension:_,request_id:f,action_source:t,rightRailState:c?"collapsed":"opened"}),e.type===i.FileTypes.TEAM_SHARED_FOLDER&&i.TeamsWebActionsLogger.log("clicked_team_folder_web",{team_id:r.team_id}),g.browseNavigateActions.navigateToFileOrFolder({file:e,onFileViewerUnmount:a,skipFileViewerRouting:!0,performSpaRouting:!0,href:o,middleClick:s})},this.fileViewerIsShown=()=>Cc(this.state.fileViewerController),this.prefetchPreviewData=(e,t)=>{this.state.fileViewerController&&this.state.fileViewerController.prewarmPreviewData(e,t)},this.ensureFileViewerIsOpenedOrClosedIfNeeded=e=>{if(e.preview&&!Cc(this.state.fileViewerController)){const t=this.getFileByFilename(e.preview);t&&g.browseNavigateActions.navigateToFileOrFolder({file:t,skipFileViewerRouting:i.shouldUseReactRouter()})}else!e.preview&&Cc(this.state.fileViewerController)&&this.state.fileViewerController.close()},this.state={}}get browseExperiments(){return this.props.browseExperiments}loadStarData(){const e=i.getStoreForStarred();this.updateStarredData=()=>e.dispatch(i.fetchMissingStarredStatuses(this.props.files.toArray().map(i.idTypePairFromStarrableItem))),this.updateStarredData()}loadSharedWithData(e,t){i.getStoreForSharedWith().dispatch(i.browseControllerLoaded({path:e}))}UNSAFE_componentWillMount(){const{urlPrefix:e,user:t}=this.props,o=this.getPathFromProps();this.browseLogger=new d.PageletLogger("browse",["FilesViewController"],!0,{view_type:this.props.viewType.toLowerCase()}),this.loadStarData();const s=new vt({user:t,path:o,fqPathsToSelect:this.props.selectFqPaths},{onPrefetchComplete:(e,t)=>{if(e.isError())this.handlePreviewAndShareModalsOnLoad(null);else{Oc(_.BROWSE_ON_CYPRESS,t.fromPaginatedTotalNumFiles()),this.handlePreviewAndShareModalsOnLoad(e.fromPreviewFileInfo());const s=e.fromCurrentFolderOverview();s?this.props.handleFolderOverviewPrefetch(Object.assign(Object.assign({},s),{path:o,componentNamespace:i.BrowseFolderOverviewComponentNamespace})):this.props.addFolderOverviewLoadedComponent({componentNamespace:i.BrowseFolderOverviewComponentNamespace,component:"draftjs"})}i.markFetchedDataRequiredForTTI()},onPrefetchIncorrectSort:()=>{this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===i.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1})},onPrefetchError:e=>{if(ge.isInsideVault(o)){const e=void 0===i.get_hash()?"":"#"+i.get_hash();i.redirect(Ge.VAULT_URL+e)}else F.reportException({err:e||new Error("Failed to prefetch browse data"),severity:"user-error",exc_extra:{path:o}}),this.props.setUrl({path:""}),this.props.setLoadingState({loadingState:i.LoadingState.LOAD_ERROR,path:o}),this.handleFileLocationChange("",{})},onLoadComplete:()=>{}},{onInitializeEverything:p.browseActions.initializeEverything,onAddFilesAndSetLoadingState:p.browseActions.addFilesAndSetLoadingState});s.isPrefetching()&&s.handlePrefetch(),i.shouldUseReactRouter()||c.DBHistory.add_callback(e,this.handleFileLocationChange,!0)}componentDidMount(){this.mounted=!0,this.props.setFolderMemberCounts({contentId:String(this.props.nsId),userId:this.props.user.id}),Nc.mountFileViewerTarget(),i.waitForTTI().then((()=>o.__awaiter(this,void 0,void 0,(function*(){l.require_css("/static/metaserver/static/css/main_browse_post_tti-vfli38-UK.css");const t=yield new Promise((function(t,o){e(["./c_file_viewer_controller"],t,o)}));if(!this.mounted)return;const{user:o,path:s,files:a}=this.props,n=a.toArray();if(n){const e=new Set;for(let t=0;t<n.length;t++){const o=n[t];o&&o.ext&&e.add(o.ext.slice(1))}const t=[];e.forEach((e=>{t.push(e)})),i.emitPageLoaded(yc.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable}),i.listenForBrowseRefreshEvent((()=>{i.emitPageLoaded(yc.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable})}))}this.loadSharedWithData(s,n),this.setState({fileViewerController:t}),this.prefetchPreviewData(a.toArray(),o)})))),this.props.initBackupStore(this.props.user,this.props.path),this.props.isInsideBackupFolder&&Ue.logEvent({event:"view_backup",page_source:Ue.getSource(c.DBHistory.get_uri()),extra:{url_prefix:this.props.urlPrefix}})}UNSAFE_componentWillUpdate(e,t){e.files.equals(this.props.files)||r.defer(this.handleFileListUpdated)}componentDidUpdate(e){if(e.files!==this.props.files&&this.updateStarredData(),("ON"===_.RECENTS_AND_STARRED_IN_BROWSE||"V1"===_.RECENTS_AND_STARRED_IN_BROWSE)&&e.selectedFilter!==this.props.selectedFilter){const t=this.props.selectedFilter;t!==i.BrowseFilterType.NONE?this.props.setFilteredViewData(t,this.props.path):this.props.path===e.path&&(this.props.setLoadingState({loadingState:i.LoadingState.UPDATING_FILTERED_VIEW,path:this.props.path}),this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===i.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1}))}if(i.shouldUseReactRouter()&&e.location&&this.props.location&&(e.location.pathname!==this.props.location.pathname||e.location.search!==this.props.location.search)){const e=new RegExp(`^${this.props.urlPrefix}/|^${this.props.urlPrefix}|^/`),t=this.props.location.pathname.replace(e,"");this.handleFileLocationChange(t,i.parseQueryString(this.props.location.search))}!e.isInsideBackupFolder&&this.props.isInsideBackupFolder&&(Ue.logEvent({event:"view_backup",page_source:"browse",extra:{url_prefix:this.props.urlPrefix}}),i.redirect(i.backupUrlForFqPath(this.props.initFqPath))),e.browsePostTTIExperiments!==this.props.browsePostTTIExperiments&&this.handlePostTTIExperiments(this.props.browsePostTTIExperiments)}componentWillUnmount(){new Promise((function(t,o){e(["./c_sharing_share_modal_util"],t,o)})).then((function(e){return e.actions_adapter_esnext})).then((({ActionsAdapter:e})=>{e.removeListener("onSuccessSharing",this.shareBrowseRefresh)})),Nc.unmountFileViewerTarget(),this.mounted=!1}getUrlForFQPath(e,t){const{backupFolderPath:o}=this.props;e===i.BACKUP_BROWSE_ROOT&&null!==o&&(t=t.substr(t.indexOf(o)));return e+("/"===t?"":s.URI.encode_parts(t))}ensureTimer(e,t){this.ajaxRequestWebTimer&&this.ajaxRequestWebTimer.getContextName()!==e&&(this.ajaxRequestWebTimer.abort(),i.delete_timer(this.ajaxRequestWebTimer.getContextName()),this.ajaxRequestWebTimer=void 0),this.ajaxRequestWebTimer?this.ajaxRequestWebTimer.restart():(i.delete_timer(e),this.ajaxRequestWebTimer=i.get_timer(e),this.ajaxRequestWebTimer.initialize({requireTTI:!0,url:t}))}render(){const{browseContext:e,browsePostTTIExperiments:t,loadingState:o,paginatedTotalNumFiles:a,path:n,setUrl:r,user:l,viewType:c,browsePostTTIData:d,rightRailCollapsed:u,isInsideBackupFolder:p,backups:g}=this.props,m=s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(Rt,{user:l}),s.React$1.createElement(fc,{onNavigateToFileOrFolder:this.handleOnNavigateToFileOrFolder,context:e,encryptionOptions:this.props.encryptionOptions,handleComponentTTI:this.handleComponentTTI,isFileViewerShown:this.fileViewerIsShown,backups:g,loadingState:o,path:n,totalNumItems:a,user:l,viewType:c,browseExperiments:this.browseExperiments,browsePostTTIExperiments:t,browsePostTTIData:d,rightRailCollapsed:u,basicPlusConfirm:this.props.basicPlusConfirm}),s.React$1.createElement(Fc,{userVersionHistoryLength:this.props.userVersionHistoryLength}));return!p&&_e.isBrowseSuggestionsEnabled(this.browseExperiments.browseContentSuggestionsVariant)?s.React$1.createElement(Ua,{user:l,fetchSuggestedItemsInFolder:i.fetchSuggestedItemsInFolder,source:"browse",trackDismissSuggestedItem:i.trackDismissSuggestedItem,openSuggestedItem:(h=this.handleOnNavigateToFileOrFolder,(e,t,o)=>{if(o){const o=e.displayType===i.EXTERNAL_RESOURCE_TYPE?i.NavigationMethod.UNSAFE_NEW_TAB:i.NavigationMethod.NEW_TAB;i.logAndNavigate(e.url,t,o)}else e.type===i.SuggestItemTypes.PAPER_DOCUMENT?i.logAndNavigate(e.url,t,i.NavigationMethod.REDIRECT):xa.getFileMetadata(La(e.resourceId)).then((o=>{o?t().then((()=>{h(o,{actionSource:i.ActionSourceValue.CONTENT_SUGGESTIONS_SECTION})})):i.logAndNavigate(e.url,t,i.NavigationMethod.REDIRECT)})).catch((o=>{i.logAndNavigate(e.url,t,i.NavigationMethod.REDIRECT)}))}),openSuggestedParent:Ac((e=>{r({path:e})}),l),folderPathString:n,prefetchSuggestedItems:Rc},m):m;var h}}Nc.mountFileViewerTarget=()=>{let e=document.getElementById(i.BROWSE_FILE_VIEWER_ELEMENT_ID);e||(e=document.createElement("div"),e.id=i.BROWSE_FILE_VIEWER_ELEMENT_ID,document.body.insertBefore(e,document.body.children[0]))},Nc.unmountFileViewerTarget=()=>{const e=document.getElementById(i.BROWSE_FILE_VIEWER_ELEMENT_ID);e&&document.body.removeChild(e)},Nc.displayName="BrowseController";const Dc={addFolderOverviewLoadedComponent:k.addLoadedComponent,appendFiles:k.appendFiles,fetchLastBackupTime:i.fetchLastBackupTime,handleFolderOverviewPrefetch:k.handlePrefetch,initBackupStore:i.initBackupStore,setBrowsePostTTIData:k.setBrowsePostTTIData,setBrowsePostTTIExperiments:k.setBrowsePostTTIExperiments,setFolderMemberCounts:k.setFolderMemberCounts,setIsFileViewerShown:k.setIsFileViewerShown,setLoadingState:k.setLoadingState,setMountPoints:k.setMountPoints,setPath:k.setPath,setPathData:k.setPathData,setShouldShowDeletedFiles:k.setShouldShowDeletedFiles,setUrl:k.setUrl,setFilteredViewData:k.setFilteredViewData},Pc=i.connect((e=>{const{context:t,sortedFilesWithFolderSizes:o,path:s,shouldShowDeletedFiles:a,urlPrefix:n,user:r,viewer:l,browsePostTTIExperiments:c,mountPoints:d,sortOrder:u,browsePostTTIData:p,isRightRailCollapsed:g,isSelectedBackupFolder:m,isInsideBackupFolder:h,backupFolderPath:_,isFolderOrganizable:f,getCurrentFolderInfo:E,browseLoadingState:v,selectedFilter:A}=i.Selectors$1,{paginatedTotalNumFiles:S}=k.FolderOverviewSelectors,{selectViewType:R}=i.FilesViewInstanceSelectors;return{files:o(e),paginatedTotalNumFiles:S(e),loadingState:v(e),path:s(e),shouldShowDeletedFiles:a(e),urlPrefix:n(e),user:r(e),viewer:l(e),currentSort:u(e),browsePostTTIExperiments:c(e),browseContext:t(e),mountPoints:d(e),viewType:R(e,{instanceId:i.BROWSE_FILES_VIEW_ID}),browsePostTTIData:p(e),rightRailCollapsed:g(e),isSelectedBackupFolder:m(e),isInsideBackupFolder:h(e),backupFolderPath:_(e),backups:i.backups(e),backupInfoByPath:i.backupInfoByPath(e),isFolderOrganizable:f(e),currentFolderInfo:E(e),selectedFilter:A(e)}}),Dc)(Nc),Lc=e=>{const t=i.useCompatLocation();return s.React$1.createElement(Pc,Object.assign({},e,{location:t}))},xc=({shareLink:e,openPreview:t,initFqPath:o})=>{const a=i.useNavigate(),n=i.useLocation(),r=i.useSelector(i.backupFolderPath),l=i.useSelector(i.urlPrefix),c=o||"/";return s.reactExports.useEffect((()=>{e||t||function(e){const t=i.sanitizeQueryArgs(i.getQueryArgs()),o=String(s.URI.parse(e).setQuery(t));o!==n.pathname+n.search&&a(o,{replace:!0})}(kc(l,c,r))}),[]),null},kc=(e,t,o)=>{e===i.BACKUP_BROWSE_ROOT&&null!==o&&(t=t.substr(t.indexOf(o)));return e+("/"===t?"":s.URI.encode_parts(t))},Bc=()=>F.reportException({err:new Error("failed to load post TTI experiments")}),Uc=({multiLicensingConsultantsSprigSurveyVariant:e})=>{const t=i.useSelector(i.context),o=i.mustGetActiveUser();return s.reactExports.useEffect((()=>{e&&(i.UserSurvey.addAttribute("multiLicensingConsultantsSprigSurveyVariant",e),"OFF"!==e&&t.isInsideSharedFolder&&!o.is_team&&i.getFolderMetadata(String(t.currentNSID),o.id).then((e=>{e.owner_team&&i.UserSurvey.trackEvent("viewing_folder_shared_by_external_team","browse")})))}),[]),null},$c=({variant:e})=>{const t=i.useSelector(i.unsortedFiles),o=s.React$1.useRef(!1);return s.reactExports.useEffect((()=>{if(0!==t.size&&!o.current){const s=t.toArray();Vc(e,s),o.current=!0}}),[t,e]),null},Vc=(t,s)=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const o=i.mustGetActiveUser(),a=i.getQueryArgs().plan_upgraded,n=i.getQueryArgs().analytics_file_id;if(a){i.ProEventsLogger.log("docsend_analytics_add_on_plan_upgrade_success",{src:n?"upgrade_banner":"external_link"});const{showDocsendAnalyticsPlanUpgradedSnackbar:t}=yield new Promise((function(t,o){e(["./c_docsend_analytics_add_on_components_docsend_analytics_plan_upgraded_snackbar"],t,o)}));t(),c.DBHistory.remove_query_param(i.BrowseQueryArg.plan_upgraded)}if(n){const{getDocsendAnalyticsAddOnConfig:r}=yield new Promise((function(t,o){e(["./c_docsend_src_utils"],t,o)})).then((function(e){return e.utils_esnext})),l=r(o,t);if(!l.fileBrowser.deeplinkEnabled)return;const{showDocsendModal:d}=yield new Promise((function(t,o){e(["./c_docsend_analytics_add_on_helpers_modals"],t,o)})),u=Gc(n,s);if(u){i.ProEventsLogger.log("docsend_analytics_add_on_deeplink_success",{src:a?"plan_upgrade":"other"});d({user:o,fileName:i.filename(u.fq_path),fileId:n,filePath:i.parent_dir(u.fq_path),stormcrowVariant:l.variantForLogging,entryPoint:a?"deeplink_plan_upgrade":"deeplink"})}else i.ProEventsLogger.log("docsend_analytics_add_on_deeplink_failure",{error:"FILE_NOT_FOUND"});c.DBHistory.remove_query_param(i.BrowseQueryArg.analytics_file_id)}})),Gc=(e,t)=>t.find((t=>t.file_id===e))||null,Wc=()=>{const t=i.useDispatch(),a=(()=>{const{data:e,error:t,isSuccess:o}=i.useQuery(i.BROWSE_POST_TTI_FETCH_KEY,i.prefetchBrowsePostTTI,{refetchOnReconnect:!1,refetchOnWindowFocus:!1,staleTime:1/0,cacheTime:1/0});return s.reactExports.useEffect((()=>{t&&Bc()}),[t]),s.reactExports.useMemo((()=>{if(!e)return;let t;try{t=JSON.parse(e)}catch(e){return void Bc()}if(!o||t)return t;Bc()}),[e,o])})();return(({maybeRenderTeamAdminModals:t})=>{s.reactExports.useEffect((()=>{if(void 0!==t){const s=s=>o.__awaiter(void 0,void 0,void 0,(function*(){if((!s||!s.didMainCampaignLoad()&&!s.didCampaignForUserEducationLoad())&&t){const{postTTINCCTReminderModal:t}=yield new Promise((function(t,o){e(["./c_ncct_ui_post_tti_ncct_modal"],t,o)}));yield t()}}));return i.promptBufferedEventEmitter.on(i.Events.ON_PROMPT_INITIALIZED,s),()=>{i.promptBufferedEventEmitter.off(i.Events.ON_PROMPT_INITIALIZED,s)}}}),[t])})({maybeRenderTeamAdminModals:a?!!a["maybe-render-team-admin-modals"]:void 0}),s.reactExports.useEffect((()=>{if(a){const e=a["exp-browse-post-tti-experiments"],o=a["exp-uploader-post-tti-experiments"],s=!!a["is-over-free-quota"],n=!!a["has-excluded-ns-ids"],r=a["preferred-editors"],l=a["first-task-props"],c=a["mobile-web-invites"],d=a["family-member-count"],u=a["imm-experiments"],p=a["suggested-items-to-move-info"],g=a["user-has-shared-file-or-folder-info"],m=a["activation-bolt-info"],h=a["is-pro-trial-user"],_=a["trial-onboarding-features-engagement-props"];t(k.setBrowsePostTTIExperiments({browsePostTTIExperiments:e})),t(k.setBrowsePostTTIData({browsePostTTIData:{isOverFreeQuota:s,hasExcludedNsIds:n,uploaderPostTTIExperiments:o,preferredEditors:r,firstTaskProps:l,mobileWebInvites:c,familyMemberCount:d,immExperiments:u,suggestedItemsToMoveInfo:p,userHasSharedFileOrFolderInfo:g,activationBoltInfo:m,isProTrialUser:h,trialOnboardingFeaturesEngagementProps:_}})),e.expShouldShowNcctPaywall&&i.redirect("/ncct-trial-end")}}),[a,t]),s.React$1.createElement(s.React$1.Fragment,null,a&&s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(jc,{firstTaskProps:a["first-task-props"],familyMemberCount:a["family-member-count"]}),s.React$1.createElement(Uc,{multiLicensingConsultantsSprigSurveyVariant:a["exp-browse-post-tti-experiments"].expMultiLicensingConsultantsSprigSurveyVariant}),s.React$1.createElement($c,{variant:a["exp-browse-post-tti-experiments"].expDocsendAnalyticsAddOn})))},jc=({firstTaskProps:t,familyMemberCount:a})=>(s.reactExports.useEffect((()=>{const s=null==t?void 0:t.seen_desktop_tooltip,i=null==t?void 0:t.member_info;s?o.__awaiter(void 0,void 0,void 0,(function*(){const{markClinkTooltipSeenAndHide:t}=yield new Promise((function(t,o){e(["./c_ui_first_task"],t,o)}));t()})):(void 0!==a&&a>1||i&&i.users.length>1)&&o.__awaiter(void 0,void 0,void 0,(function*(){const{showClinkTooltip:t,TooltipType:o}=yield new Promise((function(t,o){e(["./c_ui_first_task"],t,o)}));t(o.Members)}))}),[]),null);const Hc=({path:t,nsId:a,nsPath:n})=>{const r=i.mustGetActiveUser(),l=i.useDispatch();return s.React$1.useEffect((()=>{i.getQueryArgs().share_manage_access&&o.__awaiter(void 0,void 0,void 0,(function*(){const{showShareModal:o}=yield new Promise((function(t,o){e(["./c_sharing_share_modal_util"],t,o)})).then((function(e){return e.share_modal_util_esnext}));o(r,{fqPath:t,isFolder:!0,nsId:a&&n?a:null,targetNsId:a&&!n?a:null},{initialScreen:i.MANAGE_SCREEN,origin:i.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS},(e=>l(k.setUrl(e))),void 0,!0)}))}),[]),null},Yc=e=>{const t=i.getQueryArgs();if(t.scs){c.DBHistory.remove_query_param(i.BrowseQueryArg.show_save_to_dropbox_completion_snackbar);const o=15,n=t.select||i.filename(e),r=a.intl.formatMessage({id:"l43Bez",defaultMessage:"Saved <bold>{name}</bold> to your Dropbox account."},{name:i.Emstring.em_snippet(n,o),bold:e=>s.React$1.createElement("b",null,e)});i.Snackbar.show(s.React$1.createElement(i.Snackbar,{variant:"complete",title:r,closeButtonText:a.intl.formatMessage({id:"0KvMzR",defaultMessage:"Close"}),timeoutDelayMs:5e3}))}else if(t.sls){c.DBHistory.remove_query_param(i.BrowseQueryArg.show_save_to_dropbox_loading_snackbar);const e=a.intl.formatMessage({id:"hxyy+5",defaultMessage:"Saving changes…"});i.Snackbar.show(s.React$1.createElement(i.Snackbar,{variant:"sync",title:e,closeButtonText:a.intl.formatMessage({id:"0KvMzR",defaultMessage:"Close"}),timeoutDelayMs:5e3}))}};var qc=Object.freeze({__proto__:null,bloodHoundInitialize:()=>{const e=i.mustGetActiveUser();qe.BloodhoundContactsV2.getOrCreateForUser(e)},showSnackbarFromCopyToDropboxIfNeeded:Yc,useManageAccessModalIfneeded:Hc});const zc=({raclsOnGGEnabled:t,autoTeamGroupId:a})=>{const n=i.useSelector(i.context),r=i.useSelector((e=>i.selectViewType(e,{instanceId:i.BROWSE_FILES_VIEW_ID}))),l=s.React$1.useRef(!1);return s.reactExports.useEffect((()=>{""!==n.currentFQPath&&(l.current||(!function(t,s,a,n){o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser();if("open_create_folder"===i.getQueryArgs().automations){const{handleCreateNewFolder:r}=yield new Promise((function(t,o){e(["./c_action_bar_file_actions"],t,o)})).then((function(e){return e.browse_global_actions_handlers_esnext}));r(o,t,s,a,"auto_folder_url_param",n,!0,!1),c.DBHistory.remove_query_param(i.BrowseQueryArg.automations)}}))}(n,t,a,r),l.current=!0))}),[n,t,a,r]),null};const Kc=({autoTeamGroupId:t,emailJustVerified:n,emailJustVerifiedAndChanged:r,initFqPath:c,shareLink:d,openPreview:u,sendVerificationEmail:p,shouldShowUnsyncNotification:g,shouldOpenExtensionsEduModal:m,showShareSuccessSnackbar:h,fromSclSyncModal:_,nsId:f,nsPath:E,browseExperiments:v})=>{const A=i.mustGetActiveUser(),S=c||"/";return s.reactExports.useEffect((()=>{o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI(),yield(({emailJustVerified:t,emailJustVerifiedAndChanged:s,sendVerificationEmail:a,user:i})=>o.__awaiter(void 0,void 0,void 0,(function*(){if(!(t||s||a))return;const{EmailVerification:o}=yield new Promise((function(t,o){e(["./c_account_email"],t,o)})).then((function(e){return e.email_esnext}));t?o.getForUID(i.id).show_verified_modal():s?o.getForUID(i.id).show_verified_and_changed_modal():a&&o.getForUID(i.id).show_sent_modal()})))({emailJustVerified:n,emailJustVerifiedAndChanged:r,sendVerificationEmail:p,user:A});const t=m;if(t&&(yield function(t,a){return new Promise((t=>o.__awaiter(this,void 0,void 0,(function*(){const{AppActionsEduModal:o}=yield new Promise((function(t,o){e(["./c_app_actions_education_edu_modal_component"],t,o)}));i.Modal.showInstance(s.React$1.createElement(o,{appName:a})),t()}))))}(A.id,t)),_&&(A.is_cdm_member?function(e){const t=a.intl.formatMessage({id:"7sFPiN",defaultMessage:"Added “{folder_name}” <a>Learn More</a>"},{folder_name:i.Emstring.em_snippet(i.filename(e),i.SNIPPET_SIZES.FILENAME),a:e=>`<a href="/help/business/team-space-overview#acceptfolder">${e}</a>`});l.Notify.success(new l.HTML(t))}(S):function(e){l.Notify.success(a.intl.formatMessage({id:"YYLxxv",defaultMessage:"{file_name} added to your Dropbox."},{file_name:i.filename(e)}))}(S),d&&!u&&A.is_cdm_member&&function(e){const t=i.parent_dir(e);"/"!==t&&l.Notify.success(a.intl.formatMessage({id:"nZ/TMQ",defaultMessage:"Folder is in {path}"},{path:i.Emstring.em_snippet(t,22)}))}(S)),!0===g&&i.Snackbar.show(s.React$1.createElement(i.Snackbar,{variant:"generic",title:a.intl.formatMessage({id:"UgS1Q9",defaultMessage:"Do you also need this on your computer?"}),timeoutDelayMs:1e5,actionButtonText:a.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),closeButtonText:a.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:()=>window.open("/help/business/unsynced-team-folder","_blank"),id:"browse-unsync"})),h){const e=i.filename(S);ze.showInBandShareSuccessSnackbar(e)}Yc(c)}))}),[]),Hc({path:S,nsId:s.toNumber(f),nsPath:E}),zc({autoTeamGroupId:t,raclsOnGGEnabled:null==v?void 0:v.goldenGateRaclsEnabled}),null},Qc=()=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.sharing",componentName:"Sharing"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.file_actions",componentName:"File Actions"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.right_rail",componentName:"Right Rail"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"desktop.unknown",componentName:"Desktop App"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.browse_web",componentName:"Browse"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.search_web",componentName:"Search"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.upload_web",componentName:"Upload"}),s.React$1.createElement(n.RegisterComponentWithBugReporter,{componentId:"web.previews",componentName:"Previews"})),Xc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield i.waitForTTI();const{ConnectedBoltHandler:t}=yield new Promise((function(t,o){e(["./c_browse_bolt_handler"],t,o)}));return{default:t}}))));class Jc extends s.React$1.PureComponent{constructor(e){super(e),i.markApplicationStart(),function(){const e=at("browse/start",{cypress:_.BROWSE_ON_CYPRESS});e.increment(),e.record()}(),this.cleanupCypressStats=ft(),i.getStoreForFilesView(),i.getStoreForFolderExplorer(),Ye.getStoreForUpload(),i.getStoreForFolderOverview(),i.getStore(),this.reduxStore=i.getStoreForBrowse(),i.shouldUseReactRouter()&&this.reduxStore.dispatch(k.handleAppCleanup());const t=i.Viewer.get_viewer(),a=t.get_user_by_id(s.toNumber(e.userId)),n=he.is_supported_mobile_browser()?void 0:i.ViewType.CondensedList;this.reduxStore.dispatch(i.loadViewTypes({user:a,defaultViewType:n})),this.reduxStore.dispatch(i.loadViewTypeColumns({user:a})),this.reduxStore.dispatch(k.setPath({path:e.initFqPath||"/"}));const{nsId:r,rootNsId:l,userId:c,encryptionOptions:d}=e,u=o.__rest(e,["nsId","rootNsId","userId","encryptionOptions"]);this.reduxStore.dispatch(k.appInit({props:u,user:a,viewer:t}))}componentWillUnmount(){this.cleanupCypressStats&&this.cleanupCypressStats()}render(){return s.React$1.createElement(i.Provider,{store:this.reduxStore},s.React$1.createElement(a.Provider,{value:a.intl},s.React$1.createElement(Lc,Object.assign({},this.props)),s.React$1.createElement(Kc,Object.assign({},this.props)),s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement(s.React$1.Fragment,null)},s.React$1.createElement(Xc,null)),s.React$1.createElement(Qc,null)))}}Jc.displayName="BrowseApp";const Zc=({browseAppProps:e})=>(s.reactExports.useEffect((()=>{const e=i.Viewer.get_viewer().get_users().map((e=>e.id));i.UserLocalStorage.clearOtherUsers(e)}),[]),e?s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(Jc,Object.assign({},e)),s.React$1.createElement(xc,{openPreview:e.openPreview,shareLink:e.shareLink,initFqPath:e.initFqPath}),s.React$1.createElement(Wc,null)):null);var ed;!function(e){e[e.APPLE=0]="APPLE",e[e.GOOGLE=1]="GOOGLE"}(ed||(ed={})),h.proto3.util.setEnumType(ed,"educational_modal_edison.MobilePaymentMethod",[{no:0,name:"APPLE"},{no:1,name:"GOOGLE"}]);class td extends h.Message{constructor(e){super(),this.action="",this.mobilePaymentMethod=ed.APPLE,this.teamId=h.protoInt64.zero,this.teamName="",this.trialEndDate="",h.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new td).fromBinary(e,t)}static fromJson(e,t){return(new td).fromJson(e,t)}static fromJsonString(e,t){return(new td).fromJsonString(e,t)}static equals(e,t){return h.proto3.util.equals(td,e,t)}}function od(){return o.__awaiter(this,void 0,void 0,(function*(){const t=yield function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield s.Edison.fetch("educational_modal.EdisonEducationalModalPrefetchService","EdisonEducationalModalPrefetch");return s.unmarshalProto(e,td)}))}(),{action:a,teamId:n,teamName:r,trialEndDate:l,mobilePaymentMethod:c}=t;if(!a)return;yield i.waitForTTI();const[d,u]=yield Promise.all([new Promise((function(t,o){e(["./c_payments_ui_mobile_billing_educational_modal"],t,o)})),new Promise((function(t,o){e(["./c_payments_ui_mobile_billing_modal_util"],t,o)}))]),{MobileBillingEducationalModal:p,MobileBillingEducationalModalActions:g}=d,{MobilePaymentMethod:m}=u,h=new Map([[ed.APPLE,m.APPLE],[ed.GOOGLE,m.GOOGLE]]).get(c),_=p({action:g[a],mobilePaymentMethod:h,teamId:Number(n),teamName:r,trialEndDate:l});_&&i.Modal.showInstance(_)}))}td.runtime=h.proto3,td.typeName="educational_modal_edison.EdisonEducationalModalPrefetchResults",td.fields=h.proto3.util.newFieldList((()=>[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"mobilePaymentMethod",kind:"enum",T:h.proto3.getEnumType(ed)},{no:3,name:"teamId",kind:"scalar",T:3},{no:4,name:"teamName",kind:"scalar",T:9},{no:5,name:"trialEndDate",kind:"scalar",T:9}]));const sd=()=>{i.isClientSideNavigation()&&function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield s.Edison.serviceMethodPrefetch("browse_web.BrowseWebInternal","EdisonBrowseRedirect");return s.unmarshalProto(e,Fe.EdisonRedirectResponse)}))}().then((e=>{e.redirect&&i.redirect(e.redirect.unsafeUrl)}))};var ad,id=(ad=()=>{const e=i.useCompatHref(),{data:t}=i.useQuery(i.queryBrowsePropsKey(),(()=>o.__awaiter(void 0,void 0,void 0,(function*(){return F.reportException({severity:"non-critical",err:Object.assign(Object.assign({},new Error("Cached data unavailable for query keys: "+i.queryBrowsePropsKey().join(","))),{severity:"non-critical"})}),i.queryBrowseProps(e)}))),i.defaultQueryOptions);return s.React$1.useMemo((()=>(sd(),od(),()=>{i.emitPageChanged()})),[]),s.React$1.createElement(Zc,{browseAppProps:t})},i.requireCssWithComponent(ad,["/static/metaserver/static/css/dig-components/index.web-vflGcQt8W.css","/static/metaserver/static/css/main_browse-vflcWY5kO.css","/static/metaserver/static/css/sprites/web_sprites-vflwRzO2P.css","/static/metaserver/static/css/user_education-vflZJ8J4G.css","/static/metaserver/static/css/react/overlay-vflNXoFem.css","/static/metaserver/static/css/search/input-vflz6aT41.css","/static/metaserver/static/css/search/search_bar_react-vfllMS1Lj.css","/static/metaserver/static/css/search/search_results-vflJpdhCg.css","/static/metaserver/static/css/components/title_bubble-vflNHwZeu.css","/static/metaserver/static/css/components/react_locale_selector-vflsUmZSq.css","/static/metaserver/static/css/modal-vflf1hwfZ.css","/static/metaserver/static/css/pagelet-vflQZ-elc.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/browse/browse-vflpkVhOi.css","/static/metaserver/static/css/browse/files_view-vfl0XNRj2.css","/static/metaserver/static/css/scooter/scooter-scoped-vfl0EaHDR.css","/static/metaserver/static/css/legacy_packages/components-vflgioUj1.css","/static/metaserver/static/css/dropbox/app_actions-vflqUS-_W.css"])),nd=Object.freeze({__proto__:null,default:id});t.BrowseFileActionHandlers=wo,t.BrowseInlineFileActionSelectors=fo,t.DATE_LABEL_WIDTH=80,t.DEFAULT_GRAPH_LINE_WIDTH=2,t.EdisonBrowse=id,t.EmptyStateDropTarget=Fa,t.FolderHistory=Kn,t.GRAPH_BOTTOM_PADDING=20,t.GRAPH_HEIGHT=192,t.GRAPH_WIDTH=315,t.GeneralActivationErrorBoundary=ni,t.GoogleDriveIcon=Ra,t.LOADING_PAGE_POLLING_LENGTH_MS=5e3,t.NUM_REWIND_STEPS=3,t.NonQueuedUpdateSimulator=class{initializeIfNeeded(e){void 0===this.initialRequestStart&&(this.initialRequestStart=e)}queuedUpdateComplete(e){if(void 0===this.initialRequestStart)return;const t=Date.now();if(this.requestLatency=t-e,void 0===this.timer)if(void 0!==this.lastNotification&&this.lastNotification>this.initialRequestStart){const e=this.requestLatency-(t-this.lastNotification);this.timer=window.setTimeout((()=>this.onComplete),e)}else this.onComplete()}notificationOccurred(){void 0!==this.initialRequestStart&&(this.lastNotification=Date.now(),void 0!==this.timer&&void 0!==this.requestLatency&&(window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>this.onComplete()),this.requestLatency)))}onComplete(){void 0!==this.initialRequestStart&&pt.recordSimulatedLatency(this.initialRequestStart),this.reset()}reset(){window.clearTimeout(this.timer),this.timer=void 0,this.initialRequestStart=void 0,this.lastNotification=void 0}},t.ONBOARDING_TASK_CAROUSEL_EXCEPTION_TAG=Ol,t.OneDriveIcon=ya,t.OpenInMobileModalController=ea,t.PAP_Select_ContentRightClick=ta,t.REWIND_GRAPH_DAY_STEP=7,t.REWIND_QUERY_PARAM=Pn,t.RewindActivityListPage=rr,t.RewindContinueWidget=tr,t.RewindStepHeader=er,t.SendMobileLinkModal=Xs,t.assertNever=_n,t.beginRewind=function(e){const t={path:""===e.path?"/":e.path,target_ts_microseconds:e.targetTsMicroseconds,type:{".tag":"individual"},logging_restore_id:e.restorationsLoggingId.value,ns_id:e.rootNsId};return(new i.UserApiV2Client).ns("restorations").rpc("rewinds/start",t,{subjectUserId:e.user.id})},t.browseClientMetrics=lt,t.browseHandlerMetrics=pt,t.browse_esnext=nd,t.clickDayGraphDate=e=>{const{user:t,restoreId:o,selectedDateTsInMs:s}=e,a=new Date;a.setHours(0,0,0,0),i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_day_graph_date,extra:{days_ago:String(Math.round(Math.abs((new Date(s).getTime()-a.getTime())/Me.ONE_DAY_MS)))}})},t.clickDayGraphNext=e=>{const{user:t,restoreId:o,selectedDateTsInMs:s}=e,a=new Date;a.setHours(0,0,0,0),i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_day_graph_next,extra:{days_ago:String(Math.round(Math.abs((new Date(s).getTime()-a.getTime())/Me.ONE_DAY_MS)))}})},t.clickHelp=e=>{const{user:t,restoreId:o,helpStep:s}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_help,extra:{help_step:s}})},t.clickNUXHelp=e=>{const{user:o,restoreId:s}=e;i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.click_help,extra:{help_step:t.DeloreanPage.nux}})},t.clickNUXNext=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_nux_next})},t.clickOnActivityList=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:"user clicked folder history event, office only"})},t.clickPreviewBack=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_preview_back})},t.clickPreviewCancel=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_preview_cancel})},t.clickPreviewHelp=e=>{const{user:o,restoreId:s}=e;i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.click_help,extra:{help_step:t.DeloreanPage.preview}})},t.clickPreviewId=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_preview_rb})},t.clickUpsell=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.click_upsell})},t.clickUpsellHelp=e=>{const{user:o,restoreId:s}=e;i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.click_help,extra:{help_step:t.DeloreanPage.upsell}})},t.closeActionButtonAriaLabel=pi,t.columnHeadingTextMoreWays=ci,t.columnHeadingTextMoreYouCanDo=li,t.columnHeadingTextOtherThings=ri,t.completeTask=function(e,t,o){let s=null;const a=e.map((e=>s||e.type[".tag"]!==o?e:(s=Object.assign(Object.assign({},e),{is_completed:!0}),s)));s&&(t(a),i.OALogger.logToTeamsWeb(i.OnboardingChecklistEvents.ONBOARDING_CHECKLIST_ITEM_COMPLETED,{item:o}),W.updateTask(s))},t.dismissNUXAction=function(){return e=>o.__awaiter(this,void 0,void 0,(function*(){e({type:t.DeloreanActionType.dismissNUX}),e({type:t.DeloreanActionType.changeRewindPageToGraphPage})}))},t.download=e=>o.__awaiter(void 0,void 0,void 0,(function*(){const t=document.createElement("a");let o=void 0!==t.download;try{t.href=yield Le.addHeaderRedirectToken(e)}catch(s){t.href=e,o=!1,F.reportException({err:s,force:!0,severity:O.SEVERITY.NONCRITICAL,tags:["js:header-redirect-token","team-activation",Ol]})}t.target=o?"_self":"_blank",setTimeout((()=>{t.click()}),1)})),t.exitDrawer=e=>{const{reason:o,activePage:s,allPageData:a,restoreId:n,user:r}=e;let l;s===t.RewindFlowPage.NUXPage?l=t.DeloreanPage.nux:s===t.RewindFlowPage.graphPage?l=t.DeloreanPage.day_graph:s===t.RewindFlowPage.activityListPage?l=t.DeloreanPage.events:s===t.RewindFlowPage.confirmationPage?l=t.DeloreanPage.preview:s===t.RewindFlowPage.startedPage?a.startedPage.rewindState===t.RewindState.InProgress?l=t.DeloreanPage.progress:a.startedPage.rewindState===t.RewindState.Done?l=t.DeloreanPage.completion:(l=t.DeloreanPage.error_1,a.startedPage.rewindState):l=s===t.RewindFlowPage.notVisible?t.DeloreanPage.error_2:s===t.RewindFlowPage.upsellPage?t.DeloreanPage.upsell:t.DeloreanPage.error_1,i.RestorationStepsLogger.log_step({userId:r.id,restoreId:n,step:or.exit_drawer,extra:{exit_step:l,exit_reason:o}})},t.experimentSelector=Mo,t.fetchEventCountsAction=function(e){return(s,a)=>o.__awaiter(this,void 0,void 0,(function*(){const{startDaysBack:a,endDaysBack:n,user:r,fqpath:l,graphPositionChange:c,rootNsId:d}=e,u=new Date,p=new Date;let g;p.setDate(p.getDate()-a-1),p.setHours(0,0,0,0),u.setDate(u.getDate()+1-n),u.setHours(0,0,0,0),"none"!==c&&s({type:t.DeloreanActionType.setLoadingGraphWeek,graphPositionChange:c});try{g=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const{startDate:t,endDate:o}=e;let s;const a=Math.floor(t.getTime()/1e3),n=Math.floor(o.getTime()/1e3);if(a>n)throw new Error("startTs must come before endTs.");if("hourly"===e.aggregation)s={".tag":"hourly"};else{if("daily"!==e.aggregation)return e.aggregation;s={".tag":"daily"}}try{return yield(new i.UserApiV2Client).ns("chronicle").rpc("get_event_counts",{path:e.fqpath,start_ts:a,end_ts:n,aggregation:s,version:Dn,ns_id:e.rootNsId},{subjectUserId:e.user.id})}catch(e){throw Qn(e),e}}))}({user:r,fqpath:l,startDate:p,endDate:u,aggregation:"daily",rootNsId:d})}catch(e){const o=In({err:e,isForRewindFlow:!0});return void s({type:t.DeloreanActionType.setRewindEventCountsError,errorString:o})}const m=[],h=new Date;for(const{count:e,start_ts:t,outside_history_cutoff:o}of g.counts){const s=1e3*t,a=new Date(s),i=Tn(a);a>h||m.push({dateString:i,count:e,dateTsInMs:s,outsideHistoryCutoff:o})}if(s({type:t.DeloreanActionType.loadEventCounts,eventCounts:m,namespaceCount:g.namespace_count||0,changedNamespaceCount:g.changed_namespace_count||0}),"forward"===c){let e=7;const o=bn(new Date),a=yn(m,(e=>bn(new Date(e.dateTsInMs))>=o));void 0!==a&&(e=Math.max(a-1,0)),s({type:t.DeloreanActionType.setGraphRangeForward,length:e})}else if("backward"===c){const e=function(e,t){for(let o=e.length-1;o>=0;o--)if(t(e[o]))return o}(m,(e=>e.outsideHistoryCutoff));let o=7;void 0!==e&&(o=m.length-e),s({type:t.DeloreanActionType.setGraphRangeBack,length:o})}s({type:t.DeloreanActionType.setGraphLoadFinished})}))},t.fetchEventsAction=Xn,t.formatWithShortDateName=Tn,t.getActivePage=e=>tn(e).activePage,t.getAllLoggingCallbacksForSuggestedWorkflows=oa,t.getAllPageData=e=>tn(e).pageData,t.getBrowseInlineOverflowMenuActions=mo,t.getBrowseInlineScenarioActions=go,t.getDeloreanStore=gr,t.getEvents=on,t.getFQPath=e=>tn(e).fqpath,t.getFirstShareableFile=function(){const e=i.getStoreForBrowse().getState(),t=i.sortedFiles(e),o=i.context(e);return t.find((e=>{var t,s,a;return!(e.isDeleted||e.is_unmounted||(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_ns_partition)||(null===(s=e.per_node_metadata)||void 0===s?void 0:s.suppress_shared_link)||(null===(a=e.per_node_metadata)||void 0===a?void 0:a.link_node)||[i.FileTypes.VAULT_FOLDER,i.FileTypes.TEAM_MEMBER_FOLDER,i.FileTypes.SANDBOX].includes(e.type)||e instanceof i.FileSharedWithMe||o.isInsideVaultFolder)}))},t.getFolderDisplayName=e=>tn(e).folderDisplayName,t.getHasDismissedNUX=e=>tn(e).hasDismissedNUX,t.getIsInitialLoad=e=>tn(e).isInitialLoad,t.getRewindStatus=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t={id:e.id};return yield(new i.UserApiV2Client).ns("restorations").rpc("rewinds/status",t,{subjectUserId:e.user.id})}))},t.initializeDeloreanAction=Jn,t.loadCompletionFailure=e=>{const{user:t,restoreId:o,startTs:s}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.load_completion,extra:{time_to_completion:String(Date.now()-s),success:String(!1)}})},t.loadCompletionSuccess=e=>{const{user:t,restoreId:o,startTs:s}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.load_completion,extra:{time_to_completion:String(Date.now()-s),success:String(!0)}})},t.loadConfirmationPage=e=>{const{eventCounts:t,graphPage:o,user:s,restoreId:a,eventToRewindTo:n}=e,r=new Date;r.setHours(0,0,0,0),r.setDate(r.getDate()+1);const l=new Date(n.timestamp);l.setHours(0,0,0,0);const c=Math.abs((r.getTime()-l.getTime())/Me.ONE_DAY_MS),d=t.slice().reverse().slice(0,c).reverse().reduce(((e,t)=>e+t.count),0);let u;"loaded"===o.contents.type&&(u=o.contents.changedNamespaceCount),i.RestorationStepsLogger.log_step({userId:s.id,restoreId:a,step:or.load_preview,extra:{tti:String(0),rb_time_interval:String(Date.now()-n.timestamp),sfj_count:String(d),num_ns_included:String(u)}})},t.loadDayGraph=e=>{const{errorString:t,user:o,restoreId:s,startedLoadingTimestamp:a,namespaceCount:n}=e,r={tti:String(Date.now()-a),num_ns_contained:String(n)};t&&(r.error=t),i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.load_day_graph,extra:r})},t.loadNUX=e=>{const{browseContext:t,user:o,restoreId:s,clickBrowseButtonTimestampMs:a,fromDesktopClient:n}=e,r=ir(t),l=he.get_browser_info(),c=l.browser+" "+l.version;i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.load_nux,extra:{ns_id:String(t.currentNSID),tti:String(a?(new Date).getTime()-a:"?"),path_hash:i.sjclExports.codec.hex.fromBits(i.sjclExports.hash.sha256.hash(t.currentFQPath)),path_nested_levels:String(i.normalize(t.currentFQPath).split("/").length),location_type:r,browser:c,from_desktop_client:String(n),referrer:document.referrer}})},t.loadProgress=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:or.load_progress,extra:{tti:String(0)}})},t.loadUpsell=e=>{const{browseContext:t,user:o,restoreId:s,clickBrowseButtonTimestampMs:a,fromDesktopClient:n}=e,r=ir(t),l=he.get_browser_info(),c=l.browser+" "+l.version;i.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:or.load_upsell,extra:{ns_id:String(t.currentNSID),tti:String((new Date).getTime()-a),path_hash:i.sjclExports.codec.hex.fromBits(i.sjclExports.hash.sha256.hash(t.currentFQPath)),path_nested_levels:String(i.normalize(t.currentFQPath).split("/").length),location_type:r,from_desktop_client:String(n),referrer:document.referrer,browser:c}})},t.logContinueClick=(e,t=!1,o=!1)=>{i.logEvent({class:"onboard",action:"select",object:"onboarding_tasks_modal_continue_button",properties:{onboardingTasksModalStep:Cl(e.toString()),isCompleted:t,isRequired:o}})},t.logShown=e=>{i.logEvent({class:"onboard",action:"shown",object:"onboarding_tasks_modal",properties:{onboardingTasksModalStep:Cl(e.toString())}})},t.logSkipClick=e=>{i.logEvent({class:"onboard",action:"select",object:"onboarding_tasks_modal_skip_button",properties:{onboardingTasksModalStep:Cl(e.toString())}})},t.messages=gi,t.noop=wn,t.onContactSupport=Fn,t.openActivityList=e=>{const{user:t,restoreId:o}=e;i.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:"user opened timeline, office only"})},t.overQuotaDataSelector=bo,t.rowHeadingText=di,t.rowHeadingTextSharingMadeEasy=ui,t.showMoreAction=Zn,t.sortTasks=Il,t.trackSeenOnboardingTaskCarousel=e=>o.__awaiter(void 0,void 0,void 0,(function*(){(new i.UserApiV2Client).ns("growth").rpc("track_user_action",{project:"acc",action:Nl},{subjectUserId:e})})),t.triggerCreateFolder=function(){const e=i.getStoreForBrowse().getState(),t=i.user$1(e),o=i.context(e),{goldenGateRaclsEnabled:s}=i.experiments(e),a=i.autoTeamGroupId(e),n=i.ActionSourceValue.ONBOARDING_CHECKLIST;y.handleCreateNewFolder(t,o,s,a,n)},t.triggerRedirectToMemberFolder=e=>{const t=(()=>{const e=i.getStoreForBrowse().getState(),t=i.user$1(e).cdm_tmf_path;return i.unsortedFiles(e).get(t)})();t?(g.browseNavigateActions.navigateToFileOrFolder({file:t}),"/home"===i.get_uri().getPath()?(e(),Dl("User was not redirected to TMF (team member folder) and could not upload a file to TMF.")):Pl()):(e(),Dl("The path to member folder was undefined, so user was not redirected to TMF (team member folder) and could not upload a file to TMF."))},t.triggerRedirectToTmf=function(){const e=function(){const e=i.getStoreForBrowse().getState(),t=i.user$1(e).cdm_tmf_path;return i.unsortedFiles(e).get(t)}();e&&g.browseNavigateActions.navigateToFileOrFolder({file:e})},t.triggerUpload=function(t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.getStoreForBrowse().getState(),n=s?i.user$1(o).cdm_tmf_path:i.context(o).currentFQPath;if(I.FileUploaderController.setPath(n),!t&&a){const{ActionsAdapter:t}=yield new Promise((function(t,o){e(["./c_file_uploader_actions_adapter"],t,o)}));t.on("uploadComplete",(({filesAdded:e})=>{if(e&&(null==e?void 0:e.length)>0){const t=e[e.length-1],o=i.joinPathWithFileName({fqPath:t.path,fileName:t.name});setTimeout((()=>Ml(o)),Pe.MODAL_OPEN_DELAY)}}))}I.FileUploaderController.handleUploadButtonClick({folderUpload:t,source:i.ActionSourceValue.ONBOARDING_CHECKLIST,actionElement:I.UploadElement.ACTION_BAR,actionScreen:"continuous_onboarding"})}))},t.triggerUpload$1=Pl}));
//# sourceMappingURL=c_browse.js-vflm-ns94.map

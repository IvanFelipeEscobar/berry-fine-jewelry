define(["exports","./e_ui_page_files_router","./e_edison"],(function(e,t,r){"use strict";var o="dig-Typeahead-row--interactive",a=[`.${o}[role="option"]`,`.${o}[role="menuitemcheckbox"]`,".dig-Typeahead-results--show-more"],s={value:void 0,setSelected:()=>!1,setFocused:()=>!1,closeMenu:()=>!1,isPortaled:!0,menuRows:t.createMenuRows(),containerId:"",setIsTypeaheadDropdownVisible:()=>{},shouldOmitWrapperOverlay:!1,setShouldOmitWrapperOverlay:()=>{}},n=r.reactExports.createContext(s),i=r.reactExports.createContext({}),c=r.reactExports.createContext({}),l=({children:e,isPortaled:o,closeOnSelection:s=!0,inlineProps:i,openMenuOnFocus:c=!0,containerId:l,hasMaxHeight:u=!1,onSelection:p,onBlur:d,onToggle:m,shouldHighlightFirstRow:x=!1,omitOverlay:E=!1,...h})=>{const g=r.reactExports.useRef(null),[y,v]=r.reactExports.useState(!1),[w,f]=r.reactExports.useState(!1),T=r.reactExports.useRef(null),R=r.reactExports.useRef(null),C=t.useUniqueId({prefix:"dig-Typeahead",idOverride:l}),[b,M]=r.reactExports.useState(E),N=r.reactExports.useCallback((e=>{w!==e&&f(e)}),[w]),S=r.reactExports.useCallback(((e,r)=>{p&&p(e,r),s&&(R&&R.current&&R.current(void 0),g&&t.returnFocus(g))}),[s,p,R]),{isOpen:F,openMenu:I,closeMenu:O,toggleMenu:P,value:k,setSelected:D,setFocused:B,getRootProps:H,getTriggerProps:K,getContentProps:A,menuRows:W,isFocusing:z}=t.useMenu({triggerRef:g,contentRef:T,onSelection:S,onToggle:m,closeOnSelection:s,shouldFocusDisabledRows:!0,interactiveRowSelectors:a,allowLetterNavigation:!1,focusMenuRowTriggerKey:"ArrowDown",allowSpaceBarToOpenMenu:!1,focusNextItemImmediately:!1,shouldHighlightFirstRow:x});R.current=B;const L=r.reactExports.useCallback((()=>{v(!1),document.removeEventListener("mouseup",L)}),[]);r.reactExports.useEffect((()=>(y&&document.addEventListener("mouseup",L),()=>document.removeEventListener("mouseup",L))),[y,L]);const U={getContentProps:e=>({open:Boolean(F),triggerRef:g,...A({tabIndex:void 0,...e}),role:"listbox"}),getTriggerProps:e=>({...K({...e,onKeyDown:t=>{if(i){const{customOpenKey:e,onCustomOpenKeyTrigger:r,customCloseKey:o}=i;t.key===e.key?(I({autoFocus:!1}),r&&r(t)):o&&t.key===o.key&&O({autoFocus:!1})}e&&e.onKeyDown&&e.onKeyDown(t)}}),role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-controls":C,onChange:t=>{i||I({autoFocus:!1}),e&&e.onChange&&e.onChange(t)},onMouseDown:t=>{e&&e.onMouseDown&&e.onMouseDown(t),v(!0)},onClick:e?e.onClick:void 0,onKeyUp:e?e.onKeyUp:void 0,onFocus:t=>{c&&I({autoFocus:!1}),B(void 0),e&&e.onFocus&&e.onFocus(t)}}),openMenu:I,closeMenu:O,toggleMenu:P,triggerRef:g},_=r.reactExports.useCallback((e=>{k||z||O({autoFocus:!1}),d&&d(e)}),[k,z,O,d]),V={isPortaled:o,contentRef:T,value:k,setSelected:D,setFocused:B,closeMenu:O,inlineProps:i,menuRows:W,containerId:C,hasMaxHeight:u,setIsTypeaheadDropdownVisible:N,shouldHighlightFirstRow:x,shouldOmitWrapperOverlay:b,setShouldOmitWrapperOverlay:M},$=r.reactExports.useCallback((()=>{O({autoFocus:!1})}),[O]),q=i?e&&e(U):r.reactExports.createElement(t.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:$,shouldPropagateMouseEvents:!0,isClickThroughPortaled:o,isActive:Boolean(F)&&!y&&w},e&&e(U));return r.reactExports.createElement(n.Provider,{value:V},r.reactExports.createElement("div",{className:"dig-Typeahead",...H({...h,onBlur:_})},q))};l.displayName="Wrapper";var u=({className:e,children:o,...a})=>{const s=t.cx("dig-Typeahead-row-accessory",e);return r.reactExports.createElement("div",{className:s,...a},o)};u.displayName="RowAccessory";var p=({className:e,children:o,...a})=>{const s=t.cx("dig-Typeahead-row-content",e);return r.reactExports.createElement("div",{className:s,...a},o)};p.displayName="RowContent";var d=({className:e,children:o,...a})=>{const s=t.cx("dig-Typeahead-row-subtitle",e);return r.reactExports.createElement("div",{className:s,...a},o)};d.displayName="RowSubtitle";var m=({className:e,children:o,...a})=>{const s=t.cx("dig-Typeahead-row-title",e);return r.reactExports.createElement("div",{className:s,...a},o)};m.displayName="RowTitle";var x=({id:e,title:t,subTitle:o,sectionTitle:a})=>r.reactExports.createElement("div",{className:"dig-Typeahead-accessible-text",id:e},t," ",o,a&&`, ${a}`),E=r.reactExports.forwardRef((({tagName:e="li",role:o="option",disabled:a=!1,interactive:s=!0,className:l,withLeftAccessory:E,withRightAccessory:h,withSubtitle:g,withTitle:y,onFocus:v,onMouseDown:w,value:f,tabIndex:T=-1,children:R,...C},b)=>{const M=r.reactExports.useRef(null),{menuRows:N,setSelected:S,setFocused:F,shouldHighlightFirstRow:I}=r.reactExports.useContext(n),{resultIndex:O}=r.reactExports.useContext(c),{rowIndex:P,focusIndex:k,sectionTitle:D}=r.reactExports.useContext(i),B=100*(O||0)+(P||0),H=t.useUniqueId({prefix:""}),{getItemProps:K}=t.useMenuItem({interactive:s,disabled:a,ref:M,role:o,index:B,itemValue:f},N),[A,W]=r.reactExports.useState(!1),[z,L]=r.reactExports.useState(!1);r.reactExports.useEffect((()=>{t.isRowFirst(N,B)&&L(!0),z&&t.areRowsFocused(N)?W(!0):W(!1)}),[N,B,P,z]),r.reactExports.useEffect((()=>{void 0!==k&&k===P&&setTimeout((()=>{M.current&&M.current.focus()}),0)}),[k,P]);const U=t.cx("dig-Typeahead-row",{"dig-Typeahead-row--disabled":a,"dig-Typeahead-row--interactive":s},l),_=t.cx(U,{"dig-Typeahead-row--highlight":I},l);r.reactExports.useImperativeHandle(b,(()=>({getBoundingClientRect:()=>{if(M.current)return M.current.getBoundingClientRect()}})));return r.reactExports.createElement(e,{onMouseDown:e=>{e.preventDefault(),S(f,e),F(void 0),w&&w(e)},onFocus:e=>{F(f,P),v&&v(e)},className:z&&!A?_:U,ref:M,...K({...C})},R||r.reactExports.createElement(r.reactExports.Fragment,null,E&&r.reactExports.createElement(u,null,E),r.reactExports.createElement(p,{"aria-labelledby":H},r.reactExports.createElement(m,{"aria-hidden":"true"},y),g&&r.reactExports.createElement(d,{"aria-hidden":"true"},g)),r.reactExports.createElement(x,{id:H,title:y,subTitle:g,sectionTitle:D}),h&&r.reactExports.createElement(u,null,h)))}));E.displayName="Row";var h=({children:e})=>r.reactExports.createElement("div",{className:"dig-Typeahead-prompt"},e);h.displayName="Prompt";var g=({open:e,triggerRef:o,emptyPrompt:a,isEmptyQuery:s=!1,loading:i,children:l,auto:u=!0,positioningStrategy:p="absolute",placement:d="bottom-start",omitOverlay:m=!1,...x})=>{const{menuRows:E,closeMenu:g,contentRef:y,isPortaled:v,containerId:w,inlineProps:f,hasMaxHeight:T,shouldOmitWrapperOverlay:R,setShouldOmitWrapperOverlay:C,setIsTypeaheadDropdownVisible:b}=r.reactExports.useContext(n),M=r.reactExports.useCallback((()=>{g({autoFocus:!1})}),[g]),{styles:N}=t.useMaxHeight({hasMaxHeight:T,contentRef:y}),S=null!=a;if(r.reactExports.useEffect((()=>{let e=!0;i||s&&S||0!==E.items.size||(e=!1),b(e)}),[i,S,s,E.items.size,b]),r.reactExports.useEffect((()=>{m&&C(!0)}),[m,C]),!e||!l)return null;let F,I={};if(i?F=r.reactExports.createElement(h,null,r.reactExports.createElement(t.Spinner,null)):s&&S?F=a:0===E.items.size?(F=l,I={display:"none"}):F=r.reactExports.Children.map(l,((e,t)=>r.reactExports.createElement(c.Provider,{value:{resultIndex:t}},e))),R)return r.reactExports.createElement(r.reactExports.Fragment,null,F);const O=(e=>{switch(e){case"top":case"top-start":case"top-end":default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(d),P=r.reactExports.createElement(t.Motion,{transitionIn:{transitions:[{property:O,value:0},{property:"opacity",value:1}],easing:"enter",duration:125},transitionOut:{transitions:[{property:"opacity",value:0}],easing:"leave",duration:125},style:{opacity:0},in:e,mountOnEnter:!0,unmountOnExit:!0},(({state:a,style:s})=>(e||"exited"!==a)&&r.reactExports.createElement(t.Overlay,{anchorRef:o,auto:u,isPortaled:v,placement:d,positioningStrategy:p,offsetDistance:4,setWidthSameAsAnchor:!f},r.reactExports.createElement("ul",{className:"dig-Typeahead-container",ref:y,id:w,style:I,...x},r.reactExports.createElement("div",{className:"dig-Typeahead-container--canvas",style:{...s,...N}},F)))));return f?r.reactExports.createElement(t.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:M,shouldPropagateMouseEvents:!1,isClickThroughPortaled:v,isActive:Boolean(e)},P):P};g.displayName="Container";var y=e=>{const{placeholderText:o}=e;return r.reactExports.createElement(h,null,r.reactExports.createElement(t.UIIcon,{size:"large",src:t.SearchLine}),r.reactExports.createElement(t.Text,{color:"faint"},o))};y.displayName="EmptyPrompt";var v=({onShowMoreClick:e,showMoreButtonText:o="Show more"})=>{const a=r.reactExports.useRef(null),{menuRows:s,setFocused:l}=r.reactExports.useContext(n),{resultIndex:u}=r.reactExports.useContext(c),{rowIndex:p}=r.reactExports.useContext(i),d=100*(u||0)+(p||0),{getItemProps:m}=t.useMenuItem({interactive:!0,disabled:!0,ref:a,role:"option",index:d},s),x=t=>{t.stopPropagation(),t.preventDefault(),e()};return r.reactExports.createElement(t.Button$1,{className:"dig-Typeahead-results--show-more",variant:"transparent",ref:a,type:"button",onClick:x,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.stopPropagation(),t.preventDefault(),e())},onMouseDown:x,onFocus:()=>{l(void 0)},...m(),disabled:!1,"aria-disabled":!1},o)};v.displayName="ShowMore";var w=[["medium","standard"]];function f({results:e,title:o,renderRow:a,initialResults:s=4,maxResults:c=8,showMoreButtonText:l,size:u="medium"}){const{setFocused:p}=r.reactExports.useContext(n),d=(e=>{const t=w.find((([t,r])=>e===r));return void 0!==t?t[0]:e})(u),[m,x]=r.reactExports.useState(Math.min(e.length,s)),[E,h]=r.reactExports.useState();if(r.reactExports.useEffect((()=>{x(Math.min(e.length,s))}),[e,s]),!e||0===e.length)return null;const g=t.cx("dig-Typeahead-results",{"dig-Typeahead-results--standard":"medium"===d,"dig-Typeahead-results--large":"large"===d});return r.reactExports.createElement("div",{className:g},o?r.reactExports.createElement(t.Text,{className:"dig-Typeahead-results--title",color:"faint",isBold:!0,size:"small","aria-hidden":"true"},o):r.reactExports.createElement("div",{className:"dig-Typeahead-results--title-spacer",role:"presentation"}),e.slice(0,m).map(((e,t)=>r.reactExports.createElement(i.Provider,{key:t,value:{rowIndex:t,focusIndex:E,sectionTitle:o}},a(e)))),m<e.length&&m!==c&&r.reactExports.createElement(i.Provider,{value:{rowIndex:m+100}},r.reactExports.createElement(v,{showMoreButtonText:l,onShowMoreClick:()=>{m<e.length&&(p(e[m]),h(m),x(Math.min(e.length,c)))}})))}f.displayName="Results";var T={Row:E,RowAccessory:u,RowContent:p,RowSubtitle:d,RowTitle:m,Wrapper:l,Container:g,Prompt:h,EmptyPrompt:y,Results:f};e.Typeahead=T}));
//# sourceMappingURL=c_typeahead_index.js-vflgy6CJX.map

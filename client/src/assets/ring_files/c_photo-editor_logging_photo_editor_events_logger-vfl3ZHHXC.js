define(["exports","./e_ui_page_files_router","./c_src_preview-photo-editor_types","./c_src_sink_index","./e_core_exception","./c_apex-metrics_src_types"],(function(e,t,o,r,i,a){"use strict";function n(e){return{class:"image_edit",action:"select",object:"save_image_copy",properties:e}}function c(e){return{class:"image_edit",action:"select",object:"replace_original_image",properties:e}}const s=["custom","ratios","facebook","instagram","free_form","popular_ratios"];function l(e){return s.find((t=>t===(null==e?void 0:e.toLowerCase())))}const d=["brightness","contrast","saturation","highlight","shadow","temperature","exposure"];function g(e){return d.find((t=>t===(null==e?void 0:e.toLowerCase())))}var _,E;e.ImageEditorEvent=void 0,(_=e.ImageEditorEvent||(e.ImageEditorEvent={})).selectEdit="select_edit",_.selectRotate="select_rotate",_.selectCrop="select_crop",_.selectSaveCrop="select_save_crop",_.selectCropOption="select_crop_option",_.selectFlip="select_flip",_.selectZoomIn="select_zoom_in",_.selectZoomActualSize="select_zoom_actual_size",_.selectZoomOut="select_zoom_out",_.selectUndo="select_undo",_.selectRedo="select_redo",_.selectAdjust="select_adjust",_.changeAdjustValue="change_adjust_value",_.selectDone="select_done",_.selectSaveACopy="select_save_a_copy",_.selectSaveFromSaveACopy="select_save_from_save_a_copy",_.selectReplaceOriginal="select_replace_original",_.selectSaveFromReplaceOriginal="select_save_from_replace_original",_.engImageEditError="eng_image_edit_error",function(e){e.preview="preview",e.editingToolbar="editing_toolbar",e.leftBlade="left_blade",e.rightBlade="right_blade",e.exitOptions="exit_options",e.doneMenu="done_menu",e.saveACopyModal="save_a_copy_modal",e.replaceOriginalModal="replace_original_modal"}(E||(E={}));const m={[e.ImageEditorEvent.selectEdit]:["loadingTime","entryPoint"],[e.ImageEditorEvent.selectSaveCrop]:["cropHeight","cropWidth"],[e.ImageEditorEvent.selectCropOption]:["cropOption"],[e.ImageEditorEvent.changeAdjustValue]:["adjustValue","adjustType"],[e.ImageEditorEvent.selectSaveFromSaveACopy]:["loadingTime"],[e.ImageEditorEvent.selectSaveFromReplaceOriginal]:["loadingTime"]};const p={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"};function u(r,a,s,d,_){const u={};if(s&&function(e){return e in m}(r))for(const e of m[r]){const t=s[e];"string"==typeof t&&(u[e]=t)}if(function(r,i){let a;switch(r){case e.ImageEditorEvent.selectEdit:a=i,t.logEvent({class:"image_edit",action:"select",object:"image_edit",properties:{actionSurface:E.preview,loadingTime:parseInt((null==a?void 0:a.loadingTime)||"",10),entryPoint:(null==a?void 0:a.entryPoint)||""}});break;case e.ImageEditorEvent.selectRotate:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"rotate_action",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectCrop:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"crop_action",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectSaveCrop:a=i,t.logEvent(function(e){return{class:"image_edit",action:"select",object:"save_crop",properties:e}}({actionSurface:E.rightBlade,cropHeight:parseInt((null==a?void 0:a.cropHeight)||"",10),cropWidth:parseInt((null==a?void 0:a.cropWidth)||"",10)}));break;case e.ImageEditorEvent.selectCropOption:a=i,t.logEvent(function(e){return{class:"image_edit",action:"select",object:"crop_option",properties:e}}({actionSurface:E.rightBlade,cropOption:l(a.cropOption)}));break;case e.ImageEditorEvent.selectFlip:t.logEvent(o.PAP_Select_Flip({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectZoomIn:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"zoom_in",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectZoomActualSize:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"zoom_actual_size",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectZoomOut:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"zoom_out",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectUndo:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"undo",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectRedo:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"redo",properties:e}}({actionSurface:E.editingToolbar}));break;case e.ImageEditorEvent.selectAdjust:t.logEvent(o.PAP_Select_Adjust({actionSurface:E.leftBlade}));break;case e.ImageEditorEvent.changeAdjustValue:a=i,t.logEvent(function(e){return{class:"image_edit",action:"change",object:"adjust_value",properties:e}}({actionSurface:E.leftBlade,adjustType:g(a.adjustType),adjustValue:parseInt((null==a?void 0:a.adjustValue)||"",10)}));break;case e.ImageEditorEvent.selectDone:t.logEvent(function(e){return{class:"image_edit",action:"select",object:"done",properties:e}}({actionSurface:E.exitOptions}));break;case e.ImageEditorEvent.selectSaveACopy:t.logEvent(n({actionSurface:E.doneMenu}));break;case e.ImageEditorEvent.selectSaveFromSaveACopy:a=i,t.logEvent(n({actionSurface:E.saveACopyModal,loadingTime:parseInt((null==a?void 0:a.loadingTime)||"",10)}));break;case e.ImageEditorEvent.selectReplaceOriginal:t.logEvent(c({actionSurface:E.doneMenu}));break;case e.ImageEditorEvent.selectSaveFromReplaceOriginal:a=i,t.logEvent(c({actionSurface:E.replaceOriginalModal,loadingTime:parseInt((null==a?void 0:a.loadingTime)||"",10)}));break;case e.ImageEditorEvent.engImageEditError:t.logEvent(function(e){return{class:"image_edit",action:"eng",object:"image_edit_error",properties:e}}());break;default:t.enforceExhaustive(r)}}(r,u),r===e.ImageEditorEvent.engImageEditError){let t={};if(_&&(t={error_severity:_}),b({metricName:e.AmpMetrics.ERROR,metricTags:t},a),d){let e=d;d instanceof Error||(e=new Error(`Image Editor Error: ${d}`)),function(e){let t;t=e.extra?[...T,...e.extra]:[...T];i.reportException({err:e.error,tags:[...S],severity:e.severity,exc_extra:t,force:!0})}({error:e,severity:_||p.NON_CRITICAL,extra:a?["integrated_editor"]:void 0})}}}const v="web_image_editor";var f,I;function b(e,t){const o=r.getMetricsReporter().createStats({ns:v,name:e.metricName},Object.assign(Object.assign({},e.metricTags),{integrated_editor:t.toString()}));e.metricDurationInMilliseconds?o.recordDuration(e.metricDurationInMilliseconds,a.TimeUnit.MILLISECONDS):o.record(1)}e.AmpMetrics=void 0,(f=e.AmpMetrics||(e.AmpMetrics={})).ERROR="image_editor/error",f.TTI_EDITOR="image_editor/tti/editor",f.OPEN_EDITOR="image_editor/open_editor",f.LATENCY_DOWNLOAD_IMAGE="image_editor/latency/download_image",f.LATENCY_CONVERT_TO_DATA_URL="image_editor/latency/convert_to_data_url",f.LATENCY_FIRST_ADJUST="image_editor/latency/first_adjust",e.EntryPoint=void 0,(I=e.EntryPoint||(e.EntryPoint={})).PHOTOS="PHOTOS",I.PREVIEWS="PREVIEWS";const S=["image_editor"],T=["Image Editor"];e.ERROR_SEVERITY=p,e.logAmpMetric=b,e.logImageEditorErrorEvent=(t,o)=>{u(e.ImageEditorEvent.engImageEditError,o,void 0,t instanceof Error?t:new Error(`Image Editor - Uncaught Error: ${t}`),p.UNCAUGHT)},e.logImageEditorEvent=u,e.startAndRetrieveTimer=function(e,t){return r.getMetricsReporter().createTimer({ns:v,name:e.metricName},Object.assign(Object.assign({},e.metricTags),{integrated_editor:t.toString()}))},e.stopTimer=function(e){e.record()}}));
//# sourceMappingURL=c_photo-editor_logging_photo_editor_events_logger.js-vflZKxbcT.map

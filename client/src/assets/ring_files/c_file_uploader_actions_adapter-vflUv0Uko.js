define(["exports","./c_src_sink_index","./e_ui_page_files_router","./c_data_store","./c_data_slice","./c_file_uploader_utils","./c_upload_kit_lib_types","./c_tslib","./c_apex-metrics_src_types","./c_lodash-es_lodash","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_core_browser_detection","./e_edison","metaserver/static/js/modules/constants/files_spa","./c_core_i18n","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","./c_pap-events_enums_file_type-utils","metaserver/static/js/modules/constants/global_file_upload","./c_base64","./c_file_viewer_file_extension_extension_constants"],(function(e,r,t,s,o,a,_,n,c,p,l,i,d,E,u,T,O,m,R,I,U,y,A,M,f,S,v,N,L,D,g,C,h,P,F,w,j,b,x,k,V){"use strict";const G=new r.EventEmitter,Y={emit(e,r){G.emit(e,r)},on:(e,r)=>G.on(e,r),removeListener:(e,r)=>G.removeListener(e,r),removeAllListeners(){G.removeAllListeners()},eventNames:()=>G.eventNames()};function z(e,r){switch(e[".tag"]){case"not_found":return a.UploadErrorType.COMMIT_UPLOAD_SESSION_NOT_FOUND;case"closed":case"not_closed":return a.UploadErrorType.COMMIT_READINESS_ERROR;case"too_large":return a.UploadErrorType.FILE_SIZE_ERROR;case"concurrent_session_invalid_offset":return a.UploadErrorType.APPEND_INVALID_OFFSET;case"concurrent_session_invalid_data_size":return a.UploadErrorType.APPEND_INVALID_DATA_SIZE;case"incorrect_offset":return a.UploadErrorType.APPEND_INCORRECT_OFFSET;case"payload_too_large":return a.UploadErrorType.PAYLOAD_TOO_LARGE;case"content_hash_mismatch":return a.UploadErrorType.HASHES_NOT_EQUAL_ERROR;default:return r}}e.ActionsAdapter=Y,e.convertApiV2CommitError=function(e){const r=a.UploadErrorType.COMMIT_UPLOAD_SESSION_GENERIC_ERROR,t=e.failure;switch(t[".tag"]){case"lookup_failed":return z(t.lookup_failed,r);case"path":switch(t.path[".tag"]){case"malformed_path":return a.UploadErrorType.COMMIT_MALFORMED_PATH;case"conflict":return a.UploadErrorType.COMMIT_CONFLICT_ERROR;case"no_write_permission":case"team_folder":case"operation_suppressed":return a.UploadErrorType.COMMIT_PERMISSIONS_ERROR;case"insufficient_space":return a.UploadErrorType.OVER_QUOTA_ERROR;case"disallowed_name":return a.UploadErrorType.COMMIT_DISALLOWED_NAME;case"too_many_write_operations":return a.UploadErrorType.COMMIT_TOO_MANY_WRITES_ERROR;case"file_system_warnings":case"confirm_blocking_fsw_warnings":return a.UploadErrorType.SERVER_RESPONSE_ERROR;default:return r}case"properties_error":switch(t.properties_error[".tag"]){case"template_not_found":return a.UploadErrorType.COMMIT_TEMPLATE_NOT_FOUND;case"restricted_content":return a.UploadErrorType.COMMIT_PERMISSIONS_ERROR;case"path":return a.UploadErrorType.INVALID_FILE_NAME;case"unsupported_folder":return a.UploadErrorType.COMMIT_UNSUPPORTED_FOLDER;case"property_field_too_large":return a.UploadErrorType.COMMIT_PROPERTY_FIELD_TOO_LARGE;case"does_not_fit_template":return a.UploadErrorType.COMMIT_DOES_NOT_FIT_TEMPLATE;case"duplicate_property_groups":return a.UploadErrorType.COMMIT_DUPLICATE_PROPERTY_GROUPS;default:return r}case"too_many_write_operations":return a.UploadErrorType.COMMIT_TOO_MANY_WRITES_ERROR;case"concurrent_session_data_not_allowed":return a.UploadErrorType.COMMIT_CONCURRENT_SESSION_DATA_NOT_ALLOWED;case"concurrent_session_not_closed":case"concurrent_session_missing_data":return a.UploadErrorType.COMMIT_READINESS_ERROR;case"payload_too_large":return a.UploadErrorType.PAYLOAD_TOO_LARGE;case"content_hash_mismatch":return a.UploadErrorType.HASHES_NOT_EQUAL_ERROR;default:return r}},e.convertApiV2LookupAndAppendErrors=z,e.convertUploadItem=function({bytes:e,destPath:r,id:_,parentPath:n,bytesUploaded:c},p={}){var l;const i=s.getStoreForUpload().getState(),d=o.getUser(i).id,E=t.parent_dir(r),u=t.normalize(n)+t.normalize(E),{batchId:T}=null!==(l=o.getUploadById(i,_))&&void 0!==l?l:{};return new a.FileUpload(Object.assign({uploadId:_,batchId:T,dest:u,name:t.filename(r),fileSize:e,uploadKitDest:r,userId:d,percentUploaded:e>0?Math.ceil(c/e*100):100},p))},e.convertValidationError=function(e){switch(e){case _.UploadErrorType.InvalidChar:return a.UploadErrorType.INVALID_FILE_NAME;case _.UploadErrorType.EmptyFile:return a.UploadErrorType.EMPTY_OR_FOLDER;case _.UploadErrorType.IgnoredFile:return a.UploadErrorType.IGNORED;case _.UploadErrorType.OverMaxFileSize:return a.UploadErrorType.FILE_SIZE_ERROR;case _.UploadErrorType.PointerFile:case _.UploadErrorType.TemporaryFile:return a.UploadErrorType.INVALID_EXTENSION;case _.UploadErrorType.CloudDoc:case _.UploadErrorType.Unknown:default:return a.UploadErrorType.GENERIC}}}));
//# sourceMappingURL=c_file_uploader_actions_adapter.js-vflkKJKVE.map

define(["exports","./e_edison","./e_ui_page_files_router","./c_lodash-es_lodash","./c_spectrum_tertiary_link_tertiary_list","./c_spectrum_tooltip","./c_spectrum_avatar_avatar_initials","./c_tslib","./c_core_i18n","./c_truncate_index","./c_spectrum_icon_arrow_index","./c_comments_data_store","./c_components_utils_throttle-debounce","./c_components_approval-forms_gating_utils","./c_components_approval-forms_url_utils","./c_components_approval-forms_approval_checkbox_in_share"],(function(e,t,r,n,o,i,a,s,c,l,u,d,p,m,f,h){"use strict";var _,g,v={exports:{}};_=v,n.commonjsGlobal,g=function(){var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function r(e){return a(e)?e:$(e)}function n(e){return s(e)?e:G(e)}function o(e){return c(e)?e:Q(e)}function i(e){return a(e)&&!l(e)?e:J(e)}function a(e){return!(!e||!e[d])}function s(e){return!(!e||!e[p])}function c(e){return!(!e||!e[m])}function l(e){return s(e)||c(e)}function u(e){return!(!e||!e[f])}t(n,r),t(o,r),t(i,r),r.isIterable=a,r.isKeyed=s,r.isIndexed=c,r.isAssociative=l,r.isOrdered=u,r.Keyed=n,r.Indexed=o,r.Set=i;var d="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",m="@@__IMMUTABLE_INDEXED__@@",f="@@__IMMUTABLE_ORDERED__@@",h="delete",_=5,g=1<<_,v=g-1,y={},b={value:!1},E={value:!1};function x(e){return e.value=!1,e}function S(e){e&&(e.value=!0)}function w(){}function C(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function k(e){return void 0===e.size&&(e.size=e.__iterate(A)),e.size}function M(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?k(e)+t:t}function A(){return!0}function T(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function O(e,t){return D(e,t,0)}function I(e,t){return D(e,t,t)}function D(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var R=0,N=1,P=2,B="function"==typeof Symbol&&Symbol.iterator,F="@@iterator",j=B||F;function z(e){this.next=e}function K(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function L(){return{value:void 0,done:!0}}function U(e){return!!H(e)}function q(e){return e&&"function"==typeof e.next}function W(e){var t=H(e);return t&&t.call(e)}function H(e){var t=e&&(B&&e[B]||e[F]);if("function"==typeof t)return t}function V(e){return e&&"number"==typeof e.length}function $(e){return null==e?ae():a(e)?e.toSeq():function(e){var t=le(e)||"object"==typeof e&&new re(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function G(e){return null==e?ae().toKeyedSeq():a(e)?s(e)?e.toSeq():e.fromEntrySeq():se(e)}function Q(e){return null==e?ae():a(e)?s(e)?e.entrySeq():e.toIndexedSeq():ce(e)}function J(e){return(null==e?ae():a(e)?s(e)?e.entrySeq():e:ce(e)).toSetSeq()}z.prototype.toString=function(){return"[Iterator]"},z.KEYS=R,z.VALUES=N,z.ENTRIES=P,z.prototype.inspect=z.prototype.toSource=function(){return this.toString()},z.prototype[j]=function(){return this},t($,r),$.of=function(){return $(arguments)},$.prototype.toSeq=function(){return this},$.prototype.toString=function(){return this.__toString("Seq {","}")},$.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},$.prototype.__iterate=function(e,t){return ue(this,e,t,!0)},$.prototype.__iterator=function(e,t){return de(this,e,t,!0)},t(G,$),G.prototype.toKeyedSeq=function(){return this},t(Q,$),Q.of=function(){return Q(arguments)},Q.prototype.toIndexedSeq=function(){return this},Q.prototype.toString=function(){return this.__toString("Seq [","]")},Q.prototype.__iterate=function(e,t){return ue(this,e,t,!1)},Q.prototype.__iterator=function(e,t){return de(this,e,t,!1)},t(J,$),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},$.isSeq=ie,$.Keyed=G,$.Set=J,$.Indexed=Q;var X,Z,Y,ee="@@__IMMUTABLE_SEQ__@@";function te(e){this._array=e,this.size=e.length}function re(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function oe(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[ee])}function ae(){return X||(X=new te([]))}function se(e){var t=Array.isArray(e)?new te(e).fromEntrySeq():q(e)?new oe(e).fromEntrySeq():U(e)?new ne(e).fromEntrySeq():"object"==typeof e?new re(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function ce(e){var t=le(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){return V(e)?new te(e):q(e)?new oe(e):U(e)?new ne(e):void 0}function ue(e,t,r,n){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[r?i-a:a];if(!1===t(s[1],n?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,r)}function de(e,t,r,n){var o=e._cache;if(o){var i=o.length-1,a=0;return new z((function(){var e=o[r?i-a:a];return a++>i?{value:void 0,done:!0}:K(t,n?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,r)}function pe(e,t){return t?me(t,e,"",{"":e}):fe(e)}function me(e,t,r,n){return Array.isArray(t)?e.call(n,r,Q(t).map((function(r,n){return me(e,r,n,t)}))):he(t)?e.call(n,r,G(t).map((function(r,n){return me(e,r,n,t)}))):t}function fe(e){return Array.isArray(e)?Q(e).map(fe).toList():he(e)?G(e).map(fe).toMap():e}function he(e){return e&&(e.constructor===Object||void 0===e.constructor)}function _e(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function ge(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||c(e)!==c(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!l(e);if(u(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&_e(o[1],e)&&(r||_e(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var d=!0,p=t.__iterate((function(t,n){if(r?!e.has(t):o?!_e(t,e.get(n,y)):!_e(e.get(n,y),t))return d=!1,!1}));return d&&e.size===p}function ve(e,t){if(!(this instanceof ve))return new ve(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Z)return Z;Z=this}}function ye(e,t){if(!e)throw new Error(t)}function be(e,t,r){if(!(this instanceof be))return new be(e,t,r);if(ye(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(Y)return Y;Y=this}}function Ee(){throw TypeError("Abstract")}function xe(){}function Se(){}function we(){}$.prototype[ee]=!0,t(te,Q),te.prototype.get=function(e,t){return this.has(e)?this._array[M(this,e)]:t},te.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===e(r[t?n-o:o],o,this))return o+1;return o},te.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,o=0;return new z((function(){return o>n?{value:void 0,done:!0}:K(e,o,r[t?n-o++:o++])}))},t(re,G),re.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},re.prototype.has=function(e){return this._object.hasOwnProperty(e)},re.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[t?o-i:i];if(!1===e(r[a],a,this))return i+1}return i},re.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length-1,i=0;return new z((function(){var a=n[t?o-i:i];return i++>o?{value:void 0,done:!0}:K(e,a,r[a])}))},re.prototype[f]=!0,t(ne,Q),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=W(this._iterable),n=0;if(q(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=W(this._iterable);if(!q(r))return new z(L);var n=0;return new z((function(){var t=r.next();return t.done?t:K(e,n++,t.value)}))},t(oe,Q),oe.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===e(o[i],i++,this))return i;for(;!(r=n.next()).done;){var a=r.value;if(o[i]=a,!1===e(a,i++,this))break}return i},oe.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,o=0;return new z((function(){if(o>=n.length){var t=r.next();if(t.done)return t;n[o]=t.value}return K(e,o,n[o++])}))},t(ve,Q),ve.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ve.prototype.get=function(e,t){return this.has(e)?this._value:t},ve.prototype.includes=function(e){return _e(this._value,e)},ve.prototype.slice=function(e,t){var r=this.size;return T(e,t,r)?this:new ve(this._value,I(t,r)-O(e,r))},ve.prototype.reverse=function(){return this},ve.prototype.indexOf=function(e){return _e(this._value,e)?0:-1},ve.prototype.lastIndexOf=function(e){return _e(this._value,e)?this.size:-1},ve.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},ve.prototype.__iterator=function(e,t){var r=this,n=0;return new z((function(){return n<r.size?K(e,n++,r._value):{value:void 0,done:!0}}))},ve.prototype.equals=function(e){return e instanceof ve?_e(this._value,e._value):ge(e)},t(be,Q),be.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},be.prototype.get=function(e,t){return this.has(e)?this._start+M(this,e)*this._step:t},be.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},be.prototype.slice=function(e,t){return T(e,t,this.size)?this:(e=O(e,this.size),(t=I(t,this.size))<=e?new be(0,0):new be(this.get(e,this._end),this.get(t,this._end),this._step))},be.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},be.prototype.lastIndexOf=function(e){return this.indexOf(e)},be.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===e(o,i,this))return i+1;o+=t?-n:n}return i},be.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;return new z((function(){var a=o;return o+=t?-n:n,i>r?{value:void 0,done:!0}:K(e,i++,a)}))},be.prototype.equals=function(e){return e instanceof be?this._start===e._start&&this._end===e._end&&this._step===e._step:ge(this,e)},t(Ee,r),t(xe,Ee),t(Se,Ee),t(we,Ee),Ee.Keyed=xe,Ee.Indexed=Se,Ee.Set=we;var Ce="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function ke(e){return e>>>1&1073741824|3221225471&e}function Me(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)r^=e/=4294967295;return ke(r)}if("string"===t)return e.length>Pe?function(e){var t=je[e];return void 0===t&&(t=Ae(e),Fe===Be&&(Fe=0,je={}),Fe++,je[e]=t),t}(e):Ae(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(De&&void 0!==(t=Te.get(e)))return t;if(void 0!==(t=e[Ne]))return t;if(!Ie){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ne]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++Re,1073741824&Re&&(Re=0),De)Te.set(e,t);else{if(void 0!==Oe&&!1===Oe(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ie)Object.defineProperty(e,Ne,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ne]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ne]=t}}return t}(e);if("function"==typeof e.toString)return Ae(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Ae(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return ke(t)}var Te,Oe=Object.isExtensible,Ie=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),De="function"==typeof WeakMap;De&&(Te=new WeakMap);var Re=0,Ne="__immutablehash__";"function"==typeof Symbol&&(Ne=Symbol(Ne));var Pe=16,Be=255,Fe=0,je={};function ze(e){ye(e!==1/0,"Cannot perform this action with an infinite size.")}function Ke(e){return null==e?et():Le(e)&&!u(e)?e:et().withMutations((function(t){var r=n(e);ze(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function Le(e){return!(!e||!e[qe])}t(Ke,xe),Ke.prototype.toString=function(){return this.__toString("Map {","}")},Ke.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ke.prototype.set=function(e,t){return tt(this,e,t)},Ke.prototype.setIn=function(e,t){return this.updateIn(e,y,(function(){return t}))},Ke.prototype.remove=function(e){return tt(this,e,y)},Ke.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return y}))},Ke.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},Ke.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=lt(this,ir(e),t,r);return n===y?void 0:n},Ke.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):et()},Ke.prototype.merge=function(){return it(this,void 0,arguments)},Ke.prototype.mergeWith=function(t){return it(this,t,e.call(arguments,1))},Ke.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,et(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1]}))},Ke.prototype.mergeDeep=function(){return it(this,at,arguments)},Ke.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return it(this,st(t),r)},Ke.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,et(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1]}))},Ke.prototype.sort=function(e){return Dt(Gt(this,e))},Ke.prototype.sortBy=function(e,t){return Dt(Gt(this,t,e))},Ke.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ke.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new w)},Ke.prototype.asImmutable=function(){return this.__ensureOwner()},Ke.prototype.wasAltered=function(){return this.__altered},Ke.prototype.__iterator=function(e,t){return new Je(this,e,t)},Ke.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},Ke.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ye(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ke.isMap=Le;var Ue,qe="@@__IMMUTABLE_MAP__@@",We=Ke.prototype;function He(e,t){this.ownerID=e,this.entries=t}function Ve(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function $e(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function Ge(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function Qe(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function Je(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Ze(e._root)}function Xe(e,t){return K(e,t[0],t[1])}function Ze(e,t){return{node:e,index:0,__prev:t}}function Ye(e,t,r,n){var o=Object.create(We);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function et(){return Ue||(Ue=Ye(0))}function tt(e,t,r){var n,o;if(e._root){var i=x(b),a=x(E);if(n=rt(e._root,e.__ownerID,0,void 0,t,r,i,a),!a.value)return e;o=e.size+(i.value?r===y?-1:1:0)}else{if(r===y)return e;o=1,n=new He(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?Ye(o,n):et()}function rt(e,t,r,n,o,i,a,s){return e?e.update(t,r,n,o,i,a,s):i===y?e:(S(s),S(a),new Qe(t,n,[o,i]))}function nt(e){return e.constructor===Qe||e.constructor===Ge}function ot(e,t,r,n,o){if(e.keyHash===n)return new Ge(t,n,[e.entry,o]);var i,a=(0===r?e.keyHash:e.keyHash>>>r)&v,s=(0===r?n:n>>>r)&v;return new Ve(t,1<<a|1<<s,a===s?[ot(e,t,r+_,n,o)]:(i=new Qe(t,n,o),a<s?[e,i]:[i,e]))}function it(e,t,r){for(var o=[],i=0;i<r.length;i++){var s=r[i],c=n(s);a(s)||(c=c.map((function(e){return pe(e)}))),o.push(c)}return ct(e,t,o)}function at(e,t,r){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):_e(e,t)?e:t}function st(e){return function(t,r,n){if(t&&t.mergeDeepWith&&a(r))return t.mergeDeepWith(e,r);var o=e(t,r,n);return _e(t,o)?t:o}}function ct(e,t,r){return 0===(r=r.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var n=t?function(r,n){e.update(n,y,(function(e){return e===y?r:t(e,r,n)}))}:function(t,r){e.set(r,t)},o=0;o<r.length;o++)r[o].forEach(n)})):e.constructor(r[0])}function lt(e,t,r,n){var o=e===y,i=t.next();if(i.done){var a=o?r:e,s=n(a);return s===a?e:s}ye(o||e&&e.set,"invalid keyPath");var c=i.value,l=o?y:e.get(c,y),u=lt(l,t,r,n);return u===l?e:u===y?e.remove(c):(o?et():e).set(c,u)}function ut(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function dt(e,t,r,n){var o=n?e:C(e);return o[t]=r,o}We[qe]=!0,We[h]=We.remove,We.removeIn=We.deleteIn,He.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(_e(r,o[i][0]))return o[i][1];return n},He.prototype.update=function(e,t,r,n,o,i,a){for(var s=o===y,c=this.entries,l=0,u=c.length;l<u&&!_e(n,c[l][0]);l++);var d=l<u;if(d?c[l][1]===o:s)return this;if(S(a),(s||!d)&&S(i),!s||1!==c.length){if(!d&&!s&&c.length>=pt)return function(e,t,r,n){e||(e=new w);for(var o=new Qe(e,Me(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}(e,c,n,o);var p=e&&e===this.ownerID,m=p?c:C(c);return d?s?l===u-1?m.pop():m[l]=m.pop():m[l]=[n,o]:m.push([n,o]),p?(this.entries=m,this):new He(e,m)}},Ve.prototype.get=function(e,t,r,n){void 0===t&&(t=Me(r));var o=1<<((0===e?t:t>>>e)&v),i=this.bitmap;return 0==(i&o)?n:this.nodes[ut(i&o-1)].get(e+_,t,r,n)},Ve.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Me(n));var s=(0===t?r:r>>>t)&v,c=1<<s,l=this.bitmap,u=0!=(l&c);if(!u&&o===y)return this;var d=ut(l&c-1),p=this.nodes,m=u?p[d]:void 0,f=rt(m,e,t+_,r,n,o,i,a);if(f===m)return this;if(!u&&f&&p.length>=mt)return function(e,t,r,n,o){for(var i=0,a=new Array(g),s=0;0!==r;s++,r>>>=1)a[s]=1&r?t[i++]:void 0;return a[n]=o,new $e(e,i+1,a)}(e,p,l,s,f);if(u&&!f&&2===p.length&&nt(p[1^d]))return p[1^d];if(u&&f&&1===p.length&&nt(f))return f;var h=e&&e===this.ownerID,b=u?f?l:l^c:l|c,E=u?f?dt(p,d,f,h):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}(p,d,h):function(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=r,a=-1):i[s]=e[s+a];return i}(p,d,f,h);return h?(this.bitmap=b,this.nodes=E,this):new Ve(e,b,E)},$e.prototype.get=function(e,t,r,n){void 0===t&&(t=Me(r));var o=(0===e?t:t>>>e)&v,i=this.nodes[o];return i?i.get(e+_,t,r,n):n},$e.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Me(n));var s=(0===t?r:r>>>t)&v,c=o===y,l=this.nodes,u=l[s];if(c&&!u)return this;var d=rt(u,e,t+_,r,n,o,i,a);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<ft)return function(e,t,r,n){for(var o=0,i=0,a=new Array(r),s=0,c=1,l=t.length;s<l;s++,c<<=1){var u=t[s];void 0!==u&&s!==n&&(o|=c,a[i++]=u)}return new Ve(e,o,a)}(e,l,p,s)}else p++;var m=e&&e===this.ownerID,f=dt(l,s,d,m);return m?(this.count=p,this.nodes=f,this):new $e(e,p,f)},Ge.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(_e(r,o[i][0]))return o[i][1];return n},Ge.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Me(n));var s=o===y;if(r!==this.keyHash)return s?this:(S(a),S(i),ot(this,e,t,r,[n,o]));for(var c=this.entries,l=0,u=c.length;l<u&&!_e(n,c[l][0]);l++);var d=l<u;if(d?c[l][1]===o:s)return this;if(S(a),(s||!d)&&S(i),s&&2===u)return new Qe(e,this.keyHash,c[1^l]);var p=e&&e===this.ownerID,m=p?c:C(c);return d?s?l===u-1?m.pop():m[l]=m.pop():m[l]=[n,o]:m.push([n,o]),p?(this.entries=m,this):new Ge(e,this.keyHash,m)},Qe.prototype.get=function(e,t,r,n){return _e(r,this.entry[0])?this.entry[1]:n},Qe.prototype.update=function(e,t,r,n,o,i,a){var s=o===y,c=_e(n,this.entry[0]);return(c?o===this.entry[1]:s)?this:(S(a),s?void S(i):c?e&&e===this.ownerID?(this.entry[1]=o,this):new Qe(e,this.keyHash,[n,o]):(S(i),ot(this,e,t,Me(n),[n,o])))},He.prototype.iterate=Ge.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},Ve.prototype.iterate=$e.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},Qe.prototype.iterate=function(e,t){return e(this.entry)},t(Je,z),Je.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,o=t.index++;if(n.entry){if(0===o)return Xe(e,n.entry)}else if(n.entries){if(o<=(r=n.entries.length-1))return Xe(e,n.entries[this._reverse?r-o:o])}else if(o<=(r=n.nodes.length-1)){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return Xe(e,i.entry);t=this._stack=Ze(i,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var pt=g/4,mt=g/2,ft=g/4;function ht(e){var t=Ct();if(null==e)return t;if(_t(e))return e;var r=o(e),n=r.size;return 0===n?t:(ze(n),n>0&&n<g?wt(0,n,_,null,new yt(r.toArray())):t.withMutations((function(e){e.setSize(n),r.forEach((function(t,r){return e.set(r,t)}))})))}function _t(e){return!(!e||!e[gt])}t(ht,Se),ht.of=function(){return this(arguments)},ht.prototype.toString=function(){return this.__toString("List [","]")},ht.prototype.get=function(e,t){if((e=M(this,e))>=0&&e<this.size){var r=At(this,e+=this._origin);return r&&r.array[e&v]}return t},ht.prototype.set=function(e,t){return function(e,t,r){if((t=M(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Tt(e,t).set(0,r):Tt(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i=x(E);return t>=It(e._capacity)?n=kt(n,e.__ownerID,0,t,r,i):o=kt(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):wt(e._origin,e._capacity,e._level,o,n):e}(this,e,t)},ht.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ht.prototype.insert=function(e,t){return this.splice(e,0,t)},ht.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=_,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ct()},ht.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){Tt(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},ht.prototype.pop=function(){return Tt(this,0,-1)},ht.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Tt(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},ht.prototype.shift=function(){return Tt(this,1)},ht.prototype.merge=function(){return Ot(this,void 0,arguments)},ht.prototype.mergeWith=function(t){return Ot(this,t,e.call(arguments,1))},ht.prototype.mergeDeep=function(){return Ot(this,at,arguments)},ht.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Ot(this,st(t),r)},ht.prototype.setSize=function(e){return Tt(this,0,e)},ht.prototype.slice=function(e,t){var r=this.size;return T(e,t,r)?this:Tt(this,O(e,r),I(t,r))},ht.prototype.__iterator=function(e,t){var r=0,n=St(this,t);return new z((function(){var t=n();return t===xt?{value:void 0,done:!0}:K(e,r++,t)}))},ht.prototype.__iterate=function(e,t){for(var r,n=0,o=St(this,t);(r=o())!==xt&&!1!==e(r,n++,this););return n},ht.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?wt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ht.isList=_t;var gt="@@__IMMUTABLE_LIST__@@",vt=ht.prototype;function yt(e,t){this.array=e,this.ownerID=t}vt[gt]=!0,vt[h]=vt.remove,vt.setIn=We.setIn,vt.deleteIn=vt.removeIn=We.removeIn,vt.update=We.update,vt.updateIn=We.updateIn,vt.mergeIn=We.mergeIn,vt.mergeDeepIn=We.mergeDeepIn,vt.withMutations=We.withMutations,vt.asMutable=We.asMutable,vt.asImmutable=We.asImmutable,vt.wasAltered=We.wasAltered,yt.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&v;if(n>=this.array.length)return new yt([],e);var o,i=0===n;if(t>0){var a=this.array[n];if((o=a&&a.removeBefore(e,t-_,r))===a&&i)return this}if(i&&!o)return this;var s=Mt(this,e);if(!i)for(var c=0;c<n;c++)s.array[c]=void 0;return o&&(s.array[n]=o),s},yt.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&v;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((n=i&&i.removeAfter(e,t-_,r))===i&&o===this.array.length-1)return this}var a=Mt(this,e);return a.array.splice(o+1),n&&(a.array[o]=n),a};var bt,Et,xt={};function St(e,t){var r=e._origin,n=e._capacity,o=It(n),i=e._tail;return a(e._root,e._level,0);function a(e,s,c){return 0===s?function(e,a){var s=a===o?i&&i.array:e&&e.array,c=a>r?0:r-a,l=n-a;return l>g&&(l=g),function(){if(c===l)return xt;var e=t?--l:c++;return s&&s[e]}}(e,c):function(e,o,i){var s,c=e&&e.array,l=i>r?0:r-i>>o,u=1+(n-i>>o);return u>g&&(u=g),function(){for(;;){if(s){var e=s();if(e!==xt)return e;s=null}if(l===u)return xt;var r=t?--u:l++;s=a(c&&c[r],o-_,i+(r<<o))}}}(e,s,c)}}function wt(e,t,r,n,o,i,a){var s=Object.create(vt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function Ct(){return bt||(bt=wt(0,0,_))}function kt(e,t,r,n,o,i){var a,s=n>>>r&v,c=e&&s<e.array.length;if(!c&&void 0===o)return e;if(r>0){var l=e&&e.array[s],u=kt(l,t,r-_,n,o,i);return u===l?e:((a=Mt(e,t)).array[s]=u,a)}return c&&e.array[s]===o?e:(S(i),a=Mt(e,t),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function Mt(e,t){return t&&e&&t===e.ownerID?e:new yt(e?e.array.slice():[],t)}function At(e,t){if(t>=It(e._capacity))return e._tail;if(t<1<<e._level+_){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&v],n-=_;return r}}function Tt(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new w,o=e._origin,i=e._capacity,a=o+t,s=void 0===r?i:r<0?i+r:o+r;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var c=e._level,l=e._root,u=0;a+u<0;)l=new yt(l&&l.array.length?[void 0,l]:[],n),u+=1<<(c+=_);u&&(a+=u,o+=u,s+=u,i+=u);for(var d=It(i),p=It(s);p>=1<<c+_;)l=new yt(l&&l.array.length?[l]:[],n),c+=_;var m=e._tail,f=p<d?At(e,s-1):p>d?new yt([],n):m;if(m&&p>d&&a<i&&m.array.length){for(var h=l=Mt(l,n),g=c;g>_;g-=_){var y=d>>>g&v;h=h.array[y]=Mt(h.array[y],n)}h.array[d>>>_&v]=m}if(s<i&&(f=f&&f.removeAfter(n,0,s)),a>=p)a-=p,s-=p,c=_,l=null,f=f&&f.removeBefore(n,0,a);else if(a>o||p<d){for(u=0;l;){var b=a>>>c&v;if(b!==p>>>c&v)break;b&&(u+=(1<<c)*b),c-=_,l=l.array[b]}l&&a>o&&(l=l.removeBefore(n,c,a-u)),l&&p<d&&(l=l.removeAfter(n,c,p-u)),u&&(a-=u,s-=u)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=c,e._root=l,e._tail=f,e.__hash=void 0,e.__altered=!0,e):wt(a,s,c,l,f)}function Ot(e,t,r){for(var n=[],i=0,s=0;s<r.length;s++){var c=r[s],l=o(c);l.size>i&&(i=l.size),a(c)||(l=l.map((function(e){return pe(e)}))),n.push(l)}return i>e.size&&(e=e.setSize(i)),ct(e,t,n)}function It(e){return e<g?0:e-1>>>_<<_}function Dt(e){return null==e?Pt():Rt(e)?e:Pt().withMutations((function(t){var r=n(e);ze(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function Rt(e){return Le(e)&&u(e)}function Nt(e,t,r,n){var o=Object.create(Dt.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o}function Pt(){return Et||(Et=Nt(et(),Ct()))}function Bt(e,t,r){var n,o,i=e._map,a=e._list,s=i.get(t),c=void 0!==s;if(r===y){if(!c)return e;a.size>=g&&a.size>=2*i.size?(n=(o=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(r===a.get(s)[1])return e;n=i,o=a.set(s,[t,r])}else n=i.set(t,a.size),o=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e):Nt(n,o)}function Ft(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function jt(e){this._iter=e,this.size=e.size}function zt(e){this._iter=e,this.size=e.size}function Kt(e){this._iter=e,this.size=e.size}function Lt(e){var t=rr(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=nr,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===P){var n=e.__iterator(t,r);return new z((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===N?R:N,r)},t}function Ut(e,t,r){var n=rr(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,y);return i===y?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(P,o);return new z((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return K(n,s,t.call(r,a[1],s,e),o)}))},n}function qt(e,t){var r=rr(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=Lt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=nr,r.__iterate=function(t,r){var n=this;return e.__iterate((function(e,r){return t(e,r,n)}),!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function Wt(e,t,r,n){var o=rr(e);return n&&(o.has=function(n){var o=e.get(n,y);return o!==y&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,y);return i!==y&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate((function(e,i,c){if(t.call(r,e,i,c))return s++,o(e,n?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(P,i),s=0;return new z((function(){for(;;){var i=a.next();if(i.done)return i;var c=i.value,l=c[0],u=c[1];if(t.call(r,u,l,e))return K(o,n?l:s++,u,i)}}))},o}function Ht(e,t,r,n){var o=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r|=0),T(t,r,o))return e;var i=O(t,o),a=I(r,o);if(i!=i||a!=a)return Ht(e.toSeq().cacheResult(),t,r,n);var s,c=a-i;c==c&&(s=c<0?0:c);var l=rr(e);return l.size=0===s?s:e.size&&s||void 0,!n&&ie(e)&&s>=0&&(l.get=function(t,r){return(t=M(this,t))>=0&&t<s?e.get(t+i,r):r}),l.__iterateUncached=function(t,r){var o=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,c=!0,l=0;return e.__iterate((function(e,r){if(!c||!(c=a++<i))return l++,!1!==t(e,n?r:l-1,o)&&l!==s})),l},l.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);var o=0!==s&&e.__iterator(t,r),a=0,c=0;return new z((function(){for(;a++<i;)o.next();if(++c>s)return{value:void 0,done:!0};var e=o.next();return n||t===N?e:K(t,c-1,t===R?void 0:e.value[1],e)}))},l}function Vt(e,t,r,n){var o=rr(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,c=0;return e.__iterate((function(e,i,l){if(!s||!(s=t.call(r,e,i,l)))return c++,o(e,n?i:c-1,a)})),c},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(P,i),c=!0,l=0;return new z((function(){var e,i,u;do{if((e=s.next()).done)return n||o===N?e:K(o,l++,o===R?void 0:e.value[1],e);var d=e.value;i=d[0],u=d[1],c&&(c=t.call(r,u,i,a))}while(c);return o===P?e:K(o,i,u,e)}))},o}function $t(e,t,r){var n=rr(e);return n.__iterateUncached=function(n,o){var i=0,s=!1;return function e(c,l){var u=this;c.__iterate((function(o,c){return(!t||l<t)&&a(o)?e(o,l+1):!1===n(o,r?c:i++,u)&&(s=!0),!s}),o)}(e,0),i},n.__iteratorUncached=function(n,o){var i=e.__iterator(n,o),s=[],c=0;return new z((function(){for(;i;){var e=i.next();if(!1===e.done){var l=e.value;if(n===P&&(l=l[1]),t&&!(s.length<t)||!a(l))return r?e:K(n,c++,l,e);s.push(i),i=l.__iterator(n,o)}else i=s.pop()}return{value:void 0,done:!0}}))},n}function Gt(e,t,r){t||(t=or);var n=s(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?G(i):c(e)?Q(i):J(i)}function Qt(e,t,r){if(t||(t=or),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return Jt(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return Jt(t,e,r)?r:e}))}function Jt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Xt(e,t,n){var o=rr(e);return o.size=new te(n).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(N,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=r(e),W(o?e.reverse():e)})),a=0,s=!1;return new z((function(){var r;return s||(r=i.map((function(e){return e.next()})),s=r.some((function(e){return e.done}))),s?{value:void 0,done:!0}:K(e,a++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function Zt(e,t){return ie(e)?t:e.constructor(t)}function Yt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function er(e){return ze(e.size),k(e)}function tr(e){return s(e)?n:c(e)?o:i}function rr(e){return Object.create((s(e)?G:c(e)?Q:J).prototype)}function nr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):$.prototype.cacheResult.call(this)}function or(e,t){return e>t?1:e<t?-1:0}function ir(e){var t=W(e);if(!t){if(!V(e))throw new TypeError("Expected iterable or array-like: "+e);t=W(r(e))}return t}function ar(e,t){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(e);!function(e,t){try{t.forEach(ur.bind(void 0,e))}catch(e){}}(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=Ke(i)},o=n.prototype=Object.create(sr);return o.constructor=n,n}t(Dt,Ke),Dt.of=function(){return this(arguments)},Dt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Dt.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},Dt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Pt()},Dt.prototype.set=function(e,t){return Bt(this,e,t)},Dt.prototype.remove=function(e){return Bt(this,e,y)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Dt.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},Dt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Dt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?Nt(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Dt.isOrderedMap=Rt,Dt.prototype[f]=!0,Dt.prototype[h]=Dt.prototype.remove,t(Ft,G),Ft.prototype.get=function(e,t){return this._iter.get(e,t)},Ft.prototype.has=function(e){return this._iter.has(e)},Ft.prototype.valueSeq=function(){return this._iter.valueSeq()},Ft.prototype.reverse=function(){var e=this,t=qt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Ft.prototype.map=function(e,t){var r=this,n=Ut(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},Ft.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?er(this):0,function(o){return e(o,t?--r:r++,n)}),t)},Ft.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(N,t),n=t?er(this):0;return new z((function(){var o=r.next();return o.done?o:K(e,t?--n:n++,o.value,o)}))},Ft.prototype[f]=!0,t(jt,Q),jt.prototype.includes=function(e){return this._iter.includes(e)},jt.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate((function(t){return e(t,n++,r)}),t)},jt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(N,t),n=0;return new z((function(){var t=r.next();return t.done?t:K(e,n++,t.value,t)}))},t(zt,J),zt.prototype.has=function(e){return this._iter.includes(e)},zt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},zt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(N,t);return new z((function(){var t=r.next();return t.done?t:K(e,t.value,t.value,t)}))},t(Kt,G),Kt.prototype.entrySeq=function(){return this._iter.toSeq()},Kt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){Yt(t);var n=a(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},Kt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(N,t);return new z((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Yt(n);var o=a(n);return K(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},jt.prototype.cacheResult=Ft.prototype.cacheResult=zt.prototype.cacheResult=Kt.prototype.cacheResult=nr,t(ar,xe),ar.prototype.toString=function(){return this.__toString(lr(this)+" {","}")},ar.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},ar.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},ar.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=cr(this,et()))},ar.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+lr(this));var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:cr(this,r)},ar.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:cr(this,t)},ar.prototype.wasAltered=function(){return this._map.wasAltered()},ar.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterator(e,t)},ar.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterate(e,t)},ar.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?cr(this,t,e):(this.__ownerID=e,this._map=t,this)};var sr=ar.prototype;function cr(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function lr(e){return e._name||e.constructor.name||"Record"}function ur(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ye(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function dr(e){return null==e?vr():pr(e)&&!u(e)?e:vr().withMutations((function(t){var r=i(e);ze(r.size),r.forEach((function(e){return t.add(e)}))}))}function pr(e){return!(!e||!e[fr])}sr[h]=sr.remove,sr.deleteIn=sr.removeIn=We.removeIn,sr.merge=We.merge,sr.mergeWith=We.mergeWith,sr.mergeIn=We.mergeIn,sr.mergeDeep=We.mergeDeep,sr.mergeDeepWith=We.mergeDeepWith,sr.mergeDeepIn=We.mergeDeepIn,sr.setIn=We.setIn,sr.update=We.update,sr.updateIn=We.updateIn,sr.withMutations=We.withMutations,sr.asMutable=We.asMutable,sr.asImmutable=We.asImmutable,t(dr,we),dr.of=function(){return this(arguments)},dr.fromKeys=function(e){return this(n(e).keySeq())},dr.prototype.toString=function(){return this.__toString("Set {","}")},dr.prototype.has=function(e){return this._map.has(e)},dr.prototype.add=function(e){return _r(this,this._map.set(e,!0))},dr.prototype.remove=function(e){return _r(this,this._map.remove(e))},dr.prototype.clear=function(){return _r(this,this._map.clear())},dr.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},dr.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.every((function(e){return e.includes(r)}))||e.remove(r)}))}))},dr.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.some((function(e){return e.includes(r)}))&&e.remove(r)}))}))},dr.prototype.merge=function(){return this.union.apply(this,arguments)},dr.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r)},dr.prototype.sort=function(e){return yr(Gt(this,e))},dr.prototype.sortBy=function(e,t){return yr(Gt(this,t,e))},dr.prototype.wasAltered=function(){return this._map.wasAltered()},dr.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t,n){return e(n,n,r)}),t)},dr.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},dr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},dr.isSet=pr;var mr,fr="@@__IMMUTABLE_SET__@@",hr=dr.prototype;function _r(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function gr(e,t){var r=Object.create(hr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function vr(){return mr||(mr=gr(et()))}function yr(e){return null==e?wr():br(e)?e:wr().withMutations((function(t){var r=i(e);ze(r.size),r.forEach((function(e){return t.add(e)}))}))}function br(e){return pr(e)&&u(e)}hr[fr]=!0,hr[h]=hr.remove,hr.mergeDeep=hr.merge,hr.mergeDeepWith=hr.mergeWith,hr.withMutations=We.withMutations,hr.asMutable=We.asMutable,hr.asImmutable=We.asImmutable,hr.__empty=vr,hr.__make=gr,t(yr,dr),yr.of=function(){return this(arguments)},yr.fromKeys=function(e){return this(n(e).keySeq())},yr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},yr.isOrderedSet=br;var Er,xr=yr.prototype;function Sr(e,t){var r=Object.create(xr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function wr(){return Er||(Er=Sr(Pt()))}function Cr(e){return null==e?Ir():kr(e)?e:Ir().unshiftAll(e)}function kr(e){return!(!e||!e[Ar])}xr[f]=!0,xr.__empty=wr,xr.__make=Sr,t(Cr,Se),Cr.of=function(){return this(arguments)},Cr.prototype.toString=function(){return this.__toString("Stack [","]")},Cr.prototype.get=function(e,t){var r=this._head;for(e=M(this,e);r&&e--;)r=r.next;return r?r.value:t},Cr.prototype.peek=function(){return this._head&&this._head.value},Cr.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Or(e,t)},Cr.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;ze(e.size);var t=this.size,r=this._head;return e.reverse().forEach((function(e){t++,r={value:e,next:r}})),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Or(t,r)},Cr.prototype.pop=function(){return this.slice(1)},Cr.prototype.unshift=function(){return this.push.apply(this,arguments)},Cr.prototype.unshiftAll=function(e){return this.pushAll(e)},Cr.prototype.shift=function(){return this.pop.apply(this,arguments)},Cr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ir()},Cr.prototype.slice=function(e,t){if(T(e,t,this.size))return this;var r=O(e,this.size);if(I(t,this.size)!==this.size)return Se.prototype.slice.call(this,e,t);for(var n=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):Or(n,o)},Cr.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Or(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Cr.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},Cr.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new z((function(){if(n){var t=n.value;return n=n.next,K(e,r++,t)}return{value:void 0,done:!0}}))},Cr.isStack=kr;var Mr,Ar="@@__IMMUTABLE_STACK__@@",Tr=Cr.prototype;function Or(e,t,r,n){var o=Object.create(Tr);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Ir(){return Mr||(Mr=Or(0))}function Dr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}Tr[Ar]=!0,Tr.withMutations=We.withMutations,Tr.asMutable=We.asMutable,Tr.asImmutable=We.asImmutable,Tr.wasAltered=We.wasAltered,r.Iterator=z,Dr(r,{toArray:function(){ze(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,r){e[r]=t})),e},toIndexedSeq:function(){return new jt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new Ft(this,!0)},toMap:function(){return Ke(this.toKeyedSeq())},toObject:function(){ze(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e},toOrderedMap:function(){return Dt(this.toKeyedSeq())},toOrderedSet:function(){return yr(s(this)?this.valueSeq():this)},toSet:function(){return dr(s(this)?this.valueSeq():this)},toSetSeq:function(){return new zt(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cr(s(this)?this.valueSeq():this)},toList:function(){return ht(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return Zt(this,function(e,t){var r=s(e),o=[e].concat(t).map((function(e){return a(e)?r&&(e=n(e)):e=r?se(e):ce(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var i=o[0];if(i===e||r&&s(i)||c(e)&&c(i))return i}var l=new te(o);return r?l=l.toKeyedSeq():c(e)||(l=l.toSetSeq()),(l=l.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),l}(this,e.call(arguments,0)))},includes:function(e){return this.some((function(t){return _e(t,e)}))},entries:function(){return this.__iterator(P)},every:function(e,t){ze(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return Zt(this,Wt(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},findEntry:function(e,t){var r;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1})),r},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return ze(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ze(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(R)},map:function(e,t){return Zt(this,Ut(this,e,t))},reduce:function(e,t,r){var n,o;return ze(this.size),arguments.length<2?o=!0:n=t,this.__iterate((function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)})),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Zt(this,qt(this,!0))},slice:function(e,t){return Zt(this,Ht(this,e,t,!0))},some:function(e,t){return!this.every(Fr(e),t)},sort:function(e){return Zt(this,Gt(this,e))},values:function(){return this.__iterator(N)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return k(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Ke().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}(this,e,t)},equals:function(e){return ge(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(Br).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Fr(e),t)},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},first:function(){return this.find(A)},flatMap:function(e,t){return Zt(this,function(e,t,r){var n=tr(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}(this,e,t))},flatten:function(e){return Zt(this,$t(this,e,!0))},fromEntrySeq:function(){return new Kt(this)},get:function(e,t){return this.find((function(t,r){return _e(r,e)}),void 0,t)},getIn:function(e,t){for(var r,n=this,o=ir(e);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,y):y)===y)return t}return n},groupBy:function(e,t){return function(e,t,r){var n=s(e),o=(u(e)?Dt():Ke()).asMutable();e.__iterate((function(i,a){o.update(t.call(r,i,a,e),(function(e){return(e=e||[]).push(n?[a,i]:i),e}))}));var i=tr(e);return o.map((function(t){return Zt(e,i(t))}))}(this,e,t)},has:function(e){return this.get(e,y)!==y},hasIn:function(e){return this.getIn(e,y)!==y},isSubset:function(e){return e="function"==typeof e.includes?e:r(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:r(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(Pr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return Qt(this,e)},maxBy:function(e,t){return Qt(this,t,e)},min:function(e){return Qt(this,e?jr(e):Lr)},minBy:function(e,t){return Qt(this,t?jr(t):Lr,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Zt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Zt(this,Vt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Fr(e),t)},sortBy:function(e,t){return Zt(this,Gt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Zt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Zt(this,function(e,t,r){var n=rr(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate((function(e,o,s){return t.call(r,e,o,s)&&++a&&n(e,o,i)})),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(P,o),s=!0;return new z((function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var o=e.value,c=o[0],l=o[1];return t.call(r,l,c,i)?n===P?e:K(n,c,l,e):(s=!1,{value:void 0,done:!0})}))},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Fr(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=u(e),r=s(e),n=t?1:0;return function(e,t){return t=Ce(t,3432918353),t=Ce(t<<15|t>>>-15,461845907),t=Ce(t<<13|t>>>-13,5),t=Ce((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=ke((t=Ce(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(r?t?function(e,t){n=31*n+Ur(Me(e),Me(t))|0}:function(e,t){n=n+Ur(Me(e),Me(t))|0}:t?function(e){n=31*n+Me(e)|0}:function(e){n=n+Me(e)|0}),n)}(this))}});var Rr=r.prototype;Rr[d]=!0,Rr[j]=Rr.values,Rr.__toJS=Rr.toArray,Rr.__toStringMapper=zr,Rr.inspect=Rr.toSource=function(){return this.toString()},Rr.chain=Rr.flatMap,Rr.contains=Rr.includes,function(){try{Object.defineProperty(Rr,"length",{get:function(){if(!r.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Dr(n,{flip:function(){return Zt(this,Lt(this))},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey((function(t){return _e(t,e)}))},lastKeyOf:function(e){return this.findLastKey((function(t){return _e(t,e)}))},mapEntries:function(e,t){var r=this,n=0;return Zt(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Zt(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var Nr=n.prototype;function Pr(e,t){return t}function Br(e,t){return[t,e]}function Fr(e){return function(){return!e.apply(this,arguments)}}function jr(e){return function(){return-e.apply(this,arguments)}}function zr(e){return"string"==typeof e?JSON.stringify(e):e}function Kr(){return C(arguments)}function Lr(e,t){return e<t?1:e>t?-1:0}function Ur(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Nr[p]=!0,Nr[j]=Rr.entries,Nr.__toJS=Rr.toObject,Nr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+zr(e)},Dr(o,{toKeyedSeq:function(){return new Ft(this,!1)},filter:function(e,t){return Zt(this,Wt(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return Zt(this,qt(this,!1))},slice:function(e,t){return Zt(this,Ht(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=O(e,e<0?this.count():this.size);var n=this.slice(0,e);return Zt(this,1===r?n:n.concat(C(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.toKeyedSeq().findLastKey(e,t);return void 0===r?-1:r},first:function(){return this.get(0)},flatten:function(e){return Zt(this,$t(this,e,!1))},get:function(e,t){return(e=M(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=M(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Zt(this,function(e,t){var r=rr(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e,n){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(N,n),a=0;return new z((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?K(r,a++,t):K(r,a++,o.value,o)}))},r}(this,e))},interleave:function(){var e=[this].concat(C(arguments)),t=Xt(this.toSeq(),Q.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Zt(this,r)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Zt(this,Vt(this,e,t,!1))},zip:function(){return Zt(this,Xt(this,Kr,[this].concat(C(arguments))))},zipWith:function(e){var t=C(arguments);return t[0]=this,Zt(this,Xt(this,e,t))}}),o.prototype[m]=!0,o.prototype[f]=!0,Dr(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Rr.includes,Dr(G,n.prototype),Dr(Q,o.prototype),Dr(J,i.prototype),Dr(xe,n.prototype),Dr(Se,o.prototype),Dr(we,i.prototype),{Iterable:r,Seq:$,Collection:Ee,Map:Ke,OrderedMap:Dt,List:ht,Stack:Cr,Set:dr,OrderedSet:yr,Record:ar,Range:be,Repeat:ve,is:_e,fromJS:pe}},_.exports=g();var y=v.exports,b=y.OrderedMap,E={createFromArray:function(e){return b(e.map((function(e){return[e.getKey(),e]})))}};var x=y,S=x.Map,w=x.OrderedSet,C=x.Record,k=w(),M={style:k,entity:null},A=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getStyle=function(){return this.get("style")},o.getEntity=function(){return this.get("entity")},o.hasStyle=function(e){return this.getStyle().includes(e)},n.applyStyle=function(e,t){var r=e.set("style",e.getStyle().add(t));return n.create(r)},n.removeStyle=function(e,t){var r=e.set("style",e.getStyle().remove(t));return n.create(r)},n.applyEntity=function(e,t){var r=e.getEntity()===t?e:e.set("entity",t);return n.create(r)},n.create=function(e){if(!e)return T;var t=S({style:k,entity:null}).merge(e),r=O.get(t);if(r)return r;var o=new n(t);return O=O.set(t,o),o},n.fromJS=function(e){var t=e.style,r=e.entity;return new n({style:Array.isArray(t)?w(t):t,entity:Array.isArray(r)?w(r):r})},n}(C(M)),T=new A,O=S([[S(M),T]]);A.EMPTY=T;var I=A;var D=function(e,t,r,n){if(e.size){var o=0;e.reduce((function(e,i,a){return t(e,i)||(r(e)&&n(o,a),o=a),i})),r(e.last())&&n(o,e.count())}};var R=I,N=D,P=y,B=P.List,F=P.Map,j=P.OrderedSet,z=P.Record,K=P.Repeat,L=j(),U=z({key:"",type:"unstyled",text:"",characterList:B(),depth:0,data:F()}),q=function(e){var t,r;function n(t){return e.call(this,function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=B(K(R.EMPTY,r.length))),e}(t))||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():L},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.findStyleRanges=function(e,t){N(this.getCharacterList(),W,e,t)},o.findEntityRanges=function(e,t){N(this.getCharacterList(),H,e,t)},n}(U);function W(e,t){return e.getStyle()===t.getStyle()}function H(e,t){return e.getEntity()===t.getEntity()}var V=q;var $=I,G=D,Q=y,J=Q.List,X=Q.Map,Z=Q.OrderedSet,Y=Q.Record,ee=Q.Repeat,te=Z(),re={parent:null,characterList:J(),data:X(),depth:0,key:"",text:"",type:"unstyled",children:J(),prevSibling:null,nextSibling:null},ne=function(e,t){return e.getStyle()===t.getStyle()},oe=function(e,t){return e.getEntity()===t.getEntity()},ie=function(e){var t,r;function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return e.call(this,function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=J(ee($.EMPTY,r.length))),e}(t))||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():te},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.getChildKeys=function(){return this.get("children")},o.getParentKey=function(){return this.get("parent")},o.getPrevSiblingKey=function(){return this.get("prevSibling")},o.getNextSiblingKey=function(){return this.get("nextSibling")},o.findStyleRanges=function(e,t){G(this.getCharacterList(),ne,e,t)},o.findEntityRanges=function(e,t){G(this.getCharacterList(),oe,e,t)},n}(Y(re)),ae=ie,se=I,ce=y.Map;function le(e,t,r,n){var o=e.getBlockMap(),i=t.getStartKey(),a=t.getStartOffset(),s=t.getEndKey(),c=t.getEndOffset(),l=o.skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===s})).concat(ce([[s,o.get(s)]])).map((function(e,t){var o,l;i===s?(o=a,l=c):(o=t===i?a:0,l=t===s?c:e.getLength());for(var u,d=e.getCharacterList();o<l;)u=d.get(o),d=d.set(o,n?se.applyStyle(u,r):se.removeStyle(u,r)),o++;return e.set("characterList",d)}));return e.merge({blockMap:o.merge(l),selectionBefore:t,selectionAfter:t})}var ue={add:function(e,t,r){return le(e,t,r,!0)},remove:function(e,t,r){return le(e,t,r,!1)}},de=I;var pe=function(e,t,r,n){for(var o=t,i=e.getCharacterList();o<r;)i=i.set(o,de.applyEntity(i.get(o),n)),o++;return e.set("characterList",i)},me=pe,fe=y;var he=function(e,t,r){var n=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=n.skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).toOrderedMap().merge(fe.OrderedMap([[a,n.get(a)]])).map((function(e,t){var n=t===o?i:0,c=t===a?s:e.getLength();return me(e,n,c,r)}));return e.merge({blockMap:n.merge(c),selectionBefore:t,selectionAfter:t})},_e={getRemovalRange:function(e,t,r,n,o){var i=r.split(" ");i=i.map((function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<i.length-1)return e+" ";return e}));for(var a,s=n,c=null,l=null,u=0;u<i.length;u++){if(e<(a=s+i[u].length)&&s<t)null!==c||(c=s),l=a;else if(null!==c)break;s=a}var d=n+r.length,p=c===n,m=l===d;return(!p&&m||p&&!m)&&("forward"===o?l!==d&&l++:c!==n&&c--),{start:c,end:l}}},ge=function(e){};var ve=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(ge(),!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(i=new Error(t.replace(/%s/g,(function(){return String(n[a++])})))).name="Invariant Violation"}throw i.framesToPop=1,i}},ye=ve;var be=function(e,t){var r=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){r.push({start:e,end:t})})),r.length||ye(!1),r},Ee=_e,xe=be,Se=ve;function we(e,t,r,n,o,i,a){var s=r.getStartOffset(),c=r.getEndOffset(),l=e.__get(o).getMutability(),u=a?s:c;if("MUTABLE"===l)return r;var d=xe(t,o).filter((function(e){return u<=e.end&&u>=e.start}));1!=d.length&&Se(!1);var p=d[0];if("IMMUTABLE"===l)return r.merge({anchorOffset:p.start,focusOffset:p.end,isBackward:!1});i||(a?c=p.end:s=p.start);var m=Ee.getRemovalRange(s,c,t.getText().slice(p.start,p.end),p.start,n);return r.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1})}var Ce=function(e,t,r,n,o){var i=n.getStartOffset(),a=n.getEndOffset(),s=t.getEntityAt(i),c=r.getEntityAt(a-1);if(!s&&!c)return n;var l=n;if(s&&s===c)l=we(e,t,l,o,s,!0,!0);else if(s&&c){var u=we(e,t,l,o,s,!1,!0),d=we(e,r,l,o,c,!1,!1);l=l.merge({anchorOffset:u.getAnchorOffset(),focusOffset:d.getFocusOffset(),isBackward:!1})}else if(s){var p=we(e,t,l,o,s,!1,!0);l=l.merge({anchorOffset:p.getStartOffset(),isBackward:!1})}else if(c){var m=we(e,r,l,o,c,!1,!1);l=l.merge({focusOffset:m.getEndOffset(),isBackward:!1})}return l},ke={},Me=Math.pow(2,24);var Ae=function(){for(var e;void 0===e||ke.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*Me).toString(32);return ke[e]=!0,e},Te=ae,Oe=Ae,Ie=y.OrderedMap,De=function(e){return e.first()instanceof Te?function(e){var t,r={};return Ie(e.withMutations((function(e){e.forEach((function(n,o){var i=n.getKey(),a=n.getNextSiblingKey(),s=n.getPrevSiblingKey(),c=n.getChildKeys(),l=n.getParentKey(),u=Oe();if(r[i]=u,a&&(e.get(a)?e.setIn([a,"prevSibling"],u):e.setIn([i,"nextSibling"],null)),s&&(e.get(s)?e.setIn([s,"nextSibling"],u):e.setIn([i,"prevSibling"],null)),l&&e.get(l)){var d=e.get(l).getChildKeys();e.setIn([l,"children"],d.set(d.indexOf(n.getKey()),u))}else e.setIn([i,"parent"],null),t&&(e.setIn([t.getKey(),"nextSibling"],u),e.setIn([i,"prevSibling"],r[t.getKey()])),t=e.get(i);c.forEach((function(t){e.get(t)?e.setIn([t,"parent"],u):e.setIn([i,"children"],n.getChildKeys().filter((function(e){return e!==t})))}))}))})).toArray().map((function(e){return[r[e.getKey()],e.set("key",r[e.getKey()])]})))}(e):function(e){return Ie(e.toArray().map((function(e){var t=Oe();return[t,e.set("key",t)]})))}(e)},Re=I,Ne=D,Pe=ve;function Be(e,t,r){var n=t.getCharacterList(),o=r>0?n.get(r-1):void 0,i=r<n.count()?n.get(r):void 0,a=o?o.getEntity():void 0,s=i?i.getEntity():void 0;if(s&&s===a&&"MUTABLE"!==e.__get(s).getMutability()){for(var c,l=function(e,t,r){var n;return Ne(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=r&&t>=r&&(n={start:e,end:t})})),"object"!=typeof n&&Pe(!1),n}(n,s,r),u=l.start,d=l.end;u<d;)c=n.get(u),n=n.set(u,Re.applyEntity(c,null)),u++;return t.set("characterList",n)}return t}var Fe=function(e,t){var r=e.getBlockMap(),n=e.getEntityMap(),o={},i=t.getStartKey(),a=t.getStartOffset(),s=r.get(i),c=Be(n,s,a);c!==s&&(o[i]=c);var l=t.getEndKey(),u=t.getEndOffset(),d=r.get(l);i===l&&(d=c);var p=Be(n,d,u);return p!==d&&(o[l]=p),Object.keys(o).length?e.merge({blockMap:r.merge(o),selectionAfter:t}):e.set("selectionAfter",t)},je=De,ze=Fe,Ke=function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=t.getEndKey(),i=t.getEndOffset(),a=ze(e,t).getBlockMap(),s=a.keySeq(),c=s.indexOf(r),l=s.indexOf(o)+1;return je(a.slice(c,l).map((function(e,t){var a=e.getText(),s=e.getCharacterList();return r===o?e.merge({text:a.slice(n,i),characterList:s.slice(n,i)}):t===r?e.merge({text:a.slice(n),characterList:s.slice(n)}):t===o?e.merge({text:a.slice(0,i),characterList:s.slice(0,i)}):e})))};var Le=function(e,t,r){var n=e;if(r===n.count())t.forEach((function(e){n=n.push(e)}));else if(0===r)t.reverse().forEach((function(e){n=n.unshift(e)}));else{var o=n.slice(0,r),i=n.slice(r);n=o.concat(t,i).toList()}return n},Ue=E,qe=ae,We=Le,He=ve,Ve=De,$e=y.List,Ge=function(e,t,r,n,o,i){var a=r.first()instanceof qe,s=[],c=n.size,l=r.get(o),u=n.first(),d=n.last(),p=d.getLength(),m=d.getKey(),f=a&&(!l.getChildKeys().isEmpty()||!u.getChildKeys().isEmpty());r.forEach((function(e,t){t===o?(f?s.push(e):s.push(function(e,t,r){var n=e.getText(),o=e.getCharacterList(),i=n.slice(0,t),a=o.slice(0,t),s=r.first();return e.merge({text:i+s.getText(),characterList:a.concat(s.getCharacterList()),type:i?e.getType():s.getType(),data:s.getData()})}(e,i,n)),n.slice(f?0:1,c-1).forEach((function(e){return s.push(e)})),s.push(function(e,t,r){var n=e.getText(),o=e.getCharacterList(),i=n.length,a=n.slice(t,i),s=o.slice(t,i),c=r.last();return c.merge({text:c.getText()+a,characterList:c.getCharacterList().concat(s),data:c.getData()})}(e,i,n))):s.push(e)}));var h=Ue.createFromArray(s);return a&&(h=function(e,t,r,n){return e.withMutations((function(t){var o=r.getKey(),i=n.getKey(),a=r.getNextSiblingKey(),s=r.getParentKey(),c=function(e,t){var r=e.getKey(),n=e,o=[];for(t.get(r)&&o.push(r);n&&n.getNextSiblingKey();){var i=n.getNextSiblingKey();if(!i)break;o.push(i),n=t.get(i)}return o}(n,e),l=c[c.length-1];if(t.get(i)?(t.setIn([o,"nextSibling"],i),t.setIn([i,"prevSibling"],o)):(t.setIn([o,"nextSibling"],n.getNextSiblingKey()),t.setIn([n.getNextSiblingKey(),"prevSibling"],o)),t.setIn([l,"nextSibling"],a),a&&t.setIn([a,"prevSibling"],l),c.forEach((function(e){return t.setIn([e,"parent"],s)})),s){var u=e.get(s).getChildKeys(),d=u.indexOf(o)+1,p=u.toArray();p.splice.apply(p,[d,0].concat(c)),t.setIn([s,"children"],$e(p))}}))}(h,0,l,u)),e.merge({blockMap:h,selectionBefore:t,selectionAfter:t.merge({anchorKey:m,anchorOffset:p,focusKey:m,focusOffset:p,isBackward:!1})})},Qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||He(!1);var o=e.getBlockMap(),i=Ve(r),a=t.getStartKey(),s=t.getStartOffset(),c=o.get(a);return c instanceof qe&&(c.getChildKeys().isEmpty()||He(!1)),1===i.size?function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"REPLACE_WITH_NEW_DATA",s=r.get(o),c=s.getText(),l=s.getCharacterList(),u=o,d=i+n.getText().length,p=null;switch(a){case"MERGE_OLD_DATA_TO_NEW_DATA":p=n.getData().merge(s.getData());break;case"REPLACE_WITH_NEW_DATA":p=n.getData()}var m=s.getType();c&&"unstyled"===m&&(m=n.getType());var f=s.merge({text:c.slice(0,i)+n.getText()+c.slice(i),characterList:We(l,n.getCharacterList(),i),type:m,data:p});return e.merge({blockMap:r.set(o,f),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d,isBackward:!1})})}(e,t,o,i.first(),a,s,n):Ge(e,t,o,i,a,s)},Je=Le,Xe=ve,Ze=y.Repeat;var Ye=function(e,t,r,n){t.isCollapsed()||Xe(!1);var o=null;if(null!=r&&(o=r.length),null==o||0===o)return e;var i=e.getBlockMap(),a=t.getStartKey(),s=t.getStartOffset(),c=i.get(a),l=c.getText(),u=c.merge({text:l.slice(0,s)+r+l.slice(s,c.getLength()),characterList:Je(c.getCharacterList(),Ze(n,o).toList(),s)}),d=s+o;return e.merge({blockMap:i.set(a,u),selectionAfter:t.merge({anchorOffset:d,focusOffset:d})})},et=y.Map;var tt=function(e,t,r){var n=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),a=i.toSeq().skipUntil((function(e,t){return t===n})).takeUntil((function(e,t){return t===o})).concat(et([[o,i.get(o)]])).map(r);return e.merge({blockMap:i.merge(a),selectionBefore:t,selectionAfter:t})},rt=ae,nt=function(e,t){if(!(e instanceof rt))return null;var r=e.getNextSiblingKey();if(r)return r;var n=e.getParentKey();if(!n)return null;for(var o=t.get(n);o&&!o.getNextSiblingKey();){var i=o.getParentKey();o=i?t.get(i):null}return o?o.getNextSiblingKey():null},ot=ae,it=nt,at=y;at.List;var st=at.Map,ct=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},lt=function(e,t){var r=[];if(!e)return r;for(var n=t.get(e);n&&n.getParentKey();){var o=n.getParentKey();o&&r.push(o),n=o?t.get(o):null}return r},ut=function(e,t,r){if(!e)return null;for(var n=r.get(e.getKey()).getNextSiblingKey();n&&!t.get(n);)n=r.get(n).getNextSiblingKey()||null;return n},dt=function(e,t,r){if(!e)return null;for(var n=r.get(e.getKey()).getPrevSiblingKey();n&&!t.get(n);)n=r.get(n).getPrevSiblingKey()||null;return n},pt=function(e,t,r,n){return e.withMutations((function(o){if(ct(t.getKey(),o,(function(e){return e.merge({nextSibling:ut(e,o,n),prevSibling:dt(e,o,n)})})),ct(r.getKey(),o,(function(e){return e.merge({nextSibling:ut(e,o,n),prevSibling:dt(e,o,n)})})),lt(t.getKey(),n).forEach((function(e){return ct(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:ut(e,o,n),prevSibling:dt(e,o,n)})}))})),ct(t.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),ct(t.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:ut(e,o,n)})})),ct(r.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:dt(e,o,n)})})),ct(r.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:r.getNextSiblingKey()})})),lt(r.getKey(),n).forEach((function(e){ct(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:ut(e,o,n),prevSibling:dt(e,o,n)})}))})),function(e,t){var r=[];if(!e)return r;for(var n=it(e,t);n&&t.get(n);){var o=t.get(n);r.push(n),n=o.getParentKey()?it(o,t):null}return r}(r,n).forEach((function(e){return ct(e,o,(function(e){return e.merge({nextSibling:ut(e,o,n),prevSibling:dt(e,o,n)})}))})),null==e.get(t.getKey())&&null!=e.get(r.getKey())&&r.getParentKey()===t.getKey()&&null==r.getPrevSiblingKey()){var i=t.getPrevSiblingKey();ct(r.getKey(),o,(function(e){return e.merge({prevSibling:i})})),ct(i,o,(function(e){return e.merge({nextSibling:r.getKey()})}));var a=i?e.get(i):null,s=a?a.getParentKey():null;if(t.getChildKeys().forEach((function(e){ct(e,o,(function(e){return e.merge({parent:s})}))})),null!=s){var c=e.get(s);ct(s,o,(function(e){return e.merge({children:c.getChildKeys().concat(t.getChildKeys())})}))}ct(t.getChildKeys().find((function(t){return null===e.get(t).getNextSiblingKey()})),o,(function(e){return e.merge({nextSibling:t.getNextSiblingKey()})}))}}))},mt=function(e,t,r){if(0===t)for(;t<r;)e=e.shift(),t++;else if(r===e.count())for(;r>t;)e=e.pop(),r--;else{var n=e.slice(0,t),o=e.slice(r);e=n.concat(o).toList()}return e},ft=function(e,t){if(t.isCollapsed())return e;var r,n=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=n.get(o),l=n.get(a),u=c instanceof ot,d=[];if(u){var p=l.getChildKeys(),m=lt(a,n);l.getNextSiblingKey()&&(d=d.concat(m)),p.isEmpty()||(d=d.concat(m.concat([a]))),d=d.concat(lt(it(l,n),n))}r=c===l?mt(c.getCharacterList(),i,s):c.getCharacterList().slice(0,i).concat(l.getCharacterList().slice(s));var f=c.merge({text:c.getText().slice(0,i)+l.getText().slice(s),characterList:r}),h=u&&0===i&&0===s&&l.getParentKey()===o&&null==l.getPrevSiblingKey()?st([[o,null]]):n.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).filter((function(e,t){return-1===d.indexOf(t)})).concat(st([[a,null]])).map((function(e,t){return t===o?f:null})),_=n.merge(h).filter((function(e){return!!e}));return u&&c!==l&&(_=pt(_,c,l,n)),e.merge({blockMap:_,selectionBefore:t,selectionAfter:t.merge({anchorKey:o,anchorOffset:i,focusKey:o,focusOffset:i,isBackward:!1})})},ht=ae,_t=Ae,gt=y,vt=ve,yt=tt,bt=gt.List,Et=gt.Map,xt=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},St=function(e,t){t.isCollapsed()||vt(!1);var r=t.getAnchorKey(),n=e.getBlockMap(),o=n.get(r),i=o.getText();if(!i){var a=o.getType();if("unordered-list-item"===a||"ordered-list-item"===a)return yt(e,t,(function(e){return e.merge({type:"unstyled",depth:0})}))}var s=t.getAnchorOffset(),c=o.getCharacterList(),l=_t(),u=o instanceof ht,d=o.merge({text:i.slice(0,s),characterList:c.slice(0,s)}),p=d.merge({key:l,text:i.slice(s),characterList:c.slice(s),data:Et()}),m=n.toSeq().takeUntil((function(e){return e===o})),f=n.toSeq().skipUntil((function(e){return e===o})).rest(),h=m.concat([[r,d],[l,p]],f).toOrderedMap();return u&&(o.getChildKeys().isEmpty()||vt(!1),h=function(e,t,r){return e.withMutations((function(e){var n=t.getKey(),o=r.getKey();xt(t.getParentKey(),e,(function(e){var t=e.getChildKeys(),r=t.indexOf(n)+1,i=t.toArray();return i.splice(r,0,o),e.merge({children:bt(i)})})),xt(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:o})})),xt(n,e,(function(e){return e.merge({nextSibling:o})})),xt(o,e,(function(e){return e.merge({prevSibling:n})}))}))}(h,d,p)),e.merge({blockMap:h,selectionBefore:t,selectionAfter:t.merge({anchorKey:l,anchorOffset:0,focusKey:l,focusOffset:0,isBackward:!1})})},wt=I,Ct=ue,kt=he,Mt=Ce,At=Ke,Tt=Qe,Ot=Ye,It=ve,Dt=tt,Rt=Fe,Nt=ft,Pt=St,Bt=y.OrderedSet,Ft={replaceText:function(e,t,r,n,o){var i=Rt(e,t),a=Nt(i,t),s=wt.create({style:n||Bt(),entity:o||null});return Ot(a,a.getSelectionAfter(),r,s)},insertText:function(e,t,r,n,o){return t.isCollapsed()||It(!1),Ft.replaceText(e,t,r,n,o)},moveText:function(e,t,r){var n=At(e,t),o=Ft.removeRange(e,t,"backward");return Ft.replaceWithFragment(o,r,n)},replaceWithFragment:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA",o=Rt(e,t),i=Nt(o,t);return Tt(i,i.getSelectionAfter(),r,n)},removeRange:function(e,t,r){var n,o,i,a;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),n=t.getAnchorKey(),o=t.getFocusKey(),i=e.getBlockForKey(n),a=e.getBlockForKey(o);var s=t.getStartOffset(),c=t.getEndOffset(),l=i.getEntityAt(s),u=a.getEntityAt(c-1);if(n===o&&l&&l===u){var d=Mt(e.getEntityMap(),i,a,t,r);return Nt(e,d)}var p=Rt(e,t);return Nt(p,t)},splitBlock:function(e,t){var r=Rt(e,t),n=Nt(r,t);return Pt(n,n.getSelectionAfter())},applyInlineStyle:function(e,t,r){return Ct.add(e,t,r)},removeInlineStyle:function(e,t,r){return Ct.remove(e,t,r)},setBlockType:function(e,t,r){return Dt(e,t,(function(e){return e.merge({type:r,depth:0})}))},setBlockData:function(e,t,r){return Dt(e,t,(function(e){return e.merge({data:r})}))},mergeBlockData:function(e,t,r){return Dt(e,t,(function(e){return e.merge({data:e.getData().merge(r)})}))},applyEntity:function(e,t,r){var n=Rt(e,t);return kt(n,t,r)}},jt=Ft;var zt=function(e){return Object.keys(e).map((function(t){return e[t]}))};function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lt=D,Ut=zt,qt=y,Wt=qt.List,Ht=qt.Repeat,Vt=qt.Record,$t=function(){return!0},Gt=Vt({start:null,end:null}),Qt=Vt({start:null,end:null,decoratorKey:null,leaves:null}),Jt={generate:function(e,t,r){var n=t.getLength();if(!n)return Wt.of(new Qt({start:0,end:0,decoratorKey:null,leaves:Wt.of(new Gt({start:0,end:0}))}));var o=[],i=r?r.getDecorations(t,e):Wt(Ht(null,n)),a=t.getCharacterList();return Lt(i,Zt,$t,(function(e,t){o.push(new Qt({start:e,end:t,decoratorKey:i.get(e),leaves:Xt(a.slice(e,t).toList(),e)}))})),Wt(o)},fromJS:function(e){var t=e.leaves,r=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["leaves"]);return new Qt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Kt(e,t,r[t])}))}return e}({},r,{leaves:null!=t?Wt(Array.isArray(t)?t:Ut(t)).map((function(e){return Gt(e)})):null}))}};function Xt(e,t){var r=[],n=e.map((function(e){return e.getStyle()})).toList();return Lt(n,Zt,$t,(function(e,n){r.push(new Gt({start:e+t,end:n+t}))})),Wt(r)}function Zt(e,t){return e===t}var Yt=Jt;var er=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getType=function(){return this.get("type")},o.getMutability=function(){return this.get("mutability")},o.getData=function(){return this.get("data")},n}((0,y.Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object})),tr=er;var rr=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var or=tr,ir=ve,ar=rr,sr=(0,y.Map)(),cr=ar();function lr(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var ur={getLastCreatedEntityKey:function(){return lr("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),ur.__getLastCreatedEntityKey()},create:function(e,t,r){return lr("DraftEntity.create","contentState.createEntity"),ur.__create(e,t,r)},add:function(e){return lr("DraftEntity.add","contentState.addEntity"),ur.__add(e)},get:function(e){return lr("DraftEntity.get","contentState.getEntity"),ur.__get(e)},__getAll:function(){return sr},__loadWithEntities:function(e){sr=e,cr=ar()},mergeData:function(e,t){return lr("DraftEntity.mergeData","contentState.mergeEntityData"),ur.__mergeData(e,t)},replaceData:function(e,t){return lr("DraftEntity.replaceData","contentState.replaceEntityData"),ur.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return cr},__create:function(e,t,r){return ur.__add(new or({type:e,mutability:t,data:r||{}}))},__add:function(e){return cr=ar(),sr=sr.set(cr,e),cr},__get:function(e){var t=sr.get(e);return t||ir(!1),t},__mergeData:function(e,t){var r=ur.__get(e),n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nr(e,t,r[t])}))}return e}({},r.getData(),t),o=r.set("data",n);return sr=sr.set(e,o),o},__replaceData:function(e,t){var r=ur.__get(e).set("data",t);return sr=sr.set(e,r),r}},dr=ur;var pr=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},o.getAnchorKey=function(){return this.get("anchorKey")},o.getAnchorOffset=function(){return this.get("anchorOffset")},o.getFocusKey=function(){return this.get("focusKey")},o.getFocusOffset=function(){return this.get("focusOffset")},o.getIsBackward=function(){return this.get("isBackward")},o.getHasFocus=function(){return this.get("hasFocus")},o.hasEdgeWithin=function(e,t,r){var n=this.getAnchorKey(),o=this.getFocusKey();if(n===o&&n===e){var i=this.getStartOffset(),a=this.getEndOffset();return t<=i&&i<=r||t<=a&&a<=r}if(e!==n&&e!==o)return!1;var s=e===n?this.getAnchorOffset():this.getFocusOffset();return t<=s&&r>=s},o.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},o.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},o.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},o.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},o.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},n.createEmpty=function(e){return new n({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},n}((0,y.Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1})),mr=pr,fr=function(e){return!("undefined"==typeof window||!window.__DRAFT_GKX)&&!!window.__DRAFT_GKX[e]},hr=new RegExp("\r","g");var _r=function(e){return e.replace(hr,"")};function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){vr(e,t,r[t])}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=E,br=I,Er=V,xr=ae,Sr=dr,wr=mr,Cr=Ae,kr=zt,Mr=fr,Ar=y,Tr=_r,Or=Ar.List,Ir=Ar.Record,Dr=Ar.Repeat,Rr=Ar.Map,Nr=Ar.OrderedMap,Pr=Ir({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}),Br=Mr("draft_tree_data_support")?xr:Er,Fr=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getEntityMap=function(){return Sr},o.getBlockMap=function(){return this.get("blockMap")},o.getSelectionBefore=function(){return this.get("selectionBefore")},o.getSelectionAfter=function(){return this.get("selectionAfter")},o.getBlockForKey=function(e){return this.getBlockMap().get(e)},o.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,r){return r===e})).skip(1).first()},o.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,r){return r===e})).skip(1).first()},o.getBlocksAsArray=function(){return this.getBlockMap().toArray()},o.getFirstBlock=function(){return this.getBlockMap().first()},o.getLastBlock=function(){return this.getBlockMap().last()},o.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},o.getLastCreatedEntityKey=function(){return Sr.__getLastCreatedEntityKey()},o.hasText=function(){var e=this.getBlockMap();return e.size>1||escape(e.first().getText()).replace(/%u200B/g,"").length>0},o.createEntity=function(e,t,r){return Sr.__create(e,t,r),this},o.mergeEntityData=function(e,t){return Sr.__mergeData(e,t),this},o.replaceEntityData=function(e,t){return Sr.__replaceData(e,t),this},o.addEntity=function(e){return Sr.__add(e),this},o.getEntity=function(e){return Sr.__get(e)},o.getAllEntities=function(){return Sr.__getAll()},o.loadWithEntities=function(e){return Sr.__loadWithEntities(e)},n.createFromBlockArray=function(e,t){var r=Array.isArray(e)?e:e.contentBlocks,o=yr.createFromArray(r),i=o.isEmpty()?new wr:wr.createEmpty(o.first().getKey());return new n({blockMap:o,entityMap:t||Sr,selectionBefore:i,selectionAfter:i})},n.createFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(t).map((function(e){return e=Tr(e),new Br({key:Cr(),text:e,type:"unstyled",characterList:Or(Dr(br.EMPTY,e.length))})}));return n.createFromBlockArray(r)},n.fromJS=function(e){return new n(gr({},e,{blockMap:Nr(e.blockMap).map(n.createContentBlockFromJS),selectionBefore:new wr(e.selectionBefore),selectionAfter:new wr(e.selectionAfter)}))},n.createContentBlockFromJS=function(e){var t=e.characterList;return new Br(gr({},e,{data:Rr(e.data),characterList:null!=t?Or((Array.isArray(t)?t:kr(t)).map((function(e){return br.fromJS(e)}))):void 0}))},n}(Pr),jr=Fr,zr=ve,Kr="LTR",Lr="RTL",Ur=null;function qr(e){return e===Kr||e===Lr}function Wr(e){return qr(e)||zr(!1),e===Kr?"ltr":"rtl"}function Hr(e){Ur=e}var Vr={NEUTRAL:"NEUTRAL",LTR:Kr,RTL:Lr,isStrong:qr,getHTMLDir:Wr,getHTMLDirIfDifferent:function(e,t){return qr(e)||zr(!1),qr(t)||zr(!1),e===t?null:Wr(e)},setGlobalDir:Hr,initGlobalDir:function(){Hr(Kr)},getGlobalDir:function(){return Ur||this.initGlobalDir(),Ur||zr(!1),Ur}},$r=Vr,Gr=ve,Qr="֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",Jr="؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾",Xr=new RegExp("["+"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"+Qr+Jr+"]"),Zr=new RegExp("["+Qr+Jr+"]");function Yr(e){var t=Xr.exec(e);return null==t?null:t[0]}function en(e){var t=Yr(e);return null==t?$r.NEUTRAL:Zr.exec(t)?$r.RTL:$r.LTR}function tn(e,t){if(t=t||$r.NEUTRAL,!e.length)return t;var r=en(e);return r===$r.NEUTRAL?t:r}function rn(e,t){return t||(t=$r.getGlobalDir()),$r.isStrong(t)||Gr(!1),tn(e,t)}var nn={firstStrongChar:Yr,firstStrongCharDir:en,resolveBlockDir:tn,getDirection:rn,isDirectionLTR:function(e,t){return rn(e,t)===$r.LTR},isDirectionRTL:function(e,t){return rn(e,t)===$r.RTL}};function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var an,sn=nn,cn=Vr,ln=ve,un=function(){function e(e){on(this,"_defaultDir",void 0),on(this,"_lastDir",void 0),e?cn.isStrong(e)||ln(!1):e=cn.getGlobalDir(),this._defaultDir=e,this.reset()}var t=e.prototype;return t.reset=function(){this._lastDir=this._defaultDir},t.getDirection=function(e){return this._lastDir=sn.getDirection(e,this._lastDir),this._lastDir},e}(),dn=un,pn=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")},mn=dn,fn=y,hn=pn,_n=fn.OrderedMap,gn={getDirectionMap:function(e,t){an?an.reset():an=new mn;var r=e.getBlockMap(),n=r.valueSeq().map((function(e){return hn(an).getDirection(e.getText())})),o=_n(r.keySeq().zip(n));return null!=t&&fn.is(t,o)?t:o}};function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){yn(e,t,r[t])}))}return e}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bn=Yt,En=jr,xn=gn,Sn=mr,wn=y,Cn=wn.OrderedSet,kn=wn.Record,Mn=wn.Stack,An=wn.OrderedMap,Tn=wn.List,On=kn({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:Mn(),selection:null,treeMap:null,undoStack:Mn()}),In=function(){t.createEmpty=function(e){return this.createWithText("",e)},t.createWithText=function(e,r){return t.createWithContent(En.createFromText(e),r)},t.createWithContent=function(e,r){if(0===e.getBlockMap().count())return t.createEmpty(r);var n=e.getBlockMap().first().getKey();return t.create({currentContent:e,undoStack:Mn(),redoStack:Mn(),decorator:r||null,selection:Sn.createEmpty(n)})},t.create=function(e){var r=e.currentContent,n=vn({},e,{treeMap:Rn(r,e.decorator),directionMap:xn.getDirectionMap(r)});return new t(new On(n))},t.fromJS=function(e){return new t(new On(vn({},e,{directionMap:null!=e.directionMap?An(e.directionMap):e.directionMap,inlineStyleOverride:null!=e.inlineStyleOverride?Cn(e.inlineStyleOverride):e.inlineStyleOverride,nativelyRenderedContent:null!=e.nativelyRenderedContent?En.fromJS(e.nativelyRenderedContent):e.nativelyRenderedContent,redoStack:null!=e.redoStack?Mn(e.redoStack.map((function(e){return En.fromJS(e)}))):e.redoStack,selection:null!=e.selection?new Sn(e.selection):e.selection,treeMap:null!=e.treeMap?An(e.treeMap).map((function(e){return Tn(e).map((function(e){return bn.fromJS(e)}))})):e.treeMap,undoStack:null!=e.undoStack?Mn(e.undoStack.map((function(e){return En.fromJS(e)}))):e.undoStack,currentContent:En.fromJS(e.currentContent)})))},t.set=function(e,r){return new t(e.getImmutable().withMutations((function(t){var n=t.get("decorator"),o=n;null===r.decorator?o=null:r.decorator&&(o=r.decorator);var i=r.currentContent||e.getCurrentContent();if(o!==n){var a,s=t.get("treeMap");return a=o&&n?function(e,t,r,n,o){return r.merge(t.toSeq().filter((function(t){return n.getDecorations(t,e)!==o.getDecorations(t,e)})).map((function(t){return bn.generate(e,t,n)})))}(i,i.getBlockMap(),s,o,n):Rn(i,o),void t.merge({decorator:o,treeMap:a,nativelyRenderedContent:null})}i!==e.getCurrentContent()&&t.set("treeMap",function(e,t,r,n){var o=e.getCurrentContent().set("entityMap",r),i=o.getBlockMap(),a=e.getImmutable().get("treeMap");return a.merge(t.toSeq().filter((function(e,t){return e!==i.get(t)})).map((function(e){return bn.generate(o,e,n)})))}(e,i.getBlockMap(),i.getEntityMap(),o)),t.merge(r)})))};var e=t.prototype;function t(e){yn(this,"_immutable",void 0),this._immutable=e}return e.toJS=function(){return this.getImmutable().toJS()},e.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.getSelection=function(){return this.getImmutable().get("selection")},e.getDecorator=function(){return this.getImmutable().get("decorator")},e.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},t.setInlineStyleOverride=function(e,r){return t.set(e,{inlineStyleOverride:r})},e.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),r=this.getSelection();return r.isCollapsed()?function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=e.getBlockForKey(r);if(n>0)return o.getInlineStyleAt(n-1);if(o.getLength())return o.getInlineStyleAt(0);return Nn(e,r)}(t,r):function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=e.getBlockForKey(r);if(n<o.getLength())return o.getInlineStyleAt(n);if(n>0)return o.getInlineStyleAt(n-1);return Nn(e,r)}(t,r)},e.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.getDirectionMap=function(){return this.getImmutable().get("directionMap")},t.acceptSelection=function(e,t){return Dn(e,t,!1)},t.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),Dn(e,t,!0)},t.moveSelectionToEnd=function(e){var r=e.getCurrentContent().getLastBlock(),n=r.getKey(),o=r.getLength();return t.acceptSelection(e,new Sn({anchorKey:n,anchorOffset:o,focusKey:n,focusOffset:o,isBackward:!1}))},t.moveFocusToEnd=function(e){var r=t.moveSelectionToEnd(e);return t.forceSelection(r,r.getSelection())},t.push=function(e,r,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.getCurrentContent()===r)return e;var i=xn.getDirectionMap(r,e.getDirectionMap());if(!e.getAllowUndo())return t.set(e,{currentContent:r,directionMap:i,lastChangeType:n,selection:r.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var a=e.getSelection(),s=e.getCurrentContent(),c=e.getUndoStack(),l=r;a!==s.getSelectionAfter()||function(e,t){var r=e.getLastChangeType();return t!==r||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(e,n)?(c=c.push(s),l=l.set("selectionBefore",a)):"insert-characters"!==n&&"backspace-character"!==n&&"delete-character"!==n||(l=l.set("selectionBefore",s.getSelectionBefore()));var u=e.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(n)&&(u=null);var d={currentContent:l,directionMap:i,undoStack:c,redoStack:Mn(),lastChangeType:n,selection:r.getSelectionAfter(),forceSelection:o,inlineStyleOverride:u};return t.set(e,d)},t.undo=function(e){if(!e.getAllowUndo())return e;var r=e.getUndoStack(),n=r.peek();if(!n)return e;var o=e.getCurrentContent(),i=xn.getDirectionMap(n,e.getDirectionMap());return t.set(e,{currentContent:n,directionMap:i,undoStack:r.shift(),redoStack:e.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},t.redo=function(e){if(!e.getAllowUndo())return e;var r=e.getRedoStack(),n=r.peek();if(!n)return e;var o=e.getCurrentContent(),i=xn.getDirectionMap(n,e.getDirectionMap());return t.set(e,{currentContent:n,directionMap:i,undoStack:e.getUndoStack().push(o),redoStack:r.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:n.getSelectionAfter()})},e.getImmutable=function(){return this._immutable},t}();function Dn(e,t,r){return In.set(e,{selection:t,forceSelection:r,nativelyRenderedContent:null,inlineStyleOverride:null})}function Rn(e,t){return e.getBlockMap().map((function(r){return bn.generate(e,r,t)})).toOrderedMap()}function Nn(e,t){var r=e.getBlockMap().reverse().skipUntil((function(e,r){return r===t})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return r?r.getInlineStyleAt(r.getLength()-1):Cn()}var Pn=In,Bn=ae,Fn=nt,jn=y,zn=ve,Kn=jn.OrderedMap,Ln=jn.List,Un=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},qn=function(e,t,r,n,o){if(!o)return e;var i="after"===n,a=t.getKey(),s=r.getKey(),c=t.getParentKey(),l=t.getNextSiblingKey(),u=t.getPrevSiblingKey(),d=r.getParentKey(),p=i?r.getNextSiblingKey():s,m=i?s:r.getPrevSiblingKey();return e.withMutations((function(e){Un(c,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(a))})})),Un(u,e,(function(e){return e.merge({nextSibling:l})})),Un(l,e,(function(e){return e.merge({prevSibling:u})})),Un(p,e,(function(e){return e.merge({prevSibling:a})})),Un(m,e,(function(e){return e.merge({nextSibling:a})})),Un(d,e,(function(e){var t=e.getChildKeys(),r=t.indexOf(s),n=i?r+1:0!==r?r-1:0,o=t.toArray();return o.splice(n,0,a),e.merge({children:Ln(o)})})),Un(a,e,(function(e){return e.merge({nextSibling:p,prevSibling:m,parent:d})}))}))},Wn=function(e,t,r,n){"replace"===n&&zn(!1);var o=r.getKey(),i=t.getKey();i===o&&zn(!1);var a=e.getBlockMap(),s=t instanceof Bn,c=[t],l=a.delete(i);s&&(c=[],l=a.withMutations((function(e){var r=t.getNextSiblingKey(),n=Fn(t,e);e.toSeq().skipUntil((function(e){return e.getKey()===i})).takeWhile((function(e){var t=e.getKey(),o=t===i,a=r&&t!==r,s=!r&&e.getParentKey()&&(!n||t!==n);return!!(o||a||s)})).forEach((function(t){c.push(t),e.delete(t.getKey())}))})));var u=l.toSeq().takeUntil((function(e){return e===r})),d=l.toSeq().skipUntil((function(e){return e===r})).skip(1),p=c.map((function(e){return[e.getKey(),e]})),m=Kn();if("before"===n){var f=e.getBlockBefore(o);f&&f.getKey()===t.getKey()&&zn(!1),m=u.concat([].concat(p,[[o,r]]),d).toOrderedMap()}else if("after"===n){var h=e.getBlockAfter(o);h&&h.getKey()===i&&zn(!1),m=u.concat([[o,r]].concat(p),d).toOrderedMap()}return e.merge({blockMap:qn(m,t,r,n,s),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:i,focusKey:i})})};function Hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Vn(e,t,r[t])}))}return e}function Vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $n=E,Gn=I,Qn=V,Jn=ae,Xn=jt,Zn=Pn,Yn=Ae,eo=y,to=Wn,ro=fr("draft_tree_data_support"),no=ro?Jn:Qn,oo=eo.List,io=eo.Repeat,ao={insertAtomicBlock:function(e,t,r){var n=e.getCurrentContent(),o=e.getSelection(),i=Xn.removeRange(n,o,"backward"),a=i.getSelectionAfter(),s=Xn.splitBlock(i,a),c=s.getSelectionAfter(),l=Xn.setBlockType(s,c,"atomic"),u=Gn.create({entity:t}),d={key:Yn(),type:"atomic",text:r,characterList:oo(io(u,r.length))},p={key:Yn(),type:"unstyled"};ro&&(d=Hn({},d,{nextSibling:p.key}),p=Hn({},p,{prevSibling:d.key}));var m=[new no(d),new no(p)],f=$n.createFromArray(m),h=Xn.replaceWithFragment(l,c,f),_=h.merge({selectionBefore:o,selectionAfter:h.getSelectionAfter().set("hasFocus",!0)});return Zn.push(e,_,"insert-fragment")},moveAtomicBlock:function(e,t,r,n){var o,i=e.getCurrentContent(),a=e.getSelection();if("before"===n||"after"===n){var s=i.getBlockForKey("before"===n?r.getStartKey():r.getEndKey());o=to(i,t,s,n)}else{var c=Xn.removeRange(i,r,"backward"),l=c.getSelectionAfter(),u=c.getBlockForKey(l.getFocusKey());if(0===l.getStartOffset())o=to(c,t,u,"before");else if(l.getEndOffset()===u.getLength())o=to(c,t,u,"after");else{var d=Xn.splitBlock(c,l),p=d.getSelectionAfter(),m=d.getBlockForKey(p.getFocusKey());o=to(d,t,m,"before")}}var f=o.merge({selectionBefore:a,selectionAfter:o.getSelectionAfter().set("hasFocus",!0)});return Zn.push(e,f,"move-block")}};var so=y.List,co=function(){function e(e){var t,r,n;n=void 0,(r="_decorators")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._decorators=e.slice()}var t=e.prototype;return t.getDecorations=function(e,t){var r=Array(e.getText().length).fill(null);return this._decorators.forEach((function(n,o){var i=0;(0,n.strategy)(e,(function(e,t){(function(e,t,r){for(var n=t;n<r;n++)if(null!=e[n])return!1;return!0})(r,e,t)&&(!function(e,t,r,n){for(var o=t;o<r;o++)e[o]=n}(r,e,t,o+"."+i),i++)}),t)})),so(r)},t.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},t.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();var lo=co;function uo(e){return e.replace(/\//g,"-")}var po=function(e){return"object"==typeof e?Object.keys(e).filter((function(t){return e[t]})).map(uo).join(" "):Array.prototype.map.call(arguments,uo).join(" ")},mo=t.reactExports,fo=po,ho=(0,y.Map)({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:mo.createElement("ul",{className:fo("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:mo.createElement("ol",{className:fo("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:mo.createElement("pre",{className:fo("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}}),_o={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}},go=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable;var bo=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))vo.call(r,a)&&(o[a]=r[a]);if(go){n=go(r);for(var s=0;s<n.length;s++)yo.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o},Eo={exports:{}};!function(e,t){!function(r,n){var o="function",i="undefined",a="object",s="string",c="model",l="name",u="type",d="vendor",p="version",m="architecture",f="console",h="mobile",_="tablet",g="smarttv",v="wearable",y="embedded",b={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return typeof e===s&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:n},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t===i?e:e.substring(0,255)}},E={rgx:function(e,t){for(var r,i,s,c,l,u,d=0;d<t.length&&!l;){var p=t[d],m=t[d+1];for(r=i=0;r<p.length&&!l;)if(l=p[r++].exec(e))for(s=0;s<m.length;s++)u=l[++i],typeof(c=m[s])===a&&c.length>0?2==c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3==c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):n:this[c[0]]=u?c[1].call(this,u,c[2]):n:4==c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):n):this[c]=u||n;d+=2}},str:function(e,t){for(var r in t)if(typeof t[r]===a&&t[r].length>0){for(var o=0;o<t[r].length;o++)if(b.has(t[r][o],e))return"?"===r?n:r}else if(b.has(t[r],e))return"?"===r?n:r;return e}},x={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[l,p],[/opios[\/\s]+([\w\.]+)/i],[p,[l,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[l,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[l,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[l,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[l,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[l,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[l,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[l],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[l,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[l,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,E.str,x.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,b.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[c,[d,"Samsung"],[u,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[c,[d,"Samsung"],[u,h]],[/\((ip(?:hone|od)[\s\w]*);/i],[c,[d,"Apple"],[u,h]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,"Apple"],[u,_]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[c,[d,"Huawei"],[u,_]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[c,[d,"Huawei"],[u,h]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[c,/_/g," "],[d,"Xiaomi"],[u,h]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[c,/_/g," "],[d,"Xiaomi"],[u,_]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[c,[d,"OPPO"],[u,h]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[c,[d,"Vivo"],[u,h]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[c,[d,"Realme"],[u,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[c,[d,"Motorola"],[u,h]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[d,"Motorola"],[u,_]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[c,[d,"LG"],[u,_]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[c,[d,"LG"],[u,h]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[c,[d,"Lenovo"],[u,_]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[c,/_/g," "],[d,"Nokia"],[u,h]],[/droid.+;\s(pixel\sc)[\s)]/i],[c,[d,"Google"],[u,_]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[c,[d,"Google"],[u,h]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,"Sony"],[u,h]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[c,"Xperia Tablet"],[d,"Sony"],[u,_]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[c,[d,"OnePlus"],[u,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[c,[d,"Amazon"],[u,_]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[c,"Fire Phone"],[d,"Amazon"],[u,h]],[/\((playbook);[\w\s\),;-]+(rim)/i],[c,d,[u,_]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[c,[d,"BlackBerry"],[u,h]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[c,[d,"ASUS"],[u,_]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[c,[d,"ASUS"],[u,h]],[/(nexus\s9)/i],[c,[d,"HTC"],[u,_]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[c,/_/g," "],[u,h]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[c,[d,"Acer"],[u,_]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[c,[d,"Meizu"],[u,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,c,[u,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[d,c,[u,_]],[/\s(surface\sduo)\s/i],[c,[d,"Microsoft"],[u,_]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[c,[d,"Fairphone"],[u,h]],[/\s(u304aa)\sbuild/i],[c,[d,"AT&T"],[u,h]],[/sie-(\w*)/i],[c,[d,"Siemens"],[u,h]],[/[;\/]\s?(rct\w+)\sbuild/i],[c,[d,"RCA"],[u,_]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[c,[d,"Dell"],[u,_]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[c,[d,"Verizon"],[u,_]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[c,[d,"Barnes & Noble"],[u,_]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[c,[d,"NuVision"],[u,_]],[/;\s(k88)\sbuild/i],[c,[d,"ZTE"],[u,_]],[/;\s(nx\d{3}j)\sbuild/i],[c,[d,"ZTE"],[u,h]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[c,[d,"Swiss"],[u,h]],[/[;\/]\s?(zur\d{3})\sbuild/i],[c,[d,"Swiss"],[u,_]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[c,[d,"Zeki"],[u,_]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[d,"Dragon Touch"],c,[u,_]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[c,[d,"Insignia"],[u,_]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[c,[d,"NextBook"],[u,_]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[d,"Voice"],c,[u,h]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[d,"LvTel"],c,[u,h]],[/;\s(ph-1)\s/i],[c,[d,"Essential"],[u,h]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[c,[d,"Envizen"],[u,_]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[c,[d,"MachSpeed"],[u,_]],[/[;\/]\s?tu_(1491)\sbuild/i],[c,[d,"Rotor"],[u,_]],[/(shield[\w\s]+)\sbuild/i],[c,[d,"Nvidia"],[u,_]],[/(sprint)\s(\w+)/i],[d,c,[u,h]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,"Microsoft"],[u,h]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,"Zebra"],[u,_]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,"Zebra"],[u,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[d,c,[u,f]],[/droid.+;\s(shield)\sbuild/i],[c,[d,"Nvidia"],[u,f]],[/(playstation\s[345portablevi]+)/i],[c,[d,"Sony"],[u,f]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[c,[d,"Microsoft"],[u,f]],[/smart-tv.+(samsung)/i],[d,[u,g]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,"Samsung"],[u,g]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[d,"LG"],[u,g]],[/(apple)\s?tv/i],[d,[c,"Apple TV"],[u,g]],[/crkey/i],[[c,"Chromecast"],[d,"Google"],[u,g]],[/droid.+aft([\w])(\sbuild\/|\))/i],[c,[d,"Amazon"],[u,g]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[u,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,b.trim],[c,b.trim],[u,g]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[u,g]],[/((pebble))app\/[\d\.]+\s/i],[d,c,[u,v]],[/droid.+;\s(glass)\s\d/i],[c,[d,"Google"],[u,v]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[c,[d,"Zebra"],[u,v]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[d,[u,y]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[c,[u,h]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[c,[u,_]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,b.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[d,"Generic"]],[/(phone)/i],[[u,h]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[l,[p,E.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,E.str,x.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[l,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[l,p],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[l,p]]},w=function(e,t){if("object"==typeof e&&(t=e,e=n),!(this instanceof w))return new w(e,t).getResult();var o=e||(void 0!==r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?b.extend(S,t):S;return this.getBrowser=function(){var e={name:n,version:n};return E.rgx.call(e,o,i.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:n};return E.rgx.call(e,o,i.cpu),e},this.getDevice=function(){var e={vendor:n,model:n,type:n};return E.rgx.call(e,o,i.device),e},this.getEngine=function(){var e={name:n,version:n};return E.rgx.call(e,o,i.engine),e},this.getOS=function(){var e={name:n,version:n};return E.rgx.call(e,o,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=typeof e===s&&e.length>255?b.trim(e,255):e,this},this.setUA(o),this};w.VERSION="0.7.28",w.BROWSER={NAME:l,MAJOR:"major",VERSION:p},w.CPU={ARCHITECTURE:m},w.DEVICE={MODEL:c,VENDOR:d,TYPE:u,CONSOLE:f,MOBILE:h,SMARTTV:g,TABLET:_,WEARABLE:v,EMBEDDED:y},w.ENGINE={NAME:l,VERSION:p},w.OS={NAME:l,VERSION:p},e.exports&&(t=e.exports=w),t.UAParser=w;var C=void 0!==r&&(r.jQuery||r.Zepto);if(C&&!C.ua){var k=new w;C.ua=k.getResult(),C.ua.get=function(){return k.getUA()},C.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var r in t)C.ua[r]=t[r]}}}("object"==typeof window?window:n.commonjsGlobal)}(Eo,Eo.exports);var xo=Eo.exports,So="Unknown",wo={"Mac OS":"Mac OS X"};var Co,ko=(new xo).getResult(),Mo=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(ko.browser.version),Ao={browserArchitecture:ko.cpu.architecture||So,browserFullVersion:ko.browser.version||So,browserMinorVersion:Mo.minor||So,browserName:ko.browser.name||So,browserVersion:ko.browser.major||So,deviceName:ko.device.model||So,engineName:ko.engine.name||So,engineVersion:ko.engine.version||So,platformArchitecture:ko.cpu.architecture||So,platformName:(Co=ko.os.name,wo[Co]||Co||So),platformVersion:ko.os.version||So,platformFullVersion:ko.os.version||So},To=ve,Oo=/\./,Io=/\|\|/,Do=/\s+\-\s+/,Ro=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,No=/^(\d*)(.*)/;function Po(e,t){var r=e.split(Io);return r.length>1?r.some((function(e){return Vo.contains(e,t)})):function(e,t){var r=e.split(Do);if(r.length>0&&r.length<=2||To(!1),1===r.length)return Bo(r[0],t);var n=r[0],o=r[1];return Lo(n)&&Lo(o)||To(!1),Bo(">="+n,t)&&Bo("<="+o,t)}(e=r[0].trim(),t)}function Bo(e,t){if(""===(e=e.trim()))return!0;var r,n=t.split(Oo),o=zo(e),i=o.modifier,a=o.rangeComponents;switch(i){case"<":return Fo(n,a);case"<=":return-1===(r=Ho(n,a))||0===r;case">=":return jo(n,a);case">":return function(e,t){return 1===Ho(e,t)}(n,a);case"~":case"~>":return function(e,t){var r=t.slice(),n=t.slice();n.length>1&&n.pop();var o=n.length-1,i=parseInt(n[o],10);Ko(i)&&(n[o]=i+1+"");return jo(e,r)&&Fo(e,n)}(n,a);default:return function(e,t){return 0===Ho(e,t)}(n,a)}}function Fo(e,t){return-1===Ho(e,t)}function jo(e,t){var r=Ho(e,t);return 1===r||0===r}function zo(e){var t=e.split(Oo),r=t[0].match(Ro);return r||To(!1),{modifier:r[1],rangeComponents:[r[2]].concat(t.slice(1))}}function Ko(e){return!isNaN(e)&&isFinite(e)}function Lo(e){return!zo(e).modifier}function Uo(e,t){for(var r=e.length;r<t;r++)e[r]="0"}function qo(e,t){var r=e.match(No)[1],n=t.match(No)[1],o=parseInt(r,10),i=parseInt(n,10);return Ko(o)&&Ko(i)&&o!==i?Wo(o,i):Wo(e,t)}function Wo(e,t){return typeof e!=typeof t&&To(!1),e>t?1:e<t?-1:0}function Ho(e,t){for(var r=function(e,t){Uo(e=e.slice(),(t=t.slice()).length);for(var r=0;r<t.length;r++){var n=t[r].match(/^[x*]$/i);if(n&&(t[r]=e[r]="0","*"===n[0]&&r===t.length-1))for(var o=r;o<e.length;o++)e[o]="0"}return Uo(t,e.length),[e,t]}(e,t),n=r[0],o=r[1],i=0;i<o.length;i++){var a=qo(n[i],o[i]);if(a)return a}return 0}var Vo={contains:function(e,t){return Po(e.trim(),t.trim())}},$o=Vo,Go=Object.prototype.hasOwnProperty;var Qo=function(e,t,r){if(!e)return null;var n={};for(var o in e)Go.call(e,o)&&(n[o]=t.call(r,e[o],o,e));return n};var Jo=function(e){var t={};return function(r){return t.hasOwnProperty(r)||(t[r]=e.call(this,r)),t[r]}},Xo=Ao,Zo=$o;function Yo(e,t,r,n){if(e===r)return!0;if(!r.startsWith(e))return!1;var o=r.slice(e.length);return!!t&&(o=n?n(o):o,Zo.contains(o,t))}function ei(e){return"Windows"===Xo.platformName?e.replace(/^\s*NT/,""):e}var ti=Qo({isBrowser:function(e){return Yo(Xo.browserName,Xo.browserFullVersion,e)},isBrowserArchitecture:function(e){return Yo(Xo.browserArchitecture,null,e)},isDevice:function(e){return Yo(Xo.deviceName,null,e)},isEngine:function(e){return Yo(Xo.engineName,Xo.engineVersion,e)},isPlatform:function(e){return Yo(Xo.platformName,Xo.platformFullVersion,e,ei)},isPlatformArchitecture:function(e){return Yo(Xo.platformArchitecture,null,e)}},Jo);var ri=function(e){return e&&e.ownerDocument?e.ownerDocument:document};var ni=function(e){return!(!e||!e.ownerDocument)&&e.nodeType===Node.ELEMENT_NODE},oi=ni;var ii=function e(t){if(oi(t)){var r=t,n=r.getAttribute("data-offset-key");if(n)return n;for(var o=0;o<r.childNodes.length;o++){var i=e(r.childNodes[o]);if(i)return i}}return null},ai=ri,si=ii;var ci=function(e){for(var t=e;t&&t!==ai(e).documentElement;){var r=si(t);if(null!=r)return r;t=t.parentNode}return null};var li=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window};function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var di=ti,pi=ci,mi=li,fi=ve,hi=pn,_i=y.Map,gi={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},vi=di.isBrowser("IE <= 11"),yi=function(){function e(e){var t=this;ui(this,"observer",void 0),ui(this,"container",void 0),ui(this,"mutations",void 0),ui(this,"onCharData",void 0),this.container=e,this.mutations=_i();var r=mi(e);r.MutationObserver&&!vi?this.observer=new r.MutationObserver((function(e){return t.registerMutations(e)})):this.onCharData=function(e){e.target instanceof Node||fi(!1),t.registerMutation({type:"characterData",target:e.target})}}var t=e.prototype;return t.start=function(){this.observer?this.observer.observe(this.container,gi):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},t.stopAndFlushMutations=function(){var e=this.observer;e?(this.registerMutations(e.takeRecords()),e.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var t=this.mutations;return this.mutations=_i(),t},t.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},t.getMutationTextContent=function(e){var t=e.type,r=e.target,n=e.removedNodes;if("characterData"===t){if(""!==r.textContent)return vi?r.textContent.replace("\n",""):r.textContent}else if("childList"===t){if(n&&n.length)return"";if(""!==r.textContent)return r.textContent}return null},t.registerMutation=function(e){var t=this.getMutationTextContent(e);if(null!=t){var r=hi(pi(e.target));this.mutations=this.mutations.set(r,t)}},e}(),bi=yi,Ei="-",xi={encode:function(e,t,r){return e+Ei+t+Ei+r},decode:function(e){var t=e.split(Ei).reverse(),r=t[0],n=t[1];return{blockKey:t.slice(2).reverse().join(Ei),decoratorKey:parseInt(n,10),leafKey:parseInt(r,10)}}},Si={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},wi={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};var Ci=function(e){return!(!e||!e.ownerDocument)&&(e.ownerDocument.defaultView?e instanceof e.ownerDocument.defaultView.HTMLElement:e instanceof HTMLElement)},ki=ve,Mi=Ci;var Ai=function(e){var t=e.editorContainer;return t||ki(!1),Mi(t.firstChild)||ki(!1),t.firstChild},Ti=xi,Oi=pn;var Ii=function(e,t,r,n,o){var i=Oi(e.getSelection());if(!t||!n)return i;var a=Ti.decode(t),s=a.blockKey,c=e.getBlockTree(s),l=c&&c.getIn([a.decoratorKey,"leaves",a.leafKey]),u=Ti.decode(n),d=u.blockKey,p=e.getBlockTree(d),m=p&&p.getIn([u.decoratorKey,"leaves",u.leafKey]);if(!l||!m)return i;var f=l.get("start"),h=m.get("start"),_=l?f+r:null,g=m?h+o:null;if(i.getAnchorKey()===s&&i.getAnchorOffset()===_&&i.getFocusKey()===d&&i.getFocusOffset()===g)return i;var v=!1;if(s===d){var y=l.get("end"),b=m.get("end");v=h===f&&b===y?o<r:h<f}else{v=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===s||e===d})).first()===d}return i.merge({anchorKey:s,anchorOffset:_,focusKey:d,focusOffset:g,isBackward:v})},Di=ci,Ri=ii,Ni=Ii,Pi=ve,Bi=ni,Fi=pn;function ji(e,t,r){var n=t,o=Di(n);(null!=o||e&&(e===n||e.firstChild===n)||Pi(!1),e===n)&&(n=n.firstChild,Bi(n)||Pi(!1),"true"!==(n=n).getAttribute("data-contents")&&Pi(!1),r>0&&(r=n.childNodes.length));if(0===r){var i=null;if(null!=o)i=o;else{var a=function(e){for(;e.firstChild&&(Bi(e.firstChild)&&"true"===e.firstChild.getAttribute("data-blocks")||Ri(e.firstChild));)e=e.firstChild;return e}(n);i=Fi(Ri(a))}return{key:i,offset:0}}var s=n.childNodes[r-1],c=null,l=null;if(Ri(s)){var u=function(e){for(;e.lastChild&&(Bi(e.lastChild)&&"true"===e.lastChild.getAttribute("data-blocks")||Ri(e.lastChild));)e=e.lastChild;return e}(s);c=Fi(Ri(u)),l=zi(u)}else c=Fi(o),l=zi(s);return{key:c,offset:l}}function zi(e){var t=e.textContent;return"\n"===t?0:t.length}var Ki=function(e,t,r,n,o,i){var a=r.nodeType===Node.TEXT_NODE,s=o.nodeType===Node.TEXT_NODE;if(a&&s)return{selectionState:Ni(e,Fi(Di(r)),n,Fi(Di(o)),i),needsRecovery:!1};var c=null,l=null,u=!0;return a?(c={key:Fi(Di(r)),offset:n},l=ji(t,o,i)):s?(l={key:Fi(Di(o)),offset:i},c=ji(t,r,n)):(c=ji(t,r,n),l=ji(t,o,i),r===o&&n===i&&(u=!!r.firstChild&&"BR"!==r.firstChild.nodeName)),{selectionState:Ni(e,c.key,c.offset,l.key,l.offset),needsRecovery:u}},Li=Ki;var Ui=function(e,t){var r=t.ownerDocument.defaultView.getSelection(),n=r.anchorNode,o=r.anchorOffset,i=r.focusNode,a=r.focusOffset;return 0===r.rangeCount||null==n||null==i?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:Li(e,t,n,o,i,a)},qi=wi,Wi=Pn,Hi=Ai,Vi=Ui;var $i=function(e){if(e._blockSelectEvents||e._latestEditorState!==e.props.editorState){if(e._blockSelectEvents){var t=e.props.editorState.getSelection();qi.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:(new Error).stack}),selectionState:JSON.stringify(t.toJS())})}}else{var r=e.props.editorState,n=Vi(r,Hi(e)),o=n.selectionState;o!==r.getSelection()&&(r=n.needsRecovery?Wi.forceSelection(r,o):Wi.acceptSelection(r,o),e.update(r))}};var Gi={notEmptyKey:function(e){return null!=e&&""!=e}},Qi=Gi.notEmptyKey;function Ji(e,t){return Qi(t)&&"MUTABLE"===e.__get(t).getMutability()?t:null}var Xi=function(e,t){var r;if(t.isCollapsed()){var n=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(r=e.getBlockForKey(n).getEntityAt(o-1))!==e.getBlockForKey(n).getEntityAt(o)?null:Ji(e.getEntityMap(),r):null}var i=t.getStartKey(),a=t.getStartOffset(),s=e.getBlockForKey(i);return r=a===s.getLength()?null:s.getEntityAt(a),Ji(e.getEntityMap(),r)},Zi=bi,Yi=jt,ea=xi,ta=Pn,ra=Si,na=$i,oa=Ai,ia=Ui,aa=Xi,sa=pn,ca=ti.isBrowser("IE"),la=!1,ua=!1,da=null;var pa,ma,fa={onCompositionStart:function(e){ua=!0,function(e){da||(da=new Zi(oa(e))).start()}(e)},onCompositionEnd:function(e){la=!1,ua=!1,setTimeout((function(){la||fa.resolveComposition(e)}),20)},onSelect:na,onKeyDown:function(e,t){if(!ua)return fa.resolveComposition(e),void e._onKeyDown(t);t.which!==ra.RIGHT&&t.which!==ra.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===ra.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!ua){var t=sa(da).stopAndFlushMutations();da=null,la=!0;var r=ta.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),t.size){var n=r.getCurrentContent();t.forEach((function(e,t){var o=ea.decode(t),i=o.blockKey,a=o.decoratorKey,s=o.leafKey,c=r.getBlockTree(i).getIn([a,"leaves",s]),l=c.start,u=c.end,d=r.getSelection().merge({anchorKey:i,focusKey:i,anchorOffset:l,focusOffset:u,isBackward:!1}),p=aa(n,d),m=n.getBlockForKey(i).getInlineStyleAt(l);n=Yi.replaceText(n,d,e,m,p),r=ta.set(r,{currentContent:n})}));var o=ia(r,oa(e)).selectionState;e.restoreEditorDOM();var i=ca?ta.forceSelection(r,o):ta.acceptSelection(r,o);e.update(ta.push(i,n,"insert-characters"))}else e.update(r)}}},ha=fa;function _a(){if(ma)return pa;ma=1;var e=bo;function r(){return r=e||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}var n=xi,o=t.reactExports,i=nn,a=Vr,s=function(e){var t,s;function c(){return e.apply(this,arguments)||this}return s=e,(t=c).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,c.prototype.render=function(){var e=this.props,t=e.block,s=e.children,c=e.contentState,l=e.decorator,u=e.decoratorKey,d=e.direction,p=e.leafSet,m=e.text,f=t.getKey(),h=p.get("leaves"),_=l.getComponentForKey(u),g=l.getPropsForKey(u),v=n.encode(f,parseInt(u,10),0),y=m.slice(h.first().get("start"),h.last().get("end")),b=a.getHTMLDirIfDifferent(i.getDirection(y),d);return o.createElement(_,r({},g,{contentState:c,decoratedText:y,dir:b,key:v,entityKey:t.getEntityAt(p.get("start")),offsetKey:v}),s)},c}(o.Component);return pa=s}function ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ya=t.reactExports,ba=ve,Ea=ni,xa=ti.isBrowser("IE <= 11");var Sa=function(e){var t,r;function n(t){var r;return va(ga(r=e.call(this,t)||this),"_forceFlag",void 0),va(ga(r),"_node",void 0),r._forceFlag=!1,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){var t=this._node,r=""===e.children;Ea(t)||ba(!1);var n=t;return r?!function(e){return xa?"\n"===e.textContent:"BR"===e.tagName}(n):n.textContent!==e.children},o.componentDidMount=function(){this._forceFlag=!this._forceFlag},o.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},o.render=function(){var e,t=this;return""===this.props.children?this._forceFlag?(e=function(e){return t._node=e},xa?ya.createElement("span",{key:"A","data-text":"true",ref:e},"\n"):ya.createElement("br",{key:"A","data-text":"true",ref:e})):function(e){return xa?ya.createElement("span",{key:"B","data-text":"true",ref:e},"\n"):ya.createElement("br",{key:"B","data-text":"true",ref:e})}((function(e){return t._node=e})):ya.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(e){return t._node=e}},this.props.children)},n}(ya.Component),wa=Sa,Ca=ni;var ka=function(e){return!(!e||!e.ownerDocument)&&(Ca(e)&&"BR"===e.nodeName)},Ma={initODS:function(){},handleExtensionCausedError:function(){}};var Aa=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))},Ta=Aa;var Oa=function(e){return Ta(e)&&3==e.nodeType},Ia=Oa;var Da=function e(t,r){return!(!t||!r)&&(t===r||!Ia(t)&&(Ia(r)?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))};var Ra=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}},Na=Ma,Pa=wi,Ba=Da,Fa=Ra,ja=ri,za=ve,Ka=ni,La=ti.isBrowser("IE");function Ua(e,t){if(!e)return"[empty]";var r=qa(e,t);return r.nodeType===Node.TEXT_NODE?r.textContent:(Ka(r)||za(!1),r.outerHTML)}function qa(e,t){var r=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var n=e.textContent.length;return ja(e).createTextNode("[text "+n+(r.length?" | "+r.join(", "):"")+"]")}var o=e.cloneNode();1===o.nodeType&&r.length&&o.setAttribute("data-labels",r.join(", "));for(var i=e.childNodes,a=0;a<i.length;a++)o.appendChild(qa(i[a],t));return o}function Wa(e,t){for(var r=e,n=r;r;){if(Ka(r)&&n.hasAttribute("contenteditable"))return Ua(r,t);n=r=r.parentNode}return"Could not find contentEditable parent of node"}function Ha(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function Va(e,t,r,n){var o=Fa();if(e.extend&&null!=t&&Ba(o,t)){r>Ha(t)&&Pa.logSelectionStateFailure({anonymizedDom:Wa(t),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(n.toJS())});var i=t===e.focusNode;try{e.rangeCount>0&&e.extend&&e.extend(t,r)}catch(a){throw Pa.logSelectionStateFailure({anonymizedDom:Wa(t,(function(t){var r=[];return t===o&&r.push("active element"),t===e.anchorNode&&r.push("selection anchor node"),t===e.focusNode&&r.push("selection focus node"),r})),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:i,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:a?""+a:null,offset:r},null,2),selectionState:JSON.stringify(n.toJS(),null,2)}),a}}else if(t&&e.rangeCount>0){var a=e.getRangeAt(0);a.setEnd(t,r),e.addRange(a.cloneRange())}}function $a(e,t,r,n){var o=ja(t).createRange();if(r>Ha(t)&&(Pa.logSelectionStateFailure({anonymizedDom:Wa(t),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(n.toJS())}),Na.handleExtensionCausedError()),o.setStart(t,r),La)try{e.addRange(o)}catch(e){0}else e.addRange(o)}var Ga={setDraftEditorSelection:function(e,t,r,n,o){var i=ja(t);if(Ba(i.documentElement,t)){var a=i.defaultView.getSelection(),s=e.getAnchorKey(),c=e.getAnchorOffset(),l=e.getFocusKey(),u=e.getFocusOffset(),d=e.getIsBackward();if(!a.extend&&d){var p=s,m=c;s=l,c=u,l=p,u=m,d=!1}var f=s===r&&n<=c&&o>=c,h=l===r&&n<=u&&o>=u;if(f&&h)return a.removeAllRanges(),$a(a,t,c-n,e),void Va(a,t,u-n,e);if(d){if(h&&(a.removeAllRanges(),$a(a,t,u-n,e)),f){var _=a.focusNode,g=a.focusOffset;a.removeAllRanges(),$a(a,t,c-n,e),Va(a,_,g,e)}}else f&&(a.removeAllRanges(),$a(a,t,c-n,e)),h&&Va(a,t,u-n,e)}},addFocusToSelection:Va},Qa=bo;var Ja,Xa,Za=wa,Ya=t.reactExports,es=ve,ts=ka,rs=Ga.setDraftEditorSelection,ns=function(e){var t,r;function n(){for(var t,r,n,o,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=void 0,(n="leaf")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,r=t.block,n=t.start,o=t.text,i=r.getKey(),a=n+o.length;if(e.hasEdgeWithin(i,n,a)){var s=this.leaf;s||es(!1);var c,l=s.firstChild;l||es(!1),l.nodeType===Node.TEXT_NODE?c=l:ts(l)?c=s:(c=l.firstChild)||es(!1),rs(e,c,i,n,a)}}},o.shouldComponentUpdate=function(e){var t=this.leaf;return t||es(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},o.componentDidUpdate=function(){this._setSelection()},o.componentDidMount=function(){this._setSelection()},o.render=function(){var e=this,t=this.props.block,r=this.props.text;r.endsWith("\n")&&this.props.isLast&&(r+="\n");var n=this.props,o=n.customStyleMap,i=n.customStyleFn,a=n.offsetKey,s=n.styleSet,c=s.reduce((function(e,t){var r={},n=o[t];return void 0!==n&&e.textDecoration!==n.textDecoration&&(r.textDecoration=[e.textDecoration,n.textDecoration].join(" ").trim()),Qa(e,n,r)}),{});if(i){var l=i(s,t);c=Qa(c,l)}return Ya.createElement("span",{"data-offset-key":a,ref:function(t){return e.leaf=t},style:c},Ya.createElement(Za,null,r))},n}(Ya.Component),os=ns;function is(){if(Xa)return Ja;Xa=1;var e=_a(),r=os,n=xi,o=y,i=t.reactExports,a=po;o.List;var s=function(t){var o,s;function c(){return t.apply(this,arguments)||this}return s=t,(o=c).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,c.prototype.render=function(){var t=this.props,o=t.block,s=t.contentState,c=t.customStyleFn,l=t.customStyleMap,u=t.decorator,d=t.direction,p=t.forceSelection,m=t.hasSelection,f=t.selection,h=t.tree,_=o.getKey(),g=o.getText(),v=h.size-1,y=this.props.children||h.map((function(t,a){var h=t.get("decoratorKey"),y=t.get("leaves"),b=y.size-1,E=y.map((function(e,t){var s=n.encode(_,a,t),u=e.get("start"),d=e.get("end");return i.createElement(r,{key:s,offsetKey:s,block:o,start:u,selection:m?f:null,forceSelection:p,text:g.slice(u,d),styleSet:o.getInlineStyleAt(u),customStyleMap:l,customStyleFn:c,isLast:h===v&&t===b})})).toArray();return h&&u?i.createElement(e,{block:o,children:E,contentState:s,decorator:u,decoratorKey:h,direction:d,leafSet:t,text:g,key:a}):E})).toArray();return i.createElement("div",{"data-offset-key":n.encode(_,0,0),className:a({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===d,"public/DraftStyleDefault/rtl":"RTL"===d})},y)},c}(i.Component);return Ja=s}function as(e,t){return!!t&&(e===t.documentElement||e===t.body)}var ss={getTop:function(e){var t=e.ownerDocument;return as(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var r=e.ownerDocument;as(e,r)?r.body.scrollTop=r.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return as(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var r=e.ownerDocument;as(e,r)?r.body.scrollLeft=r.documentElement.scrollLeft=t:e.scrollLeft=t}},cs=/-(.)/g;var ls=function(e){return e.replace(cs,(function(e,t){return t.toUpperCase()}))},us=/([A-Z])/g;var ds=function(e){return e.replace(us,"-$1").toLowerCase()},ps=ls,ms=ds;function fs(e){return null==e?e:String(e)}var hs=function(e,t){var r;if(window.getComputedStyle&&(r=window.getComputedStyle(e,null)))return fs(r.getPropertyValue(ms(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(r=document.defaultView.getComputedStyle(e,null))return fs(r.getPropertyValue(ms(t)));if("display"===t)return"none"}return e.currentStyle?fs("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[ps(t)]):fs(e.style&&e.style[ps(t)])};function _s(e,t){var r=gs.get(e,t);return"auto"===r||"scroll"===r}var gs={get:hs,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(_s(e,"overflow")||_s(e,"overflowY")||_s(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}},vs=gs,ys=Da;var bs=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e)||!ys(t,e))return{left:0,right:0,top:0,bottom:0};var r=e.getBoundingClientRect();return{left:Math.round(r.left)-t.clientLeft,right:Math.round(r.right)-t.clientLeft,top:Math.round(r.top)-t.clientTop,bottom:Math.round(r.bottom)-t.clientTop}},Es=bs;var xs=function(e){var t=Es(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},Ss="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;var ws=function(e){return(e=e||document).scrollingElement?e.scrollingElement:Ss||"CSS1Compat"!==e.compatMode?e.body:e.documentElement};var Cs=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}},ks=ws,Ms=Cs;var As=function(e){var t=ks(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var r=Ms(e),n=e===t?e.ownerDocument.documentElement:e,o=e.scrollWidth-n.clientWidth,i=e.scrollHeight-n.clientHeight;return r.x=Math.max(0,Math.min(r.x,o)),r.y=Math.max(0,Math.min(r.y,i)),r};function Ts(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function Os(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function Is(){return{width:window.innerWidth||Ts(),height:window.innerHeight||Os()}}Is.withoutScrollbars=function(){return{width:Ts(),height:Os()}};var Ds,Rs,Ns,Ps,Bs=Is;function Fs(){if(Rs)return Ds;Rs=1;var e=bo;function r(){return r=e||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=is(),a=xi,s=t.reactExports,c=ss,l=vs,u=xs,d=As,p=Bs,m=ve,f=Ci;y.List;var h=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},_=function(e,t){var r=t.get(e.getType())||t.get("unstyled"),n=r.wrapper;return{Element:r.element||t.get("unstyled").element,wrapperTemplate:n}},g=function(e,t){var r=t(e);return r?{CustomComponent:r.component,customProps:r.props,customEditable:r.editable}:{}},v=function(e,t,r,o,i,a){var s={"data-block":!0,"data-editor":t,"data-offset-key":r,key:e.getKey(),ref:a},c=o(e);return c&&(s.className=c),void 0!==i.customEditable&&(s=n({},s,{contentEditable:i.customEditable,suppressContentEditableWarning:!0})),s},b=function(e){var t,y;function b(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return o(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call.apply(e,[this].concat(n))||this),"wrapperRef",s.createRef()),t}y=e,(t=b).prototype=Object.create(y.prototype),t.prototype.constructor=t,t.__proto__=y;var E=b.prototype;return E.shouldComponentUpdate=function(e){var t=this.props,r=t.block,n=t.direction,o=t.tree,i=!r.getChildKeys().isEmpty(),a=r!==e.block||o!==e.tree||n!==e.direction||h(e.selection,e.block.getKey())&&e.forceSelection;return i||a},E.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r=this.wrapperRef.current;if(r){var n,o=l.getScrollParent(r),i=d(o);if(o===window){var a=u(r);(n=a.y+a.height-p().height)>0&&window.scrollTo(i.x,i.y+n+10)}else{f(r)||m(!1);var s=r;(n=s.offsetHeight+s.offsetTop-(o.offsetHeight+i.y))>0&&c.setTop(o,c.getTop(o)+n+10)}}}},E.render=function(){var e=this,t=this.props,o=t.block,c=t.blockRenderMap,l=t.blockRendererFn,u=t.blockStyleFn,d=t.contentState,p=t.decorator,m=t.editorKey,f=t.editorState,y=t.customStyleFn,E=t.customStyleMap,x=t.direction,S=t.forceSelection,w=t.selection,C=t.tree,k=null;o.children.size&&(k=o.children.reduce((function(t,r){var o=a.encode(r,0,0),i=d.getBlockForKey(r),p=g(i,l),h=p.CustomComponent||b,y=_(i,c),E=y.Element,x=y.wrapperTemplate,S=v(i,m,o,u,p,null),w=n({},e.props,{tree:f.getBlockTree(r),blockProps:p.customProps,offsetKey:o,block:i});return t.push(s.createElement(E,S,s.createElement(h,w))),!x||function(e,t){var r=e.getNextSiblingKey();return!!r&&t.getBlockForKey(r).getType()===e.getType()}(i,d)||function(e,t,r){var n=[],o=!0,i=!1,c=void 0;try{for(var l,u=r.reverse()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value;if(d.type!==t)break;n.push(d)}}catch(e){i=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}r.splice(r.indexOf(n[0]),n.length+1);var p=n.reverse(),m=p[0].key;r.push(s.cloneElement(e,{key:"".concat(m,"-wrap"),"data-offset-key":a.encode(m,0,0)},p))}(x,E,t),t}),[]));var M=o.getKey(),A=a.encode(M,0,0),T=g(o,l),O=T.CustomComponent,I=null!=O?s.createElement(O,r({},this.props,{tree:f.getBlockTree(M),blockProps:T.customProps,offsetKey:A,block:o})):s.createElement(i,{block:o,children:k,contentState:d,customStyleFn:y,customStyleMap:E,decorator:p,direction:x,forceSelection:S,hasSelection:h(w,M),selection:w,tree:C});if(o.getParentKey())return I;var D=_(o,c).Element,R=v(o,m,A,u,T,this.wrapperRef);return s.createElement(D,R,I)},b}(s.Component);return Ds=b}var js=bo;function zs(){return zs=js||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zs.apply(this,arguments)}var Ks,Ls,Us,qs,Ws=os,Hs=xi,Vs=t.reactExports,$s=ss,Gs=vs,Qs=nn,Js=Vr,Xs=po,Zs=xs,Ys=As,ec=Bs,tc=ve,rc=Ci,nc=pn,oc=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},ic=function(e){var t,r;function n(){for(var t,r,n,o,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=void 0,(n="_node")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||oc(e.selection,e.block.getKey())&&e.forceSelection},o.componentDidMount=function(){if(!this.props.preventScroll){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r=this._node;if(null!=r){var n,o=Gs.getScrollParent(r),i=Ys(o);if(o===window){var a=Zs(r);(n=a.y+a.height-ec().height)>0&&window.scrollTo(i.x,i.y+n+10)}else{rc(r)||tc(!1),(n=r.offsetHeight+r.offsetTop-(o.offsetTop+o.offsetHeight+i.y))>0&&$s.setTop(o,$s.getTop(o)+n+10)}}}}},o._renderChildren=function(){var e=this,t=this.props.block,r=t.getKey(),n=t.getText(),o=this.props.tree.size-1,i=oc(this.props.selection,r);return this.props.tree.map((function(a,s){var c=a.get("leaves");if(0===c.size)return null;var l=c.size-1,u=c.map((function(a,c){var u=Hs.encode(r,s,c),d=a.get("start"),p=a.get("end");return Vs.createElement(Ws,{key:u,offsetKey:u,block:t,start:d,selection:i?e.props.selection:null,forceSelection:e.props.forceSelection,text:n.slice(d,p),styleSet:t.getInlineStyleAt(d),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:s===o&&c===l})})).toArray(),d=a.get("decoratorKey");if(null==d)return u;if(!e.props.decorator)return u;var p=nc(e.props.decorator),m=p.getComponentForKey(d);if(!m)return u;var f=p.getPropsForKey(d),h=Hs.encode(r,s,0),_=c.first().get("start"),g=c.last().get("end"),v=n.slice(_,g),y=t.getEntityAt(a.get("start")),b=Js.getHTMLDirIfDifferent(Qs.getDirection(v),e.props.direction),E={contentState:e.props.contentState,decoratedText:v,dir:b,start:_,end:g,blockKey:r,entityKey:y,offsetKey:h};return Vs.createElement(m,zs({},f,E,{key:h}),u)})).toArray()},o.render=function(){var e=this,t=this.props,r=t.direction,n=t.offsetKey,o=Xs({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===r,"public/DraftStyleDefault/rtl":"RTL"===r});return Vs.createElement("div",{"data-offset-key":n,className:o,ref:function(t){return e._node=t}},this._renderChildren())},n}(Vs.Component),ac=ic;var sc=fr("draft_tree_data_support")?function(){if(Ps)return Ns;Ps=1;var e=bo;function r(){return r=e||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}var n=Fs(),o=xi,i=t.reactExports,a=pn,s=function(e){var t,s;function c(){return e.apply(this,arguments)||this}s=e,(t=c).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var l=c.prototype;return l.shouldComponentUpdate=function(e){var t=this.props.editorState,r=e.editorState;if(t.getDirectionMap()!==r.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==r.getSelection().getHasFocus())return!0;var n=r.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=r.isInCompositionMode();if(t===r||null!==n&&r.getCurrentContent()===n||o&&i)return!1;var a=t.getCurrentContent(),s=r.getCurrentContent(),c=t.getDecorator(),l=r.getDecorator();return o!==i||a!==s||c!==l||r.mustForceSelection()},l.render=function(){for(var e=this.props,t=e.blockRenderMap,s=e.blockRendererFn,c=e.blockStyleFn,l=e.customStyleMap,u=e.customStyleFn,d=e.editorState,p=e.editorKey,m=e.textDirectionality,f=d.getCurrentContent(),h=d.getSelection(),_=d.mustForceSelection(),g=d.getDecorator(),v=a(d.getDirectionMap()),y=[],b=f.getBlocksAsArray()[0];b;){var E=b.getKey(),x={blockRenderMap:t,blockRendererFn:s,blockStyleFn:c,contentState:f,customStyleFn:u,customStyleMap:l,decorator:g,editorKey:p,editorState:d,forceSelection:_,selection:h,block:b,direction:m||v.get(E),tree:d.getBlockTree(E)},S=(t.get(b.getType())||t.get("unstyled")).wrapper;y.push({block:i.createElement(n,r({key:E},x)),wrapperTemplate:S,key:E,offsetKey:o.encode(E,0,0)});var w=b.getNextSiblingKey();b=w?f.getBlockForKey(w):null}for(var C=[],k=0;k<y.length;){var M=y[k];if(M.wrapperTemplate){var A=[];do{A.push(y[k].block),k++}while(k<y.length&&y[k].wrapperTemplate===M.wrapperTemplate);var T=i.cloneElement(M.wrapperTemplate,{key:M.key+"-wrap","data-offset-key":M.offsetKey},A);C.push(T)}else C.push(M.block),k++}return i.createElement("div",{"data-contents":"true"},C)},c}(i.Component);return Ns=s}():function(){if(qs)return Us;qs=1;var e=bo;function r(){return r=e||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=ac,a=xi,s=t.reactExports,c=po,l=(Ls||(Ls=1,Ks=function(e){var t=e||"",r=arguments.length;if(r>1)for(var n=1;n<r;n++){var o=arguments[n];o&&(t=(t?t+" ":"")+o)}return t}),Ks),u=pn,d=function(e,t,r,n){return c({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":r,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":t>=4,"public/DraftStyleDefault/listLTR":"LTR"===n,"public/DraftStyleDefault/listRTL":"RTL"===n})},p=function(e){var t,o;function c(){return e.apply(this,arguments)||this}o=e,(t=c).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o;var p=c.prototype;return p.shouldComponentUpdate=function(e){var t=this.props.editorState,r=e.editorState;if(t.getDirectionMap()!==r.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==r.getSelection().getHasFocus())return!0;var n=r.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=r.isInCompositionMode();if(t===r||null!==n&&r.getCurrentContent()===n||o&&i)return!1;var a=t.getCurrentContent(),s=r.getCurrentContent(),c=t.getDecorator(),l=r.getDecorator();return o!==i||a!==s||c!==l||r.mustForceSelection()},p.render=function(){for(var e=this.props,t=e.blockRenderMap,o=e.blockRendererFn,c=e.blockStyleFn,p=e.customStyleMap,m=e.customStyleFn,f=e.editorState,h=e.editorKey,_=e.preventScroll,g=e.textDirectionality,v=f.getCurrentContent(),y=f.getSelection(),b=f.mustForceSelection(),E=f.getDecorator(),x=u(f.getDirectionMap()),S=v.getBlocksAsArray(),w=[],C=null,k=null,M=0;M<S.length;M++){var A=S[M],T=A.getKey(),O=A.getType(),I=o(A),D=void 0,R=void 0,N=void 0;I&&(D=I.component,R=I.props,N=I.editable);var P=g||x.get(T),B=a.encode(T,0,0),F={contentState:v,block:A,blockProps:R,blockStyleFn:c,customStyleMap:p,customStyleFn:m,decorator:E,direction:P,forceSelection:b,offsetKey:B,preventScroll:_,selection:y,tree:f.getBlockTree(T)},j=t.get(O)||t.get("unstyled"),z=j.wrapper,K=j.element||t.get("unstyled").element,L=A.getDepth(),U="";if(c&&(U=c(A)),"li"===K)U=l(U,d(O,L,k!==z||null===C||L>C,P));var q=D||i,W={className:U,"data-block":!0,"data-editor":h,"data-offset-key":B,key:T};void 0!==N&&(W=n({},W,{contentEditable:N,suppressContentEditableWarning:!0}));var H=s.createElement(K,W,s.createElement(q,r({},F,{key:T})));w.push({block:H,wrapperTemplate:z,key:T,offsetKey:B}),C=z?A.getDepth():null,k=z}for(var V=[],$=0;$<w.length;){var G=w[$];if(G.wrapperTemplate){var Q=[];do{Q.push(w[$].block),$++}while($<w.length&&w[$].wrapperTemplate===G.wrapperTemplate);var J=s.cloneElement(G.wrapperTemplate,{key:G.key+"-wrap","data-offset-key":G.offsetKey},Q);V.push(J)}else V.push(G.block),$++}return s.createElement("div",{"data-contents":"true"},V)},c}(s.Component);return Us=p}(),cc={isImage:function(e){return"image"===lc(e)[0]},isJpeg:function(e){var t=lc(e);return cc.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function lc(e){return e.split("/")}var uc=cc,dc=ve;var pc=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&dc(!1),"number"!=typeof t&&dc(!1),0===t||t-1 in e||dc(!1),"function"==typeof e.callee&&dc(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}(e):[e]};function mc(e){return function(){return e}}var fc=function(){};fc.thatReturns=mc,fc.thatReturnsFalse=mc(!1),fc.thatReturnsTrue=mc(!0),fc.thatReturnsNull=mc(null),fc.thatReturnsThis=function(){return this},fc.thatReturnsArgument=function(e){return e};var hc=fc,_c=uc,gc=pc,vc=hc,yc=new RegExp("\r\n","g"),bc={"text/rtf":1,"text/html":1};function Ec(e){if("file"==e.kind)return e.getAsFile()}var xc=function(){function e(e){this.data=e,this.types=e.types?gc(e.types):[]}var t=e.prototype;return t.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some((function(e){return bc[e]}))},t.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(yc,"\n"):null},t.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},t.isLink=function(){return this.types.some((function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")}))},t.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},t.isImage=function(){var e=this.types.some((function(e){return-1!=e.indexOf("application/x-moz-file")}));if(e)return!0;for(var t=this.getFiles(),r=0;r<t.length;r++){var n=t[r].type;if(!_c.isImage(n))return!1}return!0},t.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},t.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(Ec).filter(vc.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},t.hasFiles=function(){return this.getFiles().length>0},e}(),Sc=xc,wc=ve,Cc=/\.textClipping$/,kc={"text/plain":!0,"text/html":!0,"text/rtf":!0};var Mc=function(e,t){var r=0,o=[];e.forEach((function(i){!function(e,t){if(!n.commonjsGlobal.FileReader||e.type&&!(e.type in kc))return void t("");if(""===e.type){var r="";return Cc.test(e.name)&&(r=e.name.replace(Cc,"")),void t(r)}var o=new FileReader;o.onload=function(){var e=o.result;"string"!=typeof e&&wc(!1),t(e)},o.onerror=function(){t("")},o.readAsText(e)}(i,(function(n){r++,n&&o.push(n.slice(0,5e3)),r==e.length&&t(o.join("\r"))}))}))};var Ac=function(e){return"handled"===e||!0===e},Tc=Sc,Oc=jt,Ic=Pn,Dc=ci,Rc=ri,Nc=Mc,Pc=Ii,Bc=li,Fc=Ac,jc=pn;function zc(e){e._internalDrag=!1;var t=e.editorContainer;if(t){var r=new MouseEvent("mouseup",{view:Bc(t),bubbles:!0,cancelable:!0});t.dispatchEvent(r)}}function Kc(e,t,r){var n=Oc.insertText(e.getCurrentContent(),t,r,e.getCurrentInlineStyle());return Ic.push(e,n,"insert-fragment")}var Lc={onDragEnd:function(e){e.exitCurrentMode(),zc(e)},onDrop:function(e,t){var r=new Tc(t.nativeEvent.dataTransfer),n=e._latestEditorState,o=function(e,t){var r=null,n=null,o=Rc(e.currentTarget);if("function"==typeof o.caretRangeFromPoint){var i=o.caretRangeFromPoint(e.x,e.y);r=i.startContainer,n=i.startOffset}else{if(!e.rangeParent)return null;r=e.rangeParent,n=e.rangeOffset}r=jc(r),n=jc(n);var a=jc(Dc(r));return Pc(t,a,n,a,n)}(t.nativeEvent,n);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),null!=o){var i=r.getFiles();if(i.length>0){if(e.props.handleDroppedFiles&&Fc(e.props.handleDroppedFiles(o,i)))return;Nc(i,(function(t){t&&e.update(Kc(n,o,t))}))}else{var a=e._internalDrag?"internal":"external";e.props.handleDrop&&Fc(e.props.handleDrop(o,r,a))||(e._internalDrag?e.update(function(e,t){var r=Oc.moveText(e.getCurrentContent(),e.getSelection(),t);return Ic.push(e,r,"insert-fragment")}(n,o)):e.update(Kc(n,o,r.getText()))),zc(e)}}}};var Uc=function(e){var t=e.getSelection(),r=t.getAnchorKey(),n=e.getBlockTree(r),o=t.getStartOffset(),i=!1;return n.some((function(e){return o===e.get("start")?(i=!0,!0):o<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return o===t&&(i=!0,!0)}))})),i};!function(e,t){if(!e.setImmediate){var r,n,o,i,a,s=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){process.nextTick((function(){m(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},r=function(e){o.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,r=function(e){var t=u.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(m,0,e)}:(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&m(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(i+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[s]=o,r(s),s++},d.clearImmediate=p}function p(e){delete c[e]}function m(e){if(l)setTimeout(m,0,e);else{var r=c[e];if(r){l=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{p(e),l=!1}}}}}("undefined"==typeof self?(n.commonjsGlobal,n.commonjsGlobal):self);var qc=n.commonjsGlobal.setImmediate,Wc=jt,Hc=Pn,Vc=Xi,$c=Ac,Gc=Uc,Qc=pn,Jc=qc,Xc="'",Zc="/",Yc=ti.isBrowser("Firefox");function el(e,t,r,n,o){var i=Wc.replaceText(e.getCurrentContent(),e.getSelection(),t,r,n);return Hc.push(e,i,"insert-characters",o)}var tl=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var r=e._latestEditorState,n=t.data;if(n)if(e.props.handleBeforeInput&&$c(e.props.handleBeforeInput(n,r,t.timeStamp)))t.preventDefault();else{var o=r.getSelection(),i=o.getStartOffset(),a=o.getAnchorKey();if(!o.isCollapsed())return t.preventDefault(),void e.update(el(r,n,r.getCurrentInlineStyle(),Vc(r.getCurrentContent(),r.getSelection()),!0));var s,c=el(r,n,r.getCurrentInlineStyle(),Vc(r.getCurrentContent(),r.getSelection()),!1),l=!1;if(l||(l=Gc(e._latestCommittedEditorState)),!l){var u=r.getBlockTree(a),d=c.getBlockTree(a);l=u.size!==d.size||u.zip(d).some((function(e){var t=e[0],r=e[1],o=t.get("start"),a=o+(o>=i?n.length:0),s=t.get("end"),c=s+(s>=i?n.length:0),l=r.get("start"),u=r.get("end"),d=r.get("decoratorKey");return t.get("decoratorKey")!==d||t.get("leaves").size!==r.get("leaves").size||a!==l||c!==u||null!=d&&u-l!=s-o}))}if(l||(s=n,l=Yc&&(s==Xc||s==Zc)),l||(l=Qc(c.getDirectionMap()).get(a)!==Qc(r.getDirectionMap()).get(a)),l)return t.preventDefault(),c=Hc.set(c,{forceSelection:!0}),void e.update(c);c=Hc.set(c,{nativelyRenderedContent:c.getCurrentContent()}),e._pendingStateFromBeforeInput=c,Jc((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}},rl=Pn,nl=Da,ol=Ra;var il=function(e,t){var r=t.currentTarget.ownerDocument;if(!Boolean(e.props.preserveSelectionOnBlur)&&ol(r)===r.body){var n=r.defaultView.getSelection(),o=e.editor;1===n.rangeCount&&nl(o,n.anchorNode)&&nl(o,n.focusNode)&&n.removeAllRanges()}var i=e._latestEditorState,a=i.getSelection();if(a.getHasFocus()){var s=a.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(t),e.update(rl.acceptSelection(i,s))}},al=Pn;var sl=function(e,t){e.setMode("composite"),e.update(al.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)},cl=Ke;var ll=function(e){var t=e.getSelection();return t.isCollapsed()?null:cl(e.getCurrentContent(),t)},ul=ll;var dl=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(ul(e._latestEditorState))};var pl=function(e){if(!e||!("ownerDocument"in e))return!1;if("ownerDocument"in e){var t=e;if(!t.ownerDocument.defaultView)return t instanceof Node;if(t instanceof t.ownerDocument.defaultView.Node)return!0}return!1},ml=jt,fl=Pn,hl=vs,_l=ll,gl=As,vl=pl;var yl=function(e,t){var r,n=e._latestEditorState,o=n.getSelection(),i=t.target;if(o.isCollapsed())t.preventDefault();else{if(vl(i)){var a=i;r=gl(hl.getScrollParent(a))}var s=_l(n);e.setClipboard(s),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(r),e.exitCurrentMode(),e.update(function(e){var t=ml.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return fl.push(e,t,"remove-range")}(n))}),0)}};var bl=function(e,t){e.setMode("drag"),t.preventDefault()};var El=function(e){e._internalDrag=!0,e.setMode("drag")},xl=Pn,Sl=ti;var wl=function(e,t){var r=e._latestEditorState,n=r.getSelection();if(!n.getHasFocus()){var o=n.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),Sl.isBrowser("Chrome < 60.0.3081.0")?e.update(xl.forceSelection(r,o)):e.update(xl.acceptSelection(r,o))}},Cl=ve,kl=55296,Ml=57343,Al=/[\uD800-\uDFFF]/;function Tl(e){return kl<=e&&e<=Ml}function Ol(e){return Al.test(e)}function Il(e,t){return 1+Tl(e.charCodeAt(t))}function Dl(e,t,r){if(t=t||0,r=void 0===r?1/0:r||0,!Ol(e))return e.substr(t,r);var n=e.length;if(n<=0||t>n||r<=0)return"";var o=0;if(t>0){for(;t>0&&o<n;t--)o+=Il(e,o);if(o>=n)return""}else if(t<0){for(o=n;t<0&&0<o;t++)o-=Il(e,o-1);o<0&&(o=0)}var i=n;if(r<n)for(i=o;r>0&&i<n;r--)i+=Il(e,i);return e.substring(o,i)}var Rl={getCodePoints:function(e){for(var t=[],r=0;r<e.length;r+=Il(e,r))t.push(e.codePointAt(r));return t},getUTF16Length:Il,hasSurrogateUnit:Ol,isCodeUnitInSurrogateRange:Tl,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||Cl(!1),t+1===e.length)return!1;var r=e.charCodeAt(t),n=e.charCodeAt(t+1);return kl<=r&&r<=56319&&56320<=n&&n<=Ml},strlen:function(e){if(!Ol(e))return e.length;for(var t=0,r=0;r<e.length;r+=Il(e,r))t++;return t},substring:function(e,t,r){(t=t||0)<0&&(t=0),(r=void 0===r?1/0:r||0)<0&&(r=0);var n=Math.abs(r-t);return Dl(e,t=t<r?t:r,n)},substr:Dl};var Nl=function(e,t){var r=e.getSelection(),n=e.getCurrentContent(),o=r.getStartKey(),i=r.getStartOffset(),a=o,s=0;if(t>i){var c=n.getKeyBefore(o);if(null==c)a=o;else a=c,s=n.getBlockForKey(c).getText().length}else s=i-t;return r.merge({focusKey:a,focusOffset:s,isBackward:!0})},Pl=jt,Bl=fr("draft_tree_data_support");var Fl=function(e,t,r){var n=e.getSelection(),o=e.getCurrentContent(),i=n,a=n.getAnchorKey(),s=n.getFocusKey(),c=o.getBlockForKey(a);if(Bl&&"forward"===r&&a!==s)return o;if(n.isCollapsed()){if("forward"===r){if(e.isSelectionAtEndOfContent())return o;if(Bl)if(n.getAnchorOffset()===o.getBlockForKey(a).getLength()){var l=o.getBlockForKey(c.nextSibling);if(!l||0===l.getLength())return o}}else if(e.isSelectionAtStartOfContent())return o;if((i=t(e))===n)return o}return Pl.removeRange(o,i,r)},jl=Pn,zl=Rl,Kl=Nl,Ll=Fl;var Ul=function(e){var t=Ll(e,(function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=t.getAnchorKey(),o=t.getAnchorOffset(),i=r.getBlockForKey(n).getText()[o-1];return Kl(e,i?zl.getUTF16Length(i,0):1)}),"backward");if(t===e.getCurrentContent())return e;var r=e.getSelection();return jl.push(e,t.set("selectionBefore",r),r.isCollapsed()?"backspace-character":"remove-range")},ql=jt,Wl=xi,Hl=Pn,Vl=Gi.notEmptyKey,$l=ci,Gl=Ul,Ql=pn,Jl=ti.isEngine("Gecko");var Xl=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var r=e.editor.ownerDocument.defaultView.getSelection(),n=r.anchorNode,o=r.isCollapsed,i=(null==n?void 0:n.nodeType)!==Node.TEXT_NODE&&(null==n?void 0:n.nodeType)!==Node.ELEMENT_NODE;if(null!=n&&!i){if(n.nodeType===Node.TEXT_NODE&&(null!==n.previousSibling||null!==n.nextSibling)){var a=n.parentNode;if(null==a)return;n.nodeValue=a.textContent;for(var s=a.firstChild;null!=s;s=s.nextSibling)s!==n&&a.removeChild(s)}var c=n.textContent,l=e._latestEditorState,u=Ql($l(n)),d=Wl.decode(u),p=d.blockKey,m=d.decoratorKey,f=d.leafKey,h=l.getBlockTree(p).getIn([m,"leaves",f]),_=h.start,g=h.end,v=l.getCurrentContent(),y=v.getBlockForKey(p),b=y.getText().slice(_,g);if(c.endsWith("\n\n")&&(c=c.slice(0,-1)),c!==b){var E,x,S,w,C=l.getSelection(),k=C.merge({anchorOffset:_,focusOffset:g,isBackward:!1}),M=y.getEntityAt(_),A=Vl(M)?v.getEntity(M):null,T="MUTABLE"===(null!=A?A.getMutability():null),O=T?"spellcheck-change":"apply-entity",I=ql.replaceText(v,k,c,y.getInlineStyleAt(_),T?y.getEntityAt(_):null);if(Jl)E=r.anchorOffset,x=r.focusOffset,w=(S=_+Math.min(E,x))+Math.abs(E-x),E=S,x=w;else{var D=c.length-b.length;S=C.getStartOffset(),w=C.getEndOffset(),E=o?w+D:S,x=w+D}var R=I.merge({selectionBefore:v.getSelectionAfter(),selectionAfter:C.merge({anchorOffset:E,focusOffset:x})});e.update(Hl.push(l,R,O))}else{var N=t.nativeEvent.inputType;if(N){var P=function(e,t){return"deleteContentBackward"===e?Gl(t):t}(N,l);if(P!==l)return e.restoreEditorDOM(),void e.update(P)}}}},Zl=Si;var Yl=function(e){return e.which===Zl.RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))},eu=Yl,tu=ti.isPlatform("Mac OS X"),ru={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return tu&&e.altKey},usesMacOSHeuristics:function(){return tu},hasCommandModifier:function(e){return tu?!!e.metaKey&&!e.altKey:ru.isCtrlKeyCommand(e)},isSoftNewlineEvent:eu},nu=ru,ou=jt,iu=Pn,au=Ke,su=pn,cu=null,lu={cut:function(e){var t=e.getCurrentContent(),r=e.getSelection(),n=null;if(r.isCollapsed()){var o=r.getAnchorKey(),i=t.getBlockForKey(o).getLength();if(i===r.getAnchorOffset()){var a=t.getKeyAfter(o);if(null==a)return e;n=r.set("focusKey",a).set("focusOffset",0)}else n=r.set("focusOffset",i)}else n=r;n=su(n),cu=au(t,n);var s=ou.removeRange(t,n,"forward");return s===t?e:iu.push(e,s,"remove-range")},paste:function(e){if(!cu)return e;var t=ou.replaceWithFragment(e.getCurrentContent(),e.getSelection(),cu);return iu.push(e,t,"insert-fragment")}},uu=ve;var du=ti.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),r=[],n=e.endContainer;null!=n;n=n.parentNode){var o=n===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var i,a=Array.from(t.getClientRects());if(r.push(a),o)return r.reverse(),(i=[]).concat.apply(i,r);t.setEndBefore(n)}uu(!1)}:function(e){return Array.from(e.getClientRects())},pu=Rl,mu=ri,fu=du,hu=ve;function _u(e,t){for(var r=1/0,n=1/0,o=-1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a];0!==s.width&&1!==s.width&&(r=Math.min(r,s.top),n=Math.min(n,s.bottom),o=Math.max(o,s.top),i=Math.max(i,s.bottom))}return o<=n&&o-r<t&&i-n<t}function gu(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}var vu=function(e){e.collapsed||hu(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var r=function(e){var t=getComputedStyle(e),r=mu(e),n=r.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var o=r.body;o||hu(!1),o.appendChild(n);var i=n.getBoundingClientRect();return o.removeChild(n),i.height}(t),n=e.endContainer,o=e.endOffset;for(e.setStart(e.startContainer,0);_u(fu(e),r)&&(n=e.startContainer,o=e.startOffset,n.parentNode||hu(!1),e.setStartBefore(n),1!==n.nodeType||"inline"===getComputedStyle(n).display););for(var i=n,a=o-1;;){for(var s=i.nodeValue,c=a;c>=0;c--)if(!(null!=s&&c>0&&pu.isSurrogatePair(s,c-1))){if(e.setStart(i,c),!_u(fu(e),r))break;n=i,o=c}if(-1===c||0===i.childNodes.length)break;a=gu(i=i.childNodes[c])}return e.setStart(n,o),e},yu=Pn,bu=vu,Eu=Ki,xu=Nl,Su=Fl;var wu=function(e,t){var r=Su(e,(function(e){var r=e.getSelection();if(r.isCollapsed()&&0===r.getAnchorOffset())return xu(e,1);var n=t.currentTarget.ownerDocument.defaultView.getSelection().getRangeAt(0);return n=bu(n),Eu(e,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState}),"backward");return r===e.getCurrentContent()?e:yu.push(e,r,"remove-range")},Cu={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}},ku="['‘’]",Mu="\\s|(?![_])"+Cu.getPunctuation(),Au=new RegExp("^(?:"+Mu+")*(?:"+ku+"|(?!"+Mu+").)*(?:(?!"+Mu+").)"),Tu=new RegExp("(?:(?!"+Mu+").)(?:"+ku+"|(?!"+Mu+").)*(?:"+Mu+")*$");function Ou(e,t){var r=t?Tu.exec(e):Au.exec(e);return r?r[0]:e}var Iu={getBackward:function(e){return Ou(e,!0)},getForward:function(e){return Ou(e,!1)}},Du=Iu,Ru=Pn,Nu=Nl,Pu=Fl;var Bu=function(e){var t=Pu(e,(function(e){var t=e.getSelection(),r=t.getStartOffset();if(0===r)return Nu(e,1);var n=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(n).getText().slice(0,r),i=Du.getBackward(o);return Nu(e,i.length||1)}),"backward");return t===e.getCurrentContent()?e:Ru.push(e,t,"remove-range")};var Fu=function(e,t){var r,n=e.getSelection(),o=n.getStartKey(),i=n.getStartOffset(),a=e.getCurrentContent(),s=o;return t>a.getBlockForKey(o).getText().length-i?(s=a.getKeyAfter(o),r=0):r=i+t,n.merge({focusKey:s,focusOffset:r})},ju=Iu,zu=Pn,Ku=Fu,Lu=Fl;var Uu=function(e){var t=Lu(e,(function(e){var t=e.getSelection(),r=t.getStartOffset(),n=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(n).getText().slice(r),i=ju.getForward(o);return Ku(e,i.length||1)}),"forward");return t===e.getCurrentContent()?e:zu.push(e,t,"remove-range")},qu=jt,Wu=Pn;var Hu=function(e){var t=qu.splitBlock(e.getCurrentContent(),e.getSelection());return Wu.push(e,t,"split-block")},Vu=Pn;var $u=function(e){var t=e.getSelection(),r=t.getEndKey(),n=e.getCurrentContent().getBlockForKey(r).getLength();return Vu.set(e,{selection:t.merge({anchorKey:r,anchorOffset:n,focusKey:r,focusOffset:n,isBackward:!1}),forceSelection:!0})},Gu=Pn;var Qu=function(e){var t=e.getSelection(),r=t.getStartKey();return Gu.set(e,{selection:t.merge({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:0,isBackward:!1}),forceSelection:!0})},Ju=Pn,Xu=Rl,Zu=Fu,Yu=Fl;var ed=function(e){var t=Yu(e,(function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=t.getAnchorKey(),o=t.getAnchorOffset(),i=r.getBlockForKey(n).getText()[o];return Zu(e,i?Xu.getUTF16Length(i,0):1)}),"forward");if(t===e.getCurrentContent())return e;var r=e.getSelection();return Ju.push(e,t.set("selectionBefore",r),r.isCollapsed()?"delete-character":"remove-range")},td=jt,rd=Pn,nd=Ke;var od=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var r=t.getAnchorOffset();if(0===r)return e;var n,o,i=t.getAnchorKey(),a=e.getCurrentContent(),s=a.getBlockForKey(i).getLength();if(s<=1)return e;r===s?(n=t.set("anchorOffset",r-1),o=t):o=(n=t.set("focusOffset",r+1)).set("anchorOffset",r+1);var c=nd(a,n),l=td.removeRange(a,n,"backward"),u=l.getSelectionAfter(),d=u.getAnchorOffset()-1,p=u.merge({anchorOffset:d,focusOffset:d}),m=td.replaceWithFragment(l,p,c),f=rd.push(e,m,"insert-fragment");return rd.acceptSelection(f,o)},id=Pn;var ad=function(e,t,r){var n=id.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(r(id.set(t,{nativelyRenderedContent:null})),setTimeout((function(){r(n)}),0)):r(n);else{var o=n.getCurrentContent();r(id.set(n,{nativelyRenderedContent:o}))}},sd=jt,cd=Pn,ld=Si,ud=lu,dd=ti,pd=Ac,md=wu,fd=Bu,hd=Uu,_d=Hu,gd=$u,vd=Qu,yd=Ul,bd=ed,Ed=od,xd=ad,Sd=nu.isOptionKeyCommand,wd=dd.isBrowser("Chrome");var Cd=function(e,t){var r=t.which,n=e._latestEditorState;function o(r){var n=e.props[r];return!!n&&(n(t),!0)}switch(r){case ld.RETURN:if(t.preventDefault(),e.props.handleReturn&&pd(e.props.handleReturn(t,n)))return;break;case ld.ESC:if(t.preventDefault(),o("onEscape"))return;break;case ld.TAB:if(o("onTab"))return;break;case ld.UP:if(o("onUpArrow"))return;break;case ld.RIGHT:if(o("onRightArrow"))return;break;case ld.DOWN:if(o("onDownArrow"))return;break;case ld.LEFT:if(o("onLeftArrow"))return;break;case ld.SPACE:wd&&Sd(t)&&t.preventDefault()}var i=e.props.keyBindingFn(t);if(null!=i&&""!==i)if("undo"!==i){if(t.preventDefault(),!e.props.handleKeyCommand||!pd(e.props.handleKeyCommand(i,n,t.timeStamp))){var a=function(e,t,r){switch(e){case"redo":return cd.redo(t);case"delete":return bd(t);case"delete-word":return hd(t);case"backspace":return yd(t);case"backspace-word":return fd(t);case"backspace-to-start-of-line":return md(t,r);case"split-block":return _d(t);case"transpose-characters":return Ed(t);case"move-selection-to-start-of-block":return vd(t);case"move-selection-to-end-of-block":return gd(t);case"secondary-cut":return ud.cut(t);case"secondary-paste":return ud.paste(t);default:return t}}(i,n,t);a!==n&&e.update(a)}}else xd(t,n,e.update);else if(r===ld.SPACE&&wd&&Sd(t)){var s=sd.replaceText(n.getCurrentContent(),n.getSelection()," ");e.update(cd.push(n,s,"insert-characters"))}};var kd=function(){function e(e){var t,r,n;n=void 0,(r="_uri")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._uri=e}return e.prototype.toString=function(){return this._uri},e}(),Md=kd,Ad=ve,Td=ti.isBrowser("IE <= 9");var Od=function(e){var t,r=null;return!Td&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||Ad(!1),t.documentElement.innerHTML=e,r=t.getElementsByTagName("body")[0]),r},Id=ni;var Dd=function(e){return!(!e||!e.ownerDocument)&&(Id(e)&&"A"===e.nodeName)},Rd=ni;var Nd,Pd=function(e){return!(!e||!e.ownerDocument)&&(Rd(e)&&"IMG"===e.nodeName)};function Bd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fd(e,t,r[t])}))}return e}function Fd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jd=I,zd=V,Kd=ae,Ld=ho,Ud=dr,qd=Md,Wd=po,Hd=Ae,Vd=Od,$d=fr,Gd=y,Qd=Gd.List,Jd=Gd.Map,Xd=Gd.OrderedSet,Zd=Dd,Yd=ka,ep=Ci,tp=Pd,rp=$d("draft_tree_data_support"),np=new RegExp("\r","g"),op=new RegExp("\n","g"),ip=new RegExp("^\n","g"),ap=new RegExp("&nbsp;","g"),sp=new RegExp("&#13;?","g"),cp=new RegExp("&#8203;?","g"),lp=["bold","bolder","500","600","700","800","900"],up=["light","lighter","normal","100","200","300","400"],dp=["className","href","rel","target","title"],pp=["alt","className","height","src","width"],mp=(Fd(Nd={},Wd("public/DraftStyleDefault/depth0"),0),Fd(Nd,Wd("public/DraftStyleDefault/depth1"),1),Fd(Nd,Wd("public/DraftStyleDefault/depth2"),2),Fd(Nd,Wd("public/DraftStyleDefault/depth3"),3),Fd(Nd,Wd("public/DraftStyleDefault/depth4"),4),Nd),fp=Jd({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),hp=function(e){if(ep(e)&&e.style.fontFamily.includes("monospace"))return"CODE";return null},_p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(mp).some((function(r){e.classList.contains(r)&&(t=mp[r])})),t},gp=function(e){if(!Zd(e))return!1;var t=e;if(!t.href||"http:"!==t.protocol&&"https:"!==t.protocol&&"mailto:"!==t.protocol&&"tel:"!==t.protocol)return!1;try{new qd(t.href);return!0}catch(e){return!1}},vp=function(e){if(!tp(e))return!1;var t=e;return!(!t.attributes.getNamedItem("src")||!t.attributes.getNamedItem("src").value)},yp=function(e,t){if(!ep(e))return t;var r=e,n=r.style.fontWeight,o=r.style.fontStyle,i=r.style.textDecoration;return t.withMutations((function(e){lp.indexOf(n)>=0?e.add("BOLD"):up.indexOf(n)>=0&&e.remove("BOLD"),"italic"===o?e.add("ITALIC"):"normal"===o&&e.remove("ITALIC"),"underline"===i&&e.add("UNDERLINE"),"line-through"===i&&e.add("STRIKETHROUGH"),"none"===i&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}))},bp=function(e){return"ul"===e||"ol"===e},Ep=function(){function e(e,t){Fd(this,"characterList",Qd()),Fd(this,"currentBlockType","unstyled"),Fd(this,"currentDepth",0),Fd(this,"currentEntity",null),Fd(this,"currentText",""),Fd(this,"wrapper",null),Fd(this,"blockConfigs",[]),Fd(this,"contentBlocks",[]),Fd(this,"entityMap",Ud),Fd(this,"blockTypeMap",void 0),Fd(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=e,this.disambiguate=t}var t=e.prototype;return t.clear=function(){this.characterList=Qd(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=Ud,this.wrapper=null,this.contentBlocks=[]},t.addDOMNode=function(e){var t;return this.contentBlocks=[],this.currentDepth=0,(t=this.blockConfigs).push.apply(t,this._toBlockConfigs([e],Xd())),this._trimCurrentText(),""!==this.currentText&&this.blockConfigs.push(this._makeBlockConfig()),this},t.getContentBlocks=function(){return 0===this.contentBlocks.length&&(rp?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},t._makeBlockConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Bd({key:e.key||Hd(),type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:Qd(),prevSibling:null,nextSibling:null,childConfigs:[]},e);return this.characterList=Qd(),this.currentBlockType="unstyled",this.currentText="",t},t._toBlockConfigs=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n],i=o.nodeName.toLowerCase();if("body"===i||bp(i)){this._trimCurrentText(),""!==this.currentText&&r.push(this._makeBlockConfig());var a=this.currentDepth,s=this.wrapper;bp(i)&&(this.wrapper=i,bp(s)&&this.currentDepth++),r.push.apply(r,this._toBlockConfigs(Array.from(o.childNodes),t)),this.currentDepth=a,this.wrapper=s}else{var c=this.blockTypeMap.get(i);if(void 0===c)if("#text"!==i)if("br"!==i)if(vp(o))this._addImgNode(o,t);else if(gp(o))this._addAnchorNode(o,r,t);else{var l=t;fp.has(i)&&(l=l.add(fp.get(i))),l=yp(o,l);var u=hp(o);null!=u&&(l=l.add(u)),r.push.apply(r,this._toBlockConfigs(Array.from(o.childNodes),l))}else this._addBreakNode(o,t);else this._addTextNode(o,t);else{this._trimCurrentText(),""!==this.currentText&&r.push(this._makeBlockConfig());var d=this.currentDepth,p=this.wrapper;if(this.wrapper="pre"===i?"pre":this.wrapper,"string"!=typeof c&&(c=this.disambiguate(i,this.wrapper)||c[0]||"unstyled"),!rp&&ep(o)&&("unordered-list-item"===c||"ordered-list-item"===c)){var m=o;this.currentDepth=_p(m,this.currentDepth)}var f=Hd(),h=this._toBlockConfigs(Array.from(o.childNodes),t);this._trimCurrentText(),r.push(this._makeBlockConfig({key:f,childConfigs:h,type:c})),this.currentDepth=d,this.wrapper=p}}}return r},t._appendText=function(e,t){var r;this.currentText+=e;var n=jd.create({style:t,entity:this.currentEntity});this.characterList=(r=this.characterList).push.apply(r,Array(e.length).fill(n))},t._trimCurrentText=function(){var e=this.currentText.length,t=e-this.currentText.trimLeft().length,r=this.currentText.trimRight().length,n=this.characterList.findEntry((function(e){return null!==e.getEntity()}));(t=void 0!==n?Math.min(t,n[0]):t)>(r=void 0!==(n=this.characterList.reverse().findEntry((function(e){return null!==e.getEntity()})))?Math.max(r,e-n[0]):r)?(this.currentText="",this.characterList=Qd()):(this.currentText=this.currentText.slice(t,r),this.characterList=this.characterList.slice(t,r))},t._addTextNode=function(e,t){var r=e.textContent;""===r.trim()&&"pre"!==this.wrapper&&(r=" "),"pre"!==this.wrapper&&(r=(r=r.replace(ip,"")).replace(op," ")),this._appendText(r,t)},t._addBreakNode=function(e,t){Yd(e)&&this._appendText("\n",t)},t._addImgNode=function(e,t){if(tp(e)){var r=e,n={};pp.forEach((function(e){var t=r.getAttribute(e);t&&(n[e]=t)})),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",n),$d("draftjs_fix_paste_for_img")?"presentation"!==r.getAttribute("role")&&this._appendText("📷",t):this._appendText("📷",t),this.currentEntity=null}},t._addAnchorNode=function(e,t,r){if(Zd(e)){var n=e,o={};dp.forEach((function(e){var t=n.getAttribute(e);t&&(o[e]=t)})),o.url=new qd(n.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",o||{}),t.push.apply(t,this._toBlockConfigs(Array.from(e.childNodes),r)),this.currentEntity=null}},t._toContentBlocks=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.length-1,n=0;n<=r;n++){var o=e[n];o.parent=t,o.prevSibling=n>0?e[n-1].key:null,o.nextSibling=n<r?e[n+1].key:null,o.children=Qd(o.childConfigs.map((function(e){return e.key}))),this.contentBlocks.push(new Kd(Bd({},o))),this._toContentBlocks(o.childConfigs,o.key)}},t._hoistContainersInBlockConfigs=function(e){var t=this;return Qd(e).flatMap((function(e){return"unstyled"!==e.type||""!==e.text?[e]:t._hoistContainersInBlockConfigs(e.childConfigs)}))},t._toFlatContentBlocks=function(e){var t=this;this._hoistContainersInBlockConfigs(e).forEach((function(e){var r=t._extractTextFromBlockConfigs(e.childConfigs),n=r.text,o=r.characterList;t.contentBlocks.push(new zd(Bd({},e,{text:e.text+n,characterList:e.characterList.concat(o)})))}))},t._extractTextFromBlockConfigs=function(e){for(var t=e.length-1,r="",n=Qd(),o=0;o<=t;o++){var i=e[o];r+=i.text,n=n.concat(i.characterList),""!==r&&"unstyled"!==i.type&&(r+="\n",n=n.push(n.last()));var a=this._extractTextFromBlockConfigs(i.childConfigs);r+=a.text,n=n.concat(a.characterList)}return{text:r,characterList:n}},e}(),xp=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ld,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vd)(e=e.trim().replace(np,"").replace(ap," ").replace(sp,"").replace(cp,""));if(!r)return null;var n=function(e){var t={};return e.mapKeys((function(e,r){var n=[r.element];void 0!==r.aliasedElements&&n.push.apply(n,r.aliasedElements),n.forEach((function(r){void 0===t[r]?t[r]=e:"string"==typeof t[r]?t[r]=[t[r],e]:t[r].push(e)}))})),Jd(t)}(t);return new Ep(n,(function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null})).addDOMNode(r).getContentBlocks()};function Sp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wp=V,Cp=ae,kp=xp,Mp=Ae,Ap=Od,Tp=fr,Op=y,Ip=_r,Dp=Op.List,Rp=Op.Repeat,Np=Tp("draft_tree_data_support"),Pp=Np?Cp:wp,Bp={processHTML:function(e,t){return kp(e,Ap,t)},processText:function(e,t,r){return e.reduce((function(e,n,o){n=Ip(n);var i=Mp(),a={key:i,type:r,text:n,characterList:Dp(Rp(t,n.length))};if(Np&&0!==o){var s=o-1;a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Sp(e,t,r[t])}))}return e}({},a,{prevSibling:(e[s]=e[s].merge({nextSibling:i})).getKey()})}return e.push(new Pp(a)),e}),[])}},Fp=Bp;var jp=function(e,t,r,n){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),s=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat([[i,a.get(i)]]).map((function(e){var t=e.getDepth()+r;return t=Math.max(0,Math.min(t,n)),e.set("depth",t)}));return a=a.merge(s),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})},zp=jt,Kp=Pn,Lp=jp,Up=pn,qp={currentBlockContainsLink:function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=r.getEntityMap();return r.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===n.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,r){switch(t){case"bold":return qp.toggleInlineStyle(e,"BOLD");case"italic":return qp.toggleInlineStyle(e,"ITALIC");case"underline":return qp.toggleInlineStyle(e,"UNDERLINE");case"code":return qp.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return qp.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return qp.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=zp.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),r=Kp.push(e,t,"insert-characters");return Kp.forceSelection(r,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var r=e.getCurrentContent(),n=t.getStartKey(),o=r.getBlockBefore(n);if(o&&"atomic"===o.getType()){var i=r.getBlockMap().delete(o.getKey()),a=r.merge({blockMap:i,selectionAfter:t});if(a!==r)return Kp.push(e,a,"remove-range")}var s=qp.tryToRemoveBlockStyle(e);return s?Kp.push(e,s,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var r=e.getCurrentContent(),n=t.getStartKey(),o=r.getBlockForKey(n).getLength();if(t.getStartOffset()<o)return null;var i=r.getBlockAfter(n);if(!i||"atomic"!==i.getType())return null;var a=t.merge({focusKey:i.getKey(),focusOffset:i.getLength()}),s=zp.removeRange(r,a,"forward");return s!==r?Kp.push(e,s,"remove-range"):null},onTab:function(e,t,r){var n=t.getSelection(),o=n.getAnchorKey();if(o!==n.getFocusKey())return t;var i=t.getCurrentContent(),a=i.getBlockForKey(o),s=a.getType();if("unordered-list-item"!==s&&"ordered-list-item"!==s)return t;e.preventDefault();var c=a.getDepth();if(!e.shiftKey&&c===r)return t;var l=Lp(i,n,e.shiftKey?-1:1,r);return Kp.push(t,l,"adjust-depth")},toggleBlockType:function(e,t){var r=e.getSelection(),n=r.getStartKey(),o=r.getEndKey(),i=e.getCurrentContent(),a=r;if(n!==o&&0===r.getEndOffset()){var s=Up(i.getBlockBefore(o));o=s.getKey(),a=a.merge({anchorKey:n,anchorOffset:r.getStartOffset(),focusKey:o,focusOffset:s.getLength(),isBackward:!1})}if(i.getBlockMap().skipWhile((function(e,t){return t!==n})).reverse().skipWhile((function(e,t){return t!==o})).some((function(e){return"atomic"===e.getType()})))return e;var c=i.getBlockForKey(n).getType()===t?"unstyled":t;return Kp.push(e,zp.setBlockType(i,a,c),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),r=t.getAnchorKey(),n=t.getFocusKey();return t.isCollapsed()||r!==n?qp.toggleBlockType(e,"code-block"):qp.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var r=e.getSelection(),n=e.getCurrentInlineStyle();if(r.isCollapsed())return Kp.setInlineStyleOverride(e,n.has(t)?n.remove(t):n.add(t));var o,i=e.getCurrentContent();return o=n.has(t)?zp.removeInlineStyle(i,r,t):zp.applyInlineStyle(i,r,t),Kp.push(e,o,"change-inline-style")},toggleLink:function(e,t,r){var n=zp.applyEntity(e.getCurrentContent(),t,r);return Kp.push(e,n,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),r=t.getAnchorOffset();if(t.isCollapsed()&&0===r){var n=t.getAnchorKey(),o=e.getCurrentContent(),i=o.getBlockForKey(n).getType(),a=o.getBlockBefore(n);if("code-block"===i&&a&&"code-block"===a.getType()&&0!==a.getLength())return null;if("unstyled"!==i)return zp.setBlockType(o,t,"unstyled")}return null}},Wp=qp,Hp=/\r\n?|\n/g;var Vp=function(e){return e.split(Hp)},$p=E,Gp=I,Qp=Sc,Jp=jt,Xp=Fp,Zp=Pn,Yp=Wp,em=Xi,tm=Mc,rm=Ac,nm=Vp;function om(e,t,r){var n=Jp.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return Zp.push(e,n.set("entityMap",r),"insert-fragment")}var im=function(e,t){t.preventDefault();var r=new Qp(t.clipboardData);if(!r.isRichText()){var n=r.getFiles(),o=r.getText();if(n.length>0){if(e.props.handlePastedFiles&&rm(e.props.handlePastedFiles(n)))return;return void tm(n,(function(t){if(t=t||o){var r=e._latestEditorState,n=nm(t),i=Gp.create({style:r.getCurrentInlineStyle(),entity:em(r.getCurrentContent(),r.getSelection())}),a=Yp.getCurrentBlockType(r),s=Xp.processText(n,i,a),c=$p.createFromArray(s),l=Jp.replaceWithFragment(r.getCurrentContent(),r.getSelection(),c);e.update(Zp.push(r,l,"insert-fragment"))}}))}}var i=[],a=r.getText(),s=r.getHTML(),c=e._latestEditorState;if(e.props.formatPastedText){var l=e.props.formatPastedText(a,s);a=l.text,s=l.html}if(!e.props.handlePastedText||!rm(e.props.handlePastedText(a,s,c))){if(a&&(i=nm(a)),!e.props.stripPastedStyles){var u,d=e.getClipboard();if(!e.props.formatPastedText&&r.isRichText()&&d){if(-1!==(null===(u=s)||void 0===u?void 0:u.indexOf(e.getEditorKey()))||1===i.length&&1===d.size&&d.first().getText()===a)return void e.update(om(e._latestEditorState,d))}else if(d&&r.types.includes("com.apple.webarchive")&&!r.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,r){return t.getText()===e[r]}))}(i,d))return void e.update(om(e._latestEditorState,d));if(s){var p=Xp.processHTML(s,e.props.blockRenderMap);if(p){var m=p.contentBlocks,f=p.entityMap;if(m){var h=$p.createFromArray(m);return void e.update(om(e._latestEditorState,h,f))}}}e.setClipboard(null)}if(i.length){var _=Gp.create({style:c.getCurrentInlineStyle(),entity:em(c.getCurrentContent(),c.getSelection())}),g=Yp.getCurrentBlockType(c),v=Xp.processText(i,_,g),y=$p.createFromArray(v);e.update(om(e._latestEditorState,y))}}},am=ti,sm=tl,cm=il,lm=sl,um=dl,dm=yl,pm=bl,mm=El,fm=wl,hm=Xl,_m=Cd,gm=im,vm=$i,ym=am.isBrowser("Chrome"),bm=am.isBrowser("Firefox"),Em=ym||bm?vm:function(e){},xm={onBeforeInput:sm,onBlur:cm,onCompositionStart:lm,onCopy:um,onCut:dm,onDragOver:pm,onDragStart:mm,onFocus:fm,onInput:hm,onKeyDown:_m,onPaste:gm,onSelect:vm,onMouseUp:Em,onKeyUp:Em},Sm=t.reactDomExports.unstable_flushControlled;var wm=t.reactExports,Cm=po,km=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},o.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=Cm({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return wm.createElement("div",{className:t},wm.createElement("div",{className:Cm("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},n}(wm.Component),Mm=km,Am=nu,Tm=Si,Om=ti,Im=Om.isPlatform("Mac OS X"),Dm=Im&&Om.isBrowser("Firefox < 29"),Rm=Am.hasCommandModifier,Nm=Am.isCtrlKeyCommand;function Pm(e){return Im&&e.altKey||Nm(e)}var Bm=function(e){switch(e.keyCode){case 66:return Rm(e)?"bold":null;case 68:return Nm(e)?"delete":null;case 72:return Nm(e)?"backspace":null;case 73:return Rm(e)?"italic":null;case 74:return Rm(e)?"code":null;case 75:return Im&&Nm(e)?"secondary-cut":null;case 77:case 79:return Nm(e)?"split-block":null;case 84:return Im&&Nm(e)?"transpose-characters":null;case 85:return Rm(e)?"underline":null;case 87:return Im&&Nm(e)?"backspace-word":null;case 89:return Nm(e)?Im?"secondary-paste":"redo":null;case 90:return function(e){return Rm(e)?e.shiftKey?"redo":"undo":null}(e)||null;case Tm.RETURN:return"split-block";case Tm.DELETE:return function(e){return!Im&&e.shiftKey?null:Pm(e)?"delete-word":"delete"}(e);case Tm.BACKSPACE:return function(e){return Rm(e)&&Im?"backspace-to-start-of-line":Pm(e)?"backspace-word":"backspace"}(e);case Tm.LEFT:return Dm&&Rm(e)?"move-selection-to-start-of-block":null;case Tm.RIGHT:return Dm&&Rm(e)?"move-selection-to-end-of-block":null;default:return null}},Fm=bo;function jm(){return jm=Fm||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jm.apply(this,arguments)}function zm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Lm(e,t,r[t])}))}return e}function Km(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Um(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var qm=ho,Wm=_o,Hm=ha,Vm=sc,$m=Lc,Gm=xm,Qm=Sm,Jm=Mm,Xm=Ma,Zm=Pn,Ym=t.reactExports,ef=ss,tf=vs,rf=po,nf=Ae,of=Bm,af=As,sf=fr,cf=ve,lf=Ci,uf=pn,df=ti.isBrowser("IE"),pf=!df,mf={edit:Gm,composite:Hm,drag:$m,cut:null,render:null},ff=!1,hf=function(e){function t(){return e.apply(this,arguments)||this}Um(t,e);var r=t.prototype;return r.render=function(){return null},r.componentDidMount=function(){this._update()},r.componentDidUpdate=function(){this._update()},r._update=function(){var e=this.props.editor;e._latestEditorState=this.props.editorState,e._blockSelectEvents=!0},t}(Ym.Component),_f=function(e){function t(t){var r;return Lm(Km(r=e.call(this,t)||this),"_blockSelectEvents",void 0),Lm(Km(r),"_clipboard",void 0),Lm(Km(r),"_handler",void 0),Lm(Km(r),"_dragCount",void 0),Lm(Km(r),"_internalDrag",void 0),Lm(Km(r),"_editorKey",void 0),Lm(Km(r),"_placeholderAccessibilityID",void 0),Lm(Km(r),"_latestEditorState",void 0),Lm(Km(r),"_latestCommittedEditorState",void 0),Lm(Km(r),"_pendingStateFromBeforeInput",void 0),Lm(Km(r),"_onBeforeInput",void 0),Lm(Km(r),"_onBlur",void 0),Lm(Km(r),"_onCharacterData",void 0),Lm(Km(r),"_onCompositionEnd",void 0),Lm(Km(r),"_onCompositionStart",void 0),Lm(Km(r),"_onCopy",void 0),Lm(Km(r),"_onCut",void 0),Lm(Km(r),"_onDragEnd",void 0),Lm(Km(r),"_onDragOver",void 0),Lm(Km(r),"_onDragStart",void 0),Lm(Km(r),"_onDrop",void 0),Lm(Km(r),"_onInput",void 0),Lm(Km(r),"_onFocus",void 0),Lm(Km(r),"_onKeyDown",void 0),Lm(Km(r),"_onKeyPress",void 0),Lm(Km(r),"_onKeyUp",void 0),Lm(Km(r),"_onMouseDown",void 0),Lm(Km(r),"_onMouseUp",void 0),Lm(Km(r),"_onPaste",void 0),Lm(Km(r),"_onSelect",void 0),Lm(Km(r),"editor",void 0),Lm(Km(r),"editorContainer",void 0),Lm(Km(r),"focus",void 0),Lm(Km(r),"blur",void 0),Lm(Km(r),"setMode",void 0),Lm(Km(r),"exitCurrentMode",void 0),Lm(Km(r),"restoreEditorDOM",void 0),Lm(Km(r),"setClipboard",void 0),Lm(Km(r),"getClipboard",void 0),Lm(Km(r),"getEditorKey",void 0),Lm(Km(r),"update",void 0),Lm(Km(r),"onDragEnter",void 0),Lm(Km(r),"onDragLeave",void 0),Lm(Km(r),"_handleEditorContainerRef",(function(e){r.editorContainer=e,r.editor=null!==e?e.firstChild:null})),Lm(Km(r),"focus",(function(e){var t=r.props.editorState,n=t.getSelection().getHasFocus(),o=r.editor;if(o){var i=tf.getScrollParent(o),a=e||af(i),s=a.x,c=a.y;lf(o)||cf(!1),o.focus(),i===window?window.scrollTo(s,c):ef.setTop(i,c),n||r.update(Zm.forceSelection(t,t.getSelection()))}})),Lm(Km(r),"blur",(function(){var e=r.editor;e&&(lf(e)||cf(!1),e.blur())})),Lm(Km(r),"setMode",(function(e){var t=r.props,n=t.onPaste,o=t.onCut,i=t.onCopy,a=zm({},mf.edit);n&&(a.onPaste=n),o&&(a.onCut=o),i&&(a.onCopy=i);var s=zm({},mf,{edit:a});r._handler=s[e]})),Lm(Km(r),"exitCurrentMode",(function(){r.setMode("edit")})),Lm(Km(r),"restoreEditorDOM",(function(e){r.setState({contentsKey:r.state.contentsKey+1},(function(){r.focus(e)}))})),Lm(Km(r),"setClipboard",(function(e){r._clipboard=e})),Lm(Km(r),"getClipboard",(function(){return r._clipboard})),Lm(Km(r),"update",(function(e){r._latestEditorState=e,r.props.onChange(e)})),Lm(Km(r),"onDragEnter",(function(){r._dragCount++})),Lm(Km(r),"onDragLeave",(function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()})),r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=t.editorKey||nf(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=t.editorState,r._latestCommittedEditorState=t.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},r.state={contentsKey:0},r}Um(t,e);var r=t.prototype;return r._buildHandler=function(e){var t=this;return function(r){if(!t.props.readOnly){var n=t._handler&&t._handler[e];n&&(Qm?Qm((function(){return n(t,r)})):n(t,r))}}},r._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},r._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:uf(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return Ym.createElement(Jm,e)}return null},r._renderARIADescribedBy=function(){var e=this.props.ariaDescribedBy||"",t=this._showPlaceholder()?this._placeholderAccessibilityID:"";return e.replace("{{editor_id_placeholder}}",t)||void 0},r.render=function(){var e=this.props,t=e.blockRenderMap,r=e.blockRendererFn,n=e.blockStyleFn,o=e.customStyleFn,i=e.customStyleMap,a=e.editorState,s=e.preventScroll,c=e.readOnly,l=e.textAlignment,u=e.textDirectionality,d=rf({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===l,"DraftEditor/alignRight":"right"===l,"DraftEditor/alignCenter":"center"===l}),p=this.props.role||"textbox",m="combobox"===p?!!this.props.ariaExpanded:null,f={blockRenderMap:t,blockRendererFn:r,blockStyleFn:n,customStyleMap:zm({},Wm,i),customStyleFn:o,editorKey:this._editorKey,editorState:a,preventScroll:s,textDirectionality:u};return Ym.createElement("div",{className:d},this._renderPlaceholder(),Ym.createElement("div",{className:rf("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef},Ym.createElement("div",{"aria-activedescendant":c?null:this.props.ariaActiveDescendantID,"aria-autocomplete":c?null:this.props.ariaAutoComplete,"aria-controls":c?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":c?null:m,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":c?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:rf({notranslate:!c,"public/DraftEditor/content":!0}),contentEditable:!c,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:c?null:p,spellCheck:pf&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},Ym.createElement(hf,{editor:this,editorState:a}),Ym.createElement(Vm,jm({},f,{key:"contents"+this.state.contentsKey})))))},r.componentDidMount=function(){this._blockSelectEvents=!1,!ff&&sf("draft_ods_enabled")&&(ff=!0,Xm.initODS()),this.setMode("edit"),df&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):n.commonjsGlobal.execCommand("AutoUrlDetect",!1,!1))},r.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},t}(Ym.Component);Lm(_f,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:qm,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:of,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var gf=_f,vf={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}},yf=vf,bf=Rl.strlen;var Ef=function(e,t){var r=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(n,o){var i=e.getText(),a=e.getEntityAt(n);r.push({offset:bf(i.slice(0,n)),length:bf(i.slice(n,o)),key:Number(t[yf.stringify(a)])})})),r},xf=Rl,Sf=D,wf=function(e,t){return e===t},Cf=function(e){return!!e},kf=[];var Mf=function(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),r=t.flatten().toSet().map((function(r){return function(e,t,r){var n=[],o=t.map((function(e){return e.has(r)})).toList();return Sf(o,wf,Cf,(function(t,o){var i=e.getText();n.push({offset:xf.strlen(i.slice(0,t)),length:xf.strlen(i.slice(t,o)),style:r})})),n}(e,t,r)}));return Array.prototype.concat.apply(kf,r.toJS())};function Af(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tf=V,Of=ae,If=vf,Df=Ef,Rf=Mf,Nf=ve,Pf=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:Rf(e),entityRanges:Df(e,t),data:e.getData().toObject()}},Bf=function(e,t,r,n){if(e instanceof Tf)r.push(Pf(e,t));else{e instanceof Of||Nf(!1);var o=e.getParentKey(),i=n[e.getKey()]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Af(e,t,r[t])}))}return e}({},Pf(e,t),{children:[]});o?n[o].children.push(i):r.push(i)}},Ff=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var r=t.entityMap,n=[],o={},i={},a=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var n=e.getEntityAt(t),o=If.stringify(n);i[o]||(i[o]=n,r[o]="".concat(a),a++)})),Bf(e,r,n,o)})),{blocks:n,entityMap:r}}(e,t),t=function(e,t){var r=t.blocks,n=t.entityMap,o={};return Object.keys(n).forEach((function(t,r){var n=e.getEntity(If.unstringify(t));o[r]={type:n.getType(),mutability:n.getMutability(),data:n.getData()}})),{blocks:r,entityMap:o}}(e,t),t};function jf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){zf(e,t,r[t])}))}return e}function zf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kf=Ae,Lf=ve,Uf=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},qf={fromRawTreeStateToRawState:function(e){var t=e.blocks,r=[];return Array.isArray(t)||Lf(!1),Array.isArray(t)&&t.length?(function(e,t){for(var r=[].concat(e).reverse();r.length;){var n=r.pop();t(n);var o=n.children;Array.isArray(o)||Lf(!1),r=r.concat([].concat(o.reverse()))}}(t,(function(e){var t=jf({},e);Uf(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?jf({},t,{depth:(e.depth||0)+1}):t})))}(e),null!=e.children&&e.children.length>0)||(delete t.children,r.push(t))})),e.blocks=r,jf({},e,{blocks:r})):e},fromRawStateToRawTreeState:function(e){var t=[],r=[];return e.blocks.forEach((function(e){var n=Uf(e),o=e.depth||0,i=jf({},e,{children:[]});if(n){var a=r[0];if(null==a&&0===o)t.push(i);else if(null==a||a.depth<o-1){var s={key:Kf(),text:"",depth:o-1,type:e.type,children:[],entityRanges:[],inlineStyleRanges:[]};r.unshift(s),1===o?t.push(s):null!=a&&a.children.push(s),s.children.push(i)}else if(a.depth===o-1)a.children.push(i);else{for(;null!=a&&a.depth>=o;)r.shift(),a=r[0];o>0?a.children.push(i):t.push(i)}}else t.push(i)})),jf({},e,{blocks:t})}},Wf=I,Hf=y.List;var Vf=function(e,t){var r=e.map((function(e,r){var n=t[r];return Wf.create({style:e,entity:n})}));return Hf(r)},$f=Rl.substr;var Gf=function(e,t){var r=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var n=$f(e,0,t.offset).length,o=n+$f(e,t.offset,t.length).length,i=n;i<o;i++)r[i]=t.key})),r},Qf=Rl,Jf=y.OrderedSet,Xf=Qf.substr,Zf=Jf();var Yf=function(e,t){var r=Array(e.length).fill(Zf);return t&&t.forEach((function(t){for(var n=Xf(e,0,t.offset).length,o=n+Xf(e,t.offset,t.length).length;n<o;)r[n]=r[n].add(t.style),n++})),r};function eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){th(e,t,r[t])}))}return e}function th(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rh=V,nh=ae,oh=jr,ih=dr,ah=qf,sh=mr,ch=Vf,lh=Gf,uh=Yf,dh=Ae,ph=y,mh=ve,fh=fr("draft_tree_data_support"),hh=ph.List,_h=ph.Map,gh=ph.OrderedMap,vh=function(e,t){var r=e.key,n=e.type,o=e.data;return{text:e.text,depth:e.depth||0,type:n||"unstyled",key:r||dh(),data:_h(o),characterList:yh(e,t)}},yh=function(e,t){var r=e.text,n=e.entityRanges,o=e.inlineStyleRanges,i=n||[];return ch(uh(r,o||[]),lh(r,i.filter((function(e){return t.hasOwnProperty(e.key)})).map((function(e){return eh({},e,{key:t[e.key]})}))))},bh=function(e){return eh({},e,{key:e.key||dh()})},Eh=function(e,t,r){var n=t.map((function(e){return eh({},e,{parentRef:r})}));return e.concat(n.reverse())},xh=function(e,t){var r=e.blocks.find((function(e){return Array.isArray(e.children)&&e.children.length>0})),n=fh&&!r?ah.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!fh)return function(e,t){return gh(e.map((function(e){var r=new rh(vh(e,t));return[r.getKey(),r]})))}(r?ah.fromRawTreeStateToRawState(e).blocks:n,t);var o=function(e,t){return e.map(bh).reduce((function(r,n,o){Array.isArray(n.children)||mh(!1);var i=n.children.map(bh),a=new nh(eh({},vh(n,t),{prevSibling:0===o?null:e[o-1].key,nextSibling:o===e.length-1?null:e[o+1].key,children:hh(i.map((function(e){return e.key})))}));r=r.set(a.getKey(),a);for(var s=Eh([],i,a);s.length>0;){var c=s.pop(),l=c.parentRef,u=l.getChildKeys(),d=u.indexOf(c.key),p=Array.isArray(c.children);if(!p){p||mh(!1);break}var m=c.children.map(bh),f=new nh(eh({},vh(c,t),{parent:l.getKey(),children:hh(m.map((function(e){return e.key}))),prevSibling:0===d?null:u.get(d-1),nextSibling:d===u.size-1?null:u.get(d+1)}));r=r.set(f.getKey(),f),s=Eh(s,m,f)}return r}),gh())}(n,t);return o},Sh=function(e){Array.isArray(e.blocks)||mh(!1);var t=function(e){var t=e.entityMap,r={};return Object.keys(t).forEach((function(e){var n=t[e],o=n.type,i=n.mutability,a=n.data;r[e]=ih.__create(o,i,a||{})})),r}(e),r=xh(e,t),n=r.isEmpty()?new sh:sh.createEmpty(r.first().getKey());return new oh({blockMap:r,entityMap:t,selectionBefore:n,selectionAfter:n})},wh=du;var Ch=function(e){var t=wh(e),r=0,n=0,o=0,i=0;if(t.length){if(t.length>1&&0===t[0].width){var a=t[1];r=a.top,n=a.right,o=a.bottom,i=a.left}else{var s=t[0];r=s.top,n=s.right,o=s.bottom,i=s.left}for(var c=1;c<t.length;c++){var l=t[c];0!==l.height&&0!==l.width&&(r=Math.min(r,l.top),n=Math.max(n,l.right),o=Math.max(o,l.bottom),i=Math.min(i,l.left))}}return{top:r,right:n,bottom:o,left:i,width:n-i,height:o-r}},kh=Ch;var Mh=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var r=t.getRangeAt(0),n=kh(r),o=n.top,i=n.right,a=n.bottom,s=n.left;return 0===o&&0===i&&0===a&&0===s?null:n},Ah={Editor:gf,EditorBlock:ac,EditorState:Pn,CompositeDecorator:lo,Entity:dr,EntityInstance:tr,BlockMapBuilder:E,CharacterMetadata:I,ContentBlock:V,ContentState:jr,RawDraftContentState:{},SelectionState:mr,AtomicBlockUtils:ao,KeyBindingUtil:nu,Modifier:jt,RichUtils:Wp,DefaultDraftBlockRenderMap:ho,DefaultDraftInlineStyle:_o,convertFromHTML:xp,convertFromRaw:Sh,convertToRaw:Ff,genKey:Ae,getDefaultKeyBinding:Bm,getVisibleSelectionRect:Mh};r.injectInternalStyle("typescript/libraries/comments2/src/components/folder_overview_editor/index.module.out.css",(e=>':root{--folder-overview-padding-left:6px;--folder-overview-padding-top:8px;--fixed-toolbar-height:40px}._sc-folder-overview-interaction-container_tb7xr_9{padding-top:0;position:relative}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-draft_tb7xr_14{max-height:none;overflow-x:hidden;overflow-y:auto;padding:0}._sc-folder-overview-editor_tb7xr_14 .public-DraftEditor-content{overflow:hidden}._sc-toolbar-component_tb7xr_27{display:flex;height:32px;padding-left:5px;padding-right:9px;pointer-events:auto;z-index:10}._sc-toolbar-component_tb7xr_27 ._toolbar-divider_tb7xr_36{background-color:var(--color_white);height:100%;margin:0 6px 0 8px;opacity:.1;width:1px}._sc-toolbar-component_tb7xr_27 ._toolbar-spacer_tb7xr_44{flex:1}._sc-toolbar-component_tb7xr_27 ._toolbar-button_tb7xr_48{color:var(--color_white);cursor:pointer;padding:4px}._sc-toolbar-component_tb7xr_27 ._toolbar-button_tb7xr_48 svg{width:20px}._sc-contextual-toolbar-popover_tb7xr_60{margin-top:-40px;transition:opacity .2s,transform .2s}._sc-contextual-toolbar-popover_tb7xr_60 ._toolbar-button_tb7xr_48{opacity:.4}._sc-contextual-toolbar-popover_tb7xr_60 ._toolbar-button_tb7xr_48:hover{opacity:1}._sc-contextual-toolbar-popover_tb7xr_60 ._sc-toolbar-component_tb7xr_27{background-color:var(--color_ink_100);border-radius:5px}._sc-contextual-toolbar-popover_tb7xr_60._popover-enter_tb7xr_79,._sc-contextual-toolbar-popover_tb7xr_60._popover-leave_tb7xr_80{opacity:0;transform:translate(-50%,12px) scale(.8)}._sc-contextual-toolbar-popover_tb7xr_60._popover-enter-active_tb7xr_85._popover-enter_tb7xr_79{opacity:1;pointer-events:auto;transform:translate(-50%) scale(1)}._sc-link-prompt_tb7xr_93{background-color:var(--color_white);border-radius:0;box-shadow:0 5px 15px rgba(0,0,0,.2);display:flex;height:32px;margin-top:-48px;min-width:250px;padding:4px;position:absolute;transform:translate(-50%);width:250px;z-index:10}._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{margin-left:8px}._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{background-color:transparent;background-image:none;border:0;border-radius:0;font-size:12px;height:100%;padding:4px 8px;width:100%}._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116:focus{outline:none}._sc-folder-overview-editor_tb7xr_14 .DraftEditor-root{font-size:14px;line-height:22px}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ol,._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul{margin-bottom:0;margin-top:0}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul li{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul li span{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:2.2em}._sc-folder-overview-editor_tb7xr_14 ._sc-editor-href_tb7xr_171{color:var(--color_text_link);cursor:pointer}._sc-toolbar-tooltip_tb7xr_177 ._sc-toolbar-button-tooltip-content_tb7xr_177{font-size:10px;font-weight:200;line-height:12px;text-align:center}._sc-toolbar-button-tooltip-content__message_tb7xr_184{font-weight:700;line-height:12px}._sc-toolbar-button-tooltip-content__shortcut_tb7xr_189{font-style:italic;line-height:12px;padding:0 2px 1px}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197{margin-bottom:6px;margin-top:6px;padding-left:22px;position:relative}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._checked_tb7xr_204{color:var(--color_ink_60);text-decoration:line-through}._sc-folder-overview-editor_tb7xr_14 ._task-block-checkbox_tb7xr_209,._task-block-clickable-div_tb7xr_215{left:0;position:absolute;top:0}._task-block-clickable-div_tb7xr_215{cursor:default;height:24px;width:24px;z-index:1}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._empty-block_tb7xr_226 ._task-placeholder_tb7xr_226{display:block;left:0;margin-left:22px;pointer-events:none;top:0;-webkit-user-select:none;user-select:none}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._empty-block_tb7xr_226._readonly_tb7xr_236 ._task-placeholder_tb7xr_226{display:none}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197:after{background-color:var(--color_ink_5);border-radius:5px;content:"";display:block;height:calc(100% + 6px);left:-8px;opacity:0;position:absolute;top:-3px;transition:opacity .2s;width:calc(100% + 16px);z-index:-1}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._focused_tb7xr_256:after,._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197:not(._readonly_tb7xr_236):hover:after{opacity:1}._sc-popover_tb7xr_262{border-radius:5px;box-shadow:0 5px 10px rgba(0,0,0,.29);position:absolute;transform:translate(-50%);z-index:11}._sc-mention-share-popover_tb7xr_273{background-color:var(--color_white);border:1px solid var(--color_ink_5);border-radius:5px;margin-top:20px;padding:16px;transition:opacity .2s,transform .2s;width:320px}._sc-mention-share-popover_tb7xr_273 ._popup-title_tb7xr_283{font-size:14px;font-weight:700;line-height:16px;text-align:center}._sc-mention-share-popover_tb7xr_273 ._popup-message_tb7xr_290{font-size:12px;line-height:16px;margin-top:8px}._sc-mention-share-popover_tb7xr_273 ._button-container_tb7xr_296{float:right;margin-top:12px}._sc-mention-share-popover_tb7xr_273 ._cancel-button_tb7xr_301{margin-right:5px}._sc-mention-share-popover_tb7xr_273._popover-enter_tb7xr_79,._sc-mention-share-popover_tb7xr_273._popover-leave_tb7xr_80{opacity:0}._sc-mention-share-popover_tb7xr_273._popover-enter-active_tb7xr_85._popover-enter_tb7xr_79{opacity:1;pointer-events:auto}._sc-folder-overview-fixed-toolbar_tb7xr_319{box-sizing:border-box;margin-top:-48px;padding:0;pointer-events:none;position:absolute;width:100%;z-index:42}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-toolbar-component_tb7xr_27{background-color:var(--color__inverse__standard__background);border-radius:0;box-shadow:var(--boxshadow__elevation1);display:flex;height:var(--fixed-toolbar-height);justify-content:center;margin-left:auto;margin-right:auto;max-width:100%;min-width:0;pointer-events:auto;position:relative}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button-done_tb7xr_344{font-size:14px;line-height:24px;margin-left:2px}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93{box-sizing:border-box;margin-top:0;transform:none;width:100%}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{padding-top:0}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button_tb7xr_48{fill:var(--color_ink_40);color:var(--color_ink_40);padding:8px 6px}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button--active_tb7xr_369,._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button_tb7xr_48:hover{fill:var(--color__inverse__standard__text);color:var(--color__inverse__standard__text)}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93,._sc-folder-overview-fixed-toolbar_tb7xr_319._docked_tb7xr_377 ._sc-link-prompt_tb7xr_93{height:100%}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{box-sizing:border-box;height:100%}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{margin-right:4px;margin-top:4px}._folder-overview-limited-width_tb7xr_393 ._sc-mention-share-popover_tb7xr_273{box-sizing:border-box;transform:none;width:100%}._sc-folder-overview-editor_tb7xr_14 ._sc-contextual-toolbar-popover_tb7xr_60{z-index:200}._sc-folder-overview-editor_tb7xr_14 ._sc-editor-href_tb7xr_171{color:var(--color__attention__text)}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112,._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{display:none}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93{background-color:var(--color_white);border:0;height:auto;padding:0;z-index:200}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{color:var(--color_text_link);padding:12px}._sc-folder-overview-editor_tb7xr_14 .DraftEditor-root{color:var(--color__standard__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 ._task-block-clickable-div_tb7xr_215{cursor:pointer}._sc-folder-overview-editor_tb7xr_14 ._task-block-checkbox_tb7xr_209,._sc-folder-overview-editor_tb7xr_14 ._task-block-clickable-div_tb7xr_215{height:12px;left:2px;min-width:12px;top:4px;width:12px}._sc-mention-share-popover_tb7xr_273 ._popup-message_tb7xr_290{color:var(--color_stone);line-height:18px}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR,._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-unorderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:28px}'));const Th={scFolderOverviewInteractionContainer:"_sc-folder-overview-interaction-container_tb7xr_9",scFolderOverviewEditor:"_sc-folder-overview-editor_tb7xr_14",scFolderOverviewDraft:"_sc-folder-overview-draft_tb7xr_14",scToolbarComponent:"_sc-toolbar-component_tb7xr_27",toolbarDivider:"_toolbar-divider_tb7xr_36",toolbarSpacer:"_toolbar-spacer_tb7xr_44",toolbarButton:"_toolbar-button_tb7xr_48",scContextualToolbarPopover:"_sc-contextual-toolbar-popover_tb7xr_60",popoverEnter:"_popover-enter_tb7xr_79",popoverLeave:"_popover-leave_tb7xr_80",popoverEnterActive:"_popover-enter-active_tb7xr_85",scLinkPrompt:"_sc-link-prompt_tb7xr_93",submitButton:"_submit-button_tb7xr_112",linkPromptInput:"_link-prompt-input_tb7xr_116",scEditorHref:"_sc-editor-href_tb7xr_171",scToolbarTooltip:"_sc-toolbar-tooltip_tb7xr_177",scToolbarButtonTooltipContent:"_sc-toolbar-button-tooltip-content_tb7xr_177",scToolbarButtonTooltipContentMessage:"_sc-toolbar-button-tooltip-content__message_tb7xr_184",scToolbarButtonTooltipContentShortcut:"_sc-toolbar-button-tooltip-content__shortcut_tb7xr_189",taskBlock:"_task-block_tb7xr_197",checked:"_checked_tb7xr_204",taskBlockCheckbox:"_task-block-checkbox_tb7xr_209",taskBlockClickableDiv:"_task-block-clickable-div_tb7xr_215",emptyBlock:"_empty-block_tb7xr_226",taskPlaceholder:"_task-placeholder_tb7xr_226",readonly:"_readonly_tb7xr_236",focused:"_focused_tb7xr_256",scPopover:"_sc-popover_tb7xr_262",scMentionSharePopover:"_sc-mention-share-popover_tb7xr_273",popupTitle:"_popup-title_tb7xr_283",popupMessage:"_popup-message_tb7xr_290",buttonContainer:"_button-container_tb7xr_296",cancelButton:"_cancel-button_tb7xr_301",scFolderOverviewFixedToolbar:"_sc-folder-overview-fixed-toolbar_tb7xr_319",toolbarButtonDone:"_toolbar-button-done_tb7xr_344",toolbarButtonActive:"_toolbar-button--active_tb7xr_369",docked:"_docked_tb7xr_377",folderOverviewLimitedWidth:"_folder-overview-limited-width_tb7xr_393"},Oh={evts:["focus","blur","updateFocus"],values:["isFocused"]},Ih={evts:["init","populateWithComment","change","key","keyCommand","returnKey","input","pasteText","pasteHTML","insertMacro","focus","blur","compositionStart","compositionEnd","readOnly"],values:["editorKey","editorState","readOnly","decorators","isComposing","isFocused","blockRenderers"]},Dh={evts:["cancel","post"],values:["content"]},Rh={evts:["update","apply","updateMacroRef","updateVisibility"],values:["active","macroRef","isVisible"]},Nh={evts:["queryUpdate","onApplyMentionToRange"],values:["userMap","users"]},Ph={evts:["updateSelectedIndex","updateTotalSuggestions","up","down"],values:["selectedIndex","totalSuggestions"]},Bh={evts:["updateLinkPromptProps","createLink","openLink"],values:["linkPromptProps"]},Fh={evts:["updatePopupProps","onShare","onShareCompleted"],values:["popupProps"]},jh={draft:Ih,comment:Dh,macro:Rh,suggestion:Ph,mentionSuggestions:Nh,container:Oh,mentionShareFlow:Fh,hyperlink:Bh};function zh(e){return function(t,r){return[...e,null].reverse().reduce((function({nodes:e,result:t},r){const n=e.shift();return{nodes:e,result:null!==r?Object.assign(Object.assign({},n),{[r]:t}):t}}),{nodes:e.reduce((function([e,...t],r){return[e[r]||{},e,...t]}),[t]),result:r}).result}}function Kh(e,t){return Object.assign({},e.reduce((function(e,r){return Object.assign(Object.assign({},e),{[r]:t(r)})}),{}))}function Lh(e){return Kh(Object.keys(e),(function(t){return{__place__:zh(["composers",t]),on:Kh(e[t].evts,(function(r){return{__place__:zh(["reducers",t,"evts",r]),update:Kh(e[t].values,(function(e){return{__place__:zh(["reducers",t,"values",e,r])}}))}}))}}))}function Uh(e){return function(t,r){const n=t.scope;t.scope=function(){return e.__place__(n&&n.call(this)||{},t[r].bind(this))}}}const qh=e=>({scope:()=>e}),Wh=Lh(jh);function Hh(){return{draft:{editorKey:Ah.genKey(),editorState:Ah.EditorState.createEmpty(),decorators:[],blockRenderers:{},readOnly:!1,isComposing:!1,isFocused:!1,containerPostOnBlur:!1},comment:{content:{text:"",metadata:[]}},macro:{active:null,macroRef:null,isVisible:!0},suggestion:{selectedIndex:-1,totalSuggestions:0},mentionShareFlow:{popupProps:null},mentionSuggestions:{userMap:{},users:null},container:{isFocused:!1},hyperlink:{linkPromptProps:null}}}function Vh(e,t){return Object.keys(t).reduce((function(t,r){if(!(r in e)||!e[r])throw new TypeError(`${r} is an unsupported feature`);return Object.assign(Object.assign({},t),{[r]:e[r]})}),{})}function $h(e){return Vh(Hh(),e)}class Gh{}class Qh extends Gh{updateEditorState(e){return e.innerProps.evt}handleKeyCommand(e){const{evt:t,value:r}=e.innerProps,n=Ah.RichUtils.handleKeyCommand(r,t);return n||r}handleCompositionStart(){return!0}handleCompositionEnd(){return!1}setFocused(){return!0}setBlurred(){return!1}}s.__decorate([Uh(Wh.draft.on.change.update.editorState)],Qh.prototype,"updateEditorState",null),s.__decorate([Uh(Wh.draft.on.keyCommand.update.editorState)],Qh.prototype,"handleKeyCommand",null),s.__decorate([Uh(Wh.draft.on.compositionStart.update.isComposing)],Qh.prototype,"handleCompositionStart",null),s.__decorate([Uh(Wh.draft.on.compositionEnd.update.isComposing)],Qh.prototype,"handleCompositionEnd",null),s.__decorate([Uh(Wh.draft.on.focus.update.isFocused)],Qh.prototype,"setFocused",null),s.__decorate([Uh(Wh.draft.on.blur.update.isFocused)],Qh.prototype,"setBlurred",null);class Jh extends Gh{initText(e){const{evt:t}=e.innerProps;return Ah.EditorState.createWithContent(Ah.ContentState.createFromText(t.text))}postText(e){const{evt:t}=e.innerProps;return{metadata:[],text:t.getCurrentContent().getPlainText()}}}s.__decorate([Uh(Wh.draft.on.populateWithComment.update.editorState)],Jh.prototype,"initText",null),s.__decorate([Uh(Wh.comment.on.post.update.content)],Jh.prototype,"postText",null);class Xh extends Gh{triggerInit(e){const t=e.status.comment.content;if(e.innerProps.prevStatus.comment.content!==t){e.triggers.draft.init(null);const{editorState:r}=e.triggers.draft.populateWithComment(t);e.triggers.draft.change(r)}}triggerChange(e){const{editorState:t}=e.status.draft;e.innerProps.prevStatus.draft.editorState!==t&&e.triggers.draft.change(t)}addDecoratorsOnChange(e){const{value:t}=e.innerProps,{decorators:r}=e.status.draft;return null===t.getDecorator()?this.addDecorators(t,r):void 0}addDecorators(e,t){return Ah.EditorState.set(e,{decorator:new Ah.CompositeDecorator(t)})}}s.__decorate([Uh(Wh.comment)],Xh.prototype,"triggerInit",null),s.__decorate([Uh(Wh.draft)],Xh.prototype,"triggerChange",null),s.__decorate([Uh(Wh.draft.on.change.update.editorState)],Xh.prototype,"addDecoratorsOnChange",null);var Zh={exports:{}};!function(e,t){!function(r){var o=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a="object"==typeof n.commonjsGlobal&&n.commonjsGlobal;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,c,l=2147483647,u=36,d=1,p=26,m=38,f=700,h=72,_=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-d,S=Math.floor,w=String.fromCharCode;function C(e){throw new RangeError(E[e])}function k(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function M(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+k((e=e.replace(b,".")).split("."),t).join(".")}function A(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function T(e){return k(e,(function(e){var t="";return e>65535&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,r){var n=0;for(e=r?S(e/f):e>>1,e+=S(e/t);e>x*p>>1;n+=u)e=S(e/x);return S(n+(x+1)*e/(e+m))}function D(e){var t,r,n,o,i,a,s,c,m,f,v,y=[],b=e.length,E=0,x=_,w=h;for((r=e.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&C("not-basic"),y.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<b;){for(i=E,a=1,s=u;o>=b&&C("invalid-input"),((c=(v=e.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:u)>=u||c>S((l-E)/a))&&C("overflow"),E+=c*a,!(c<(m=s<=w?d:s>=w+p?p:s-w));s+=u)a>S(l/(f=u-m))&&C("overflow"),a*=f;w=I(E-i,t=y.length+1,0==i),S(E/t)>l-x&&C("overflow"),x+=S(E/t),E%=t,y.splice(E++,0,x)}return T(y)}function R(e){var t,r,n,o,i,a,s,c,m,f,v,y,b,E,x,k=[];for(y=(e=A(e)).length,t=_,r=0,i=h,a=0;a<y;++a)(v=e[a])<128&&k.push(w(v));for(n=o=k.length,o&&k.push(g);n<y;){for(s=l,a=0;a<y;++a)(v=e[a])>=t&&v<s&&(s=v);for(s-t>S((l-r)/(b=n+1))&&C("overflow"),r+=(s-t)*b,t=s,a=0;a<y;++a)if((v=e[a])<t&&++r>l&&C("overflow"),v==t){for(c=r,m=u;!(c<(f=m<=i?d:m>=i+p?p:m-i));m+=u)x=c-f,E=u-f,k.push(w(O(f+x%E,0))),c=S(x/E);k.push(w(O(c,0))),i=I(r,b,n==o),r=0,++n}++r,++t}return k.join("")}if(s={version:"1.4.1",ucs2:{decode:A,encode:T},decode:D,encode:R,toASCII:function(e){return M(e,(function(e){return y.test(e)?"xn--"+R(e):e}))},toUnicode:function(e){return M(e,(function(e){return v.test(e)?D(e.slice(4).toLowerCase()):e}))}},o&&i)if(e.exports==o)i.exports=s;else for(c in s)s.hasOwnProperty(c)&&(o[c]=s[c]);else r.punycode=s}(n.commonjsGlobal)}(Zh,Zh.exports);var Yh=Zh.exports;function e_(e){return 0===e.getCurrentContent().getPlainText().length}function t_(e){return e.getSelection().getHasFocus()}function r_(e,t){return Ah.EditorState.forceSelection(Ah.EditorState.push(e,t,"insert-fragment"),t.getSelectionAfter())}function n_(e,t,r,n,o,i){return Ah.Modifier.replaceText(e,Ah.SelectionState.createEmpty(t).merge({anchorOffset:r,focusOffset:n}),o,void 0,i)}function o_(e,t){let r=null,n=null;const o=e.start,i=e.end;let a,s,c=0;if(t.getBlockMap().forEach(((e,t)=>{if(e&&"atomic"!==e.getType()){const l=a_(e.getText());if(t&&null===r&&o<c+l.length){r=t;const e=o-c;a=s_(l.slice(0,e)).length}if(t&&null===n&&i<=c+l.length){n=t;const e=i-c;s=s_(l.slice(0,e)).length}c+=l.length}return r&&n})),!r||!n)throw new Error("Bad range");return Ah.SelectionState.createEmpty(r).merge({anchorKey:r,anchorOffset:a,focusKey:n,focusOffset:s})}function i_(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}const a_=e=>Yh.ucs2.decode(e),s_=e=>Yh.ucs2.encode(e);function c_(e){if("img"===e.tagName.toLowerCase()){const t=e.getAttribute("data-emoji-ch");if(t){const e=document.createElement("span");return e.textContent=t,e}}return e}function l_(e){const t=e.style,r=e.tagName.toLowerCase();let n=[];return(parseInt(t.fontWeight||"0",10)>=600||"bold"===t.fontWeight||"b"===r||"strong"===r)&&(n=[...n,"BOLD"]),"underline"!==t.textDecoration&&"u"!==r||(n=[...n,"UNDERLINE"]),"strikethrough"!==t.textDecoration&&"s"!==r&&"strike"!==r||(n=[...n,"STRIKETHROUGH"]),"italic"!==t.fontStyle&&"i"!==r&&"em"!==r||(n=[...n,"ITALIC"]),n}function u_(e){const t=e.getSelection(),r=e.getCurrentContent(),n=t.getStartKey(),o=t.getEndKey(),i=r.getBlockMap();return i.toSeq().skipUntil(((e,t)=>t===n)).takeUntil(((e,t)=>t===o)).concat([[o,i.get(o)]]).toList()}const d_=e=>{const t=e.getCurrentContent(),r=e.getSelection().getStartKey(),n=e.getSelection().getStartOffset(),o=e.getSelection().getEndOffset(),i=t.getBlockForKey(r),a=n_(t,r,n-1,o,". ",i.getEntityAt(n-1));return Ah.EditorState.set(e,{currentContent:a})};class p_ extends Gh{initStyle(e){const{value:t,evt:r}=e.innerProps,{styles:n}=this.splitStyles(r.metadata);return Ah.EditorState.createWithContent(n.reduce(((e,t)=>{const r=o_(t.location,e);return Ah.Modifier.applyInlineStyle(e,r,t.style.toUpperCase())}),t.getCurrentContent()))}postStyles(e){const{evt:t,value:r}=e.innerProps,n=this.getStyleMetadata(Ah.convertToRaw(t.getCurrentContent())),{other:o}=this.splitStyles(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getStyleMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((e,t)=>{const{metadata:r,pos:n}=e;return{metadata:[...r,...t.inlineStyleRanges.map((function(e){return{type:"style",style:e.style.toLowerCase(),location:{start:n+e.offset,end:n+e.offset+e.length}}}))],pos:n+a_(t.text).length}}),{metadata:[],pos:0});return r}splitStyles(e){return e.reduce(((e,t)=>"style"===t.type?{styles:[...e.styles,t],other:e.other}:{styles:e.styles,other:[...e.other,t]}),{styles:[],other:[]})}}function m_(e){const{value:t}=e.innerProps;return t}s.__decorate([Uh(Wh.draft.on.populateWithComment.update.editorState)],p_.prototype,"initStyle",null),s.__decorate([Uh(Wh.comment.on.post.update.content)],p_.prototype,"postStyles",null);class f_{constructor(e,t,r){this.evts={},this.values={};for(const n of t.evts)this.evts[n]=r=>f_.reduceValue(e,t.values,n,r.innerProps.evt,this.values,r.innerProps.value,r.kernel),this.evts[n]=r.reduce((function(e,t){return function(r){const{innerProps:{evt:o,value:i},kernel:a}=r,s=t.evts&&t.evts[n],c=a.compose(e,{evt:o,value:i});if(void 0!==s){const e=a.compose(s,{evt:o,value:void 0!==c?c:i});if(void 0!==e)return e}return c}}),this.evts[n]);for(const n of t.values){const o=r.reduce((function(e,t){const r=t.values&&t.values[n];return void 0!==r?[...e,r]:e}),[]);this.values[n]={};for(const r in t.evts){const i=t.evts[r];this.values[n][i]=f_.reducePartialReducers(e,n,i,o,m_)}}}static reducePartialReducers(e,t,r,n,o){return n.reduce((function(n,o){return function(i){const{innerProps:{evt:a,value:s},kernel:c}=i,l=o[r];if(void 0!==l){const r=l;let o=c.compose(n,{evt:a,value:s});o=void 0!==o?c.compose((function(r){return Object.assign(Object.assign({},r.status[e]),{[t]:o})}))[t]:s;const i=c.compose(r,{evt:a,value:o});return void 0!==i?i:o}const u=c.compose(n,{evt:a,value:s});return void 0!==u?u:s}}),o)}static reduceValue(e,t,r,n,o,i,a){return t.reduce((function(t,s){const c=o[s],l=a.compose(c[r],{evt:n,value:i[s]});return void 0!==l?a.compose((function(r){return r.featureTriggers[e](Object.assign(Object.assign({},t),{[s]:l}))})):a.compose((function(t){return t.status[e]}))}),i)}}class h_{constructor(e,t,r){this.composers={};for(const t in e)this.composers[t]=function(e){e.innerProps.initial&&e.kernel.compose(e.innerProps.initial,{prevStatus:e.status}),r.forEach((function(r){void 0!==r[t]&&e.kernel.compose(r[t],{prevStatus:e.status})}))};this.reducers=h_.completeScopeReducers(e,t)}static create(e,t,r){return new h_(e,t,r)}static completeScopeReducers(e,t){const r={};for(const n in e)r[n]={evts:{},values:{}},r[n]=new f_(n,e[n],t.reduce((function(e,t){const r=t[n];return void 0!==r&&e.push(r),e}),[]));return r}}function __(e,t,r,n,o){const i={};for(const a of e)i[a]=function(e){return o.compose((function(i){const s=i.status[n],c=o.compose(t[a],{evt:e,value:s});return r(c)}))};return i}class g_{constructor(e){this.listeners=[],this.status=e}setStatus(e,t=!1){this.status=Object.assign(Object.assign({},this.status),e),t||this.listeners.forEach((e=>e(this.getStatus())))}getStatus(){return this.status}subscribe(e){return this.listeners.push(e),{unsubscribe:()=>this.listeners=this.listeners.filter((t=>t!==e))}}}class v_ extends g_{constructor({scopeNames:e,defaultStatus:t}){super(t),this.scopeNames=e,this.memoizedCreateKernelAndTriggers=this.makeMemoizedCreateKernelAndTriggers()}makeMemoizedCreateKernelAndTriggers(){let e,t,r,n;return o=>(n!==o&&(e=this.createKernel(o),r=this.createFeatureTriggers(o),t=this.createTriggers(o,e,r),n=o),{kernel:e,triggers:t,featureTriggers:r})}createTriggers(e,t,r){return function(e,t,r,n){let o={};for(const i in t.reducers)o=Object.assign(Object.assign({},o),{[i]:__(e[i].evts,t.reducers[i].evts,r[i],i,n)});return o}(this.scopeNames,e,r||this.createFeatureTriggers(e),t||this.createKernel(e))}getTriggers(e){return this.memoizedCreateKernelAndTriggers(e).triggers}compose(e,t,r){const n=this.getStatus(),{kernel:o,featureTriggers:i,triggers:a}=this.memoizedCreateKernelAndTriggers(t);return e({status:n,triggers:a,innerProps:r,kernel:o,featureTriggers:i})}updateStatus(e,t){const r=this.createFeatureTriggers(t),n=this.getStatus();for(const t in e){const o=e[t];n[t]!==o&&r[t](o)}return this.getStatus()}createKernel(e){return{compose:(t,r)=>this.compose(t,e,r)}}createFeatureTriggers(e){const t={};for(const r in this.scopeNames)t[r]=t=>{const n=this.getStatus();return this.compose(e.composers[r],e,{prevStatus:n,initial:()=>{this.setStatus(Object.assign(Object.assign({},n),{[r]:t}))}}),t};return t}}class y_ extends t.reactExports.Component{constructor(e){super(e),this.subscriptionHandle={unsubscribe:()=>{}},this.handleContainerStatus=e=>{this.setState({status:e})},this.subscribeToContainer(e.container)}UNSAFE_componentWillReceiveProps(e){e.container!==this.props.container&&this.subscribeToContainer(e.container)}subscribeToContainer(e){this.subscriptionHandle.unsubscribe(),this.subscriptionHandle=e.subscribe(this.handleContainerStatus)}componentWillUnmount(){var e;null===(e=this.subscriptionHandle)||void 0===e||e.unsubscribe()}getChildContext(){return{container:this.props.container,scope:this.props.scope}}render(){return t.reactExports.createElement("div",null,this.props.children)}}function b_(e,t){for(let r in e)if(e[r]!==t[r])return!1;return!0}y_.childContextTypes={container:r.PropTypes.object,scope:r.PropTypes.object},r.PropTypes.object,r.PropTypes.object;class E_ extends t.reactExports.Component{constructor(){super(...arguments),this._container=new v_({scopeNames:this.scopeNames,defaultStatus:this.createDefaultStatus()})}getLayerProps(e){return{}}UNSAFE_componentWillMount(){this.updateContainerStatus(this.props),this.subscribeToContainer()}UNSAFE_componentWillReceiveProps(e){b_(this.getLayerProps(this.props),this.getLayerProps(e))||(this.cachedScope=void 0),this.updateContainerStatus(e)}componentWillUnmount(){this.unsubscribeFromContainer()}updateContainerStatus(e){this.container.updateStatus(this.mapPropsToUpdates(e,this.container.getStatus()),this.scope)}reloadCachedScope(){return function(e,t){const r=[],n=[];return t.forEach((e=>{const t=e.scope();t.reducers&&r.push(t.reducers),t.composers&&n.push(t.composers)})),h_.create(e,r,n)}(this.scopeNames,this.mapPropsToLayers(this.props))}get container(){return this._container}get scope(){return this.cachedScope||(this.cachedScope=this.reloadCachedScope()),this.cachedScope}render(){return t.reactExports.createElement(y_,{scope:this.scope,container:this.container},this.props.children)}subscribeToContainer(){this.subscriptionHandle=this.container.subscribe((e=>{this.setState(e)}))}unsubscribeFromContainer(){var e;null===(e=this.subscriptionHandle)||void 0===e||e.unsubscribe()}}E_.displayName="EditorContainer";const x_={evts:["updateActiveFormatting"],values:["activeFormatting"]},S_={evts:["toggleTaskBlock","setTaskState"],values:[]},w_={evts:["setClassName"],values:["classNames"]},C_={evts:["setCaptureTab"],values:["captureTab"]},k_={evts:[],values:["editorState"]};const M_=Lh(Object.assign(Object.assign({},jh),{folderOverview:k_,fixedToolbar:x_,globalStyle:w_,task:S_,accessibility:C_})),A_=["mailto:","webcal:","tel:"],T_=e=>{if(!e||!e.trim().length)return!1;try{const t=new URL(e);return!!t.host||A_.includes(t.protocol)}catch(e){return!1}};class O_ extends t.reactExports.Component{constructor(){super(...arguments),this.onClick=e=>{const t=e.currentTarget.href;t&&T_(t)&&(this.props.onOpenLink(t),e.preventDefault(),e.stopPropagation())},this.onMouseUp=e=>{e.preventDefault(),e.stopPropagation()},this.onMouseDown=e=>{e.preventDefault(),e.stopPropagation()}}getUrl(){const{url:e}=this.props.contentState.getEntity(this.props.entityKey).getData();return(e=>(e&&A_.filter((t=>e.trim().startsWith(t))).length||e.match(/^[a-zA-Z0-9\+\-\.]+:\/\//)||(e="http://"+e),e))(e)}render(){const e=this.getUrl();return t.reactExports.createElement("a",{className:Th.scEditorHref,href:e,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,title:e},this.props.children)}}O_.displayName="LinkSpanComponent";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_editor/index.module.out.css",(e=>"._sc-comment-editor_1n7jd_1{position:relative}._mention-suggestion-list_1n7jd_5{-webkit-user-select:none;user-select:none}._mention-suggestion-row_1n7jd_9{display:flex}._sc-comment-editor-prefix_1n7jd_13{float:left;position:relative;z-index:2}._sc-comment-editor-right-accessory_1n7jd_19{margin-right:4px;margin-top:4px}._sc-comment-editor-placeholder_1n7jd_24{color:var(--color_ink_40);position:absolute;top:16px;white-space:nowrap;width:100%}._sc-comment-editor-inner--disabled_1n7jd_33 ._sc-comment-editor-placeholder_1n7jd_24{z-index:2}._sc-comment-editor-mentions-list-container_1n7jd_37{background:var(--color__standard__background);font-size:12px;max-height:180px;overflow-x:hidden;overflow-y:auto;width:calc(100% - 10px);z-index:1000}._sc-comment-editor-mentions-list_1n7jd_37{list-style:none;margin:0;padding:0}._sc-comment-editor-mentions-suggestion_1n7jd_53{background:inherit;border:none;font-size:12px;padding:8px;width:100%}._sc-comment-editor-mentions-suggestion_1n7jd_53>div{align-items:center;display:flex;text-align:left}._sc-comment-editor-mentions-suggestion_1n7jd_53 .mc-avatar,._sc-comment-editor-mentions-suggestion_1n7jd_53 .mc-avatar-text{margin-right:8px}._sc-comment-editor-mentions-email_1n7jd_73,._sc-comment-editor-mentions-name_1n7jd_72{overflow:hidden;text-overflow:ellipsis}._sc-comment-editor-mentions-name_1n7jd_72{font-size:var(--type__body__standard--fontsize)}._sc-comment-editor-mentions-email_1n7jd_73{font-size:var(--type__body__small--fontsize)}._active-macro-chrome_1n7jd_86{position:absolute;-webkit-user-select:none;user-select:none;width:100%;z-index:1000}._sc-comment-editor-mentions-user_1n7jd_93{overflow:hidden;white-space:nowrap}._sc-comment-editor-inner_1n7jd_33,._sc-comment-renderer-inner_1n7jd_99{position:relative;word-break:break-word}._sc-comment-editor-interaction-container_1n7jd_104{position:relative}._sc-comment-editor-draft_1n7jd_108{max-height:40vh;overflow:auto}._sc-comment-editor-controls_1n7jd_113{align-items:center;display:flex;height:100%;position:relative}._sc-comment-editor-controls_1n7jd_113 ._sc-comment-editor-controls-right_1n7jd_120{margin-left:auto;white-space:nowrap}._sc-comment-editor-inline-controls_1n7jd_126{align-items:center;display:flex;justify-items:center;z-index:10}._sc-comment-editor-style-bold_1n7jd_134{font-weight:700}._sc-comment-editor-style-code_1n7jd_138{word-wrap:break-word}._sc-comment-editor-style-italic_1n7jd_142{font-style:italic}._sc-comment-editor-style-strikethrough_1n7jd_146._sc-comment-editor-style-underline_1n7jd_146{text-decoration:line-through underline}._sc-comment-editor-style-strikethrough_1n7jd_146{text-decoration:line-through}._sc-comment-editor-style-underline_1n7jd_146{text-decoration:underline}._sc-comment-editor-coach-mark-container_1n7jd_160{position:relative}._sc-comment-editor-sticker_1n7jd_164{height:112px;width:112px}._sc-comment-editor-atomic-block_1n7jd_169{clear:both}._sc-comment-editor-control-btn_1n7jd_173 svg.mc-icon{height:100%;width:100%}._sc-comment-editor-tagline_1n7jd_178{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:8px 16px}._sc-comment-editor_1n7jd_1{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height)}._sc-comment-editor-prefix_1n7jd_13{height:20px}._sc-comment-editor_1n7jd_1 ._sc-comment-editor-prefix_1n7jd_13{padding:16px 0 0 58px}._sc-comment-editor-mentions-list-container_1n7jd_37{-webkit-font-smoothing:antialiased;border:1px solid var(--color_stone_forty)}._sc-comment-editor-mentions-suggestion_1n7jd_53{border-top:1px solid var(--color_stone_forty);font-size:var(--type__body__small--fontsize)}._sc-comment-editor-mentions-email_1n7jd_73{color:var(--color_stone)}._sc-comment-editor-mentions-list-header_1n7jd_214{color:var(--color_stone);padding:8px}._sc-comment-editor-mentions-suggestion_1n7jd_53._sc-comment-editor-mentions-suggestion-selected_1n7jd_220,._sc-comment-editor-mentions-suggestion_1n7jd_53:hover{background-color:var(--color_blue_sixteen)}._sc-comment-editor-inner_1n7jd_33 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner_1n7jd_33 .public-DraftEditorPlaceholder-root{padding:16px 16px 16px 58px}._sc-comment-renderer-inner_1n7jd_99{padding:8px 16px 8px 58px}._sc-comment-editor-controls-container_1n7jd_235{background:inherit;height:40px;padding:0 8px}._sc-comment-editor-mention_1n7jd_37{color:var(--color__attention__text)}._sc-comment-editor_1n7jd_1._pending_1n7jd_245{color:var(--color__faint__text)}._sc-comment-editor-inner--disabled_1n7jd_33{background:var(--color__faint__background)}._sc-comment-editor-inner--right-rail_1n7jd_254{color:var(--color__standard__text);display:flex;font-family:var(--type__body__standard--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__standard--lineheight)}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-interaction-container_1n7jd_104{flex-grow:1;margin-left:6px}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-prefix_1n7jd_13{padding:5px 0 0}._sc-comment-editor-inner--right-rail_1n7jd_254 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner--right-rail_1n7jd_254 .public-DraftEditorPlaceholder-root{border-left:0;padding:5px 16px 5px 0}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-placeholder_1n7jd_24{top:6px}._sc-comment-editor-avatar-wrapper_1n7jd_284{margin-left:6px;margin-top:4px}._sc-comment-editor-controls-post--right-rail_1n7jd_289{margin-left:8px}._sc-comment-editor-controls-cancel--right-rail_1n7jd_293{color:var(--color__faint__text);margin-left:8px}._sc-comment-editor-mention-btn_1n7jd_298{color:var(--color__faint__text)}._sc-comment-editor-post-bar-left-wrapper_1n7jd_302{display:flex}._sc-comment-editor-post-bar-annotation_1n7jd_306{align-items:center;display:flex;height:24px;margin-left:8px}._sc-comment-editor-tagline_1n7jd_178:empty{padding:0}"));const I_={scCommentEditor:"_sc-comment-editor_1n7jd_1",mentionSuggestionList:"_mention-suggestion-list_1n7jd_5",mentionSuggestionRow:"_mention-suggestion-row_1n7jd_9",scCommentEditorPrefix:"_sc-comment-editor-prefix_1n7jd_13",scCommentEditorRightAccessory:"_sc-comment-editor-right-accessory_1n7jd_19",scCommentEditorPlaceholder:"_sc-comment-editor-placeholder_1n7jd_24",scCommentEditorInnerDisabled:"_sc-comment-editor-inner--disabled_1n7jd_33",scCommentEditorMentionsListContainer:"_sc-comment-editor-mentions-list-container_1n7jd_37",scCommentEditorMentionsList:"_sc-comment-editor-mentions-list_1n7jd_37",scCommentEditorMentionsSuggestion:"_sc-comment-editor-mentions-suggestion_1n7jd_53",scCommentEditorMentionsEmail:"_sc-comment-editor-mentions-email_1n7jd_73",scCommentEditorMentionsName:"_sc-comment-editor-mentions-name_1n7jd_72",activeMacroChrome:"_active-macro-chrome_1n7jd_86",scCommentEditorMentionsUser:"_sc-comment-editor-mentions-user_1n7jd_93",scCommentEditorInner:"_sc-comment-editor-inner_1n7jd_33",scCommentRendererInner:"_sc-comment-renderer-inner_1n7jd_99",scCommentEditorInteractionContainer:"_sc-comment-editor-interaction-container_1n7jd_104",scCommentEditorDraft:"_sc-comment-editor-draft_1n7jd_108",scCommentEditorControls:"_sc-comment-editor-controls_1n7jd_113",scCommentEditorControlsRight:"_sc-comment-editor-controls-right_1n7jd_120",scCommentEditorInlineControls:"_sc-comment-editor-inline-controls_1n7jd_126",scCommentEditorStyleBold:"_sc-comment-editor-style-bold_1n7jd_134",scCommentEditorStyleCode:"_sc-comment-editor-style-code_1n7jd_138",scCommentEditorStyleItalic:"_sc-comment-editor-style-italic_1n7jd_142",scCommentEditorStyleStrikethrough:"_sc-comment-editor-style-strikethrough_1n7jd_146",scCommentEditorStyleUnderline:"_sc-comment-editor-style-underline_1n7jd_146",scCommentEditorCoachMarkContainer:"_sc-comment-editor-coach-mark-container_1n7jd_160",scCommentEditorSticker:"_sc-comment-editor-sticker_1n7jd_164",scCommentEditorAtomicBlock:"_sc-comment-editor-atomic-block_1n7jd_169",scCommentEditorControlBtn:"_sc-comment-editor-control-btn_1n7jd_173",scCommentEditorTagline:"_sc-comment-editor-tagline_1n7jd_178",scCommentEditorMentionsListHeader:"_sc-comment-editor-mentions-list-header_1n7jd_214",scCommentEditorMentionsSuggestionSelected:"_sc-comment-editor-mentions-suggestion-selected_1n7jd_220",scCommentEditorControlsContainer:"_sc-comment-editor-controls-container_1n7jd_235",scCommentEditorMention:"_sc-comment-editor-mention_1n7jd_37",pending:"_pending_1n7jd_245",scCommentEditorInnerRightRail:"_sc-comment-editor-inner--right-rail_1n7jd_254",scCommentEditorAvatarWrapper:"_sc-comment-editor-avatar-wrapper_1n7jd_284",scCommentEditorControlsPostRightRail:"_sc-comment-editor-controls-post--right-rail_1n7jd_289",scCommentEditorControlsCancelRightRail:"_sc-comment-editor-controls-cancel--right-rail_1n7jd_293",scCommentEditorMentionBtn:"_sc-comment-editor-mention-btn_1n7jd_298",scCommentEditorPostBarLeftWrapper:"_sc-comment-editor-post-bar-left-wrapper_1n7jd_302",scCommentEditorPostBarAnnotation:"_sc-comment-editor-post-bar-annotation_1n7jd_306"};function D_(e){const n=e.contentState.getEntity(e.entityKey),o=n&&n.getData().pending,i=r.cx(I_.scCommentEditorMention,{[I_.pending]:o});return t.reactExports.createElement("span",{className:i,"data-entity-key":e.entityKey,"data-editor":e.editorKey},e.children)}class R_ extends Gh{addDecorators(e){return[...e.innerProps.value,{strategy:function(e,t,r){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"mention"===r.getEntity(t).getType()}),t)},props:{editorKey:e.status.draft.editorKey},component:D_}]}initMentions(e){const{value:t,evt:r}=e.innerProps,{mentions:n}=this.splitMentions(r.metadata);return Ah.EditorState.createWithContent(n.reduce(((e,t)=>{const r=e.createEntity("mention","IMMUTABLE",{identifier:t.user.identifier,type:t.user.type}),n=r.getLastCreatedEntityKey(),o=o_(t.location,r);return Ah.Modifier.applyEntity(e,o,n)}),t.getCurrentContent()))}postMentions(e){const{evt:t,value:r}=e.innerProps,n=this.getMentionMetadata(Ah.convertToRaw(t.getCurrentContent())),{other:o}=this.splitMentions(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getMentionMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"mention"===e.entityMap[t.key].type})).map((function(t){const r=e.entityMap[t.key].data;return{type:"mention",user:{type:r.type,identifier:r.identifier},location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+a_(r.text).length}}),{metadata:[],pos:0});return r}splitMentions(e){return e.reduce(((e,t)=>"mention"===t.type?{mentions:[...e.mentions,t],other:e.other}:{mentions:e.mentions,other:[...e.other,t]}),{mentions:[],other:[]})}}s.__decorate([Uh(Wh.draft.on.init.update.decorators)],R_.prototype,"addDecorators",null),s.__decorate([Uh(Wh.draft.on.populateWithComment.update.editorState)],R_.prototype,"initMentions",null),s.__decorate([Uh(Wh.comment.on.post.update.content)],R_.prototype,"postMentions",null);const N_=({style:e,className:r,children:n},{container:o,scope:i})=>{const a=o.getTriggers(i);return t.reactExports.createElement("span",{className:"active-macro",ref:a.macro.updateMacroRef},t.reactExports.createElement("span",{className:r,style:e},n))};N_.displayName="ActiveMacroSpanComponent",N_.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};class P_ extends Gh{constructor(e){super(),this.options=e}addDecorators(e){const{value:t}=e.innerProps;return[...t,{strategy:this.findActiveMacros.bind(this,this.options.type),component:N_,props:this.options.spanProps}]}checkForActiveMacro(e){const{kernel:t,triggers:r}=e,n=this.onMacro,{delimiter:o,type:i}=this.options,a=e.status.draft.editorState,s=a.getSelection();if(s.isCollapsed()){const c=a.getCurrentContent(),l=s.getAnchorKey(),u=c.getBlockForKey(l),d=s.getAnchorOffset(),p=u.getEntityAt(d)||u.getEntityAt(d-1);if(null!==p&&c.getEntity(p).getType()===i){let a="",s=-1,c=-1;u.findEntityRanges((function(e){return e.getEntity()===p}),(function(e,t){s=e,c=t,a=u.getText().substring(e,t)}));const d=e.status.macro.active;(d&&d.entityKey!==p||a.length&&(!d||d.content!==a))&&r.macro.update(t.compose(n,{delimiter:o,content:a,entityKey:p,blockKey:l,macroStartOffset:s,macroEndOffset:c,type:i})||null)}else r.macro.update(null),r.macro.updateVisibility(!0)}}applyMacroOnRightArrow(e){const{status:t,innerProps:{evt:r}}=e,n=t.macro;if(n.active&&39===r.which&&n.active.type===this.options.type){e.innerProps.value.getSelection().getAnchorOffset()>=n.active.endOffset&&(e.triggers.macro.apply(null),r.preventDefault())}}applyMacroOnReturn(e){const{triggers:t,status:r}=e,n=r.macro;n.active&&n.active.type===this.options.type&&t.macro.apply(null)}insertMacro(e){const{delimiter:t}=this.options,{status:r,innerProps:{value:n}}=e;if(r.macro.active)return n;const o=n.getSelection(),i=n.getCurrentContent().getBlockForKey(o.getAnchorKey()).getText(),a=o.getStartOffset();function s(e,t,r){const n=e.getSelection();return r_(e,n_(e.getCurrentContent(),n.getFocusKey(),n.getStartOffset(),n.getEndOffset(),t,r))}let c=n;0!==a&&" "!==i.substr(a-1,1)&&(c=s(n," "));const l=c.getCurrentContent().createEntity(this.options.type,"MUTABLE");return s(c,t,l.getLastCreatedEntityKey())}updateActiveMacroEntity(e){const{delimiter:t}=this.options,{evt:r,value:n}=e.innerProps,o=n.getSelection(),i=n.getCurrentContent(),a=i.getBlockForKey(o.getAnchorKey());if(t.lastIndexOf(r)===t.length-1){const s=a.getText(),c=o.getStartOffset(),l=o.getEndOffset(),u=a.getEntityAt(c)||a.getEntityAt(c-1);if(null!==u&&0===i.getEntity(u).getType().indexOf("macro: ")){return r_(n,Ah.Modifier.replaceText(i,o,r,void 0,u))}{const o=e.kernel.compose(this.onDelimiter,{text:s,startOffset:c,endOffset:l,input:r,delimiter:t});if(void 0!==o){const e=i.createEntity(this.options.type,"MUTABLE").getLastCreatedEntityKey();return r_(n,n_(i,a.getKey(),o.start,o.end,o.text,e))}}}const s=o.getAnchorOffset(),c=a.getEntityAt(s)||a.getEntityAt(s-1);if(null!==c&&i.getEntity(c).getType()===this.options.type){if(" "===r){let e=i;if(a.findEntityRanges((function(e){return e.getEntity()===c}),(function(t,n){const s=a.getText().substring(t,n);s.match(/\s/)&&(e=n_(i,o.getAnchorKey(),t,n,s+r))})),e!==i)return r_(n,e)}return r_(n,Ah.Modifier.replaceText(i,o,r,void 0,c))}return n}updateActiveMacros(e){const{evt:t}=e.innerProps;return null===t?null:t&&t.type===this.options.type?t:void 0}updateMacroRef(e){const{active:t}=e.status.macro,{evt:r}=e.innerProps;return t&&t.type===this.options.type?r:void 0}updateVisibility(e){const{active:t}=e.status.macro,{evt:r}=e.innerProps;return t&&t.type!==this.options.type?void 0:r}applyMacro(e){const t=e.status.macro;t.active&&t.active.type===this.options.type&&e.kernel.compose(this.onAutoComplete)}findActiveMacros(e,t,r,n){t.findEntityRanges((function(t){const r=t.getEntity();return null!==r&&n.getEntity(r).getType()===e}),r)}}s.__decorate([Uh(Wh.draft.on.init.update.decorators)],P_.prototype,"addDecorators",null),s.__decorate([Uh(Wh.draft.on.change.update.editorState)],P_.prototype,"checkForActiveMacro",null),s.__decorate([Uh(Wh.draft.on.key.update.editorState)],P_.prototype,"applyMacroOnRightArrow",null),s.__decorate([Uh(Wh.draft.on.returnKey.update.editorState)],P_.prototype,"applyMacroOnReturn",null),s.__decorate([Uh(Wh.draft.on.insertMacro.update.editorState)],P_.prototype,"insertMacro",null),s.__decorate([Uh(Wh.draft.on.input.update.editorState),Uh(Wh.draft.on.pasteText.update.editorState)],P_.prototype,"updateActiveMacroEntity",null),s.__decorate([Uh(Wh.macro.on.update.update.active)],P_.prototype,"updateActiveMacros",null),s.__decorate([Uh(Wh.macro.on.updateMacroRef.update.macroRef)],P_.prototype,"updateMacroRef",null),s.__decorate([Uh(Wh.macro.on.updateVisibility.update.isVisible)],P_.prototype,"updateVisibility",null),s.__decorate([Uh(Wh.macro.on.apply)],P_.prototype,"applyMacro",null);r.injectInternalStyle("typescript/libraries/comments2/src/components/comment/index.module.out.css",(e=>"._sc-comment_lztvn_1{display:flex}._sc-comment-content-container_lztvn_5{width:100%}._sc-comment-content_lztvn_5,._sc-comment-renderer_lztvn_9{word-wrap:break-word;-webkit-text-size-adjust:none}._sc-comment-renderer_lztvn_9{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height);position:relative}._sc-comment-author_lztvn_21{margin-right:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-comment-timestamp_lztvn_28{flex:1 0;white-space:nowrap}._sc-comment-separator_lztvn_34{border-radius:50%;display:inline-block;height:2px;margin:4px 6px;width:2px}._sc-comment-edit-controls_lztvn_42{margin-left:48px}._sc-comment-sticker_lztvn_46{display:block;height:112px;margin:0 auto;width:112px}._sc-comment-text_lztvn_53{white-space:pre-wrap}._sc-comment-deleted_lztvn_57 ._sc-comment-text_lztvn_53{font-style:italic}._sc-comment-info_lztvn_61{position:relative;width:100%}._sc-comment-author-timestamp_lztvn_66{align-items:baseline;display:flex;flex-wrap:nowrap;position:relative;width:100%}._sc-comment-actions_lztvn_75{align-items:center;display:flex;margin-top:8px}._sc-comment-actions_lztvn_75 button{font-size:var(--type__body__small--fontsize)!important}._sc-comment-actions-separator_lztvn_89{padding:0 4px}._sc-comment_lztvn_1{line-height:var(--web_comment_line_height);padding:8px 16px 8px 58px}._sc-comment-author_lztvn_21{color:var(--color_ink);font-size:13px;font-weight:500}._sc-comment-collapsed-timestamp-info_lztvn_106,._sc-comment-timestamp_lztvn_28{color:var(--color_stone);font-size:13px}._sc-comment-collapsed-timestamp-info_lztvn_106{margin-top:7px}._sc-comment-info_lztvn_61 ._sc-comment-older-version_lztvn_116{color:var(--color_stone);font-size:13px;padding:0}._sc-comment-older-version_lztvn_116 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-comment-separator_lztvn_34{background:var(--color_ink_40)}._sc-comment-deleted_lztvn_57{line-height:20px;padding:8px 16px 8px 58px}._sc-comment-deleted_lztvn_57 ._sc-comment-text_lztvn_53{color:var(--color_stone)}._sc-comment-info_lztvn_61{margin-bottom:4px}._sc-comment-author-timestamp_lztvn_66{height:var(--web_comment_line_height)}._sc-comment-actions_lztvn_75 .mc-tertiary-link-button{border-radius:0;display:inline-block;padding-right:0}._sc-comment-actions_lztvn_75 ._sc-comment-actions-separator_lztvn_89{color:var(--color_stone)}._sc-comment-renderer--right-rail_lztvn_164{padding:6px 8px 8px 6px}._sc-comment-renderer--right-rail_lztvn_164:last-child{padding-bottom:0}._sc-comment-renderer-inner--right-rail_lztvn_175{display:flex;font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight);word-break:break-word}._sc-comment-renderer-avatar_lztvn_184{display:flex;margin-right:6px;z-index:2}._sc-comment-info--right-rail_lztvn_191{display:flex;height:24px}._sc-comment-info--right-rail_lztvn_191 ._sc-comment-author-timestamp_lztvn_66{align-items:center;display:flex;overflow:hidden;white-space:nowrap}._sc-comment-author--right-rail_lztvn_203{font-weight:var(--type__body__small--fontweight_strong);overflow:hidden;text-overflow:ellipsis}._sc-comment-timestamp--right-rail_lztvn_209{color:var(--color__faint__text);margin-left:4px}._sc-comments-thread-control-wrapper_lztvn_215{display:flex;margin-left:16px}._sc-comment-renderer--right-rail_lztvn_164 ._sc-comment-renderer-content-wrapper_lztvn_221{min-width:0;width:100%}._sc-comment-renderer-content-wrapper--last-approval-comment_lztvn_228{margin-bottom:var(--spacing__unit--1)}._sc-comment-dig-avatar_lztvn_232{margin-bottom:0;margin-top:0}._sc-annotation-label--right-rail_lztvn_237{color:var(--color__core__accent)}._sc-annotation-label--right-rail_lztvn_237 ._sc-annotation-label-link_lztvn_242:focus{box-shadow:none;margin:0;padding:0}._sc-annotation-label--right-rail_lztvn_237 ._sc-annotation-label-link_lztvn_242:focus-visible{box-shadow:inset 0 0 0 3px var(--color__utility__focusring);margin:0;padding:0}._sc-comment-deleted--right-rail_lztvn_255{display:flex}._sc-comment-deleted_lztvn_57._sc-comment-deleted--right-rail_lztvn_255{padding:6px 8px 8px 6px}._sc-deleted-comment-icon_lztvn_262{color:var(--color__faint__text)}._sc-deleted-comment-avatar-wrapper_lztvn_266{align-items:center;border:1px solid var(--color__disabled__border);border-radius:50%;display:flex;height:24px;justify-content:center;margin:0 8px 0 2px;width:24px}._sc-comment-deleted--right-rail_lztvn_255 ._sc-comment-text_lztvn_53{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}"));const B_="_sc-comment-content-container_lztvn_5",F_="_sc-comment-content_lztvn_5",j_="_sc-comment-separator_lztvn_34",z_="_sc-comment-text_lztvn_53",K_="_sc-comment-deleted_lztvn_57",L_="_sc-comment-author-timestamp_lztvn_66",U_="_sc-comment-actions_lztvn_75",q_="_sc-comment-actions-separator_lztvn_89",W_="_sc-comment-older-version_lztvn_116",H_="_sc-comment-renderer--right-rail_lztvn_164",V_="_sc-comment-renderer-inner--right-rail_lztvn_175",$_="_sc-comment-renderer-avatar_lztvn_184",G_="_sc-comment-info--right-rail_lztvn_191",Q_="_sc-comment-author--right-rail_lztvn_203",J_="_sc-comment-timestamp--right-rail_lztvn_209",X_="_sc-comments-thread-control-wrapper_lztvn_215",Z_="_sc-comment-renderer-content-wrapper_lztvn_221",Y_="_sc-comment-renderer-content-wrapper--last-approval-comment_lztvn_228",eg="_sc-comment-dig-avatar_lztvn_232",tg="_sc-annotation-label--right-rail_lztvn_237",rg="_sc-annotation-label-link_lztvn_242",ng="_sc-comment-deleted--right-rail_lztvn_255",og="_sc-deleted-comment-icon_lztvn_262",ig="_sc-deleted-comment-avatar-wrapper_lztvn_266",ag=t.reactExports.memo((({user:{photoUrl:e,name:{display:r,initials:n}}})=>e?t.reactExports.createElement(a.Avatar,{src:e,alt:r}):t.reactExports.createElement(a.AvatarInitials,{backgroundColor:a.avatarColorForUserIdentifier(r)},n)));ag.displayName="BasicCommentAvatar";const sg=t.reactExports.memo((({user:{photoUrl:e,name:{display:n,initials:o}}})=>t.reactExports.createElement(r.Avatar,{src:e,alt:n,size:"small",backgroundColor:a.avatarColorForUserIdentifier(n),hasNoOutline:!0,className:eg},o)));sg.displayName="DIGCommentAvatar";const cg=t.reactExports.memo((()=>t.reactExports.createElement("div",{className:ig},t.reactExports.createElement(r.UIIcon,{src:r.DeleteLine,size:"small",className:og}))));cg.displayName="DeletedDIGCommentAvatar";const lg=t.reactExports.forwardRef((({className:e,index:n,onClick:o,children:i,selected:a},s)=>{const c=r.cx(I_.scCommentEditorMentionsSuggestion,e);return t.reactExports.createElement("li",{role:"option","aria-selected":a?"true":void 0,id:`mentions-option-${n}`,ref:s},t.reactExports.createElement("button",{className:c,onClick:o,onMouseDown:e=>e.preventDefault()},t.reactExports.createElement("div",null,i)))}));lg.displayName="MentionsListItem";const ug=({placeholderMessage:e})=>{const r=c.useIntl();return t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListContainer},t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListHeader},e?r.formatMessage(e):r.formatMessage({id:"FBlHqR",defaultMessage:"@mention someone to share this file."})))};ug.displayName="NoResults";const dg=({active:e,onEmailClick:r})=>{const n=c.useIntl(),o=i_(e.content.substring(1));return t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListContainer},t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListHeader},n.formatMessage({id:"vdBwOw",defaultMessage:"No Users Found"})),o&&t.reactExports.createElement("ul",{className:I_.scCommentEditorMentionsList},t.reactExports.createElement(lg,{className:I_.scCommentEditorMentionsSuggestionSelected,index:-1,onClick:r},n.formatMessage({id:"l08JFQ",defaultMessage:"Invite {user_name}"},{user_name:o[0]}))))};dg.displayName="EmptyResults";const pg=({placeholderMessage:e,onMentionStart:n,onMentionSuccess:o,onMentionCanceled:i},{container:a,scope:s})=>{const l=c.useIntl(),u=t.reactExports.useRef(),d=t.reactExports.useRef(null),p=t.reactExports.useRef({}),m=t.reactExports.useCallback((e=>{null==o||o(),a.getTriggers(s).suggestion.updateSelectedIndex(e),a.getTriggers(s).macro.apply(null)}),[a,s]),f=t.reactExports.useCallback((()=>{a.getTriggers(s).macro.apply(null)}),[a,s]);t.reactExports.useEffect((()=>(null==n||n(),()=>{null==i||i()})),[]),t.reactExports.useEffect((()=>{const{selectedIndex:e}=a.getStatus().suggestion,t=p.current[e];if(u.current!==e&&t&&d.current){const r=t.getBoundingClientRect(),n=d.current.getBoundingClientRect();r.top<n.top?t.scrollIntoView({behavior:"smooth",block:"start"}):r.bottom>n.bottom&&t.scrollIntoView({behavior:"smooth",block:"end"}),u.current=e}}));const{macro:{active:h},mentionSuggestions:{users:_},suggestion:{selectedIndex:g}}=a.getStatus();return h?null===_?t.reactExports.createElement(ug,{placeholderMessage:e}):_.length?t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListContainer,contentEditable:!1,ref:d},t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsListHeader},l.formatMessage({id:"e6Shp6",defaultMessage:"Searching contacts…"})),t.reactExports.createElement("ul",{className:I_.scCommentEditorMentionsList,role:"listbox",id:"mentions-listbox"},_.map(((e,n)=>{const o=g===n,i=r.cx({[I_.scCommentEditorMentionsSuggestionSelected]:o});return t.reactExports.createElement(lg,{key:n,index:n,className:i,onClick:()=>m(n),ref:e=>p.current[n]=e,selected:o},t.reactExports.createElement(ag,{user:e}),t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsUser},t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsName,title:e.name.display},e.name.display),t.reactExports.createElement("div",{className:I_.scCommentEditorMentionsEmail,title:e.email},e.email)))})))):t.reactExports.createElement(dg,{active:h,onEmailClick:f}):t.reactExports.createElement("span",null)};pg.displayName="MentionSuggestionsListComponent",pg.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};class mg extends P_{constructor(e){super({type:"macro: @",delimiter:"@",spanProps:{className:"active-mention"}}),this.mentionsOptions=e,this.onDelimiter=e=>{const{delimiter:t}=this.options,{text:r,startOffset:n,endOffset:o,input:i}=e.innerProps,a=n-t.length+i.length;if(r.substring(a,n)+i===t&&(0===a||" "===r.substr(a-1,1)))return{start:a,end:o,text:r.substring(a,n)+i}},this.onMacro=e=>{const{content:t,entityKey:r,blockKey:n,macroEndOffset:o,macroStartOffset:i}=e.innerProps,{type:a}=this.options,s=this.getQuery(t);return e.triggers.suggestion.updateTotalSuggestions(0),e.triggers.suggestion.updateSelectedIndex(-1),this.mentionsOptions.onMentionsQueryUpdated(s),{blockKey:n,entityKey:r,content:t,type:a,endOffset:o,startOffset:i,chrome:pg}},this.onAutoComplete=e=>{window.setTimeout((()=>{this.completeMentionImpl(e)}),0)},this.getSuggestedMentionUsers=e=>{const t=e.status.macro;if(!t.active)return;const r=e.status.mentionSuggestions,{content:n,type:o}=t.active;if(o===this.options.type){const e=this.getQuery(n);return r.userMap[e]}},this.getSelectedUser=e=>{const{status:t}=e,r=t.suggestion,{users:n}=t.mentionSuggestions;if(-1!==r.selectedIndex&&null!==n)return n[r.selectedIndex]}}updateUsers(e){return e.kernel.compose(this.getSuggestedMentionUsers)||null}triggerQueryUpdateOnSuggestions(e){const{userMap:t,users:r}=e.innerProps.prevStatus.mentionSuggestions,{userMap:n,users:o}=e.status.mentionSuggestions;t!==n&&e.triggers.mentionSuggestions.queryUpdate(null),r!==o&&o&&e.triggers.suggestion.updateTotalSuggestions(o.length)}triggerQueryUpdateOnMacro(e){e.triggers.mentionSuggestions.queryUpdate(null)}completeMentionImpl(e){const{status:t,triggers:r}=e,n=t.draft,o=t.macro,i=n.editorState.getCurrentContent();if(!o.active)return;const a=i.getBlockForKey(o.active.blockKey);function s(e,t){return e.entityKey===t.getEntity()}const c=e.kernel.compose(this.getSelectedUser);if(c){const e=c.name.public||c.email,t=c.email,i=function(e){return!!o.active&&s(o.active,e)},l=function(i,a){return o.active&&fg({editorState:n.editorState,blockKey:o.active.blockKey,identifier:t,text:e,start:i,end:a},r,c)};a.findEntityRanges(i,l)}else{const e=o.active.content.substring(this.options.delimiter.length);if(i_(e)){const t=function(e){return!!o.active&&s(o.active,e)},i=function(t,i){return o.active&&fg({editorState:n.editorState,blockKey:o.active.blockKey,identifier:e,text:e,start:t,end:i},r,c)};a.findEntityRanges(t,i)}}}getQuery(e){const{delimiter:t}=this.options;return 0===e.indexOf(t)?e.substring(t.length):e}}function fg(e,t,r){const{editorState:n,mentionKey:o,mentionData:i}=function(e){const{editorState:t,identifier:r,blockKey:n,start:o,end:i,text:a}=e,s={identifier:r,type:"email"},c=t.getCurrentContent().createEntity("mention","IMMUTABLE",s),l=c.getLastCreatedEntityKey(),u=n_(c,n,o,i,`@${a}`,l);return{editorState:r_(t,Ah.Modifier.insertText(u,u.getSelectionAfter()," ")),mentionKey:l,mentionData:s}}(e);t.draft.change(n),t.mentionSuggestions.onApplyMentionToRange({mentionKey:o,mentionData:i,user:r})}s.__decorate([Uh(Wh.mentionSuggestions.on.queryUpdate.update.users)],mg.prototype,"updateUsers",null),s.__decorate([Uh(Wh.mentionSuggestions)],mg.prototype,"triggerQueryUpdateOnSuggestions",null),s.__decorate([Uh(Wh.macro.on.update)],mg.prototype,"triggerQueryUpdateOnMacro",null);class hg extends Gh{handleArrowsAndEscape(e){const{triggers:t,status:r,innerProps:{evt:n}}=e;if(r.macro.active)switch(n.which){case 38:t.suggestion.up(1);break;case 40:t.suggestion.down(1);break;case 27:t.macro.update(null),t.macro.updateVisibility(!1)}}handleUp(e){const{totalSuggestions:t}=e.status.suggestion,{evt:r,value:n}=e.innerProps;return((Math.max(n,0)-r)%t+t)%t}handleDown(e){const{totalSuggestions:t}=e.status.suggestion,{evt:r,value:n}=e.innerProps;return(n+r)%t}updateIndex(e){const{evt:t}=e.innerProps;return t}updateTotalSuggestions(e){const{evt:t}=e.innerProps;if(t!==e.status.suggestion.totalSuggestions)return e.triggers.suggestion.updateSelectedIndex(-1),t}onMentionSuggestionsChange({status:e,triggers:t}){const{users:r}=e.mentionSuggestions;r&&t.suggestion.updateTotalSuggestions(r.length)}}function _g(e,t,r){const n=e.getCurrentContent().mergeEntityData(t,{pending:r}),o=Ah.EditorState.push(e,n,"apply-entity"),i=n.getSelectionAfter(),a=i.merge({focusOffset:i.getFocusOffset()+1}),s=r_(o,Ah.Modifier.removeRange(Ah.Modifier.insertText(n,i," "),a,"backward"));return Ah.EditorState.forceSelection(s,o.getSelection())}s.__decorate([Uh(Wh.draft.on.key)],hg.prototype,"handleArrowsAndEscape",null),s.__decorate([Uh(Wh.suggestion.on.up.update.selectedIndex)],hg.prototype,"handleUp",null),s.__decorate([Uh(Wh.suggestion.on.down.update.selectedIndex)],hg.prototype,"handleDown",null),s.__decorate([Uh(Wh.suggestion.on.updateSelectedIndex.update.selectedIndex)],hg.prototype,"updateIndex",null),s.__decorate([Uh(Wh.suggestion.on.updateTotalSuggestions.update.totalSuggestions)],hg.prototype,"updateTotalSuggestions",null),s.__decorate([Uh(Wh.mentionSuggestions)],hg.prototype,"onMentionSuggestionsChange",null);const gg={onShare:()=>{},onMention:()=>new Promise((e=>e({mentionedUserHasAccess:!0,shouldShowSharePopup:!1})))};class vg extends Gh{constructor(e){super(),this.options=e}addPendingFlagToMention(e){const{editorState:t}=e.status.draft,{mentionKey:r,mentionData:n,user:o}=e.innerProps.evt,i=this.options.onMention(n,r),a=_g(t,r,!0);e.triggers.draft.change(a),i.then((i=>{if(i.shouldShowSharePopup)e.triggers.mentionShareFlow.updatePopupProps({mentionKey:r,mentionData:n,user:o});else if(i.mentionedUserHasAccess){const n=_g(t,r,!1);e.triggers.draft.change(n)}}))}updatePopupProps(e){return e.triggers.draft.readOnly(!!e.innerProps.evt),e.innerProps.evt}onShare(e){const{mentionKey:t,mentionData:r,user:n}=e.innerProps.evt;this.options.onShare(r,t,(()=>{e.triggers.mentionShareFlow.onShareCompleted({mentionKey:t,mentionData:r,user:n})}))}onShareCompleted(e){const{mentionKey:t}=e.innerProps.evt,{editorState:r}=e.status.draft,n=function(e,t){const r=t.getCurrentContent();let n;try{n=r.getEntity(e)}catch(e){}return n&&"mention"===n.getType()?_g(t,e,!1):t}(t,r),o=Ah.EditorState.forceSelection(n,n.getSelection());e.triggers.draft.change(o)}updateReadonly(e){return e.innerProps.evt}closePopupOnChange(e){e.innerProps.prevStatus.draft.editorState.getCurrentContent()!==e.status.draft.editorState.getCurrentContent()&&e.status.mentionShareFlow.popupProps&&e.triggers.mentionShareFlow.updatePopupProps(null)}}s.__decorate([Uh(M_.mentionSuggestions.on.onApplyMentionToRange)],vg.prototype,"addPendingFlagToMention",null),s.__decorate([Uh(M_.mentionShareFlow.on.updatePopupProps.update.popupProps)],vg.prototype,"updatePopupProps",null),s.__decorate([Uh(M_.mentionShareFlow.on.onShare)],vg.prototype,"onShare",null),s.__decorate([Uh(M_.mentionShareFlow.on.onShareCompleted)],vg.prototype,"onShareCompleted",null),s.__decorate([Uh(M_.draft.on.readOnly.update.readOnly)],vg.prototype,"updateReadonly",null),s.__decorate([Uh(M_.draft)],vg.prototype,"closePopupOnChange",null);const yg=()=>t.reactExports.createElement("span",{className:j_}),bg=({sticker:e})=>{const r=c.useIntl().formatMessage({id:"nU3TuP",defaultMessage:"Sticker: {description}"},{description:e.description});return t.reactExports.createElement("img",{className:I_.scCommentEditorSticker,src:e.url,title:r,alt:r})};bg.displayName="StickerComponent";const Eg=({block:e,contentState:r})=>{const n=r.getEntity(e.getEntityAt(0)).getData();return"sticker"===n.type?t.reactExports.createElement(bg,{sticker:n}):null};Eg.displayName="AtomicBlockComponent";const xg=t.reactExports.memo((({annotation:e})=>t.reactExports.createElement("div",{className:I_.scCommentEditorPrefix},e,e&&t.reactExports.createElement(yg,null))));xg.displayName="EditorPrefix";const Sg=()=>{},wg=e=>"atomic"===e.getType()?{component:Eg,editable:!1}:void 0,Cg=e=>"atomic"===e.getType()?I_.scCommentEditorAtomicBlock:"",kg=(e,r)=>{var{annotation:n,editorPlaceholder:o,setEditorRef:i}=e,a=s.__rest(e,["annotation","editorPlaceholder","setEditorRef"]),c=r.container;const{editorKey:l,editorState:u,readOnly:d}=c.getStatus().draft,p={editorKey:l};return t.reactExports.createElement("div",null,t.reactExports.createElement(xg,{annotation:n}),o,t.reactExports.createElement(Ah.Editor,Object.assign({editorState:u,readOnly:d,onChange:Sg,blockRendererFn:wg,blockStyleFn:Cg},p,a,{ref:e=>{null==i||i(e)}})))};var Mg;kg.displayName="ReadonlyDraftComponent",kg.contextTypes={container:r.PropTypes.object},function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(Mg||(Mg={}));const Ag=[Mg.ESC,Mg.SPACE,Mg.UP,Mg.RIGHT,Mg.DOWN],Tg=({which:e})=>Ag.indexOf(e)>-1,Og=I_.scCommentEditorDraft,Ig=({submitModifierKeyCodes:e=["metaKey","ctrlKey"],lineBreakModifierKeyCodes:n=[],customKeyBinding:o,handleFocus:i,handleBlur:a,shouldFocus:s,spellCheck:c,a11yEditorLabel:u,disabled:d,placeholder:p,setRef:m,className:f},{container:h,scope:_})=>{const g=t.reactExports.useRef(),v=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.change(e)}),[h,_]),y=t.reactExports.useCallback((()=>{var e;null===(e=g.current)||void 0===e||e.blur()}),[]),b=t.reactExports.useCallback(((t,r)=>{const o=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,e),i=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,n);if(0===e.length&&n.length>0&&!i&&!h.getStatus().macro.active||e.length>0&&o){return!(""===r.getCurrentContent().getPlainText().trim())&&h.getTriggers(_).comment&&(y(),h.getStatus().draft.containerPostOnBlur||h.getTriggers(_).comment.post(r)),"handled"}const a=h.getTriggers(_).draft.returnKey(t).editorState;return!i||a!==r||h.getStatus().macro.active?(t.preventDefault(),"handled"):"not-handled"}),[h,_,n,e,y]),E=t.reactExports.useCallback((()=>{g.current&&window.setTimeout((()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()}))}),[]),x=t.reactExports.useCallback((e=>{var t;if(!h.getStatus().macro.macroRef)return!1;const r=e.getBoundingClientRect(),n=null===(t=h.getStatus().macro.macroRef)||void 0===t?void 0:t.getBoundingClientRect();return!!n&&(n.bottom<r.bottom&&n.top>r.top)}),[h]),S=t.reactExports.useCallback((e=>{if(null===e)throw new Error("Unable to find scroll element");return e.classList.contains(Og)?e:S(e.parentElement)}),[]),w=t.reactExports.useCallback((e=>{if(!h.getStatus().macro.macroRef)return;const{updateVisibility:t}=h.getTriggers(_).macro,r=e.target;t(x(r))}),[h,_,x]),C=t.reactExports.useCallback((e=>{if(Tg(e)){const{suggestion:t}=h.getStatus();if(!(({totalSuggestions:e})=>0===e)(t)&&(h.getTriggers(_).draft.key(e),t!==h.getStatus().suggestion))return e.preventDefault(),null}return o?o(e):Ah.getDefaultKeyBinding(e)}),[h,_,o]),k=t.reactExports.useCallback(((e,t)=>h.getTriggers(_).draft.keyCommand(e).editorState===t?"not-handled":"handled"),[h,_]),M=t.reactExports.useCallback(((e,t)=>{if(". "===e){const e=d_(t);return v(e),"handled"}return h.getTriggers(_).draft.input(e).editorState===t?"not-handled":"handled"}),[h,_]),A=t.reactExports.useCallback(((e,t,r)=>{let n=h.getTriggers(_).draft.pasteText(e).editorState;return t&&n===r&&(n=h.getTriggers(_).draft.pasteHTML({text:e,html:t}).editorState),n===r?"not-handled":"handled"}),[h,_]),T=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.compositionStart(e)}),[h,_]),O=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.compositionEnd(e)}),[h,_]),I=t.reactExports.useCallback((e=>{if(Tg(e)){const{suggestion:t}=h.getStatus();h.getTriggers(_).draft.key(e),h.getStatus().suggestion!==t&&e.preventDefault()}else e.which===Mg.SPACE?h.getTriggers(_).draft.key(e):e.which===Mg.ENTER&&h.getStatus().macro.active&&e.preventDefault()}),[h,_]),D=t.reactExports.useCallback((e=>{null==i||i(e),e.stopPropagation()}),[i]),R=t.reactExports.useCallback((e=>{if(i&&!i(e))return e.preventDefault(),void e.stopPropagation();h.getTriggers(_).macro.updateVisibility(x(S(e.target))),h.getTriggers(_).draft.focus(e)}),[h,_,i,x,S]),N=t.reactExports.useCallback((e=>{(null==i?void 0:i(e))&&R(e)}),[i,R]),P=t.reactExports.useCallback((e=>{h.getTriggers(_).macro.updateVisibility(!1),null==a||a(h.getStatus().draft.editorState,h.getTriggers(_).comment),h.getTriggers(_).draft.blur(e)}),[h,_,a]);t.reactExports.useEffect((()=>{s&&g.current&&E()}),[s]);const B=t.reactExports.useCallback((e=>{const t=e.getType();return t&&h.getStatus().draft.blockRenderers[t]?h.getStatus().draft.blockRenderers[t](e):void 0}),[h]),F=t.reactExports.useCallback((e=>{g.current=e,null==m||m(e)}),[m]),{macro:{active:j,isVisible:z},draft:{editorState:K,readOnly:L,isComposing:U},suggestion:{selectedIndex:q}}=h.getStatus(),W=!(!j||!j.chrome)&&z,H=-1!==q&&W?`mentions-option-${q}`:"",V=""===K.getCurrentContent().getPlainText()&&!U?t.reactExports.createElement(r.Text,{className:I_.scCommentEditorPlaceholder,tabIndex:-1,"aria-hidden":!0,color:"disabled",size:"small"},t.reactExports.createElement(l.Truncate,{tooltipControlProps:{auto:!0,placement:"top"}},p||"")):void 0;return t.reactExports.createElement("div",{className:r.cx(Og,f),onScroll:w,onKeyDown:I,onCompositionStart:T,onCompositionEnd:O,onMouseDown:D,onMouseUp:N},t.reactExports.createElement(kg,{setEditorRef:F,ariaLabel:u,readOnly:L||!!d,onFocus:R,onBlur:P,onChange:v,handleReturn:b,keyBindingFn:C,handleKeyCommand:k,handleBeforeInput:M,handlePastedText:A,blockRendererFn:B,ariaAutoComplete:"list",ariaExpanded:W,ariaActiveDescendantID:H,annotation:void 0,editorPlaceholder:V,spellCheck:c}))};Ig.displayName="DraftComponent",Ig.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const Dg=(e,t)=>{if(!e)return{};const r=e.getBoundingClientRect();let n=e.offsetParent;for(;n&&!n.classList.contains(t);)n=n.offsetParent;if(!n)return{};const o=n.getBoundingClientRect();return{top:r.bottom-o.top}},Rg=({placeholderMessage:e,scrollClassName:r,onMentionStart:n,onMentionSuccess:o,onMentionCanceled:i},{container:a})=>{const{active:s,macroRef:c,isVisible:l}=a.getStatus().macro;if(!(s&&s.chrome&&c&&l))return t.reactExports.createElement("div",null);const u=s.chrome;return t.reactExports.createElement("div",{className:I_.activeMacroChrome,style:Dg(c,r)},t.reactExports.createElement(u,{placeholderMessage:e,onMentionStart:n,onMentionSuccess:o,onMentionCanceled:i}))};Rg.displayName="ActiveMacroChromeComponent",Rg.contextTypes={container:r.PropTypes.object};class Ng extends Gh{constructor(e){super(),this.options=e}callOnEditorStateChange(e){const t=e.innerProps.value;this.options.onEditorStateChange(t)}callOnPost(e){const{content:t}=e.innerProps.value;this.options.onPost(t)}callOnCancel(){this.options.onCancel()}callOnFocus(e){this.options.onFocus(e.innerProps.evt)}callOnBlur(e){this.options.postOnBlur&&e.triggers.comment.post(e.status.draft.editorState),this.options.onBlur(e.innerProps.evt)}}s.__decorate([Uh(Wh.draft.on.change.update.editorState)],Ng.prototype,"callOnEditorStateChange",null),s.__decorate([Uh(Wh.comment.on.post)],Ng.prototype,"callOnPost",null),s.__decorate([Uh(Wh.comment.on.cancel)],Ng.prototype,"callOnCancel",null),s.__decorate([Uh(Wh.container.on.focus)],Ng.prototype,"callOnFocus",null),s.__decorate([Uh(Wh.container.on.blur)],Ng.prototype,"callOnBlur",null);const Pg=e=>{const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"sticker"===e.entityMap[t.key].type})).map((function(t){const r=e.entityMap[t.key].data;return Object.assign(Object.assign({},r.metadata[0]),{type:"sticker"})}))],pos:o+r.text.length}}),{metadata:[],pos:0});return r},Bg=e=>e.reduce(((e,t)=>"sticker"===t.type?{stickers:[...e.stickers,t],other:e.other}:{stickers:e.stickers,other:[...e.other,t]}),{stickers:[],other:[]}),Fg=qh({reducers:{draft:{values:{editorState:{populateWithComment:e=>{const{evt:t}=e.innerProps,{stickers:r}=Bg(t.metadata);if(r.length){const e=r[0],t=Ah.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",e),n=t.getLastCreatedEntityKey(),o=Ah.AtomicBlockUtils.insertAtomicBlock(Ah.EditorState.createWithContent(t),n,"*").getCurrentContent().getBlockMap().skip(1).first(),i=Ah.ContentState.createFromBlockArray([o]);return Ah.EditorState.createWithContent(i)}}}}},comment:{values:{content:{post:e=>{const{evt:t,value:r}=e.innerProps,n=Pg(Ah.convertToRaw(t.getCurrentContent())),{other:o}=Bg(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}}}}}});class jg extends Gh{updateEditorState(){return!0}handleKeyCommand(){return!1}updateFocus(e){return e.innerProps.evt}}s.__decorate([Uh(Wh.container.on.focus.update.isFocused)],jg.prototype,"updateEditorState",null),s.__decorate([Uh(Wh.container.on.blur.update.isFocused)],jg.prototype,"handleKeyCommand",null),s.__decorate([Uh(Wh.container.on.updateFocus.update.isFocused)],jg.prototype,"updateFocus",null);const zg=qh({reducers:{draft:{values:{editorState:{pasteHTML:e=>{const t=e.innerProps.value,n=t.getCurrentContent(),o=t.getSelection(),i=function({html:e,contentState:t,editorKey:n,elementMappers:o=[]}){const i=document.createElement("body");i.innerHTML=e;let a=[];const s=i.textContent||"",c=Array(s.length);let l=[0,0],u="";const d=(e="unstyled")=>{const t=c.slice(l[0],l[1]);a=[...a,(new Ah.ContentBlock).merge({type:e,key:Ah.genKey(),text:u,characterList:r.immutableExports.List(t)})],u="",l=[l[1],l[1]]},p=e=>i=>{switch(i.nodeType){case Node.TEXT_NODE:if(i.textContent){const t=Ah.CharacterMetadata.create(e),r=i.textContent;u+=r;for(let e=0;e<r.length;e++,l[1]++)c[l[1]]=t}break;case Node.ELEMENT_NODE:const a=o.reduce(((e,t)=>t(e)),i);if(a.childNodes.length){let o=e?e.style.toArray():[],i=e?e.entity:null;const s=a.tagName.toLowerCase(),c="true"===a.getAttribute("data-block")||-1!==["p","li","blockquote","pre",...[1,2,3,4,5,6].map((e=>`h${e}`))].indexOf(s);o=[...o,...l_(a)],i=function(e,t,r){if(e.hasAttribute("data-entity-key")&&e.getAttribute("data-editor")===r){const r=e.getAttribute("data-entity-key");try{return t.getEntity(r),r}catch(e){}}return null}(a,t,n)||i;const l={style:r.immutableExports.OrderedSet(o)};i&&(l.entity=i),Array.from(a.childNodes).forEach(p(l)),c&&d()}}};return Array.from(i.childNodes).forEach(p()),0===a.length&&d(),r.immutableExports.OrderedMap(a.map((e=>[e.getKey(),e])))}({html:e.innerProps.evt.html,contentState:n,editorKey:e.status.draft.editorKey,elementMappers:[c_]});return r_(t,Ah.Modifier.replaceWithFragment(n,o,i))}}}}}}),Kg=e=>{!function(e,t=!0,r="_blank"){const n=window.open("",r);n&&(function(e,t){-1===["_self","_top","_parent"].indexOf(t)&&(e.opener=null)}(n,r),function(e,t){e.location&&e.location.replace?e.location.replace(t):e.location=t}(n,e),t&&n.focus())}(e,!0)};class Lg extends Gh{addDecorators(e){return[...e.innerProps.value,{strategy:function(e,t,r){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"hyperlink"===r.getEntity(t).getType()}),t)},props:{readOnly:e.status.draft.readOnly,onOpenLink:Kg},component:O_}]}initHyperlinks(e){const{value:t,evt:r}=e.innerProps,{hyperlinks:n}=this.splitHyperlinks(r.metadata);return Ah.EditorState.createWithContent(n.reduce(((e,t)=>{const r=e.createEntity("hyperlink","MUTABLE",{url:t.url}),n=r.getLastCreatedEntityKey(),o=o_(t.location,r);return Ah.Modifier.applyEntity(e,o,n)}),t.getCurrentContent()))}postHyperlinks(e){const{evt:t,value:r}=e.innerProps,n=this.getHyperlinkMetadata(Ah.convertToRaw(t.getCurrentContent())),{other:o}=this.splitHyperlinks(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getHyperlinkMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"hyperlink"===e.entityMap[t.key].type})).map((function(t){return{type:"hyperlink",url:e.entityMap[t.key].data.url,location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+a_(r.text).length}}),{metadata:[],pos:0});return r}splitHyperlinks(e){return e.reduce(((e,t)=>"hyperlink"===t.type?{hyperlinks:[...e.hyperlinks,t],other:e.other}:{hyperlinks:e.hyperlinks,other:[...e.other,t]}),{hyperlinks:[],other:[]})}}s.__decorate([Uh(Wh.draft.on.init.update.decorators)],Lg.prototype,"addDecorators",null),s.__decorate([Uh(Wh.draft.on.populateWithComment.update.editorState)],Lg.prototype,"initHyperlinks",null),s.__decorate([Uh(Wh.comment.on.post.update.content)],Lg.prototype,"postHyperlinks",null);const Ug={draft:Ih,comment:Dh,macro:Rh,mentionShareFlow:Fh,mentionSuggestions:Nh,suggestion:Ph,container:Oh},qg=()=>{};class Wg extends E_{get scopeNames(){return Ug}getLayerProps(e){const{mentionShareFlowHandlers:t=gg,onMentionsQueryUpdated:r=qg,onPost:n=qg,onCancel:o=qg,onEditorStateChange:i=qg,onFocus:a=qg,onBlur:s=qg,postOnBlur:c,readOnly:l,mentionsDisabled:u}=e;return{mentionShareFlowHandlers:t,onMentionsQueryUpdated:r,onPost:n,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,readOnly:l,mentionsDisabled:u}}mapPropsToLayers(e){const{mentionShareFlowHandlers:t,onMentionsQueryUpdated:r,onPost:n,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,mentionsDisabled:l}=this.getLayerProps(e),u=[new jg,new Qh,zg,new Jh,new Lg,new p_,Fg,new Ng({onEditorStateChange:i,onPost:n,onCancel:o,onFocus:a,onBlur:s,postOnBlur:c}),new hg,new Xh];if(!l){const e=[new R_,new mg({onMentionsQueryUpdated:r}),new vg(t)];return u.concat(e)}return u}createDefaultStatus(){const e=$h(this.scopeNames);return Object.assign(Object.assign({},e),{draft:Object.assign(Object.assign({},e.draft),{containerPostOnBlur:!!this.props.postOnBlur})})}mapPropsToUpdates(e,t){let r={};const n=!!t.mentionShareFlow.popupProps||!!e.readOnly;return e.content!==t.comment.content&&(r=Object.assign(Object.assign({},r),{comment:Object.assign(Object.assign({},t.comment),{content:e.content})})),n!==t.draft.readOnly&&(r=Object.assign(Object.assign({},r),{draft:Object.assign(Object.assign({},t.draft),{editorState:t.draft.editorState,readOnly:n})})),e.mentionsMatches!==t.mentionSuggestions.userMap&&(r=Object.assign(Object.assign({},r),{mentionSuggestions:Object.assign(Object.assign({},t.mentionSuggestions),{userMap:e.mentionsMatches||{}})})),r}}const Hg=({signalComponent:e,forceCancelEnabled:r,annotationElement:n},{container:o,scope:i})=>{const a=t.reactExports.useMemo((()=>({cancel:()=>{const e=o.getTriggers(i);e.comment.cancel(null),e.container.updateFocus(!1)},insertMention:()=>{o.getTriggers(i).draft.insertMacro("")},post:()=>{const e=o.getTriggers(i);e.comment.post(o.getStatus().draft.editorState),e.container.updateFocus(!1)}})),[o,i]),{draft:{editorState:s,isFocused:c},container:{isFocused:l}}=o.getStatus(),u=""===s.getCurrentContent().getPlainText().trim(),d=!u,p=!u||!!r||l;return t.reactExports.createElement(e,{postEnabled:d,cancelEnabled:p,signals:a,isEmpty:u,isEditorFocused:c,isContainerFocused:l,annotationElement:n})};Hg.displayName="PostComponent",Hg.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/index.module.out.css",(e=>'._sc-comment-stream_12o5m_1{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:328px}._sc-comment-stream_12o5m_1._sc-comment-stream--right-rail_12o5m_9{width:100%}._sc-unread-pill-wrapper_12o5m_15>div{flex:0 1 auto}._sc-comment-stream-threads_12o5m_19{flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;z-index:0}._sc-comment-stream--right-rail_12o5m_9 ._sc-comment-stream-threads_12o5m_19{margin-top:8px}._sc-comment-stream-editor_12o5m_32{flex:0 0 auto;margin:4px 0 0}._sc-comment-stream-editor_12o5m_32 ._sc-comment-editor-focus-container_12o5m_38{background:var(--color__standard__background);border:1px solid var(--color__standard__border)}._sc-comment-stream-editor_12o5m_32 ._sc-comment-editor-focus-container-is-focused_12o5m_43{border-color:transparent;box-shadow:var(--boxshadow__focusring)}._sc-comment-editor-focus-container-is-focused_12o5m_43 svg>path{fill:var(--color_stone)}._sc-comment-stream-open_12o5m_53{width:15em}._sc-comment-stream-closed_12o5m_57{width:1em}._sc-annotation-toggle_12o5m_61{font-feature-settings:"tnum";box-sizing:border-box;display:inline-block}._sc-annotation-toggle-inner_12o5m_67{cursor:default;display:flex}._sc-unread-pill-wrapper_12o5m_15{display:flex;flex:1 1 auto;flex-direction:column;min-height:0;overflow:hidden}._sc-unread-pill-wrapper_12o5m_15 ._unread-pill_12o5m_81{display:block;height:0;margin:auto;z-index:1}._unread-pill_12o5m_81 ._unread-pill-text_12o5m_88{background:#d2e6fa;border:2px solid #f7f9fa;color:#0070e0;cursor:pointer;padding:5px 10px}._unread-pill_12o5m_81 ._unread-pill-text_12o5m_88:hover{background:#bfdbf7}._unread-pill_12o5m_81._up_12o5m_104 ._unread-pill-text_12o5m_88{margin-top:15px;position:relative}._comments-sort-menu_12o5m_109{background-color:var(--color__standard__background);margin-left:4px;margin-top:8px;position:-webkit-sticky;position:sticky;top:0;width:100%;z-index:2}._sc-unread-pill-wrapper_12o5m_15 ._unread-pill_12o5m_81._down_12o5m_119{position:relative;top:-42px}._unread-pill_12o5m_81 span._arrow-indicator_12o5m_124{margin-right:5px}._sc-suggested-comments_12o5m_128{margin:4px 10px}._sc-suggested-comments-button_12o5m_132{background:var(--color__attention__background--faint);border-radius:20px;cursor:pointer;margin:4px;padding:8px 10px}._sc-suggested-comments-button_12o5m_132:hover{background:var(--color__attention__background)}._sc-comment-stream_12o5m_1{position:relative}._sc-annotation-toggle_12o5m_61{font-weight:500}@keyframes _comment-button-fade-in_12o5m_1{0%{opacity:0}70%{opacity:0}to{opacity:1}}._sc-comment-stream-error-container_12o5m_166{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:100%;text-align:center;width:100%}._sc-comment-stream-error-title_12o5m_177{font-weight:var(--unified_font_weight_semibold)}._sc-comment-stream-error-subtext_12o5m_183,._sc-comment-stream-error-title_12o5m_177{font-size:var(--unified_font_size_normal);line-height:var(--web_comment_line_height)}._sc-comment-stream-error-subtext_12o5m_183{color:var(--unified_color_text_subtext);width:240px}._sc-comment-stream-error-button-container_12o5m_190{margin-top:20px}._sc-comment-stream-editor-container_12o5m_194{display:flex}._sc-comment-stream-editor-bundle_12o5m_198{flex:1}._sc-comment-stream-meatball-icon_12o5m_202{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._sc-comment-empty-container_12o5m_207{margin-top:16px}._sc-comment-approvals-container_12o5m_211{margin-top:10px}'));const Vg={scCommentStream:"_sc-comment-stream_12o5m_1",scCommentStreamRightRail:"_sc-comment-stream--right-rail_12o5m_9",scUnreadPillWrapper:"_sc-unread-pill-wrapper_12o5m_15",scCommentStreamThreads:"_sc-comment-stream-threads_12o5m_19",scCommentStreamEditor:"_sc-comment-stream-editor_12o5m_32",scCommentEditorFocusContainer:"_sc-comment-editor-focus-container_12o5m_38",scCommentEditorFocusContainerIsFocused:"_sc-comment-editor-focus-container-is-focused_12o5m_43",scCommentStreamOpen:"_sc-comment-stream-open_12o5m_53",scCommentStreamClosed:"_sc-comment-stream-closed_12o5m_57",scAnnotationToggle:"_sc-annotation-toggle_12o5m_61",scAnnotationToggleInner:"_sc-annotation-toggle-inner_12o5m_67",unreadPill:"_unread-pill_12o5m_81",unreadPillText:"_unread-pill-text_12o5m_88",up:"_up_12o5m_104",commentsSortMenu:"_comments-sort-menu_12o5m_109",down:"_down_12o5m_119",arrowIndicator:"_arrow-indicator_12o5m_124",scSuggestedComments:"_sc-suggested-comments_12o5m_128",scSuggestedCommentsButton:"_sc-suggested-comments-button_12o5m_132",scCommentStreamErrorContainer:"_sc-comment-stream-error-container_12o5m_166",scCommentStreamErrorTitle:"_sc-comment-stream-error-title_12o5m_177",scCommentStreamErrorSubtext:"_sc-comment-stream-error-subtext_12o5m_183",scCommentStreamErrorButtonContainer:"_sc-comment-stream-error-button-container_12o5m_190",scCommentStreamEditorContainer:"_sc-comment-stream-editor-container_12o5m_194",scCommentStreamEditorBundle:"_sc-comment-stream-editor-bundle_12o5m_198",scCommentStreamMeatballIcon:"_sc-comment-stream-meatball-icon_12o5m_202",scCommentEmptyContainer:"_sc-comment-empty-container_12o5m_207",scCommentApprovalsContainer:"_sc-comment-approvals-container_12o5m_211",commentButtonFadeIn:"_comment-button-fade-in_12o5m_1"},$g=(e,t)=>!!t&&e.current&&e.current.contains(t),Gg=({disabled:e,children:n},{container:o,scope:i})=>{const a=t.reactExports.useRef(null),s=r.cx(Vg.scCommentEditorFocusContainer,{[Vg.scCommentEditorFocusContainerIsFocused]:o.getStatus().container.isFocused&&!e}),c=t.reactExports.useCallback((e=>{$g(a,e.relatedTarget)||o.getTriggers(i).container.focus(e)}),[o,i]),l=t.reactExports.useCallback((e=>{$g(a,e.relatedTarget)||o.getTriggers(i).container.blur(e)}),[o,i]),u=t.reactExports.useCallback((e=>{o.getStatus().container.isFocused&&(e.stopPropagation(),e.preventDefault())}),[o]);return t.reactExports.createElement("div",{className:s,ref:a,onFocus:c,onBlur:l,onMouseDown:u},n)};Gg.displayName="FocusContainerComponent",Gg.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const Qg=({children:e},{container:r})=>""!==r.getStatus().draft.editorState.getCurrentContent().getPlainText().trim()&&e?t.reactExports.createElement("div",{className:I_.scCommentEditorTagline},e):null;Qg.displayName="CommentEditorTagline",Qg.contextTypes={container:r.PropTypes.object};r.injectInternalStyle("typescript/libraries/comments2/src/components/sticker_component/index.module.out.css",(e=>"._sc-sticker-component_7nz5q_1{align-self:center;display:inline;margin-right:var(--spacing__unit--0_5);position:relative}._sc-sticker-container_7nz5q_8{background:var(--color__standard__background);border:0;box-shadow:var(--token_boxshadow_dropshadow);height:243px;margin-bottom:10px;position:absolute;right:0;top:28px;width:285px;z-index:666}._sc-sticker-nav_7nz5q_22{height:40px;overflow:hidden;position:relative;white-space:nowrap}._sc-sticker-nav-item_7nz5q_29{background:transparent;cursor:pointer;height:40px;opacity:.7;padding:2px 7px;text-align:center;width:48px}._sc-sticker-nav-item_7nz5q_29:hover{background:var(--color_sapphire_90)}._sc-sticker-nav-item-is-selected_7nz5q_43{background:var(--color_sapphire_100);opacity:1}._sc-sticker-inner_7nz5q_48{overflow:hidden;width:268px}._sc-sticker-nav-item-image-container_7nz5q_53{height:100%;position:relative;width:100%}._sc-sticker-nav-item-image-container_7nz5q_53>img{left:50%;position:absolute;top:50%;transform:translate3d(-50%,-50%,0)}._sc-sticker-arrow_7nz5q_66{background-color:var(--color_brand_panda_white);bottom:0;box-shadow:inset 1px 0 0 var(--color_border_light);height:40px;padding:2px 7px;position:absolute;text-align:center;top:0;width:40px;z-index:1}._sc-sticker-arrow-hide_7nz5q_79{display:none}._sc-sticker-arrow-left_7nz5q_83{transform:scaleX(-1)}._sc-sticker-arrow-right_7nz5q_91{right:0}._sc-sticker-divider_7nz5q_95{background:var(--color_ink_15);display:block;height:1px;position:absolute;width:inherit}._sc-sticker-pane-scroll_7nz5q_103{float:left;height:203px;overflow-y:scroll;padding:0 2px}._sc-sticker-option_7nz5q_110{background:transparent;cursor:pointer;margin:5px;padding:0}._sc-sticker-option_7nz5q_110,._sc-sticker-option-sticker_7nz5q_119{height:56px;width:56px}._sc-sticker-pack_7nz5q_124{display:none}._sc-sticker-pack-is-selected_7nz5q_128{display:block}._sc-sticker-option-sticker-gif_7nz5q_132{height:56px;width:56px}._sc-sticker-option-sticker-gif-invisible_7nz5q_137{display:none}body._tabbing_7nz5q_142 ._sc-sticker-arrow_7nz5q_66:focus ._sc-sticker-arrow-container_7nz5q_146,body._tabbing_7nz5q_142 ._sc-sticker-nav-item_7nz5q_29:focus ._sc-sticker-nav-item-image-container_7nz5q_53,body._tabbing_7nz5q_142 ._sc-sticker-option_7nz5q_110:focus{box-shadow:var(--focus_ring)}"));const Jg="_sc-sticker-component_7nz5q_1",Xg="_sc-sticker-container_7nz5q_8",Zg="_sc-sticker-nav_7nz5q_22",Yg="_sc-sticker-nav-item_7nz5q_29",ev="_sc-sticker-nav-item-is-selected_7nz5q_43",tv="_sc-sticker-inner_7nz5q_48",rv="_sc-sticker-nav-item-image-container_7nz5q_53",nv="_sc-sticker-arrow_7nz5q_66",ov="_sc-sticker-arrow-hide_7nz5q_79",iv="_sc-sticker-arrow-left_7nz5q_83",av="_sc-sticker-arrow-right_7nz5q_91",sv="_sc-sticker-divider_7nz5q_95",cv="_sc-sticker-pane-scroll_7nz5q_103",lv="_sc-sticker-option_7nz5q_110",uv="_sc-sticker-option-sticker_7nz5q_119",dv="_sc-sticker-pack_7nz5q_124",pv="_sc-sticker-pack-is-selected_7nz5q_128",mv="_sc-sticker-option-sticker-gif_7nz5q_132",fv="_sc-sticker-option-sticker-gif-invisible_7nz5q_137",hv="_sc-sticker-arrow-container_7nz5q_146";class _v extends t.reactExports.Component{constructor(){super(...arguments),this.preventDefault=e=>e.preventDefault()}render(){const{label:e,onClick:n,isActive:o}=this.props;return t.reactExports.createElement(r.IconButton,{className:I_.scCommentEditorControlBtn,onClick:n,"aria-label":e,"aria-haspopup":"true","aria-expanded":o,variant:"transparent",size:"small",onMouseDown:this.preventDefault},t.reactExports.createElement(r.UIIcon,{src:r.EmojiSmileLine}))}}_v.displayName="StickerButton";const gv=({sticker:e,onClick:r})=>{const[n,o]=t.reactExports.useState(!1),i=c.useIntl().formatMessage({id:"rnb7YE",defaultMessage:"Insert {description}"},{description:e.description});return t.reactExports.createElement("button",{className:lv,"aria-label":i,onClick:()=>{const t=e.is_live_sticker?`${e.base_url}?type=gif`:`${e.base_url}?type=png`;r(e.id,t,e.name)}},e.is_live_sticker&&t.reactExports.createElement("img",{className:n?mv:fv,src:`${e.base_url}?type=gif`,alt:e.description,title:e.description,onLoad:()=>{o(!0)}}),!n&&t.reactExports.createElement("img",{className:uv,alt:e.description,title:e.description,src:`${e.base_url}?type=png`}))};gv.displayName="StickerOption";class vv extends t.reactExports.Component{get className(){return r.cx(dv,{[pv]:this.props.isSelected})}render(){const{stickerPack:e}=this.props;return t.reactExports.createElement("div",{className:this.className},e.stickers.map((e=>t.reactExports.createElement(gv,{sticker:e,onClick:this.props.onStickerSelected,key:e.id}))))}}vv.displayName="StickerPaneComponent";const yv=({isSelected:e,stickerPack:n,onClick:o})=>{const i=t.reactExports.useRef(null),a=c.useIntl();return t.reactExports.useEffect((()=>{e&&i.current&&i.current.focus()}),[]),t.reactExports.createElement("button",{ref:i,className:r.cx(Yg,{[ev]:e}),"aria-label":a.formatMessage({id:"u842ND",defaultMessage:"Select {description}"},{description:n.description}),onClick:o,role:"tab","aria-selected":e},t.reactExports.createElement("div",{className:rv},t.reactExports.createElement("img",{src:n.url,alt:n.description})))};yv.displayName="StickerTabComponent";class bv extends t.reactExports.Component{constructor(e){super(e),this.scrollPaneRef=t.reactExports.createRef(),this.onLeftArrowPress=()=>{this.setState({scrollOffset:Math.max(0,this.state.scrollOffset-180)})},this.onRightArrowPress=()=>{this.setState({scrollOffset:Math.min(this.maxScroll,this.state.scrollOffset+180)})},this.handleChangeSelection=e=>{e!==this.state.selected&&(this.setState({selected:e}),this.resetScrollPane())},this.state={maxScroll:1,scrollOffset:0,selected:0}}componentDidUpdate(){const e=this.maxScroll;e!==this.state.maxScroll&&this.setState({maxScroll:e})}get maxScroll(){const{stickerPacks:e}=this.props,{maxScroll:t,scrollOffset:r}=this.state,n=(r>0?40:0)+(r<t?40:0);return Math.max(48*e.length-268+n,0)}resetScrollPane(){this.scrollPaneRef.current&&(this.scrollPaneRef.current.scrollTop=0)}renderLeftChevronButton(){return t.reactExports.createElement("button",{"aria-hidden":"true",className:r.cx(nv,iv,{[ov]:0===this.state.scrollOffset}),tabIndex:-1,onClick:this.onLeftArrowPress},t.reactExports.createElement("div",{className:hv},t.reactExports.createElement(u.IconArrow,{name:"right"})))}renderRightChevronButton(){const{scrollOffset:e,maxScroll:n}=this.state;return t.reactExports.createElement("button",{"aria-hidden":"true",className:r.cx(nv,av,{[ov]:e===n}),tabIndex:-1,onClick:this.onRightArrowPress},t.reactExports.createElement("div",{className:hv},t.reactExports.createElement(u.IconArrow,{name:"right"})))}renderTabs(e){const{scrollOffset:r}=this.state,n=`translate(${-r}px)`;return t.reactExports.createElement("div",{className:Zg,role:"tablist"},this.renderLeftChevronButton(),t.reactExports.createElement("div",{className:tv},t.reactExports.createElement("div",{className:"sc-sticker-inner-window",style:{transform:n}},e)),this.renderRightChevronButton())}render(){const{stickerPacks:e}=this.props,{selected:r}=this.state;if(e.length>0){const n=e.map(((e,n)=>t.reactExports.createElement(yv,{key:e.id,stickerPack:e,isSelected:n===r,onClick:()=>this.handleChangeSelection(n)}))),o=e.map(((e,n)=>t.reactExports.createElement(vv,{key:e.id,stickerPack:e,isSelected:n===r,onStickerSelected:this.props.onStickerSelected})));return t.reactExports.createElement("div",{className:Xg,tabIndex:-1},this.renderTabs(n),t.reactExports.createElement("div",{className:sv}),t.reactExports.createElement("div",{className:cv,ref:this.scrollPaneRef},o))}return null}}bv.displayName="Stickers";const Ev=({stickerPacks:e,onStickerStart:r,onStickerSuccess:n,onStickerCanceled:o},{container:i,scope:a})=>{const s=t.reactExports.useRef(null),[l,u]=t.reactExports.useState(!1),d=c.useIntl(),p=t.reactExports.useCallback(((e,t,r)=>{u(!1),null==n||n();const o={metadata:[{type:"sticker",id:e,url:t,name:r}],text:r},s=Ah.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",o),c=s.getLastCreatedEntityKey(),l=Ah.AtomicBlockUtils.insertAtomicBlock(Ah.EditorState.createWithContent(s),c,"*"),d=i.getTriggers(a);d.comment.post(l),d.container.updateFocus(!1),document.activeElement&&document.activeElement.blur()}),[i,n]),m=t.reactExports.useCallback((()=>{l||null==r||r(),u((e=>!e))}),[r,l]),f=t.reactExports.useCallback((e=>{const t=s.current,r=e.target;t&&!t.contains(r)&&(null==o||o(),u(!1))}),[o]);t.reactExports.useEffect((()=>(l&&(document.addEventListener("click",f),document.addEventListener("focusin",f)),()=>{l&&(document.removeEventListener("click",f),document.removeEventListener("focusin",f))})),[f,l]);const h=""===i.getStatus().draft.editorState.getCurrentContent().getPlainText().trim();return e.length>0&&h?t.reactExports.createElement("div",{className:Jg,ref:s},t.reactExports.createElement(_v,{label:d.formatMessage({id:"Bg2T2/",defaultMessage:"Sticker menu"}),isActive:l,onClick:m}),l&&t.reactExports.createElement(bv,{stickerPacks:e,onStickerSelected:p})):null};Ev.displayName="StickerComponent",Ev.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const xv=({annotation:e,tagline:n,forceCancelEnabled:o,postSignalComponent:i,author:a,renderBare:s,className:c,stickerPacks:l,rightAccessory:u,disabled:d,placeholder:p,content:m,onEditorStateChange:f,onPost:h,onCancel:_,onFocus:g,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:E,mentionShareFlowHandlers:x,readOnly:S,mentionsDisabled:w,setEditorRef:C,shouldFocus:k,a11yEditorLabel:M,onStickerStart:A,onStickerSuccess:T,onStickerCanceled:O,onMentionStart:I,onMentionSuccess:D,onMentionCanceled:R})=>{const N=I_.scCommentEditorInteractionContainer,P=t.reactExports.createElement(Wg,{content:m,onEditorStateChange:f,onPost:h,onCancel:_,onFocus:g,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:E,mentionShareFlowHandlers:x,readOnly:S,mentionsDisabled:w},t.reactExports.createElement(Gg,{disabled:d},t.reactExports.createElement("div",{className:r.cx(I_.scCommentEditorInner,I_.scCommentEditorInnerRightRail,{[I_.scCommentEditorInnerDisabled]:!!d})},t.reactExports.createElement("div",{className:I_.scCommentEditorAvatarWrapper},t.reactExports.createElement(sg,{user:a})),t.reactExports.createElement("div",{className:N},t.reactExports.createElement(Ig,{setRef:C,shouldFocus:k,a11yEditorLabel:M,disabled:d,placeholder:p}),t.reactExports.createElement(Rg,{scrollClassName:N,onMentionStart:I,onMentionSuccess:D,onMentionCanceled:R})),u?t.reactExports.createElement("div",{className:I_.scCommentEditorRightAccessory},u):null,l&&t.reactExports.createElement(Ev,{stickerPacks:l,onStickerStart:A,onStickerSuccess:T,onStickerCanceled:O})),!d&&t.reactExports.createElement(Hg,{forceCancelEnabled:o,signalComponent:i,annotationElement:e})),t.reactExports.createElement(Qg,null,n));if(s)return P;{const e=r.cx(c,I_.scCommentEditor);return t.reactExports.createElement("div",{className:e},P)}};xv.displayName="CommentEditor";const Sv=t.reactExports.memo((({label:e,disabled:n,onClick:o,size:i,className:a})=>t.reactExports.createElement(r.Button$1,{className:a,disabled:n,onClick:o,variant:"transparent",size:i},e)));Sv.displayName="CancelButton";const wv=t.reactExports.memo((({label:e,disabled:n,onClick:o,size:i,className:a})=>t.reactExports.createElement(r.Button$1,{className:a,disabled:n,onClick:o,variant:"primary",size:i},e)));wv.displayName="PostButton";const Cv=t.reactExports.memo((e=>{const{children:n,cancelEnabled:o,cancelLabel:i,postEnabled:a,postLabel:s,signals:c}=e;return t.reactExports.createElement("div",{className:I_.scCommentEditorControlsContainer},t.reactExports.createElement("div",{className:I_.scCommentEditorControls},t.reactExports.createElement("div",{className:"sc-comment-editor-controls-left"},n),t.reactExports.createElement("div",{className:I_.scCommentEditorControlsRight},t.reactExports.createElement(Sv,{label:i,disabled:!o,onClick:c.cancel,size:"small",className:r.cx(I_.scCommentEditorControlsCancelRightRail)}),t.reactExports.createElement(wv,{label:s,disabled:!a,onClick:c.post,size:"small",className:r.cx(I_.scCommentEditorControlsPostRightRail)}))))}));Cv.displayName="PostBar";const kv=t.React$1.createContext({showApproval:!1});var Mv;!function(e){e.newest="newest",e.oldest="oldest",e.unread="unread",e.timestamp="timestamp",e.page="page"}(Mv||(Mv={}));const Av=[Mv.newest,Mv.oldest,Mv.unread,Mv.page,Mv.timestamp],Tv=[Mv.newest,Mv.oldest,Mv.unread],Ov=[...Tv,Mv.timestamp],Iv=[...Tv,Mv.page];r.injectInternalStyle("typescript/libraries/comments2/src/components/thread/index.module.out.css",(e=>'._sc-thread-controls_1lcj2_1{display:flex;justify-content:space-between;position:relative}._sc-thread-controls_1lcj2_1>:first-child{min-width:0}._sc-thread-controls_1lcj2_1>:nth-child(2){margin-left:8px}._sc-thread-controls-resolved-note_1lcj2_15{font-style:italic}._sc-thread-controls_1lcj2_1 .mc-tertiary-link-button{border-radius:0}._sc-thread-inactive_1lcj2_23 ._sc-thread-controls_1lcj2_1 ._sc-thread-controls-resolved-note_1lcj2_15{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-thread-comments_1lcj2_29{list-style-type:none;padding:0}._sc-thread-comments_1lcj2_29>*{position:relative}._sc-thread-comments_1lcj2_29>:before{content:"";height:100%;position:absolute;width:1px}._sc-thread-comments_1lcj2_29>:first-child:before{top:12px}._sc-thread-comments_1lcj2_29>:last-child:before{height:4px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:first-child:before{top:30px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:last-child:before{height:2px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:only-child:before{height:0}._sc-thread-read_1lcj2_66._sc-thread-active_1lcj2_66{background:var(--color__standard__background)}._sc-thread-mobile_1lcj2_70 .mc-tertiary-link-button:focus{box-shadow:none}._sc-thread_1lcj2_1._sc-thread_1lcj2_1._sc-thread-editor-is-focused_1lcj2_74{border-color:var(--color__utility__focusring);box-shadow:0 0 0 3px var(--color__utility__focusring)}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54._sc-thread-editor-is-focused_1lcj2_74{border-color:var(--color__utility__focusring);box-shadow:inset 0 0 0 3px var(--color__utility__focusring)}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54{padding-top:0}._sc-thread-collapsed_1lcj2_89{cursor:pointer}._sc-thread-source_1lcj2_93{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:0 16px 8px 58px}._sc-third-party-reply-cta_1lcj2_99{background-color:var(--color_ink_5);padding:10px 12px}._sc-third-party-reply-cta_1lcj2_99 p{margin:0}._sc-third-party-reply-cta_1lcj2_99 .mc-button-secondary{margin-top:8px}._sc-thread-editor-sticker-component-container_1lcj2_112{height:32px}._sc-thread-editor-sticker-button-container_1lcj2_116{float:right;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-right:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}._sc-thread_1lcj2_1{border:1px solid transparent;color:var(--color_ink);font-size:var(--web_comment_font_size);margin:8px 12px 0;padding-top:8px}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54{margin-left:0;margin-right:0}._sc-thread_1lcj2_1:first-child{margin-top:16px}._sc-thread_1lcj2_1:last-child{margin-bottom:40px}._sc-comment-stream-small-margin-bottom_1lcj2_149 ._sc-thread_1lcj2_1:last-child{margin-bottom:8px}._sc-thread-resolved_1lcj2_154{border-style:dashed}._sc-thread-inactive_1lcj2_23{cursor:pointer;opacity:1;padding-bottom:8px}._sc-thread-resolved_1lcj2_154._sc-thread-inactive_1lcj2_23{opacity:.5}._sc-thread-focused_1lcj2_170,._sc-thread-inactive_1lcj2_23:focus,._sc-thread-inactive_1lcj2_23:hover,._sc-thread-read_1lcj2_66._sc-thread-active_1lcj2_66{border-color:var(--color__standard__border);opacity:1}._sc-thread-inactive_1lcj2_23 ._sc-comment-read-only-editor-wrapper_1lcj2_176{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._sc-thread-controls_1lcj2_1{color:var(--color_stone);font-size:13px;line-height:var(--web_comment_line_height);margin:2px 12px 10px}._sc-thread-controls_1lcj2_1 ._sc-thread-toggle_1lcj2_192{color:var(--color_stone);padding:0}._sc-thread-controls_1lcj2_1 ._sc-thread-toggle_1lcj2_192 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-thread-comments_1lcj2_29>:before{background:var(--color_stone_forty);left:29px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:before{left:20px}._sc-thread-unread_1lcj2_216 ._sc-thread-comments_1lcj2_29>:before{background:var(--color_blue_forty)}._sc-thread-active_1lcj2_66{cursor:inherit;margin-bottom:16px}._sc-thread-unread_1lcj2_216{background:var(--color_blue_sixteen)}._sc-thread-unread_1lcj2_216._sc-thread-active_1lcj2_66,._sc-thread-unread_1lcj2_216 ._sc-thread-editor_1lcj2_74,._sc-thread-unread_1lcj2_216._sc-thread-resolved_1lcj2_154,._sc-thread-unread_1lcj2_216:focus,._sc-thread-unread_1lcj2_216:hover{border-color:var(--color_blue_forty)}._sc-thread-comment-number_1lcj2_240{color:var(--color_blue);font-size:13px;padding:8px 16px 8px 58px}._sc-thread-editor_1lcj2_74{border-top:1px solid var(--color__standard__border)}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comment-number_1lcj2_240{color:var(--color__standard__text);font-family:var(--type__body__xsmall--fontfamily);font-size:var(--type__body__xsmall--fontsize);line-height:var(--type__body__xsmall--lineheight);padding:4px 8px 4px 40px;text-decoration:underline}._sc-thread--right-rail_1lcj2_54{margin-bottom:0;margin-top:4px}._sc-thread--right-rail_1lcj2_54._sc-thread-inactive_1lcj2_23:first-child,._sc-thread--right-rail_1lcj2_54:first-child{margin-top:0}._sc-thread--right-rail_1lcj2_54 ._sc-thread-editor_1lcj2_74{margin-top:8px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-controls-resolved-note_1lcj2_15{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}._sc-thread--right-rail_1lcj2_54 ._sc-thread-controls_1lcj2_1{margin:8px 8px 0}._sc-thread--right-rail_1lcj2_54._sc-thread-unread_1lcj2_216{background:var(--color__attention__background--faint)}'));const Dv="_sc-thread-controls_1lcj2_1",Rv="_sc-thread-controls-resolved-note_1lcj2_15",Nv="_sc-thread-inactive_1lcj2_23",Pv="_sc-thread-comments_1lcj2_29",Bv="_sc-thread--right-rail_1lcj2_54",Fv="_sc-thread-read_1lcj2_66",jv="_sc-thread-active_1lcj2_66",zv="_sc-thread-mobile_1lcj2_70",Kv="_sc-thread_1lcj2_1",Lv="_sc-thread-editor-is-focused_1lcj2_74",Uv="_sc-thread-source_1lcj2_93",qv="_sc-third-party-reply-cta_1lcj2_99",Wv="_sc-thread-resolved_1lcj2_154",Hv="_sc-thread-focused_1lcj2_170",Vv="_sc-comment-read-only-editor-wrapper_1lcj2_176",$v="_sc-thread-unread_1lcj2_216",Gv="_sc-thread-editor_1lcj2_74",Qv="_sc-thread-comment-number_1lcj2_240",Jv={draft:Ih,comment:Dh};class Xv extends E_{get scopeNames(){return Jv}mapPropsToLayers(){return[new Jh,new p_,new R_,Fg,new Lg,new Xh]}createDefaultStatus(){return $h(this.scopeNames)}mapPropsToUpdates(e,t){let r={};return e.content!==t.comment.content&&(r=Object.assign(Object.assign({},r),{comment:Object.assign(Object.assign({},t.comment),{content:e.content})})),r}}class Zv extends t.reactExports.Component{render(){const{author:e,children:r,annotation:n}=this.props,o=t.reactExports.createElement("div",{className:Vv},t.reactExports.createElement(kg,{readOnly:!0,annotation:n}));return t.reactExports.createElement(Xv,Object.assign({},this.props),t.reactExports.createElement("div",{className:V_},t.reactExports.createElement("div",{className:$_},t.reactExports.createElement(sg,{user:e})),r&&"function"==typeof r?r(o):o))}}Zv.displayName="CommentRendererV2";r.injectInternalStyle("typescript/component_libraries/flows/src/components/approval-comment/index.module.out.css",(e=>"._approval-title__approver_slivz_1{color:var(--color__core__accent)}._approval-title__response_slivz_5._approved_slivz_5{color:var(--color__success__text)}._approval-title__response_slivz_5._rejected_slivz_9{color:var(--color__warning__text)}._approval-title__response_slivz_5{align-items:center;display:flex;flex-direction:row}._approval-title__response-text_slivz_19{padding-left:8px}"));const Yv="_approval-title__approver_slivz_1",ey="_approval-title__response_slivz_5",ty="_approval-title__response-text_slivz_19",ry=({content:e,metadata:n,intl:o})=>{const i=n.approval_type,{getRequestTitle:a,getRespondTitle:s}=ny(o);if("request"!==i&&"response"!==i)return null;if("request"===i){const o=n.approvers;return o?t.React$1.createElement(r.Text,{size:"small"},a(o,e,!!n.requires_all)):null}if("response"===i){if(!n.status)return null;const e="approved"===n.status;return t.React$1.createElement("span",{className:r.cx(ey,{approved:e,rejected:!e})},e?t.React$1.createElement(r.UIIcon,{size:"small",src:r.CheckmarkCircleLine}):t.React$1.createElement(r.UIIcon,{size:"small",src:r.WarningLine}),t.React$1.createElement("span",{className:ty},t.React$1.createElement(r.Text,{isBold:!0,size:"small",color:"inherit"},s(e))))}return null};ry.displayName="ApprovalCommentTitle";const ny=e=>({getRequestTitle:(r,n,o)=>{const i=Yv;return n?o?e.formatMessage({id:"T91vhB",defaultMessage:"<b>Get approval from</b>{approvers}, all approvers need to approve:"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):e.formatMessage({id:"agSZ77",defaultMessage:"<b>Get approval from</b>{approvers}:, only one approval needed"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):o?e.formatMessage({id:"hrsQj6",defaultMessage:"<b>Get approval from</b>{approvers}, all approvers need to approve"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):e.formatMessage({id:"JGzPX9",defaultMessage:"<b>Get approval from</b>{approvers}, only one approval needed"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))})},getRespondTitle:t=>t?e.formatMessage({id:"ysfwBR",defaultMessage:"Approved"}):e.formatMessage({id:"sJJ0Cg",defaultMessage:"Changes requested"})}),oy=e=>{const r=c.useIntl();return t.reactExports.createElement(Cv,Object.assign({},e,{postLabel:r.formatMessage({id:"GM9O28",defaultMessage:"Save"}),cancelLabel:r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))};oy.displayName="InlineCommentEditorPostBarImpl";const iy=t.reactExports.memo(oy);iy.displayName="InlineCommentEditorPostBar";const ay=({actions:e,active:r,comment:{revisionInfo:n,threadId:a}})=>{const s=c.useIntl(),l=n.timestamp?s.formatMessage({id:"TrMn7R",defaultMessage:"On older version ({timestamp})"},{timestamp:s.formatTime(n.timestamp,{day:"numeric",month:"short"})}):s.formatMessage({id:"KwIXAO",defaultMessage:"On older version"});return r&&n.revision?t.reactExports.createElement(i.Tooltip,{positioning:"above",tooltipContent:s.formatMessage({id:"1d7dxH",defaultMessage:"View version history"})},t.reactExports.createElement(o.TertiaryLink,{className:W_,onClick:()=>e.onClickOlderInfo(n,a)},l)):t.reactExports.createElement("div",{className:W_},l)};ay.displayName="OlderInfo";const sy=e=>{const{comment:n,showRevisionInfo:o,commentControls:i}=e,{author:a,id:s,revisionInfo:l,threadId:u,timestamp:d}=n,p=c.useIntl();return t.reactExports.createElement("div",{className:G_},o&&!l.isCurrent&&s===u?t.reactExports.createElement(ay,Object.assign({},e)):null,t.reactExports.createElement("div",{className:L_},t.reactExports.createElement("span",{className:Q_},a.name.display),d.getTime()?t.reactExports.createElement("span",{className:J_},r.timeSince(p,d,{displayLocation:"comments"})):null),t.reactExports.createElement("div",{className:X_},i))};sy.displayName="RightRailCommentInfo";const cy=c.defineMessage({id:"ZeF6kJ",defaultMessage:"Edit"}),ly=c.defineMessage({id:"2WeS6D",defaultMessage:"Delete"}),uy=e=>{const{comment:n,comment:{userPermissions:{canEdit:o,canDelete:i},content:{text:a,metadata:s}},actions:{onDeleted:l,onApproverRespond:u,onEditApproval:p,onDeleteApprovalComment:m,onResubmitApprovalFocus:f},isMobile:h,active:_,onStartEdit:g,isActionableApprovalComment:v,isApprovalOpen:y,showApproval:b}=e,E=c.useIntl(),x=U_,S=q_,w=t.reactExports.useCallback((()=>{g(n)}),[n,g]),C=(e=w)=>t.reactExports.createElement(r.Text,{size:"small"},t.reactExports.createElement(r.Link,{href:e,variant:"monochromatic"},E.formatMessage(cy))),k=(e=l)=>t.reactExports.createElement(r.Text,{size:"small"},t.reactExports.createElement(r.Link,{href:e,variant:"monochromatic"},E.formatMessage(ly))),M=d.getApprovalMetadata(s),A=null==M?void 0:M.actor,T=Boolean(M&&("requester"===A||"approver"===A));if(!o&&!i&&!T||h||!_)return null;if(b&&M){if(!A)return null;if(!v)return null;if(y)return null;const e=t.reactExports.createElement(r.Button$1,{variant:"outline",onClick:u,size:"small"},E.formatMessage({id:"q997hq",defaultMessage:"Respond"})),s=t.reactExports.createElement(r.Button$1,{variant:"outline",onClick:f,size:"small"},E.formatMessage({id:"MoNd+x",defaultMessage:"Resubmit request"}));return t.reactExports.createElement("div",{className:r.cx(x,"approval")},o&&p&&C((()=>p({commentId:n.id,content:a,approvalMetadata:M}))),o&&i&&t.reactExports.createElement("span",{className:S},"•"),i&&m&&k((()=>m(n.id,A))),u&&d.canRespondToApproval(n)&&e,f&&"response"===M.approval_type&&"requester"===A&&!o&&!i&&s)}return t.reactExports.createElement("div",{className:x},o&&C(),o&&i&&t.reactExports.createElement("span",{className:S},"•"),i&&k())};uy.displayName="CommentActionMenu";const dy=({className:e,children:r})=>{const n=c.useIntl();return t.reactExports.createElement("li",{className:e},t.reactExports.createElement(cg,null),t.reactExports.createElement("div",{className:B_},t.reactExports.createElement("div",{className:F_},r,r&&t.reactExports.createElement(yg,null),t.reactExports.createElement("span",{className:z_},n.formatMessage({id:"w9I0zq",defaultMessage:"This comment was deleted."})))))};dy.displayName="DeleteMode";const py=({comment:e,mentionsMatches:r,actions:n,onEndEdit:o,className:i})=>{const a=t.reactExports.useCallback((e=>{n.onEdited(e),o()}),[n,o]);return t.reactExports.createElement("li",{className:i},t.reactExports.createElement(xv,{author:e.author,content:e.content,postSignalComponent:iy,onCancel:o,onPost:a,mentionsMatches:r,onMentionsQueryUpdated:n.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0}))};py.displayName="EditMode";const my=e=>{const{children:n,comment:o,comment:{content:i,author:a,revisionInfo:s},className:l,isLatestReply:u}=e,p=c.useIntl(),{showApproval:m}=t.reactExports.useContext(kv),f=d.getApprovalMetadata(o.content.metadata),h=0===o.content.text.length,_=Zv;return t.reactExports.createElement("li",{className:l},t.reactExports.createElement(_,{content:i,author:a,annotation:n,revisionInfo:s},(n=>t.reactExports.createElement("div",{className:r.cx(Z_,{[Y_]:u&&m&&!!f})},t.reactExports.createElement(sy,Object.assign({},e)),m&&f&&t.reactExports.createElement(ry,{intl:p,metadata:f,content:i.text}),m&&f&&h?null:n,t.reactExports.createElement(uy,Object.assign({},e,{showApproval:m}))))))};my.displayName="DisplayMode";const fy=t.reactExports.memo((e=>{const{comment:n,actions:o,mentionsMatches:i,isEditing:a=!1,onEndEdit:s,isEditingApproval:c,isActionableApprovalComment:l,className:u,children:p}=e,m=d.getApprovalMetadata(n.content.metadata),f={[K_]:n.deleted};return m&&c&&l?null:n.deleted?t.reactExports.createElement(dy,{className:r.cx(u,ng,f)},p):a?t.reactExports.createElement(py,{comment:n,mentionsMatches:i,actions:o,onEndEdit:s,className:r.cx(u,I_.scCommentEditor,"sc-comment-inline-editor",f)}):t.reactExports.createElement(my,Object.assign({},e,{className:r.cx(u,H_,f)}),p)}));fy.displayName="Comment";const hy=()=>{},_y=t.reactExports.memo((({label:e,onClick:n=hy})=>t.reactExports.createElement(r.Text,{className:tg,size:"small",color:"inherit"},t.reactExports.createElement(r.Link,{href:n,hasNoUnderline:!0,variant:"monochromatic",className:rg},e))));function gy(e,t){return vy(e)&&vy(t)||yy(e)&&yy(t)}function vy(e){return void 0!==e&&"document"===e.type}function yy(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function by(e){const{annotation:t}=e;return!!t&&vy(t)&&t.regions.length>0}function Ey(e){const{annotation:t}=e;return!!t&&yy(t)}_y.displayName="AnnotationLabel";const xy=60,Sy=60,wy=xy*Sy;function Cy(e){return(e<10?"0":"")+e}function ky(e,t,r,n){let o;return o=e>0?`${e}:${Cy(t)}:${Cy(r)}`:`${t}:${Cy(r)}`,void 0!==n&&(o+=`:${Cy(n)}`),o}function My(e,t,r,n){let o=0;if(o=t||e/100,n&&r&&Math.round(100*r)%2997==0)return function(e,t){const r=Math.round(100*t),n=Math.floor(e*r/100),o=2*r/2997,i=Math.floor(n/(36*r)),a=n%(36*r),s=Math.floor(a/(6*r)),c=a%(6*r);let l,u,d;if(0===c||1===c)l=0,u=0,d=c;else{const e=60*Math.ceil(t)-o;l=Math.floor((c-o)/e);const r=(c-o)%1798+o;u=Math.floor(r/Math.ceil(t)),d=r%Math.ceil(t)}return l=10*s+l,ky(i,l,u,d)}(o,r);if(n&&r&&r!==Math.round(r)){const e=Math.floor(o*r),t=Math.round(r);return ky(Math.floor(e/(3600*t)),Math.floor(e/(60*t))%60,Math.floor(e/t)%60,Math.floor(e%t))}{const e=Math.floor(o/wy),t=Math.floor(o/xy)%Sy,i=Math.floor(o)%xy;let a;if(n&&r){const e=o-Math.floor(o),t=1/r;a=Math.floor(e/t)}return ky(e,t,i,a)}}function Ay(e){return void 0!==e&&"video"===e.type}const Ty=e=>{let r;const{annotation:n,actions:o,comment:i,active:a}=e,s=c.useIntl(),l=t.reactExports.useCallback((e=>{o.onClickAnnotation({annotationInfo:{type:"numbered"},threadID:i.threadId,e:e,active:a})}),[o,i.threadId,a]),u=n&&"document"===n.type&&n.regions[0]&&n.regions[0].page;return u&&(r=t.reactExports.createElement(_y,{label:s.formatMessage({id:"rWnLvq",defaultMessage:"Page {page}"},{page:u}),onClick:l})),t.reactExports.createElement(fy,Object.assign({},e),r)};Ty.displayName="NumberedComment";const Oy=({thirdPartySource:e,openWith:n})=>{const o=c.useIntl();return e?t.reactExports.createElement("div",{className:qv},t.reactExports.createElement("p",null,o.formatMessage({id:"Vqx50y",defaultMessage:"To reply and view more detail, open this file."})),n&&t.reactExports.createElement(r.Button,{variant:"secondary",onClick:n},o.formatMessage({id:"EzzmNI",defaultMessage:"Open file"}))):null};function Iy(){return{text:"",metadata:[],timestamp:new Date}}function Dy(e){const r=c.useIntl();if(e.isEmpty)return null;const{disabled:n,postEnabled:o,postLabel:i,cancelLabel:a}=e,l=s.__rest(e,["disabled","postEnabled","postLabel","cancelLabel"]);return t.reactExports.createElement(Cv,Object.assign({},l,{postEnabled:o&&!n,postLabel:null!=i?i:r.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:null!=a?a:r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))}Oy.displayName="ThirdPartyReplyCTA";const Ry=({disabled:e,onPost:r,onCancel:n,postLabel:o,cancelLabel:i,author:a,shouldFocus:s,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onFocus:p=(()=>({})),onBlur:m=(()=>({})),stickerPacks:f,placeholder:h,mentionsDisabled:_})=>{const[g,v]=t.reactExports.useState((()=>Iy())),y=t.reactExports.useCallback((()=>{v(Iy())}),[]),b=t.reactExports.useCallback(((t,n)=>{e||(y(),r(t,n))}),[y,r,e]),E=t.reactExports.useCallback((()=>{y(),n()}),[y,n]),x=t.reactExports.useCallback((r=>t.reactExports.createElement(Dy,Object.assign({},r,{disabled:e,postLabel:o,cancelLabel:i}))),[o,i,e]),S=c.useIntl();return t.reactExports.createElement("div",{className:Gv},t.reactExports.createElement(xv,{a11yEditorLabel:S.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),author:a,shouldFocus:s,content:g,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onCancel:E,onPost:b,placeholder:null!=h?h:S.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),postSignalComponent:x,onFocus:p,onBlur:m,stickerPacks:f,mentionsDisabled:_}))};Ry.displayName="ThreadEditor";const Ny=({thirdPartySource:e})=>{const r=function(e,t){switch(t){case"microsoft_word":return e.formatMessage({id:"tomAos",defaultMessage:"From Word"});case"microsoft_excel":return e.formatMessage({id:"ZDCfCa",defaultMessage:"From Excel"});case"microsoft_powerpoint":return e.formatMessage({id:"hDBFiJ",defaultMessage:"From PowerPoint"});default:return}}(c.useIntl(),e);return r?t.React$1.createElement("div",{className:Uv},r):null};Ny.displayName="ThreadSourceMessage";const Py=c.defineMessage({id:"z73pDg",defaultMessage:"Mark as unread"}),By=c.defineMessage({id:"T8mQUy",defaultMessage:"Mark as read"}),Fy=c.defineMessage({id:"YG9hOh",defaultMessage:"Resolve"}),jy=c.defineMessage({id:"OJgspa",defaultMessage:"Remove approval request"}),zy=t.React$1.memo((({actions:e,active:n,thread:o,isMobile:i,streamSettings:a,intl:s,showApproval:c,isApproval:l})=>!i&&n&&a.canModifyThreads&&!o.isThirdParty?c&&l?o.comments.length>1&&d.isApprovalRequester(o)?t.React$1.createElement(r.Tooltip,{placement:"top",title:s.formatMessage(jy)},t.React$1.createElement(r.IconButton,{variant:"transparent",size:"small",disabled:!!o.pending,onClick:e.onRemoveApprovalThread},t.React$1.createElement(r.UIIcon,{src:r.DeleteLine,size:"small"}))):null:t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.Tooltip,{title:s.formatMessage(o.read?Py:By),placement:"top"},t.React$1.createElement(r.IconButton,{size:"small",variant:"transparent",onClick:o.read?e.onMarkAsUnread:e.onMarkAsRead,className:"sc-comments-thread-control-read-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:o.read?r.CommentUnreadLine:r.CommentReadLine,size:"small"}))),t.React$1.createElement(r.Tooltip,{title:s.formatMessage(Fy),placement:"top"},t.React$1.createElement(r.IconButton,{size:"small",variant:"transparent",onClick:e.onResolve,className:"sc-comments-thread-control-resolve-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:r.CheckmarkLine,size:"small"})))):null));zy.displayName="ThreadControlV2";const Ky=()=>{},Ly=e=>{const{count:r}=e,n=c.useIntl();n.formatMessage({id:"xj0qJi",defaultMessage:"{count, plural, one {# comment} other {# comments}}"},{count:r});const o=n.formatMessage({id:"NkhP8O",defaultMessage:"{count} comments"},{count:r});return t.reactExports.createElement("div",{className:Qv},o)};Ly.displayName="CollapsedCommentIndicator";const Uy=({comment:e,active:r,commentFactory:n,isLatestReply:o,isActionableApprovalComment:i,annotation:a,commentControls:s,actions:c,editedComment:l,mentionsMatches:u,onStartEdit:d,onEndEdit:p,isMobile:m,showRevisionInfo:f,approvalFormStatus:h,thread:_})=>{var g;const v=!!l&&e.id===l.id,y=r&&!!(null==h?void 0:h.activeForm)&&h.threadId===_.id&&(null===(g=h.editArgs)||void 0===g?void 0:g.commentId)===e.id,b=!!(null==h?void 0:h.activeForm)&&h.threadId===_.id,E={actions:Gy(e,c),active:r,annotation:a,comment:e,isEditing:v,onStartEdit:d,onEndEdit:p,mentionsMatches:u,isMobile:m,showRevisionInfo:f,commentControls:s,isLatestReply:o,isActionableApprovalComment:i,isEditingApproval:y,isApprovalOpen:b},x=n?n(E):t.reactExports.createElement(fy,Object.assign({},E));return t.reactExports.createElement(t.reactExports.Fragment,{key:e.id},x)};Uy.displayName="ThreadComment";const qy=({resolvedInfo:e})=>{const n=c.useIntl(),o="with_details"===e.type&&e;let i,a;return o?(i=n.formatMessage({id:"seHweQ",defaultMessage:"Marked as resolved by {name}"},{name:o.resolver.name.display}),a=r.timeSince(n,o.resolvedTimestamp,{displayLocation:"comments"})):(i=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"}),a=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"})),t.reactExports.createElement(r.Tooltip,{placement:"top",title:a},t.reactExports.createElement("div",{className:Rv},i))};qy.displayName="MarkAsResolved";const Wy=({streamSettings:e,isMobile:n,actions:o,thread:i,active:a,isDisabled:s})=>{const l=c.useIntl();if(n)return null;const u=a&&e.canModifyThreads&&!i.isThirdParty,d=Qy(i);return d?t.reactExports.createElement("div",{className:Dv},t.reactExports.createElement(qy,{resolvedInfo:d}),u&&t.reactExports.createElement(r.Tooltip,{placement:"top",title:l.formatMessage({id:"8bWrbN",defaultMessage:"Restore"})},t.reactExports.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:o.onUnresolve,disabled:s},t.reactExports.createElement(r.UIIcon,{src:r.RestoreLine,size:"small"})))):null};Wy.displayName="ToplineControls";const Hy=({thread:e,actions:r,streamSettings:n,active:o,isMobile:i,showApproval:a,isApproval:s})=>{const l=Qy(e),u=c.useIntl();return l?null:t.reactExports.createElement(zy,{thread:e,actions:r,streamSettings:n,active:o,isMobile:i,intl:u,showApproval:a,isApproval:s})};Hy.displayName="CommentControlsV2";const Vy=t.reactExports.forwardRef((({actions:e,commentFactory:r,mentionsMatches:n,stickerPacks:o,onCancel:i,openWith:a,thirdPartySource:s,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,className:E,showApproval:x,isApproval:S,isDisabled:w,onClick:C,includeEditor:k,shouldFocusThreadEditor:M,onEditorStateChange:A,onFocusEditor:T,onBlurEditor:O},I)=>{const D=c.useIntl(),{onMentionsQueryUpdated:R,onMouseEnter:N,onMouseLeave:P,onReply:B,onResubmitApprovalRequest:F}=e,j=t.reactExports.useMemo((()=>Jy(l)),[l]),z=d.findActionableApprovalCommentId(l),K=d.getApprovers(l),L=t.reactExports.createElement(Hy,{thread:l,actions:e,streamSettings:y,isMobile:_,active:b,showApproval:x,isApproval:S});return t.reactExports.createElement("li",{onMouseEnter:N,onMouseLeave:P,className:E,tabIndex:0,role:"button","aria-expanded":!0,"aria-label":l.read?D.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):D.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),ref:I,onClick:C},t.reactExports.createElement(Wy,{actions:e,streamSettings:y,thread:l,isMobile:_,active:b,isDisabled:w}),t.reactExports.createElement("ul",{className:Pv},t.reactExports.createElement(Uy,{comment:l.comments[0],active:!0,commentFactory:r,isLatestReply:0===j.length,isActionableApprovalComment:l.comments[0].id===z,annotation:l.annotation,commentControls:L,actions:e,editedComment:m,mentionsMatches:n,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,thread:l}),j.map(((r,o)=>t.reactExports.createElement(Uy,{key:o,comment:r,active:!0,isLatestReply:o===j.length-1,isActionableApprovalComment:r.id===z,actions:e,editedComment:m,mentionsMatches:n,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,thread:l}))),x&&p&&p(["respond","response_edit","request_edit"])),k&&(x&&S?t.reactExports.createElement(Ry,{author:u,disabled:w,shouldFocus:M,mentionsMatches:{},onCancel:i,onEditorStateChange:A,onMentionsQueryUpdated:Ky,onPost:e=>{const t={type:"approval",status:"pending",approval_type:"request",actor:"requester",approvers:K};F({text:e.text,metadata:[t]})},onFocus:T,onBlur:O,postLabel:D.formatMessage({id:"62bfQA",defaultMessage:"Resubmit request"}),placeholder:D.formatMessage({id:"CqEWQQ",defaultMessage:"Respond to {approver}"},{approver:K?K[0].display_name:""}),mentionsDisabled:!0}):t.reactExports.createElement(Ry,{author:u,disabled:w,shouldFocus:M,mentionsMatches:n,onCancel:i,onEditorStateChange:A,onMentionsQueryUpdated:R,onPost:B,onFocus:T,onBlur:O,stickerPacks:o})),t.reactExports.createElement(Oy,{thirdPartySource:l.isThirdParty?s:void 0,openWith:a}))}));Vy.displayName="ActiveThread";const $y=t.reactExports.forwardRef((({actions:e,active:r,commentFactory:n,mentionsMatches:o,thread:i,isMobile:a,showRevisionInfo:s,thirdPartySource:l,editedComment:u,onStartEdit:p,onEndEdit:m,approvalFormStatus:f,streamSettings:h,className:_,onClick:g,isDisabled:v},y)=>{const b=c.useIntl(),{onMouseEnter:E,onMouseLeave:x,onFocus:S,onBlur:w}=e,C=t.reactExports.useMemo((()=>Jy(i)),[i]),k=d.findActionableApprovalCommentId(i),M=t.reactExports.useCallback((e=>{13===e.keyCode&&g()}),[g]);return t.reactExports.createElement("li",{className:_,tabIndex:0,"aria-label":i.read?b.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):b.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),role:"button","aria-expanded":!1,onClick:g,onKeyDown:M,onMouseEnter:E,onMouseLeave:x,onFocus:S,onBlur:w,ref:y},t.reactExports.createElement(Wy,{actions:e,streamSettings:h,thread:i,isMobile:a,active:r,isDisabled:v}),t.reactExports.createElement("ul",{className:Pv},t.reactExports.createElement(Uy,{comment:i.comments[0],active:r,commentFactory:n,isLatestReply:0===C.length,isActionableApprovalComment:i.comments[0].id===k,annotation:i.annotation,actions:e,editedComment:u,mentionsMatches:o,onStartEdit:p,onEndEdit:m,isMobile:a,showRevisionInfo:s,approvalFormStatus:f,thread:i}),C.length>1&&t.reactExports.createElement(Ly,{count:C.length-1}),C.length>0&&t.reactExports.createElement(fy,{active:!1,comment:C[C.length-1],actions:{onClickAnnotation:Ky,onDeleted:Ky,onEdited:Ky,onMentionsQueryUpdated:Ky,onClickOlderInfo:Ky,onApproverRespond:Ky,onResubmitApprovalFocus:Ky},mentionsMatches:o,onEndEdit:Ky,onStartEdit:Ky,isEditing:!1,isMobile:a,showRevisionInfo:s,isLatestReply:!0,isActionableApprovalComment:!0,isEditingApproval:!1})),t.reactExports.createElement(Ny,{thirdPartySource:i.isThirdParty?l:void 0}))}));function Gy(e,t){return{onDeleted:()=>t.onCommentDeleted(e.id),onEdited:r=>t.onCommentEdited(e.id,r),onMentionsQueryUpdated:t.onMentionsQueryUpdated,onClickAnnotation:t.onClickAnnotation,onClickOlderInfo:t.onClickOlderInfo,onApproverRespond:t.onApproverRespond,onEditApproval:t.onEditApproval,onDeleteApprovalComment:t.onDeleteApprovalComment,onResubmitApprovalFocus:t.onResubmitApprovalFocus}}$y.displayName="InactiveThread";const Qy=({resolvedInfo:e,resolved:t})=>e||(t?Xy:void 0),Jy=e=>e.comments.slice(1).filter((e=>!e.deleted)),Xy={type:"no_details"},Zy=t.reactExports.memo((({actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,scrollToElem:E,onThreadInteractedWith:x,className:S="",focused:w,threadRef:C})=>{const{showApproval:k}=t.reactExports.useContext(kv),M=t.reactExports.useRef(),A=t.reactExports.useCallback((e=>{M.current=e,null==C||C(e)}),[C]),T=d.isApprovalThread(l),[O,I]=t.reactExports.useState(!0),[D,R]=t.reactExports.useState(!1),[N,P]=t.reactExports.useState(!1),B=t.reactExports.useCallback((()=>R(!0)),[R]),F=t.reactExports.useCallback((()=>{T&&e.onResubmitApprovalBlur(),R(!1)}),[T,e]),j=t.reactExports.useCallback((e=>(null==M?void 0:M.current)&&E?E(M.current).then((()=>{M.current&&P(e)})):Promise.resolve()),[E]);t.reactExports.useEffect((()=>{if(b){const e=y.canComment;j(e)}else b||(R(!1),P(!1))}),[b]);const z=t.reactExports.useCallback((()=>{x(l)}),[l,x]),K=t.reactExports.useCallback((t=>{t_(t)&&e.onEditorFocused(),e.onEditorStateChange(t),I(e_(t))}),[e]),L=b||!O,U=l.resolved||l.resolvedInfo,q=r.cx(S,{[Kv]:!0,[Bv]:!0,[jv]:L,[Nv]:!L,[Fv]:l.read,[$v]:!l.read,[Wv]:U,"sc-thread-unresolved":!U,[zv]:_,[Hv]:w,[Lv]:D}),W=y.canShowEditor&&!_&&!l.isThirdParty&&(!(k&&T)||"request_resubmit"===(null==v?void 0:v.activeForm)),H=!!l.pending;return l.comments.every((e=>!!e.deleted))?null:L?t.reactExports.createElement(Vy,{actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,className:q,showApproval:void 0===k||k,isApproval:T,isDisabled:H,onClick:z,includeEditor:W,shouldFocusThreadEditor:N,onEditorStateChange:K,onFocusEditor:B,onBlurEditor:F,ref:A}):t.reactExports.createElement($y,{actions:e,active:b,className:q,commentFactory:n,mentionsMatches:o,editedComment:m,thread:l,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,streamSettings:y,thirdPartySource:c,approvalFormStatus:v,isDisabled:H,onClick:z,includeEditor:W,ref:A})}));function Yy(e){const{onClick:n,label:o,size:i,className:a}=e;return t.reactExports.createElement(r.Tooltip,{title:o,placement:"top"},t.reactExports.createElement(r.IconButton,{"aria-label":o,className:r.cx(I_.scCommentEditorControlBtn,a),onClick:n,variant:"transparent",size:i},t.reactExports.createElement(r.UIIcon,{src:r.MentionLine,size:i})))}function eb(e){return t.reactExports.createElement("div",{className:I_.scCommentEditorInlineControls},e.children)}Zy.displayName="Thread";const tb=e=>{const{signals:r,postEnabled:n,cancelEnabled:o,isEmpty:i,annotationElement:a,isContainerFocused:s}=e,l=c.useIntl(),u=t.reactExports.createElement("div",{className:I_.scCommentEditorPostBarLeftWrapper},t.reactExports.createElement(Yy,{label:l.formatMessage({id:"b57X9o",defaultMessage:"Tag someone"}),onClick:r.insertMention,size:"small",className:I_.scCommentEditorMentionBtn}),a&&t.reactExports.createElement("div",{className:I_.scCommentEditorPostBarAnnotation},a)),d=!i||s,p=d?u:void 0;return d||n||o?t.reactExports.createElement(Cv,Object.assign({},e,{postLabel:l.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:l.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}),p):t.reactExports.createElement(eb,null,p)};tb.displayName="CommentStreamPostBarImpl";const rb=t.reactExports.memo(tb);var nb;function ob({countMsg:e,onClick:r,direction:n},{}){const o=n===nb.UP?"↑":"↓",i=`${Vg.unreadPill} ${n===nb.UP?Vg.up:Vg.down}}`;return t.reactExports.createElement("div",{className:i,onClick:r},t.reactExports.createElement("div",{className:Vg.unreadPillText},t.reactExports.createElement("span",{className:Vg.arrowIndicator},o),t.reactExports.createElement("span",{className:"unread-count"},e)))}rb.displayName="CommentStreamPostBar",function(e){e.DOWN="DOWN",e.UP="UP"}(nb||(nb={}));class ib extends t.reactExports.PureComponent{constructor(){super(...arguments),this.maybeRenderUnreadPill=(e,r,n)=>this.props.showUnreadPill&&e&&r?t.reactExports.createElement(ob,{countMsg:this.props.countMsgFn(e),onClick:()=>this.props.onItemActivated(r),direction:n}):null}render(){const{visibilityData:e,children:r}=this.props;return t.reactExports.createElement("div",{className:Vg.scUnreadPillWrapper},this.maybeRenderUnreadPill(e.countAbove,e.nearestAbove,nb.UP),r,this.maybeRenderUnreadPill(e.countBelow,e.nearestBelow,nb.DOWN))}}ib.displayName="UnreadPillWrapper";const ab={};let sb=0;var cb;function lb({timing:e,container:t,yPos:r,duration:n}){if(function(e,t){const r=e.dataset.scrollingId,n=r&&ab[r];return n&&n.yPos===t}(t,r)){const e=t.dataset.scrollingId,r=e&&ab[e];return r&&r.promise}let o;!function(e){const t=e.dataset.scrollingId;if(void 0!==t&&ab[t]){const{rafId:e,rej:r}=ab[t];cancelAnimationFrame(e),r()}}(t);const i=t.dataset.scrollingId=String(sb++),a=t.scrollTop,s=r-a;let c={};const l=new Promise(((e,t)=>{c={res:e,rej:t}}));return ab[i]=Object.assign(Object.assign({},c),{rafId:requestAnimationFrame((function r(c){if(!t)return;o||(o=c);const l=c-o,u=function(e,t,r,n){switch(e){case cb.Linear:return t*r/n;case cb.QuadEaseIn:{const e=r/n;return t*e*e}case cb.QuadEaseOut:{const e=r/n;return-t*e*(e-2)}case cb.QuadEaseInOut:{const e=r/n;return e<.5?2*t*e*e:-t*e*(4-2*e)}}}(e,s,l,n);if(t.scrollTop=a+u,l<n)return ab[i]=Object.assign(Object.assign({},ab[i]),{rafId:requestAnimationFrame(r)});t.scrollTop=a+s,ab[i].res(),delete ab[i]})),yPos:r,promise:l}),l}!function(e){e[e.Linear=0]="Linear",e[e.QuadEaseIn=1]="QuadEaseIn",e[e.QuadEaseOut=2]="QuadEaseOut",e[e.QuadEaseInOut=3]="QuadEaseInOut"}(cb||(cb={}));class ub extends t.reactExports.Component{constructor(){super(...arguments),this.listRef=null,this.setRef=e=>{this.listRef=e},this.scrollToElem=e=>{const r=t.reactDomExports.findDOMNode(this);if(!r)return;const n=r.getBoundingClientRect().top,o=e.getBoundingClientRect().top-n-16,i=r.scrollTop+o;return lb({timing:cb.QuadEaseOut,container:r,yPos:i,duration:600})}}componentDidMount(){this.props.onScroll&&this.listRef.addEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.addEventListener("resize",this.props.onWindowResize)}componentWillUnmount(){this.props.onScroll&&this.listRef.removeEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.removeEventListener("resize",this.props.onWindowResize)}render(){const e=this.props,{children:r,onWindowResize:n}=e,o=s.__rest(e,["children","onWindowResize"]);return t.reactExports.createElement("ul",Object.assign({},o,{ref:this.setRef}),t.reactExports.Children.map(r,(e=>t.reactExports.cloneElement(e,{scrollToElem:this.scrollToElem}))))}}ub.displayName="ScrollList";class db extends t.reactExports.PureComponent{constructor(){super(...arguments),this.scrollListRef=null,this.lastVisibilityData={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},this.renewVisibilityData=()=>{const{onVisibilityDataChange:e,trackedItems:t}=this.props,r=function(e,t){const r={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null};if(!e)return r;const{top:n,bottom:o}=e.getBoundingClientRect();for(let e=0;e<t.length;e++){const{item:i,ref:a}=t[e],s=a.getBoundingClientRect();if(s.bottom<n+10)r.countAbove++,r.nearestAbove=i;else if(s.top>o-10){r.countBelow=t.length-e,r.nearestBelow=i;break}}return r}(this.scrollListRef,t);b_(r,this.lastVisibilityData)||e(r),this.lastVisibilityData=r},this.throttledRenewVisibilityData=p.throttle(this.renewVisibilityData,250)}componentDidMount(){this.renewVisibilityData()}componentDidUpdate(e){e.trackedItems!==this.props.trackedItems&&this.throttledRenewVisibilityData()}render(){const{className:e,children:r}=this.props;return t.reactExports.createElement(ub,{ref:e=>{this.scrollListRef=e&&e.listRef},className:e,onScroll:this.throttledRenewVisibilityData,onWindowResize:this.throttledRenewVisibilityData},r)}}db.displayName="VisibilityAwareScrollList";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/cloud_doc_message.module.out.css",(e=>"._sc-cloud-message_bk3tg_1{border-bottom:2px solid var(--color_border_light);font-size:var(--unified_font_size_normal);line-height:var(--unified_line_height_normal);margin:12px 16px 0;padding-bottom:12px}._sc-text-link_bk3tg_10{color:var(--unified_color_text_link);display:inline;font-size:inherit;padding:0}._sc-text-link_bk3tg_10 .mc-tertiary-icon-text{font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}"));const pb="_sc-cloud-message_bk3tg_1",mb="_sc-text-link_bk3tg_10";const fb=({thirdPartySource:e,openWith:r,intl:n})=>{return void 0===(i=e)||"google_doc"!==i&&"google_sheet"!==i&&"google_slides"!==i||!r?null:t.reactExports.createElement("div",{className:pb},n.formatMessage({id:"wR6kVu",defaultMessage:"To add new comments, <url>open this file</url>"},{url:e=>t.reactExports.createElement(o.TertiaryLink,{className:mb,onClick:r},e)}));var i};fb.displayName="CloudDocMessage";const hb=({thirdPartySource:e,intl:r})=>e?t.reactExports.createElement(t.reactExports.Fragment,null,r.formatMessage({id:"62pp19",defaultMessage:"Comment will only post to Dropbox."})):null;hb.displayName="FirstPartyCommentAdvisory";const _b={newest:c.defineMessage({id:"uISXje",defaultMessage:"Newest"}),oldest:c.defineMessage({id:"kLxqWH",defaultMessage:"Oldest"}),unread:c.defineMessage({id:"HUZzUG",defaultMessage:"Unread"}),timestamp:c.defineMessage({id:"EUJjNP",defaultMessage:"Timestamp"}),page:c.defineMessage({id:"QXX8eA",defaultMessage:"Page"})},gb=({sortType:e,label:n,isChecked:o})=>t.React$1.createElement(r.Menu.SelectItem,{key:e,value:e,role:"menuitemcheckbox",selected:o,"aria-checked":o,"aria-label":n},n);gb.displayName="SortMenuItem";const vb=({currentSort:e,setSort:n,availableSortOpts:o})=>{const i=t.React$1.useRef(Tv),a=c.useIntl(),s=t.React$1.useCallback((e=>n(e)),[n]),l=t.React$1.useCallback((({isOpen:e})=>{e&&(i.current=o)}),[o]);return t.React$1.createElement("div",{className:Vg.commentsSortMenu},t.React$1.createElement(r.Menu.Wrapper,{isPortaled:!1,onSelection:s,onToggle:l},(({getContentProps:n,getTriggerProps:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.FilterChip,Object.assign({withDropdownIcon:!0,size:"small"},o()),a.formatMessage({id:"eca0uz",defaultMessage:"Sort by"})),t.React$1.createElement(r.Menu.Content,Object.assign({},n(),{style:{width:296}}),t.React$1.createElement(r.Menu.Segment,null,i.current.map((r=>t.React$1.createElement(gb,{key:r,sortType:r,label:a.formatMessage(_b[r]),isChecked:e===r})))))))))};vb.displayName="SortChip";const yb="PRIMARY",bb=()=>{},Eb=Vg.scCommentStreamThreads,xb="comments-sort-pref",Sb=c.defineMessage({id:"XI84a1",defaultMessage:"Comments on this file will show up here."});let wb=class extends t.reactExports.PureComponent{constructor(e){super(e),this.threadIdToRef={},this.editorHasChanges={},this.onThreadInteractedWith=e=>{const{activeThreadID:t,actionsAdapter:{onThreadActivated:r}}=this.props;t!==e.id&&r(e)},this.onVisibilityDataChange=e=>{this.setState({visibilityData:e})},this.updateTrackedItems=()=>{var e,t;this.setState({trackedItems:(e=this.props.threads,t=this.threadIdToRef,e.map((e=>({item:e,ref:t[e.id]}))).filter((({item:e,ref:t})=>!e.read&&t)))})},this.onStartEdit=e=>{this.setState({editedComment:e})},this.onEndEdit=()=>{this.setState({editedComment:void 0})},this.setEditorRef=e=>{this.editorRef=e},this.setThreadRef=(e,t)=>{this.threadIdToRef[e]=t},this.setSortBy=e=>{this.setState({sortBy:e}),this.props.actionsAdapter.onSortComments&&this.props.actionsAdapter.onSortComments(e)},this.handleClick=e=>{e.target.classList.contains(Eb)&&(this.props.actionsAdapter.onAllThreadsDeactivated(),this.editorHasChanges[yb]||this.props.actionsAdapter.onCommentDraftCancel())},this.onThreadReplyCancel=()=>{this.props.actionsAdapter.onAllThreadsDeactivated()},this.onPrimaryEditorCancel=()=>{document.activeElement&&this.blurElement(document.activeElement),this.props.actionsAdapter.onCommentDraftCancel(),this.setState({content:Iy(),editedComment:void 0})},this.onPrimaryEditorFocus=()=>{this.props.actionsAdapter.onAllThreadsDeactivated(),this.props.actionsAdapter.onEditorFocused()},this.onEditorStateChange=e=>t=>{this.editorHasChanges[e]=!e_(t)},this.onPrimaryEditorStateChange=e=>{this.onEditorStateChange(yb)(e),this.props.actionsAdapter.onEditorStateChange(e)},this.hasUnsavedChanges=()=>{const{threads:e}=this.props;return this.editorHasChanges[yb]||e.some((e=>this.editorHasChanges[e.id]||!!e.pending))||void 0!==this.state.editedComment},this.promptBeforeCloseHandler=e=>{if(this.hasUnsavedChanges())return e.returnValue="",e.preventDefault(),""},this.createThreadActions=e=>{const{onCommentDeleted:t,onCommentEdited:r,onClickAnnotation:n,onEditorFocused:o,onMentionsQueryUpdated:i,onThreadMarkedAsRead:a,onThreadMarkedAsUnread:s,onThreadRepliedTo:c,onThreadResolved:l,onThreadUnresolved:u,onThreadMouseEnter:d=bb,onThreadMouseLeave:p=bb,onThreadFocus:m=bb,onThreadBlur:f=bb,onClickOlderInfo:h=bb,onApproverRespond:_,onEditApproval:g,onDeleteApprovalComment:v,onResubmitApprovalFocus:y,onResubmitApprovalBlur:b,onResubmitApprovalRequest:E,onRemoveApprovalThread:x}=this.props.actionsAdapter;return{onClickAnnotation:n,onReply:t=>c(e,t),onMarkAsRead:()=>a(e),onMarkAsUnread:()=>s(e),onResolve:()=>l(e),onUnresolve:()=>u(e),onMouseEnter:()=>d(e),onMouseLeave:()=>p(e),onFocus:()=>m(e),onBlur:()=>f(e),onEditorFocused:()=>o(e),onCommentDeleted:r=>t(r,e),onCommentEdited:(t,n)=>r(t,n,e),onMentionsQueryUpdated:i,onClickOlderInfo:h,onEditorStateChange:this.onEditorStateChange(e),onApproverRespond:()=>_(e),onEditApproval:t=>g(e,t),onDeleteApprovalComment:(t,r)=>v(t,e,r),onResubmitApprovalFocus:()=>y(e),onResubmitApprovalBlur:b,onResubmitApprovalRequest:t=>E(e,t),onRemoveApprovalThread:()=>x(e)}},this.state={content:Iy(),editedComment:void 0,visibilityData:{countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},trackedItems:[],context:{showApproval:e.showApproval},sortBy:this.getSortPref()}}getSortPref(){const e=window.localStorage.getItem(xb);return e&&Av.includes(e)?e:Mv.newest}getChildContext(){return{showApproval:this.props.showApproval}}componentDidMount(){window.addEventListener("beforeunload",this.promptBeforeCloseHandler),this.updateTrackedItems()}componentDidUpdate({threads:e}){this.props.threads!==e&&this.updateTrackedItems()}getAvailableSortOpts(){const e=this.commonAnnotation();return vy(e)?Iv:yy(e)?Ov:Tv}sortThreadsByType(e){switch(this.state.sortBy){case Mv.newest:return e.sort(((e,t)=>+t.timestamp-+e.timestamp));case Mv.oldest:return e.sort(((e,t)=>+e.timestamp-+t.timestamp));case Mv.page:const[t,r]=n.partition(e,by);return t.sort(((e,t)=>e.annotation.regions[0].page-t.annotation.regions[0].page)).concat(r.sort(((e,t)=>+t.timestamp-+e.timestamp)));case Mv.timestamp:const[o,i]=n.partition(e,Ey);return o.sort(((e,t)=>e.annotation.time-t.annotation.time)).concat(i.sort(((e,t)=>+t.timestamp-+e.timestamp)));case Mv.unread:const[a,s]=n.partition(e,"read");return s.sort(((e,t)=>+t.timestamp-+e.timestamp)).concat(a.sort(((e,t)=>+t.timestamp-+e.timestamp)))}}get sortedThreads(){let e=[];return this.getAvailableSortOpts().includes(this.state.sortBy)?e=this.sortThreadsByType(this.props.threads):vy(this.commonAnnotation())?this.setState({sortBy:Mv.page},(()=>{e=this.sortThreadsByType(this.props.threads)})):yy(this.commonAnnotation())?this.setState({sortBy:Mv.timestamp},(()=>{e=this.sortThreadsByType(this.props.threads)})):this.setState({sortBy:Mv.newest},(()=>{e=this.sortThreadsByType(this.props.threads)})),this.props.showResolvedComments?e:e.filter((e=>!(e.resolved||e.resolvedInfo)))}get sortedVisibleThreads(){return this.sortedThreads.filter((e=>e.comments.some((e=>!e.deleted))))}commonAnnotation(){let e;for(const t of this.props.threads){if(t.annotation&&e&&!gy(t.annotation,e))return;e=t.annotation||e}return e}componentWillUnmount(){window.removeEventListener("beforeunload",this.promptBeforeCloseHandler)}focusPrimaryEditor(){var e;null===(e=this.editorRef)||void 0===e||e.focus()}blurElement(e){let t;"function"==typeof Event?t=new FocusEvent("blur"):(t=document.createEvent("Event"),t.initEvent("blur",!0,!0)),e.dispatchEvent(t)}get includeEditor(){const{isMobile:e,settings:t}=this.props;return t.canShowEditor&&!e}get includeEditorMeatball(){const{settings:e}=this.props;return this.includeEditor&&e.canShowEditorMeatball}render(){const{actionsAdapter:{onMentionsQueryUpdated:e,onThreadCreated:n},className:o="",commentFactory:i,editorFactory:a,user:s,mentionsMatches:l,activeThreadID:u,hoverThreadID:p,focusedThreadID:m,isGoogleDSS:f,isMobile:h,intl:_,placeholderOverride:g,settings:v,showRevisionInfo:y,stickerPacks:b,thirdPartySource:E,initialEditorFocus:x,hideOpenCloudDocMessage:S,meatballMenu:w}=this.props,C=r.cx(o,{[Vg.scCommentStream]:!0,[Vg.scCommentStreamRightRail]:!0}),k=r.cx({[Vg.scCommentStreamEditorContainer]:this.includeEditorMeatball}),M=r.cx({[Vg.scCommentStreamEditorBundle]:this.includeEditorMeatball});let A=null;const T=g||_.formatMessage({id:"DkHo17",defaultMessage:"Enter your thoughts here"}),[O,I]=d.getApprovalRequestCounts(this.props.threads);if(this.includeEditor){const r={a11yEditorLabel:T,author:s,className:Vg.scCommentStreamEditor,content:this.state.content,placeholder:T,postSignalComponent:rb,onCancel:this.onPrimaryEditorCancel,setEditorRef:this.setEditorRef,onPost:n,mentionsMatches:l,onMentionsQueryUpdated:e,onFocus:this.onPrimaryEditorFocus,onEditorStateChange:this.onPrimaryEditorStateChange,shouldFocus:x,stickerPacks:b,tagline:t.reactExports.createElement(hb,{thirdPartySource:E,intl:_})};A=a?a(r):t.reactExports.createElement(xv,Object.assign({},r))}else if(!h){const e=f?"google_doc":E;A=S?null:t.reactExports.createElement(fb,{thirdPartySource:e,openWith:this.props.openWith,intl:_})}return t.reactExports.createElement(c.Provider,{value:_},t.reactExports.createElement(kv.Provider,{value:this.state.context},t.reactExports.createElement("div",{className:C,onClick:this.handleClick},t.reactExports.createElement("div",{className:k},t.reactExports.createElement("div",{className:M},A),this.includeEditorMeatball&&w),this.props.showApproval&&0!==I&&0!==O?t.reactExports.createElement("div",{className:Vg.scCommentApprovalsContainer},t.reactExports.createElement(r.Text,{size:"small",color:"faint"},d.getApprovalRequestsSubtext(O,_))):null,0===this.sortedVisibleThreads.length?t.reactExports.createElement("div",{className:Vg.scCommentEmptyContainer},t.reactExports.createElement(r.Text,{size:"small",color:"faint"},_.formatMessage(Sb))):t.reactExports.createElement(t.reactExports.Fragment,null,t.reactExports.createElement(vb,{currentSort:this.state.sortBy,setSort:this.setSortBy,availableSortOpts:this.getAvailableSortOpts()}),t.reactExports.createElement(ib,{showUnreadPill:this.props.showUnreadPill,visibilityData:this.state.visibilityData,countMsgFn:e=>_.formatMessage({id:"fkNHq+",defaultMessage:"{count} unread"},{count:e}),onItemActivated:this.onThreadInteractedWith},t.reactExports.createElement(db,{className:Eb,trackedItems:this.state.trackedItems,onVisibilityDataChange:this.onVisibilityDataChange},this.sortedVisibleThreads.map((e=>t.reactExports.createElement(Zy,{threadRef:t=>this.setThreadRef(e.id,t),key:e.id,actions:this.createThreadActions(e.id),active:e.id===u,focused:e.id===p||e.id===m,commentFactory:i,editedComment:this.state.editedComment,onThreadInteractedWith:this.onThreadInteractedWith,onCancel:this.onThreadReplyCancel,onStartEdit:this.onStartEdit,onEndEdit:this.onEndEdit,isMobile:h,thread:e,user:s,mentionsMatches:l,showRevisionInfo:y,streamSettings:v,stickerPacks:b,thirdPartySource:this.props.thirdPartySource,openWith:this.props.openWith,renderApprovalForm:this.props.renderApprovalForm,approvalFormStatus:this.props.approvalFormStatus})))))))))}};wb.childContextTypes={showApproval:r.PropTypes.bool},wb.displayName="CommentStream";const Cb={canComment:!0,canModifyThreads:!0,canShowEditor:!0,canShowEditorMeatball:!1},kb={canComment:!1,canModifyThreads:!1,canShowEditor:!1,canShowEditorMeatball:!1};r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/index_redesign.module.out.css",(e=>'._sc-comment-stream_1v76e_1{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:328px}._sc-comment-stream_1v76e_1._sc-comment-stream--right-rail_1v76e_9{width:100%}._sc-unread-pill-wrapper_1v76e_15>div{flex:0 1 auto}._sc-comment-stream-threads_1v76e_19{flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;z-index:0}._sc-comment-stream--right-rail_1v76e_9 ._sc-comment-stream-threads_1v76e_19{margin-top:8px}._sc-comment-stream-open_1v76e_32{width:15em}._sc-comment-stream-closed_1v76e_36{width:1em}._sc-annotation-toggle_1v76e_40{font-feature-settings:"tnum";box-sizing:border-box;display:inline-block}._sc-annotation-toggle-inner_1v76e_46{cursor:default;display:flex}._sc-unread-pill-wrapper_1v76e_15{display:flex;flex:1 1 auto;flex-direction:column;min-height:0;overflow:hidden}._sc-unread-pill-wrapper_1v76e_15 ._unread-pill_1v76e_60{display:block;height:0;margin:auto;z-index:1}._unread-pill_1v76e_60 ._unread-pill-text_1v76e_67{background:#d2e6fa;border:2px solid #f7f9fa;color:#0070e0;cursor:pointer;padding:5px 10px}._unread-pill_1v76e_60 ._unread-pill-text_1v76e_67:hover{background:#bfdbf7}._unread-pill_1v76e_60._up_1v76e_83 ._unread-pill-text_1v76e_67{margin-top:15px;position:relative}._comments-sort-menu_1v76e_88{background-color:var(--color__standard__background);margin:var(--spacing__unit--2) var(--spacing__unit--2);position:-webkit-sticky;position:sticky;top:0;z-index:2}._sc-unread-pill-wrapper_1v76e_15 ._unread-pill_1v76e_60._down_1v76e_96{position:relative;top:-42px}._unread-pill_1v76e_60 span._arrow-indicator_1v76e_101{margin-right:5px}._sc-suggested-comments_1v76e_105{margin:4px 10px}._sc-suggested-comments-button_1v76e_109{background:var(--color__attention__background--faint);border-radius:20px;cursor:pointer;margin:4px;padding:8px 10px}._sc-suggested-comments-button_1v76e_109:hover{background:var(--color__attention__background)}._sc-comment-stream_1v76e_1{position:relative}._sc-annotation-toggle_1v76e_40{font-weight:500}@keyframes _comment-button-fade-in_1v76e_1{0%{opacity:0}70%{opacity:0}to{opacity:1}}._sc-comment-stream-error-container_1v76e_143{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:100%;text-align:center;width:100%}._sc-comment-stream-error-title_1v76e_154{font-weight:var(--unified_font_weight_semibold)}._sc-comment-stream-error-subtext_1v76e_160,._sc-comment-stream-error-title_1v76e_154{font-size:var(--unified_font_size_normal);line-height:var(--web_comment_line_height)}._sc-comment-stream-error-subtext_1v76e_160{color:var(--unified_color_text_subtext);width:240px}._sc-comment-stream-error-button-container_1v76e_167{margin-top:20px}._sc-comment-stream-editor-container_1v76e_171{display:flex}._sc-comment-stream-editor-bundle_1v76e_175{flex:1}._sc-comment-stream-meatball-icon_1v76e_179{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._sc-comment-empty-container_1v76e_184{padding:var(--spacing__unit--2)}._sc-comment-approvals-container_1v76e_188{margin-top:10px}._sc-comment-stream-wrapper_1v76e_192{display:flex;flex-direction:column;height:100%;overflow:auto}._sc-comment-stream-editor_1v76e_171{flex:0 0 auto}._sc-comment-stream-editor_1v76e_171 ._sc-comment-editor-focus-container_1v76e_203{background-color:var(--dig-color__background__subtle);border-top:1px solid var(--dig-color__border__subtle);padding:var(--spacing__unit--2)}._sc-comment-stream-editor_1v76e_171 ._sc-comment-editor-focus-container-is-focused_1v76e_209{border-color:transparent;box-shadow:inset var(--dig-utilities__boxshadow__focus-ring)}'));const Mb="_sc-comment-stream_1v76e_1",Ab="_sc-comment-stream--right-rail_1v76e_9",Tb="_sc-comment-stream-threads_1v76e_19",Ob="_comments-sort-menu_1v76e_88",Ib="_sc-comment-stream-editor-container_1v76e_171",Db="_sc-comment-stream-editor-bundle_1v76e_175",Rb="_sc-comment-empty-container_1v76e_184",Nb="_sc-comment-approvals-container_1v76e_188",Pb="_sc-comment-stream-wrapper_1v76e_192",Bb="_sc-comment-stream-editor_1v76e_171",Fb="_sc-comment-editor-focus-container_1v76e_203",jb="_sc-comment-editor-focus-container-is-focused_1v76e_209";r.injectInternalStyle("typescript/libraries/comments2/src/components/thread/index_redesign.module.out.css",(e=>'._sc-thread-controls_1imlw_1{display:flex;justify-content:space-between;position:relative}._sc-thread-controls_1imlw_1>:first-child{min-width:0}._sc-thread-controls_1imlw_1>:nth-child(2){margin-left:8px}._sc-thread-controls-resolved-note_1imlw_15{font-style:italic}._sc-thread-controls_1imlw_1 .mc-tertiary-link-button{border-radius:0}._sc-thread-inactive_1imlw_23 ._sc-thread-controls_1imlw_1 ._sc-thread-controls-resolved-note_1imlw_15{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-thread-comments_1imlw_29{list-style-type:none;padding:0}._sc-thread-comments_1imlw_29>*{position:relative}._sc-thread-comments_1imlw_29>:before{content:"";height:100%;position:absolute;width:1px}._sc-thread-comments_1imlw_29>:first-child:before{top:12px}._sc-thread-comments_1imlw_29>:last-child:before{height:4px}._sc-thread--right-rail_1imlw_54 ._sc-thread-comments_1imlw_29>:first-child:before{top:20px}._sc-comment-deleted_1imlw_58._sc-comment-deleted--right-rail_1imlw_58 ._sc-thread-comments_1imlw_29>:first-child:before{top:34px}._sc-thread--right-rail_1imlw_54 ._sc-thread-comments_1imlw_29>:last-child:before{height:2px}._sc-thread--right-rail_1imlw_54 ._sc-thread-comments_1imlw_29>:only-child:before{height:0}._sc-thread-read_1imlw_70._sc-thread-active_1imlw_70{background:var(--color__standard__background);border-bottom:1px solid var(--dig-color__border__subtle);border-top:1px solid var(--dig-color__border__subtle)}._sc-thread-mobile_1imlw_76 .mc-tertiary-link-button:focus{box-shadow:none}._sc-thread-active_1imlw_70._sc-thread-focused_1imlw_80{box-shadow:var(--dig-utilities__boxshadow__focus-ring)}._sc-thread_1imlw_1._sc-thread--right-rail_1imlw_54._sc-thread-active_1imlw_70._sc-thread-focused_1imlw_80{box-shadow:inset var(--dig-utilities__boxshadow__focus-ring)}._sc-thread_1imlw_1._sc-thread--right-rail_1imlw_54._sc-thread-active_1imlw_70._sc-thread-focused_1imlw_80 ._sc-thread-editor_1imlw_90{box-shadow:inset 1.5px -1.5px 0 1.5px var(--dig-color__utility__focus-ring),inset -1.5px -1.5px 0 1.5px var(--dig-color__utility__focus-ring)}._sc-thread-collapsed_1imlw_95{cursor:pointer}._sc-thread-source_1imlw_99{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:0 16px 8px 58px}._sc-third-party-reply-cta_1imlw_105{background-color:var(--color_ink_5);padding:10px 12px}._sc-third-party-reply-cta_1imlw_105 p{margin:0}._sc-third-party-reply-cta_1imlw_105 .mc-button-secondary{margin-top:8px}._sc-thread-editor-sticker-component-container_1imlw_118{height:32px}._sc-thread-editor-sticker-button-container_1imlw_122{float:right;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-right:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}._sc-thread_1imlw_1{color:var(--color_ink);font-size:var(--web_comment_font_size);margin:8px 12px 0;padding-top:8px}._sc-thread_1imlw_1._sc-thread--right-rail_1imlw_54{margin:0 0 -1px}._sc-thread_1imlw_1:last-child{margin-bottom:40px}._sc-comment-stream-small-margin-bottom_1imlw_150 ._sc-thread_1imlw_1:last-child{margin-bottom:8px}._sc-thread-resolved_1imlw_155{border-style:dashed}._sc-thread-inactive_1imlw_23{cursor:pointer;opacity:1;padding:8px 0}._sc-thread-resolved_1imlw_155._sc-thread-inactive_1imlw_23{opacity:.5}._sc-thread-focused_1imlw_80,._sc-thread-inactive_1imlw_23:focus,._sc-thread-read_1imlw_70._sc-thread-active_1imlw_70{opacity:1}._sc-thread-inactive_1imlw_23:hover{background-color:var(--dig-color__background__subtle)}._sc-thread-inactive_1imlw_23 ._sc-comment-read-only-editor-wrapper_1imlw_179{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._sc-thread-controls_1imlw_1{color:var(--color_stone);font-size:13px;line-height:var(--web_comment_line_height);margin:2px 12px 10px}._sc-thread-controls_1imlw_1 ._sc-thread-toggle_1imlw_195{color:var(--color_stone);padding:0}._sc-thread-controls_1imlw_1 ._sc-thread-toggle_1imlw_195 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-thread-comments_1imlw_29>:before{background:#000;left:30px;top:20px}._sc-thread--right-rail_1imlw_54 ._sc-thread-comments_1imlw_29>:before{left:30px}._sc-thread-unread_1imlw_220 ._sc-thread-comments_1imlw_29>:before{background:var(--color_blue_forty)}._sc-thread-active_1imlw_70{cursor:inherit;margin-bottom:16px}._sc-thread-unread_1imlw_220{background:var(--color_blue_sixteen)}._sc-thread-comment-number_1imlw_235{color:var(--color_blue);font-size:13px;padding:8px 16px 8px 58px}._sc-thread-editor_1imlw_90{background-color:var(--dig-color__background__subtle);padding:var(--spacing__unit--2)}._sc-thread--right-rail_1imlw_54 ._sc-thread-comment-number_1imlw_235{color:var(--color__standard__text);font-family:var(--type__body__xsmall--fontfamily);font-size:var(--type__body__xsmall--fontsize);line-height:var(--type__body__xsmall--lineheight);padding:4px 8px 4px 50px;text-decoration:underline}._sc-thread--right-rail_1imlw_54 ._sc-thread-controls-resolved-note_1imlw_15{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}._sc-thread--right-rail_1imlw_54 ._sc-thread-controls_1imlw_1{margin:8px 8px 0}._sc-thread--right-rail_1imlw_54._sc-thread-unread_1imlw_220{background-color:var(--dig-color__primary__on-base)}._sc-thread--right-rail_1imlw_54._sc-thread-unread_1imlw_220:hover{background-color:var(--dig-color__primary__surface)}'));const zb="_sc-thread-controls_1imlw_1",Kb="_sc-thread-controls-resolved-note_1imlw_15",Lb="_sc-thread-inactive_1imlw_23",Ub="_sc-thread-comments_1imlw_29",qb="_sc-thread--right-rail_1imlw_54",Wb="_sc-thread-read_1imlw_70",Hb="_sc-thread-active_1imlw_70",Vb="_sc-thread-mobile_1imlw_76",$b="_sc-thread-focused_1imlw_80",Gb="_sc-thread_1imlw_1",Qb="_sc-thread-editor_1imlw_90",Jb="_sc-thread-resolved_1imlw_155",Xb="_sc-thread-unread_1imlw_220",Zb="_sc-thread-comment-number_1imlw_235";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_redesign/index.module.out.css",(e=>"._sc-comment_1862u_1{display:flex}._sc-comment-content-container_1862u_5{width:100%}._sc-comment-content_1862u_5,._sc-comment-renderer_1862u_9{word-wrap:break-word;-webkit-text-size-adjust:none}._sc-comment-renderer_1862u_9{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height);position:relative}._sc-comment-author_1862u_21{margin-right:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-comment-timestamp_1862u_28{flex:1 0;white-space:nowrap}._sc-comment-separator_1862u_34{display:inline-block;height:16px;width:16px}._sc-comment-edit-controls_1862u_40{margin-left:48px}._sc-comment-sticker_1862u_44{display:block;height:112px;margin:0 auto;width:112px}._sc-comment-text_1862u_51{white-space:pre-wrap}._sc-comment-deleted_1862u_55 ._sc-comment-text_1862u_51{font-style:italic}._sc-comment-info_1862u_59{position:relative;width:100%}._sc-comment-author-timestamp_1862u_64{align-items:baseline;display:flex;flex-wrap:nowrap;position:relative;width:100%}._sc-comment-actions_1862u_73{align-items:center;display:flex;margin-top:8px}._sc-comment-actions-separator_1862u_79{padding:0 4px}._sc-comment-actions_1862u_73 button{font-size:var(--type__body__small--fontsize)!important}._sc-comment_1862u_1{line-height:var(--web_comment_line_height);padding:8px 16px 8px 58px}._sc-comment-author_1862u_21{color:var(--color_ink);font-size:13px;font-weight:500}._sc-comment-collapsed-timestamp-info_1862u_104,._sc-comment-timestamp_1862u_28{color:var(--color_stone);font-size:13px}._sc-comment-collapsed-timestamp-info_1862u_104{margin-top:7px}._sc-comment-info_1862u_59 ._sc-comment-older-version_1862u_114{color:var(--color_stone);font-size:13px;padding:0}._sc-comment-older-version_1862u_114 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-comment-deleted_1862u_55{line-height:20px;padding:8px 16px 8px 58px}._sc-comment-deleted_1862u_55 ._sc-comment-text_1862u_51{color:var(--color_stone)}._sc-comment-info_1862u_59{margin-bottom:4px}._sc-comment-author-timestamp_1862u_64{height:var(--web_comment_line_height)}._sc-comment-actions_1862u_73 .mc-tertiary-link-button{border-radius:0;display:inline-block;padding-right:0}._sc-comment-renderer--right-rail_1862u_153{padding:var(--spacing__unit--1) var(--spacing__unit--2)}._sc-comment-renderer-inner--right-rail_1862u_159{display:flex;font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight);word-break:break-word}._sc-comment-renderer-avatar_1862u_168{display:flex;margin-right:6px;z-index:2}._sc-comment-info--right-rail_1862u_175{align-items:center;display:flex;flex-direction:row;height:24px}._sc-comment-info--right-rail_1862u_175 ._sc-comment-author-timestamp_1862u_64{align-items:center;display:flex;overflow:hidden;white-space:nowrap}._sc-comment-author--right-rail_1862u_189{font-weight:var(--type__body__small--fontweight_strong);overflow:hidden;text-overflow:ellipsis}._sc-comment-timestamp--right-rail_1862u_195{color:var(--color__faint__text);margin-left:4px}._sc-comments-thread-control-wrapper_1862u_201{display:flex;margin-left:16px}._sc-comment-renderer--right-rail_1862u_153 ._sc-comment-renderer-content-wrapper_1862u_207{min-width:0;width:100%}._sc-comment-renderer-content-wrapper--last-approval-comment_1862u_214{margin-bottom:var(--spacing__unit--1)}._sc-comment-dig-avatar_1862u_218{margin-bottom:0;margin-top:0}._sc-annotation-label--right-rail_1862u_223{color:var(--color__core__accent)}._sc-annotation-label--right-rail_1862u_223 ._sc-annotation-label-link_1862u_228:focus{box-shadow:none;margin:0;padding:0}._sc-annotation-label--right-rail_1862u_223 ._sc-annotation-label-link_1862u_228:focus-visible{box-shadow:inset 0 0 0 3px var(--color__utility__focusring);margin:0;padding:0}._sc-comment-deleted--right-rail_1862u_241{display:flex}._sc-comment-deleted_1862u_55._sc-comment-deleted--right-rail_1862u_241{padding:var(--spacing__unit--1) var(--spacing__unit--2)}._sc-deleted-comment-icon_1862u_248{color:var(--color__faint__text)}._sc-deleted-comment-avatar-wrapper_1862u_252{align-items:center;background-color:var(--color__standard__background);border:1px solid var(--color__disabled__border);border-radius:50%;display:flex;height:24px;justify-content:center;margin:0 8px 0 2px;width:24px;z-index:2}._sc-comment-deleted--right-rail_1862u_241 ._sc-comment-text_1862u_51{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}._sc-comment-inline-editor_1862u_273{padding:4px var(--spacing__unit--2)}"));const Yb="_sc-comment-content-container_1862u_5",eE="_sc-comment-content_1862u_5",tE="_sc-comment-separator_1862u_34",rE="_sc-comment-text_1862u_51",nE="_sc-comment-deleted_1862u_55",oE="_sc-comment-author-timestamp_1862u_64",iE="_sc-comment-actions_1862u_73",aE="_sc-comment-actions-separator_1862u_79",sE="_sc-comment-older-version_1862u_114",cE="_sc-comment-renderer--right-rail_1862u_153",lE="_sc-comment-info--right-rail_1862u_175",uE="_sc-comment-author--right-rail_1862u_189",dE="_sc-comment-timestamp--right-rail_1862u_195",pE="_sc-comments-thread-control-wrapper_1862u_201",mE="_sc-comment-renderer-content-wrapper_1862u_207",fE="_sc-comment-renderer-content-wrapper--last-approval-comment_1862u_214",hE="_sc-comment-dig-avatar_1862u_218",_E="_sc-annotation-label--right-rail_1862u_223",gE="_sc-annotation-label-link_1862u_228",vE="_sc-comment-deleted--right-rail_1862u_241",yE="_sc-deleted-comment-icon_1862u_248",bE="_sc-deleted-comment-avatar-wrapper_1862u_252",EE="_sc-comment-inline-editor_1862u_273";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_editor/index_redesign.module.out.css",(e=>"._sc-comment-editor_ddy9k_1{position:relative}._mention-suggestion-list_ddy9k_5{-webkit-user-select:none;user-select:none}._mention-suggestion-row_ddy9k_9{display:flex}._sc-comment-editor-prefix_ddy9k_13{float:left;position:relative;z-index:2}._sc-comment-editor-right-accessory_ddy9k_19{margin-right:4px;margin-top:4px}._sc-comment-editor-placeholder_ddy9k_24{color:var(--color_ink_40);position:absolute;top:var(--spacing__unit--1);white-space:nowrap;width:100%}._sc-comment-editor-inner--disabled_ddy9k_33 ._sc-comment-editor-placeholder_ddy9k_24{z-index:2}._sc-comment-editor-mentions-list-container_ddy9k_37{background:var(--color__standard__background);font-size:12px;max-height:180px;overflow-x:hidden;overflow-y:auto;width:calc(100% - 10px);z-index:1000}._sc-comment-editor-mentions-list_ddy9k_37{list-style:none;margin:0;padding:0}._sc-comment-editor-mentions-suggestion_ddy9k_53{background:inherit;border:none;font-size:12px;padding:8px;width:100%}._sc-comment-editor-mentions-suggestion_ddy9k_53>div{align-items:center;display:flex;text-align:left}._sc-comment-editor-mentions-suggestion_ddy9k_53 .mc-avatar,._sc-comment-editor-mentions-suggestion_ddy9k_53 .mc-avatar-text{margin-right:8px}._sc-comment-editor-mentions-email_ddy9k_73,._sc-comment-editor-mentions-name_ddy9k_72{overflow:hidden;text-overflow:ellipsis}._sc-comment-editor-mentions-name_ddy9k_72{font-size:var(--type__body__standard--fontsize)}._sc-comment-editor-mentions-email_ddy9k_73{font-size:var(--type__body__small--fontsize)}._active-macro-chrome_ddy9k_86{position:absolute;-webkit-user-select:none;user-select:none;width:100%;z-index:1000}._sc-comment-editor-mentions-user_ddy9k_93{overflow:hidden;white-space:nowrap}._sc-comment-editor-inner_ddy9k_33,._sc-comment-renderer-inner_ddy9k_99{position:relative;word-break:break-word}._sc-comment-editor-interaction-container_ddy9k_104{position:relative}._sc-comment-editor-draft_ddy9k_108{max-height:40vh;overflow:auto}._sc-comment-editor-controls_ddy9k_113{align-items:center;display:flex;height:100%;position:relative}._sc-comment-editor-controls_ddy9k_113 ._sc-comment-editor-controls-right_ddy9k_120{margin-left:auto;white-space:nowrap}._sc-comment-editor-inline-controls_ddy9k_126{align-items:center;display:flex;justify-items:center;z-index:10}._sc-comment-editor-style-bold_ddy9k_134{font-weight:700}._sc-comment-editor-style-code_ddy9k_138{word-wrap:break-word}._sc-comment-editor-style-italic_ddy9k_142{font-style:italic}._sc-comment-editor-style-strikethrough_ddy9k_146._sc-comment-editor-style-underline_ddy9k_146{text-decoration:line-through underline}._sc-comment-editor-style-strikethrough_ddy9k_146{text-decoration:line-through}._sc-comment-editor-style-underline_ddy9k_146{text-decoration:underline}._sc-comment-editor-coach-mark-container_ddy9k_160{position:relative}._sc-comment-editor-sticker_ddy9k_164{height:112px;width:112px}._sc-comment-editor-atomic-block_ddy9k_169{clear:both}._sc-comment-editor-control-btn_ddy9k_173 svg.mc-icon{height:100%;width:100%}._sc-comment-editor-tagline_ddy9k_178{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:8px 16px}._sc-comment-editor_ddy9k_1{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height)}._sc-comment-editor-prefix_ddy9k_13{height:20px}._sc-comment-editor_ddy9k_1 ._sc-comment-editor-prefix_ddy9k_13{padding:16px 0 0 58px}._sc-comment-editor-mentions-list-container_ddy9k_37{-webkit-font-smoothing:antialiased;border:1px solid var(--color_stone_forty)}._sc-comment-editor-mentions-suggestion_ddy9k_53{border-top:1px solid var(--color_stone_forty);font-size:var(--type__body__small--fontsize)}._sc-comment-editor-mentions-email_ddy9k_73{color:var(--color_stone)}._sc-comment-editor-mentions-list-header_ddy9k_214{color:var(--color_stone);padding:8px}._sc-comment-editor-mentions-suggestion_ddy9k_53._sc-comment-editor-mentions-suggestion-selected_ddy9k_220,._sc-comment-editor-mentions-suggestion_ddy9k_53:hover{background-color:var(--color_blue_sixteen)}._sc-comment-editor-inner_ddy9k_33 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner_ddy9k_33 .public-DraftEditorPlaceholder-root{padding:16px 16px 16px 58px}._sc-comment-renderer-inner_ddy9k_99{padding:8px 16px 8px 58px}._sc-comment-editor-controls-container_ddy9k_235{background:inherit;height:40px}._sc-comment-editor-mention_ddy9k_37{color:var(--color__attention__text)}._sc-comment-editor_ddy9k_1._pending_ddy9k_244{color:var(--color__faint__text)}._sc-comment-editor-inner--disabled_ddy9k_33{background:var(--color__faint__background)}._sc-comment-editor-inner--right-rail_ddy9k_253{color:var(--color__standard__text);display:flex;font-family:var(--type__body__standard--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__standard--lineheight)}._sc-comment-editor-inner--right-rail_ddy9k_253 ._sc-comment-editor-interaction-container_ddy9k_104{flex-grow:1;margin-left:6px}._sc-comment-editor-inner--right-rail_ddy9k_253 ._sc-comment-editor-prefix_ddy9k_13{padding:5px 0 0}._sc-comment-editor-inner--right-rail_ddy9k_253 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner--right-rail_ddy9k_253 .public-DraftEditorPlaceholder-root{border-left:0;padding:5px 16px 5px 0}._sc-comment-editor-inner--right-rail_ddy9k_253 ._sc-comment-editor-placeholder_ddy9k_24{top:6px}._sc-comment-editor-avatar-wrapper_ddy9k_283{margin-top:4px}._sc-comment-editor-controls-post--right-rail_ddy9k_287{margin-left:8px}._sc-comment-editor-controls-cancel--right-rail_ddy9k_291{color:var(--color__faint__text);margin-left:8px}._sc-comment-editor-mention-btn_ddy9k_296{color:var(--color__faint__text)}._sc-comment-editor-post-bar-left-wrapper_ddy9k_300{display:flex}._sc-comment-editor-post-bar-annotation_ddy9k_304{align-items:center;display:flex;height:24px}._sc-comment-editor-tagline_ddy9k_178:empty{padding:0}"));const xE={scCommentEditor:"_sc-comment-editor_ddy9k_1",mentionSuggestionList:"_mention-suggestion-list_ddy9k_5",mentionSuggestionRow:"_mention-suggestion-row_ddy9k_9",scCommentEditorPrefix:"_sc-comment-editor-prefix_ddy9k_13",scCommentEditorRightAccessory:"_sc-comment-editor-right-accessory_ddy9k_19",scCommentEditorPlaceholder:"_sc-comment-editor-placeholder_ddy9k_24",scCommentEditorInnerDisabled:"_sc-comment-editor-inner--disabled_ddy9k_33",scCommentEditorMentionsListContainer:"_sc-comment-editor-mentions-list-container_ddy9k_37",scCommentEditorMentionsList:"_sc-comment-editor-mentions-list_ddy9k_37",scCommentEditorMentionsSuggestion:"_sc-comment-editor-mentions-suggestion_ddy9k_53",scCommentEditorMentionsEmail:"_sc-comment-editor-mentions-email_ddy9k_73",scCommentEditorMentionsName:"_sc-comment-editor-mentions-name_ddy9k_72",activeMacroChrome:"_active-macro-chrome_ddy9k_86",scCommentEditorMentionsUser:"_sc-comment-editor-mentions-user_ddy9k_93",scCommentEditorInner:"_sc-comment-editor-inner_ddy9k_33",scCommentRendererInner:"_sc-comment-renderer-inner_ddy9k_99",scCommentEditorInteractionContainer:"_sc-comment-editor-interaction-container_ddy9k_104",scCommentEditorDraft:"_sc-comment-editor-draft_ddy9k_108",scCommentEditorControls:"_sc-comment-editor-controls_ddy9k_113",scCommentEditorControlsRight:"_sc-comment-editor-controls-right_ddy9k_120",scCommentEditorInlineControls:"_sc-comment-editor-inline-controls_ddy9k_126",scCommentEditorStyleBold:"_sc-comment-editor-style-bold_ddy9k_134",scCommentEditorStyleCode:"_sc-comment-editor-style-code_ddy9k_138",scCommentEditorStyleItalic:"_sc-comment-editor-style-italic_ddy9k_142",scCommentEditorStyleStrikethrough:"_sc-comment-editor-style-strikethrough_ddy9k_146",scCommentEditorStyleUnderline:"_sc-comment-editor-style-underline_ddy9k_146",scCommentEditorCoachMarkContainer:"_sc-comment-editor-coach-mark-container_ddy9k_160",scCommentEditorSticker:"_sc-comment-editor-sticker_ddy9k_164",scCommentEditorAtomicBlock:"_sc-comment-editor-atomic-block_ddy9k_169",scCommentEditorControlBtn:"_sc-comment-editor-control-btn_ddy9k_173",scCommentEditorTagline:"_sc-comment-editor-tagline_ddy9k_178",scCommentEditorMentionsListHeader:"_sc-comment-editor-mentions-list-header_ddy9k_214",scCommentEditorMentionsSuggestionSelected:"_sc-comment-editor-mentions-suggestion-selected_ddy9k_220",scCommentEditorControlsContainer:"_sc-comment-editor-controls-container_ddy9k_235",scCommentEditorMention:"_sc-comment-editor-mention_ddy9k_37",pending:"_pending_ddy9k_244",scCommentEditorInnerRightRail:"_sc-comment-editor-inner--right-rail_ddy9k_253",scCommentEditorAvatarWrapper:"_sc-comment-editor-avatar-wrapper_ddy9k_283",scCommentEditorControlsPostRightRail:"_sc-comment-editor-controls-post--right-rail_ddy9k_287",scCommentEditorControlsCancelRightRail:"_sc-comment-editor-controls-cancel--right-rail_ddy9k_291",scCommentEditorMentionBtn:"_sc-comment-editor-mention-btn_ddy9k_296",scCommentEditorPostBarLeftWrapper:"_sc-comment-editor-post-bar-left-wrapper_ddy9k_300",scCommentEditorPostBarAnnotation:"_sc-comment-editor-post-bar-annotation_ddy9k_304"},SE=()=>t.reactExports.createElement("div",{className:tE}),wE=()=>t.reactExports.createElement("span",{className:aE},"•");t.reactExports.memo((({user:{photoUrl:e,name:{display:r,initials:n}}})=>e?t.reactExports.createElement(a.Avatar,{src:e,alt:r}):t.reactExports.createElement(a.AvatarInitials,{backgroundColor:a.avatarColorForUserIdentifier(r)},n))).displayName="BasicCommentAvatar";t.reactExports.memo((({user:{photoUrl:e,name:{display:n,initials:o}}})=>t.reactExports.createElement(r.Avatar,{src:e,alt:n,size:"small",backgroundColor:a.avatarColorForUserIdentifier(n),hasNoOutline:!0,className:hE},o))).displayName="DIGCommentAvatar";const CE=t.reactExports.memo((()=>t.reactExports.createElement("div",{className:bE},t.reactExports.createElement(r.UIIcon,{src:r.DeleteLine,size:"small",className:yE}))));var kE;CE.displayName="DeletedDIGCommentAvatar",function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(kE||(kE={}));const ME=[kE.ESC,kE.SPACE,kE.UP,kE.RIGHT,kE.DOWN],AE=({which:e})=>ME.indexOf(e)>-1,TE=xE.scCommentEditorDraft,OE=({submitModifierKeyCodes:e=["metaKey","ctrlKey"],lineBreakModifierKeyCodes:n=[],customKeyBinding:o,handleFocus:i,handleBlur:a,shouldFocus:s,spellCheck:c,a11yEditorLabel:u,disabled:d,placeholder:p,setRef:m,className:f},{container:h,scope:_})=>{const g=t.reactExports.useRef(),v=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.change(e)}),[h,_]),y=t.reactExports.useCallback((()=>{var e;null===(e=g.current)||void 0===e||e.blur()}),[]),b=t.reactExports.useCallback(((t,r)=>{const o=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,e),i=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,n);if(0===e.length&&n.length>0&&!i&&!h.getStatus().macro.active||e.length>0&&o){return!(""===r.getCurrentContent().getPlainText().trim())&&h.getTriggers(_).comment&&(y(),h.getStatus().draft.containerPostOnBlur||h.getTriggers(_).comment.post(r)),"handled"}const a=h.getTriggers(_).draft.returnKey(t).editorState;return!i||a!==r||h.getStatus().macro.active?(t.preventDefault(),"handled"):"not-handled"}),[h,_,n,e,y]),E=t.reactExports.useCallback((()=>{g.current&&window.setTimeout((()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()}))}),[]),x=t.reactExports.useCallback((e=>{var t;if(!h.getStatus().macro.macroRef)return!1;const r=e.getBoundingClientRect(),n=null===(t=h.getStatus().macro.macroRef)||void 0===t?void 0:t.getBoundingClientRect();return!!n&&(n.bottom<r.bottom&&n.top>r.top)}),[h]),S=t.reactExports.useCallback((e=>{if(null===e)throw new Error("Unable to find scroll element");return e.classList.contains(TE)?e:S(e.parentElement)}),[]),w=t.reactExports.useCallback((e=>{if(!h.getStatus().macro.macroRef)return;const{updateVisibility:t}=h.getTriggers(_).macro,r=e.target;t(x(r))}),[h,_,x]),C=t.reactExports.useCallback((e=>{if(AE(e)){const{suggestion:t}=h.getStatus();if(!(({totalSuggestions:e})=>0===e)(t)&&(h.getTriggers(_).draft.key(e),t!==h.getStatus().suggestion))return e.preventDefault(),null}return o?o(e):Ah.getDefaultKeyBinding(e)}),[h,_,o]),k=t.reactExports.useCallback(((e,t)=>h.getTriggers(_).draft.keyCommand(e).editorState===t?"not-handled":"handled"),[h,_]),M=t.reactExports.useCallback(((e,t)=>{if(". "===e){const e=d_(t);return v(e),"handled"}return h.getTriggers(_).draft.input(e).editorState===t?"not-handled":"handled"}),[h,_]),A=t.reactExports.useCallback(((e,t,r)=>{let n=h.getTriggers(_).draft.pasteText(e).editorState;return t&&n===r&&(n=h.getTriggers(_).draft.pasteHTML({text:e,html:t}).editorState),n===r?"not-handled":"handled"}),[h,_]),T=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.compositionStart(e)}),[h,_]),O=t.reactExports.useCallback((e=>{h.getTriggers(_).draft.compositionEnd(e)}),[h,_]),I=t.reactExports.useCallback((e=>{if(AE(e)){const{suggestion:t}=h.getStatus();h.getTriggers(_).draft.key(e),h.getStatus().suggestion!==t&&e.preventDefault()}else e.which===kE.SPACE?h.getTriggers(_).draft.key(e):e.which===kE.ENTER&&h.getStatus().macro.active&&e.preventDefault()}),[h,_]),D=t.reactExports.useCallback((e=>{null==i||i(e),e.stopPropagation()}),[i]),R=t.reactExports.useCallback((e=>{if(i&&!i(e))return e.preventDefault(),void e.stopPropagation();h.getTriggers(_).macro.updateVisibility(x(S(e.target))),h.getTriggers(_).draft.focus(e)}),[h,_,i,x,S]),N=t.reactExports.useCallback((e=>{(null==i?void 0:i(e))&&R(e)}),[i,R]),P=t.reactExports.useCallback((e=>{h.getTriggers(_).macro.updateVisibility(!1),null==a||a(h.getStatus().draft.editorState,h.getTriggers(_).comment),h.getTriggers(_).draft.blur(e)}),[h,_,a]);t.reactExports.useEffect((()=>{s&&g.current&&E()}),[s]);const B=t.reactExports.useCallback((e=>{const t=e.getType();return t&&h.getStatus().draft.blockRenderers[t]?h.getStatus().draft.blockRenderers[t](e):void 0}),[h]),F=t.reactExports.useCallback((e=>{g.current=e,null==m||m(e)}),[m]),{macro:{active:j,isVisible:z},draft:{editorState:K,readOnly:L,isComposing:U},suggestion:{selectedIndex:q}}=h.getStatus(),W=!(!j||!j.chrome)&&z,H=-1!==q&&W?`mentions-option-${q}`:"",V=""===K.getCurrentContent().getPlainText()&&!U?t.reactExports.createElement(r.Text,{className:xE.scCommentEditorPlaceholder,tabIndex:-1,"aria-hidden":!0,color:"disabled",size:"small"},t.reactExports.createElement(l.Truncate,{tooltipControlProps:{auto:!0,placement:"top"}},p||"")):void 0;return t.reactExports.createElement("div",{className:r.cx(TE,f),onScroll:w,onKeyDown:I,onCompositionStart:T,onCompositionEnd:O,onMouseDown:D,onMouseUp:N},t.reactExports.createElement(kg,{setEditorRef:F,ariaLabel:u,readOnly:L||!!d,onFocus:R,onBlur:P,onChange:v,handleReturn:b,keyBindingFn:C,handleKeyCommand:k,handleBeforeInput:M,handlePastedText:A,blockRendererFn:B,ariaAutoComplete:"list",ariaExpanded:W,ariaActiveDescendantID:H,annotation:void 0,editorPlaceholder:V,spellCheck:c}))};OE.displayName="DraftComponent",OE.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const IE=(e,t)=>!!t&&e.current&&e.current.contains(t),DE=({children:e,disabled:n},{container:o,scope:i})=>{const a=t.reactExports.useRef(null),s=r.cx(Fb,{[jb]:o.getStatus().container.isFocused&&!n}),c=t.reactExports.useCallback((e=>{IE(a,e.relatedTarget)||o.getTriggers(i).container.focus(e)}),[o,i]),l=t.reactExports.useCallback((e=>{IE(a,e.relatedTarget)||o.getTriggers(i).container.blur(e)}),[o,i]),u=t.reactExports.useCallback((e=>{o.getStatus().container.isFocused&&(e.stopPropagation(),e.preventDefault())}),[o]);return t.reactExports.createElement("div",{className:s,ref:a,onFocus:c,onBlur:l,onMouseDown:u},e)};DE.displayName="FocusContainerComponent",DE.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const RE=({annotation:e,tagline:n,forceCancelEnabled:o,postSignalComponent:i,author:a,renderBare:s,className:c,stickerPacks:l,rightAccessory:u,disabled:d,placeholder:p,content:m,onEditorStateChange:f,onPost:h,onCancel:_,onFocus:g,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:E,mentionShareFlowHandlers:x,readOnly:S,mentionsDisabled:w,setEditorRef:C,shouldFocus:k,a11yEditorLabel:M,editorRef:A,hideRightAccessory:T,onStickerStart:O,onStickerSuccess:I,onStickerCanceled:D,onMentionStart:R,onMentionSuccess:N,onMentionCanceled:P})=>{const B=xE.scCommentEditorInteractionContainer,F=t.reactExports.createElement(Wg,{content:m,onEditorStateChange:f,onPost:h,onCancel:_,onFocus:g,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:E,mentionShareFlowHandlers:x,readOnly:S,mentionsDisabled:w},t.reactExports.createElement(DE,{disabled:d},t.reactExports.createElement("div",{className:r.cx(xE.scCommentEditorInner,xE.scCommentEditorInnerRightRail,{[xE.scCommentEditorInnerDisabled]:!!d})},t.reactExports.createElement("div",{className:xE.scCommentEditorAvatarWrapper},t.reactExports.createElement(sg,{user:a})),t.reactExports.createElement("div",{className:B},t.reactExports.createElement(OE,{setRef:C,shouldFocus:k,a11yEditorLabel:M,disabled:d,placeholder:p}),t.reactExports.createElement(Rg,{scrollClassName:B,onMentionStart:R,onMentionSuccess:N,onMentionCanceled:P})),t.reactExports.createElement(PE,{stickerPacks:l,rightAccessory:u,hideRightAccessory:T,editorRef:A,disabled:d,onStickerStart:O,onStickerSuccess:I,onStickerCanceled:D})),t.reactExports.createElement(Hg,{forceCancelEnabled:o,signalComponent:i,annotationElement:e})),t.reactExports.createElement(Qg,null,n));if(s)return F;{const e=r.cx(c,xE.scCommentEditor);return t.reactExports.createElement("div",{className:e},F)}};function NE(e){const{onClick:n,label:o,size:i,className:a}=e;return t.reactExports.createElement(r.Tooltip,{title:o,placement:"top"},t.reactExports.createElement(r.IconButton,{"aria-label":o,className:r.cx(xE.scCommentEditorControlBtn,a),onClick:n,variant:"transparent",size:i,onMouseDown:e=>e.preventDefault()},t.reactExports.createElement(r.UIIcon,{src:r.MentionLine})))}RE.displayName="CommentEditor";const PE=({stickerPacks:e,rightAccessory:r,editorRef:n,disabled:o,hideRightAccessory:i,onStickerStart:a,onStickerSuccess:s,onStickerCanceled:l},{container:u,scope:d})=>{const p=c.useIntl(),{draft:{editorState:m},container:{isFocused:f}}=u.getStatus(),h=""===m.getCurrentContent().getPlainText().trim();return t.reactExports.createElement(t.reactExports.Fragment,null,!!r&&!(null==i?void 0:i(f,h))&&t.reactExports.createElement("div",{className:xE.scCommentEditorRightAccessory},r),!o&&t.reactExports.createElement("div",{className:xE.scCommentEditorRightAccessory},t.reactExports.createElement(NE,{label:p.formatMessage({id:"b57X9o",defaultMessage:"Tag someone"}),onClick:()=>{null==n||n.focus(),u.getTriggers(d).draft.insertMacro("")},size:"small"})),!o&&e&&t.reactExports.createElement(Ev,{stickerPacks:e,onStickerStart:a,onStickerSuccess:s,onStickerCanceled:l}))};PE.displayName="EditorRightAccessories",PE.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const BE=t.reactExports.memo((e=>{const{children:n,cancelEnabled:o,cancelLabel:i,postEnabled:a,postLabel:s,signals:c}=e;return t.reactExports.createElement("div",{className:xE.scCommentEditorControlsContainer},t.reactExports.createElement("div",{className:xE.scCommentEditorControls},t.reactExports.createElement("div",{className:"sc-comment-editor-controls-left"},n),t.reactExports.createElement("div",{className:xE.scCommentEditorControlsRight},t.reactExports.createElement(Sv,{label:i,disabled:!o,onClick:c.cancel,size:"small",className:r.cx(xE.scCommentEditorControlsCancelRightRail)}),t.reactExports.createElement(wv,{label:s,disabled:!a,onClick:c.post,size:"small",className:r.cx(xE.scCommentEditorControlsPostRightRail)}))))}));BE.displayName="PostBar";const FE=t.reactExports.memo((({annotation:e})=>t.reactExports.createElement("div",{className:I_.scCommentEditorPrefix},e,e&&t.reactExports.createElement(wE,null))));FE.displayName="EditorPrefix";const jE=()=>{},zE=e=>"atomic"===e.getType()?{component:Eg,editable:!1}:void 0,KE=e=>"atomic"===e.getType()?I_.scCommentEditorAtomicBlock:"",LE=(e,r)=>{var{annotation:n,editorPlaceholder:o,setEditorRef:i}=e,a=s.__rest(e,["annotation","editorPlaceholder","setEditorRef"]),c=r.container;const{editorKey:l,editorState:u,readOnly:d}=c.getStatus().draft,p={editorKey:l};return t.reactExports.createElement("div",null,t.reactExports.createElement(FE,{annotation:n}),o,t.reactExports.createElement(Ah.Editor,Object.assign({editorState:u,readOnly:d,onChange:jE,blockRendererFn:zE,blockStyleFn:KE},p,a,{ref:e=>{null==i||i(e)}})))};LE.displayName="ReadonlyDraftComponent",LE.contextTypes={container:r.PropTypes.object};class UE extends t.reactExports.Component{render(){const{author:e,children:r,annotation:n}=this.props,o=t.reactExports.createElement("div",{className:Vv},t.reactExports.createElement(LE,{readOnly:!0,annotation:n}));return t.reactExports.createElement(Xv,Object.assign({},this.props),t.reactExports.createElement("div",{className:V_},t.reactExports.createElement("div",{className:$_},t.reactExports.createElement(sg,{user:e})),r&&"function"==typeof r?r(o):o))}}UE.displayName="CommentRenderer";const qE=e=>{const r=c.useIntl();return t.reactExports.createElement(BE,Object.assign({},e,{postLabel:r.formatMessage({id:"GM9O28",defaultMessage:"Save"}),cancelLabel:r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))};qE.displayName="InlineCommentEditorPostBarImpl";const WE=t.reactExports.memo(qE);WE.displayName="InlineCommentEditorPostBar";const HE=({actions:e,active:r,comment:{revisionInfo:n,threadId:a}})=>{const s=c.useIntl(),l=n.timestamp?s.formatMessage({id:"TrMn7R",defaultMessage:"On older version ({timestamp})"},{timestamp:s.formatTime(n.timestamp,{day:"numeric",month:"short"})}):s.formatMessage({id:"KwIXAO",defaultMessage:"On older version"});return r&&n.revision?t.reactExports.createElement(i.Tooltip,{positioning:"above",tooltipContent:s.formatMessage({id:"1d7dxH",defaultMessage:"View version history"})},t.reactExports.createElement(o.TertiaryLink,{className:sE,onClick:()=>e.onClickOlderInfo(n,a)},l)):t.reactExports.createElement("div",{className:sE},l)};HE.displayName="OlderInfo";const VE=e=>{const{comment:n,showRevisionInfo:o,commentControls:i}=e,{author:a,id:s,revisionInfo:l,threadId:u,timestamp:d}=n,p=c.useIntl();return t.reactExports.createElement("div",{className:lE},o&&!l.isCurrent&&s===u?t.reactExports.createElement(HE,Object.assign({},e)):null,t.reactExports.createElement("div",{className:oE},t.reactExports.createElement("span",{className:uE},a.name.display),d.getTime()?t.reactExports.createElement("span",{className:dE},r.timeSince(p,d,{displayLocation:"comments"})):null),t.reactExports.createElement("div",{className:pE},i))};VE.displayName="RightRailCommentInfo";const $E=c.defineMessage({id:"ZeF6kJ",defaultMessage:"Edit"}),GE=c.defineMessage({id:"2WeS6D",defaultMessage:"Delete"}),QE=e=>{const{comment:n,comment:{userPermissions:{canEdit:o,canDelete:i},content:{text:a,metadata:s}},actions:{onDeleted:l,onApproverRespond:u,onEditApproval:p,onDeleteApprovalComment:m,onResubmitApprovalFocus:f},isMobile:h,active:_,onStartEdit:g,isActionableApprovalComment:v,isApprovalOpen:y,showApproval:b}=e,E=c.useIntl(),x=iE,S=t.reactExports.useCallback((()=>{g(n)}),[n,g]),w=(e=S)=>t.reactExports.createElement(r.Button$1,{size:"small",variant:"transparent",onClick:e},E.formatMessage($E)),C=(e=l)=>t.reactExports.createElement(r.Button$1,{size:"small",variant:"transparent",onClick:e},E.formatMessage(GE)),k=d.getApprovalMetadata(s),M=null==k?void 0:k.actor,A=Boolean(k&&("requester"===M||"approver"===M));if(!o&&!i&&!A||h||!_)return null;if(b&&k){if(!M)return null;if(!v)return null;if(y)return null;const e=t.reactExports.createElement(r.Button$1,{variant:"outline",onClick:u,size:"small"},E.formatMessage({id:"q997hq",defaultMessage:"Respond"})),s=t.reactExports.createElement(r.Button$1,{variant:"outline",onClick:f,size:"small"},E.formatMessage({id:"MoNd+x",defaultMessage:"Resubmit request"}));return t.reactExports.createElement("div",{className:r.cx(x,"approval")},o&&p&&w((()=>p({commentId:n.id,content:a,approvalMetadata:k}))),t.reactExports.createElement(SE,null),i&&m&&C((()=>m(n.id,M))),u&&d.canRespondToApproval(n)&&e,f&&"response"===k.approval_type&&"requester"===M&&!o&&!i&&s)}return t.reactExports.createElement("div",{className:x},o&&w(),t.reactExports.createElement(SE,null),i&&C())};QE.displayName="CommentActionMenu";const JE=({className:e,children:r})=>{const n=c.useIntl();return t.reactExports.createElement("li",{className:e},t.reactExports.createElement(CE,null),t.reactExports.createElement("div",{className:Yb},t.reactExports.createElement("div",{className:eE},r,r&&t.reactExports.createElement(wE,null),t.reactExports.createElement("span",{className:rE},n.formatMessage({id:"w9I0zq",defaultMessage:"This comment was deleted."})))))};JE.displayName="DeleteMode";const XE=({comment:e,mentionsMatches:r,actions:n,onEndEdit:o,className:i})=>{const a=t.reactExports.useCallback((e=>{n.onEdited(e),o()}),[n,o]);return t.reactExports.createElement("li",{className:i},t.reactExports.createElement(RE,{author:e.author,content:e.content,postSignalComponent:WE,onCancel:o,onPost:a,mentionsMatches:r,onMentionsQueryUpdated:n.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0}))};XE.displayName="EditMode";const ZE=e=>{const{children:n,comment:o,comment:{content:i,author:a,revisionInfo:s},className:l,isLatestReply:u}=e,p=c.useIntl(),{showApproval:m}=t.reactExports.useContext(kv),f=d.getApprovalMetadata(o.content.metadata),h=0===o.content.text.length;return t.reactExports.createElement("li",{className:l},t.reactExports.createElement(UE,{content:i,author:a,annotation:n,revisionInfo:s},(n=>t.reactExports.createElement("div",{className:r.cx(mE,{[fE]:u&&m&&!!f})},t.reactExports.createElement(VE,Object.assign({},e)),m&&f&&t.reactExports.createElement(ry,{intl:p,metadata:f,content:i.text}),m&&f&&h?null:n,t.reactExports.createElement(QE,Object.assign({},e,{showApproval:m}))))))};ZE.displayName="DisplayMode";const YE=t.reactExports.memo((e=>{const{comment:n,actions:o,mentionsMatches:i,isEditing:a=!1,onEndEdit:s,isEditingApproval:c,isActionableApprovalComment:l,className:u,children:p}=e,m=d.getApprovalMetadata(n.content.metadata),f={[nE]:n.deleted};return m&&c&&l?null:n.deleted?t.reactExports.createElement(JE,{className:r.cx(u,vE,f)},p):a?t.reactExports.createElement(XE,{comment:n,mentionsMatches:i,actions:o,onEndEdit:s,className:r.cx(u,xE.scCommentEditor,EE,f)}):t.reactExports.createElement(ZE,Object.assign({},e,{className:r.cx(u,cE,f)}),p)}));YE.displayName="Comment";const ex=60,tx=60,rx=ex*tx;function nx(e){return(e<10?"0":"")+e}function ox(e,t,r,n){let o;return o=`${nx(e)}:${nx(t)}:${nx(r)}`,void 0!==n&&(o+=`:${nx(n)}`),o}function ix(e,t,r,n){let o=0;if(o=t||e/100,n&&r&&Math.round(100*r)%2997==0)return function(e,t){const r=Math.round(100*t),n=Math.floor(e*r/100),o=2*r/2997,i=Math.floor(n/(36*r)),a=n%(36*r),s=Math.floor(a/(6*r)),c=a%(6*r);let l,u,d;if(0===c||1===c)l=0,u=0,d=c;else{const e=60*Math.ceil(t)-o;l=Math.floor((c-o)/e);const r=(c-o)%1798+o;u=Math.floor(r/Math.ceil(t)),d=r%Math.ceil(t)}return l=10*s+l,ox(i,l,u,d)}(o,r);if(n&&r&&r!==Math.round(r)){const e=Math.floor(o*r),t=Math.round(r);return ox(Math.floor(e/(3600*t)),Math.floor(e/(60*t))%60,Math.floor(e/t)%60,Math.floor(e%t))}{const e=Math.floor(o/rx),t=Math.floor(o/ex)%tx,i=Math.floor(o)%ex;let a;if(n&&r){const e=o-Math.floor(o),t=1/r;a=Math.floor(e/t)}return ox(e,t,i,a)}}function ax(e){return void 0!==e&&"video"===e.type}const sx=()=>{},cx=t.reactExports.memo((({label:e,onClick:n=sx})=>t.reactExports.createElement(r.Text,{className:_E,size:"small",color:"inherit"},t.reactExports.createElement(r.Link,{href:n,hasNoUnderline:!0,variant:"monochromatic",className:gE},e))));cx.displayName="AnnotationLabel";const lx=e=>{let r;const{annotation:n,actions:o,comment:i,active:a}=e,s=c.useIntl(),l=t.reactExports.useCallback((e=>{o.onClickAnnotation({annotationInfo:{type:"numbered"},threadID:i.threadId,e:e,active:a})}),[o,i.threadId,a]),u=n&&"document"===n.type&&n.regions[0]&&n.regions[0].page;return u&&(r=t.reactExports.createElement(cx,{label:s.formatMessage({id:"rWnLvq",defaultMessage:"Page {page}"},{page:u}),onClick:l})),t.reactExports.createElement(YE,Object.assign({},e),r)};function ux(e){const r=c.useIntl();if(e.isEmpty)return null;const{disabled:n,postEnabled:o,postLabel:i,cancelLabel:a}=e,l=s.__rest(e,["disabled","postEnabled","postLabel","cancelLabel"]);return t.reactExports.createElement(BE,Object.assign({},l,{postEnabled:o&&!n,postLabel:null!=i?i:r.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:null!=a?a:r.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))}lx.displayName="NumberedComment";const dx=({disabled:e,onPost:r,onCancel:n,postLabel:o,cancelLabel:i,author:a,shouldFocus:s,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onFocus:p=(()=>({})),onBlur:m=(()=>({})),stickerPacks:f,placeholder:h,mentionsDisabled:_})=>{const[g,v]=t.reactExports.useState((()=>Iy())),y=t.reactExports.useCallback((()=>{v(Iy())}),[]),b=t.reactExports.useCallback(((t,n)=>{e||(y(),r(t,n))}),[y,r,e]),E=t.reactExports.useCallback((()=>{y(),n()}),[y,n]),x=t.reactExports.useCallback((r=>t.reactExports.createElement(ux,Object.assign({},r,{disabled:e,postLabel:o,cancelLabel:i}))),[o,i,e]),S=c.useIntl();return t.reactExports.createElement("div",{className:Qb},t.reactExports.createElement(RE,{a11yEditorLabel:S.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),author:a,shouldFocus:s,content:g,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onCancel:E,onPost:b,placeholder:null!=h?h:S.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),postSignalComponent:x,onFocus:p,onBlur:m,stickerPacks:f,mentionsDisabled:_}))};dx.displayName="ThreadEditor";const px=c.defineMessage({id:"z73pDg",defaultMessage:"Mark as unread"}),mx=c.defineMessage({id:"T8mQUy",defaultMessage:"Mark as read"}),fx=c.defineMessage({id:"YG9hOh",defaultMessage:"Resolve"}),hx=c.defineMessage({id:"OJgspa",defaultMessage:"Remove approval request"}),_x=t.React$1.memo((({actions:e,active:n,thread:o,isMobile:i,streamSettings:a,intl:s,showApproval:c,isApproval:l})=>!i&&n&&a.canModifyThreads&&!o.isThirdParty?c&&l?o.comments.length>1&&d.isApprovalRequester(o)?t.React$1.createElement(r.Tooltip,{placement:"top",title:s.formatMessage(hx)},t.React$1.createElement(r.IconButton,{variant:"transparent",disabled:!!o.pending,onClick:e.onRemoveApprovalThread},t.React$1.createElement(r.UIIcon,{src:r.DeleteLine}))):null:t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.Tooltip,{title:s.formatMessage(o.read?px:mx),placement:"top"},t.React$1.createElement(r.IconButton,{variant:"transparent",onClick:o.read?e.onMarkAsUnread:e.onMarkAsRead,className:"sc-comments-thread-control-read-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:o.read?r.CommentUnreadLine:r.CommentReadLine}))),t.React$1.createElement(r.Tooltip,{title:s.formatMessage(fx),placement:"top"},t.React$1.createElement(r.IconButton,{variant:"transparent",onClick:e.onResolve,className:"sc-comments-thread-control-resolve-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:r.CheckmarkLine})))):null));_x.displayName="ThreadControlV2";const gx=()=>{},vx=e=>{const{count:r}=e,n=c.useIntl();n.formatMessage({id:"xj0qJi",defaultMessage:"{count, plural, one {# comment} other {# comments}}"},{count:r});const o=n.formatMessage({id:"NkhP8O",defaultMessage:"{count} comments"},{count:r});return t.reactExports.createElement("div",{className:Zb},o)};vx.displayName="CollapsedCommentIndicator";const yx=({comment:e,active:r,commentFactory:n,isLatestReply:o,isActionableApprovalComment:i,annotation:a,commentControls:s,actions:c,editedComment:l,mentionsMatches:u,onStartEdit:d,onEndEdit:p,isMobile:m,showRevisionInfo:f,approvalFormStatus:h,thread:_})=>{var g;const v=!!l&&e.id===l.id,y=r&&!!(null==h?void 0:h.activeForm)&&h.threadId===_.id&&(null===(g=h.editArgs)||void 0===g?void 0:g.commentId)===e.id,b=!!(null==h?void 0:h.activeForm)&&h.threadId===_.id,E={actions:Cx(e,c),active:r,annotation:a,comment:e,isEditing:v,onStartEdit:d,onEndEdit:p,mentionsMatches:u,isMobile:m,showRevisionInfo:f,commentControls:s,isLatestReply:o,isActionableApprovalComment:i,isEditingApproval:y,isApprovalOpen:b},x=n?n(E):t.reactExports.createElement(YE,Object.assign({},E));return t.reactExports.createElement(t.reactExports.Fragment,{key:e.id},x)};yx.displayName="ThreadComment";const bx=({resolvedInfo:e})=>{const n=c.useIntl(),o="with_details"===e.type&&e;let i,a;return o?(i=n.formatMessage({id:"seHweQ",defaultMessage:"Marked as resolved by {name}"},{name:o.resolver.name.display}),a=r.timeSince(n,o.resolvedTimestamp,{displayLocation:"comments"})):(i=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"}),a=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"})),t.reactExports.createElement(r.Tooltip,{placement:"top",title:a},t.reactExports.createElement("div",{className:Kb},i))};bx.displayName="MarkAsResolved";const Ex=({streamSettings:e,isMobile:n,actions:o,thread:i,active:a,isDisabled:s})=>{const l=c.useIntl();if(n)return null;const u=a&&e.canModifyThreads&&!i.isThirdParty,d=kx(i);return d?t.reactExports.createElement("div",{className:zb},t.reactExports.createElement(bx,{resolvedInfo:d}),u&&t.reactExports.createElement(r.Tooltip,{placement:"top",title:l.formatMessage({id:"8bWrbN",defaultMessage:"Restore"})},t.reactExports.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:o.onUnresolve,disabled:s},t.reactExports.createElement(r.UIIcon,{src:r.RestoreLine,size:"small"})))):null};Ex.displayName="ToplineControls";const xx=({thread:e,actions:r,streamSettings:n,active:o,isMobile:i,showApproval:a,isApproval:s})=>{const l=kx(e),u=c.useIntl();return l?null:t.reactExports.createElement(_x,{thread:e,actions:r,streamSettings:n,active:o,isMobile:i,intl:u,showApproval:a,isApproval:s})};xx.displayName="CommentControlsV2";const Sx=t.reactExports.forwardRef((({actions:e,commentFactory:r,mentionsMatches:n,stickerPacks:o,onCancel:i,openWith:a,thirdPartySource:s,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,className:E,showApproval:x,isApproval:S,isDisabled:w,onClick:C,includeEditor:k,shouldFocusThreadEditor:M,onEditorStateChange:A,onFocusEditor:T=(()=>{}),onBlurEditor:O},I)=>{const D=c.useIntl(),{onMentionsQueryUpdated:R,onMouseEnter:N,onMouseLeave:P,onReply:B,onResubmitApprovalRequest:F}=e,j=t.reactExports.useMemo((()=>Mx(l)),[l]),z=d.findActionableApprovalCommentId(l),K=d.getApprovers(l),L=t.reactExports.createElement(xx,{thread:l,actions:e,streamSettings:y,isMobile:_,active:b,showApproval:x,isApproval:S});return t.reactExports.createElement("li",{onMouseEnter:N,onMouseLeave:P,className:E,tabIndex:0,role:"button","aria-expanded":!0,"aria-label":l.read?D.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):D.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),ref:I,onClick:C},t.reactExports.createElement(Ex,{actions:e,streamSettings:y,thread:l,isMobile:_,active:b,isDisabled:w}),t.reactExports.createElement("ul",{className:Ub},t.reactExports.createElement(yx,{comment:l.comments[0],active:!0,commentFactory:r,isLatestReply:0===j.length,isActionableApprovalComment:l.comments[0].id===z,annotation:l.annotation,commentControls:L,actions:e,editedComment:m,mentionsMatches:n,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,thread:l}),j.map(((r,o)=>t.reactExports.createElement(yx,{key:o,comment:r,active:!0,isLatestReply:o===j.length-1,isActionableApprovalComment:r.id===z,actions:e,editedComment:m,mentionsMatches:n,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,thread:l}))),x&&p&&p(["respond","response_edit","request_edit"])),k&&(x&&S?t.reactExports.createElement(dx,{author:u,disabled:w,shouldFocus:M,mentionsMatches:{},onCancel:i,onEditorStateChange:A,onMentionsQueryUpdated:gx,onPost:e=>{const t={type:"approval",status:"pending",approval_type:"request",actor:"requester",approvers:K};F({text:e.text,metadata:[t]})},onFocus:T,onBlur:O,postLabel:D.formatMessage({id:"62bfQA",defaultMessage:"Resubmit request"}),placeholder:D.formatMessage({id:"CqEWQQ",defaultMessage:"Respond to {approver}"},{approver:K?K[0].display_name:""}),mentionsDisabled:!0}):t.reactExports.createElement(dx,{author:u,disabled:w,shouldFocus:M,mentionsMatches:n,onCancel:i,onEditorStateChange:A,onMentionsQueryUpdated:R,onPost:B,onFocus:T,onBlur:O,stickerPacks:o})),t.reactExports.createElement(Oy,{thirdPartySource:l.isThirdParty?s:void 0,openWith:a}))}));Sx.displayName="ActiveThread";const wx=t.reactExports.forwardRef((({actions:e,active:r,commentFactory:n,mentionsMatches:o,thread:i,isMobile:a,showRevisionInfo:s,thirdPartySource:l,editedComment:u,onStartEdit:p,onEndEdit:m,approvalFormStatus:f,streamSettings:h,className:_,onClick:g,isDisabled:v},y)=>{const b=c.useIntl(),{onMouseEnter:E,onMouseLeave:x,onFocus:S,onBlur:w}=e,C=t.reactExports.useMemo((()=>Mx(i)),[i]),k=d.findActionableApprovalCommentId(i),M=t.reactExports.useCallback((e=>{13===e.keyCode&&g()}),[g]);return t.reactExports.createElement("li",{className:_,tabIndex:0,"aria-label":i.read?b.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):b.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),role:"button","aria-expanded":!1,onClick:g,onKeyDown:M,onMouseEnter:E,onMouseLeave:x,onFocus:S,onBlur:w,ref:y},t.reactExports.createElement(Ex,{actions:e,streamSettings:h,thread:i,isMobile:a,active:r,isDisabled:v}),t.reactExports.createElement("ul",{className:Ub},t.reactExports.createElement(yx,{comment:i.comments[0],active:r,commentFactory:n,isLatestReply:0===C.length,isActionableApprovalComment:i.comments[0].id===k,annotation:i.annotation,actions:e,editedComment:u,mentionsMatches:o,onStartEdit:p,onEndEdit:m,isMobile:a,showRevisionInfo:s,approvalFormStatus:f,thread:i}),C.length>1&&t.reactExports.createElement(vx,{count:C.length-1}),C.length>0&&t.reactExports.createElement(YE,{active:!1,comment:C[C.length-1],actions:{onClickAnnotation:gx,onDeleted:gx,onEdited:gx,onMentionsQueryUpdated:gx,onClickOlderInfo:gx,onApproverRespond:gx,onResubmitApprovalFocus:gx},mentionsMatches:o,onEndEdit:gx,onStartEdit:gx,isEditing:!1,isMobile:a,showRevisionInfo:s,isLatestReply:!0,isActionableApprovalComment:!0,isEditingApproval:!1})),t.reactExports.createElement(Ny,{thirdPartySource:i.isThirdParty?l:void 0}))}));function Cx(e,t){return{onDeleted:()=>t.onCommentDeleted(e.id),onEdited:r=>t.onCommentEdited(e.id,r),onMentionsQueryUpdated:t.onMentionsQueryUpdated,onClickAnnotation:t.onClickAnnotation,onClickOlderInfo:t.onClickOlderInfo,onApproverRespond:t.onApproverRespond,onEditApproval:t.onEditApproval,onDeleteApprovalComment:t.onDeleteApprovalComment,onResubmitApprovalFocus:t.onResubmitApprovalFocus}}wx.displayName="InactiveThread";const kx=({resolvedInfo:e,resolved:t})=>e||(t?Ax:void 0),Mx=e=>e.comments.slice(1).filter((e=>!e.deleted)),Ax={type:"no_details"},Tx=t.reactExports.memo((({actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,scrollToElem:E,onThreadInteractedWith:x,className:S="",focused:w,threadRef:C})=>{const{showApproval:k}=t.reactExports.useContext(kv),M=t.reactExports.useRef(),A=t.reactExports.useCallback((e=>{M.current=e,null==C||C(e)}),[C]),T=d.isApprovalThread(l),[O,I]=t.reactExports.useState(!0),[D,R]=t.reactExports.useState(!1),N=t.reactExports.useCallback((()=>{T&&e.onResubmitApprovalBlur()}),[T,e]),P=t.reactExports.useCallback((e=>(null==M?void 0:M.current)&&E?E(M.current).then((()=>{M.current&&R(e)})):Promise.resolve()),[E]);t.reactExports.useEffect((()=>{if(b){const e=y.canComment;P(e)}else b||R(!1)}),[b]);const B=t.reactExports.useCallback((()=>{x(l)}),[l,x]),F=t.reactExports.useCallback((t=>{t_(t)&&e.onEditorFocused(),e.onEditorStateChange(t),I(e_(t))}),[e]),j=b||!O,z=l.resolved||l.resolvedInfo,K=r.cx(S,{[Gb]:!0,[qb]:!0,[Hb]:j,[Lb]:!j,[Wb]:l.read,[Xb]:!l.read,[Jb]:z,"sc-thread-unresolved":!z,[Vb]:_,[$b]:w}),L=y.canShowEditor&&!_&&!l.isThirdParty&&(!(k&&T)||"request_resubmit"===(null==v?void 0:v.activeForm)),U=!!l.pending;return l.comments.every((e=>!!e.deleted))?null:j?t.reactExports.createElement(Sx,{actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:p,editedComment:m,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,approvalFormStatus:v,streamSettings:y,active:b,className:K,showApproval:void 0===k||k,isApproval:T,isDisabled:U,onClick:B,includeEditor:L,shouldFocusThreadEditor:D,onEditorStateChange:F,onBlurEditor:N,ref:A}):t.reactExports.createElement(wx,{actions:e,active:b,className:K,commentFactory:n,mentionsMatches:o,editedComment:m,thread:l,onStartEdit:f,onEndEdit:h,isMobile:_,showRevisionInfo:g,streamSettings:y,thirdPartySource:c,approvalFormStatus:v,isDisabled:U,onClick:B,includeEditor:L,ref:A})}));function Ox(e){return t.reactExports.createElement("div",{className:xE.scCommentEditorInlineControls},e.children)}Tx.displayName="Thread";const Ix=e=>{const{postEnabled:r,cancelEnabled:n,isEmpty:o,annotationElement:i,isContainerFocused:a}=e,s=c.useIntl(),l=t.reactExports.createElement("div",{className:xE.scCommentEditorPostBarLeftWrapper},i&&t.reactExports.createElement("div",{className:xE.scCommentEditorPostBarAnnotation},i)),u=!o||a,d=u?l:void 0;return u||r||n?t.reactExports.createElement(BE,Object.assign({},e,{postLabel:s.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:s.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}),d):t.reactExports.createElement(Ox,null,d)};Ix.displayName="CommentStreamPostBarImpl";const Dx=t.reactExports.memo(Ix);Dx.displayName="CommentStreamPostBar";const Rx={newest:c.defineMessage({id:"uISXje",defaultMessage:"Newest"}),oldest:c.defineMessage({id:"kLxqWH",defaultMessage:"Oldest"}),unread:c.defineMessage({id:"HUZzUG",defaultMessage:"Unread"}),timestamp:c.defineMessage({id:"EUJjNP",defaultMessage:"Timestamp"}),page:c.defineMessage({id:"QXX8eA",defaultMessage:"Page"})},Nx=({sortType:e,label:n,isChecked:o})=>t.React$1.createElement(r.Menu.SelectItem,{key:e,value:e,role:"menuitemcheckbox",selected:o,"aria-checked":o,"aria-label":n},n);Nx.displayName="SortMenuItem";const Px=({currentSort:e,setSort:n,availableSortOpts:o})=>{const i=t.React$1.useRef(Tv),a=c.useIntl(),s=t.React$1.useCallback((e=>n(e)),[n]),l=t.React$1.useCallback((({isOpen:e})=>{e&&(i.current=o)}),[o]);return t.React$1.createElement("div",{className:Ob},t.React$1.createElement(r.Menu.Wrapper,{isPortaled:!1,onSelection:s,onToggle:l},(({getContentProps:n,getTriggerProps:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.FilterChip,Object.assign({withDropdownIcon:!0},o()),a.formatMessage({id:"eca0uz",defaultMessage:"Sort by"})),t.React$1.createElement(r.Menu.Content,Object.assign({},n(),{style:{width:296}}),t.React$1.createElement(r.Menu.Segment,null,i.current.map((r=>t.React$1.createElement(Nx,{key:r,sortType:r,label:a.formatMessage(Rx[r]),isChecked:e===r})))))))))};Px.displayName="SortChip";const Bx="PRIMARY",Fx=()=>{},jx=Tb,zx=c.defineMessage({id:"XI84a1",defaultMessage:"Comments on this file will show up here."});class Kx extends t.reactExports.PureComponent{constructor(e){super(e),this.threadIdToRef={},this.editorHasChanges={},this.onThreadInteractedWith=e=>{const{activeThreadID:t,actionsAdapter:{onThreadActivated:r}}=this.props;t!==e.id&&r(e)},this.onVisibilityDataChange=e=>{this.setState({visibilityData:e})},this.updateTrackedItems=()=>{var e,t;this.setState({trackedItems:(e=this.props.threads,t=this.threadIdToRef,e.map((e=>({item:e,ref:t[e.id]}))).filter((({item:e,ref:t})=>!e.read&&t)))})},this.onStartEdit=e=>{this.setState({editedComment:e})},this.onEndEdit=()=>{this.setState({editedComment:void 0})},this.setEditorRef=e=>{this.editorRef=e},this.setThreadRef=(e,t)=>{this.threadIdToRef[e]=t},this.setSortBy=e=>{this.setState({sortBy:e}),this.props.actionsAdapter.onSortComments&&this.props.actionsAdapter.onSortComments(e)},this.handleClick=e=>{e.target.classList.contains(jx)&&(this.props.actionsAdapter.onAllThreadsDeactivated(),this.editorHasChanges[Bx]||this.props.actionsAdapter.onCommentDraftCancel())},this.onThreadReplyCancel=()=>{this.props.actionsAdapter.onAllThreadsDeactivated()},this.onPrimaryEditorCancel=()=>{document.activeElement&&this.blurElement(document.activeElement),this.props.actionsAdapter.onCommentDraftCancel(),this.setState({content:Iy(),editedComment:void 0})},this.onPrimaryEditorFocus=()=>{this.props.actionsAdapter.onAllThreadsDeactivated(),this.props.actionsAdapter.onEditorFocused()},this.onEditorStateChange=e=>t=>{this.editorHasChanges[e]=!e_(t)},this.onPrimaryEditorStateChange=e=>{this.onEditorStateChange(Bx)(e),this.props.actionsAdapter.onEditorStateChange(e)},this.hasUnsavedChanges=()=>{const{threads:e}=this.props;return this.editorHasChanges[Bx]||e.some((e=>this.editorHasChanges[e.id]||!!e.pending))||void 0!==this.state.editedComment},this.promptBeforeCloseHandler=e=>{if(this.hasUnsavedChanges())return e.returnValue="",e.preventDefault(),""},this.createThreadActions=e=>{const{onCommentDeleted:t,onCommentEdited:r,onClickAnnotation:n,onEditorFocused:o,onMentionsQueryUpdated:i,onThreadMarkedAsRead:a,onThreadMarkedAsUnread:s,onThreadRepliedTo:c,onThreadResolved:l,onThreadUnresolved:u,onThreadMouseEnter:d=Fx,onThreadMouseLeave:p=Fx,onThreadFocus:m=Fx,onThreadBlur:f=Fx,onClickOlderInfo:h=Fx,onApproverRespond:_,onEditApproval:g,onDeleteApprovalComment:v,onResubmitApprovalFocus:y,onResubmitApprovalBlur:b,onResubmitApprovalRequest:E,onRemoveApprovalThread:x}=this.props.actionsAdapter;return{onClickAnnotation:n,onReply:t=>c(e,t),onMarkAsRead:()=>a(e),onMarkAsUnread:()=>s(e),onResolve:()=>l(e),onUnresolve:()=>u(e),onMouseEnter:()=>d(e),onMouseLeave:()=>p(e),onFocus:()=>m(e),onBlur:()=>f(e),onEditorFocused:()=>o(e),onCommentDeleted:r=>t(r,e),onCommentEdited:(t,n)=>r(t,n,e),onMentionsQueryUpdated:i,onClickOlderInfo:h,onEditorStateChange:this.onEditorStateChange(e),onApproverRespond:()=>_(e),onEditApproval:t=>g(e,t),onDeleteApprovalComment:(t,r)=>v(t,e,r),onResubmitApprovalFocus:()=>y(e),onResubmitApprovalBlur:b,onResubmitApprovalRequest:t=>E(e,t),onRemoveApprovalThread:()=>x(e)}},this.state={content:Iy(),editedComment:void 0,visibilityData:{countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},trackedItems:[],context:{showApproval:e.showApproval},sortBy:this.getSortPref()}}getSortPref(){const e=window.localStorage.getItem("comments-sort-pref");return e&&Av.includes(e)?e:Mv.newest}getChildContext(){return{showApproval:this.props.showApproval}}componentDidMount(){window.addEventListener("beforeunload",this.promptBeforeCloseHandler),this.updateTrackedItems()}componentDidUpdate({threads:e}){this.props.threads!==e&&this.updateTrackedItems()}getAvailableSortOpts(){const e=this.commonAnnotation();return vy(e)?Iv:yy(e)?Ov:Tv}sortThreadsByType(e){switch(this.state.sortBy){case Mv.newest:return e.sort(((e,t)=>+e.timestamp-+t.timestamp));case Mv.oldest:return e.sort(((e,t)=>+t.timestamp-+e.timestamp));case Mv.page:const[t,r]=n.partition(e,by);return t.sort(((e,t)=>e.annotation.regions[0].page-t.annotation.regions[0].page)).concat(r.sort(((e,t)=>+e.timestamp-+t.timestamp)));case Mv.timestamp:const[o,i]=n.partition(e,Ey);return o.sort(((e,t)=>e.annotation.time-t.annotation.time)).concat(i.sort(((e,t)=>+e.timestamp-+t.timestamp)));case Mv.unread:const[a,s]=n.partition(e,"read");return s.sort(((e,t)=>+e.timestamp-+t.timestamp)).concat(a.sort(((e,t)=>+e.timestamp-+t.timestamp)))}}get sortedThreads(){let e=[];return this.getAvailableSortOpts().includes(this.state.sortBy)?e=this.sortThreadsByType(this.props.threads):vy(this.commonAnnotation())?this.setState({sortBy:Mv.page},(()=>{e=this.sortThreadsByType(this.props.threads)})):yy(this.commonAnnotation())?this.setState({sortBy:Mv.timestamp},(()=>{e=this.sortThreadsByType(this.props.threads)})):this.setState({sortBy:Mv.newest},(()=>{e=this.sortThreadsByType(this.props.threads)})),this.props.showResolvedComments?e:e.filter((e=>!(e.resolved||e.resolvedInfo)))}get sortedVisibleThreads(){return this.sortedThreads.filter((e=>e.comments.some((e=>!e.deleted))))}commonAnnotation(){let e;for(const t of this.props.threads){if(t.annotation&&e&&!gy(t.annotation,e))return;e=t.annotation||e}return e}componentWillUnmount(){window.removeEventListener("beforeunload",this.promptBeforeCloseHandler)}focusPrimaryEditor(){var e;null===(e=this.editorRef)||void 0===e||e.focus()}blurElement(e){let t;"function"==typeof Event?t=new FocusEvent("blur"):(t=document.createEvent("Event"),t.initEvent("blur",!0,!0)),e.dispatchEvent(t)}get includeEditor(){const{isMobile:e,settings:t}=this.props;return t.canShowEditor&&!e}get includeEditorMeatball(){const{settings:e}=this.props;return this.includeEditor&&e.canShowEditorMeatball}render(){const{actionsAdapter:{onMentionsQueryUpdated:e,onThreadCreated:n},className:o="",commentFactory:i,editorFactory:a,user:s,mentionsMatches:l,activeThreadID:u,hoverThreadID:p,focusedThreadID:m,isGoogleDSS:f,isMobile:h,intl:_,placeholderOverride:g,settings:v,showRevisionInfo:y,stickerPacks:b,thirdPartySource:E,initialEditorFocus:x,hideOpenCloudDocMessage:S,meatballMenu:w}=this.props,C=r.cx(o,{[Mb]:!0,[Ab]:!0}),k=r.cx({[Ib]:this.includeEditorMeatball}),M=r.cx({[Db]:this.includeEditorMeatball});let A=null;const T=g||_.formatMessage({id:"DkHo17",defaultMessage:"Enter your thoughts here"}),[O,I]=d.getApprovalRequestCounts(this.props.threads);if(this.includeEditor){const r={a11yEditorLabel:T,author:s,className:Bb,content:this.state.content,placeholder:T,postSignalComponent:Dx,onCancel:this.onPrimaryEditorCancel,setEditorRef:this.setEditorRef,onPost:n,mentionsMatches:l,onMentionsQueryUpdated:e,onFocus:this.onPrimaryEditorFocus,onEditorStateChange:this.onPrimaryEditorStateChange,shouldFocus:x,stickerPacks:b,tagline:t.reactExports.createElement(hb,{thirdPartySource:E,intl:_}),editorRef:this.editorRef};A=a?a(r):t.reactExports.createElement(RE,Object.assign({},r))}else if(!h){const e=f?"google_doc":E;A=S?null:t.reactExports.createElement(fb,{thirdPartySource:e,openWith:this.props.openWith,intl:_})}return t.reactExports.createElement(c.Provider,{value:_},t.reactExports.createElement(kv.Provider,{value:this.state.context},t.reactExports.createElement("div",{className:C,onClick:this.handleClick},t.reactExports.createElement("div",{className:Pb},this.props.showApproval&&0!==I&&0!==O?t.reactExports.createElement("div",{className:Nb},t.reactExports.createElement(r.Text,{size:"small",color:"faint"},d.getApprovalRequestsSubtext(O,_))):null,0===this.sortedVisibleThreads.length?t.reactExports.createElement("div",{className:Rb},t.reactExports.createElement(r.Text,{size:"small",color:"faint"},_.formatMessage(zx))):t.reactExports.createElement(t.reactExports.Fragment,null,t.reactExports.createElement(Px,{currentSort:this.state.sortBy,setSort:this.setSortBy,availableSortOpts:this.getAvailableSortOpts()}),t.reactExports.createElement(ib,{showUnreadPill:this.props.showUnreadPill,visibilityData:this.state.visibilityData,countMsgFn:e=>_.formatMessage({id:"fkNHq+",defaultMessage:"{count} unread"},{count:e}),onItemActivated:this.onThreadInteractedWith},t.reactExports.createElement(db,{className:jx,trackedItems:this.state.trackedItems,onVisibilityDataChange:this.onVisibilityDataChange},this.sortedVisibleThreads.map((e=>t.reactExports.createElement(Tx,{threadRef:t=>this.setThreadRef(e.id,t),key:e.id,actions:this.createThreadActions(e.id),active:e.id===u,focused:e.id===p||e.id===m,commentFactory:i,editedComment:this.state.editedComment,onThreadInteractedWith:this.onThreadInteractedWith,onCancel:this.onThreadReplyCancel,onStartEdit:this.onStartEdit,onEndEdit:this.onEndEdit,isMobile:h,thread:e,user:s,mentionsMatches:l,showRevisionInfo:y,streamSettings:v,stickerPacks:b,thirdPartySource:this.props.thirdPartySource,openWith:this.props.openWith,renderApprovalForm:this.props.renderApprovalForm,approvalFormStatus:this.props.approvalFormStatus}))))))),t.reactExports.createElement("div",{className:k},t.reactExports.createElement("div",{className:M},A),this.includeEditorMeatball&&w))))}}Kx.childContextTypes={showApproval:r.PropTypes.bool},Kx.displayName="CommentStream";const Lx=c.defineMessage({id:"Nsn7u9",defaultMessage:"Add your thoughts"}),Ux=c.defineMessage({id:"eqe9mn",defaultMessage:"Comments have been disabled for this file."}),qx=c.defineMessage({id:"2mbxT1",defaultMessage:"Comments and approval requests have been disabled for this file."});class Wx extends t.reactExports.PureComponent{constructor(e){super(e),this.hasShownAuthModalOnFocus=!1,this.getCommentsActionsAdapter=(e,t,r,o,i,a,s)=>function({dispatch:e,user:t,getFileId:r,getUrl:o,getCommentsBladeId:i,onEditorFocused:a,showAuthModal:s,approvalIOClient:c,onClickAnnotation:l}){const u=(n,i)=>{if(t){const a=o()||r();e(d.addAndCommitComment(t,a,n,i)),e(m.setApprovalForm({[a]:{}}))}else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}};return{onThreadCreated(n,a){if(t)e(d.addCommentAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o()),comment:d.iCommentContentToUserSubmittedComment({content:n,annotation:a}),source:{".tag":"editor"}}},{tempThreadId:d.v4(),content:n,annotation:a,author:t,fileViewerId:i()}));else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onThreadActivated(t){e(d.activateThread({fileId:r(),sharedLinkURL:o(),fileViewerId:i(),threadId:t.id,isThirdParty:t.isThirdParty}))},onAllThreadsDeactivated(){e(d.deactivateAllThreads({fileViewerId:i()})),e(d.focusThread(i(),null))},onThreadMouseEnter(t){e(d.hoverThread(i(),t))},onThreadMouseLeave(){e(d.hoverThread(i(),null))},onThreadFocus(t){e(d.focusThread(i(),t))},onThreadBlur(){e(d.focusThread(i(),null))},onThreadRepliedTo(n,a){if(t)e(d.addCommentAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o()),thread_id:n,comment:d.iCommentContentToUserSubmittedComment({content:a})}},{content:a,author:t,fileViewerId:i()}));else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onThreadMarkedAsRead(t){e(d.markThreadReadAction({arg:{id:t,stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onThreadMarkedAsUnread(t){e(d.markThreadUnreadAction({arg:{id:t,stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onThreadResolved(n){if(t)e(d.resolveThreadAction({arg:{id:n,stream:d.createStreamFromFileOrSharedLink(r(),o())}}));else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onThreadUnresolved(n){if(t)e(d.unresolveThreadAction({arg:{id:n,stream:d.createStreamFromFileOrSharedLink(r(),o())}}));else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onCommentEdited(t,n,i){e(d.editCommentAction({arg:{id:t,stream:d.createStreamFromFileOrSharedLink(r(),o()),comment:d.iCommentContentToUserSubmittedComment({content:n})}},{threadId:i,content:n}))},onEnableComments(){e(d.enableCommentingAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onDisableComments(){e(d.disableCommentingAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onCommentDeleted(t,n){e(d.deleteCommentAction({arg:{id:t,stream:d.createStreamFromFileOrSharedLink(r(),o())}},{threadId:n}))},onSortComments(t){window.localStorage.setItem(xb,t),e(d.sortComments(t))},onMentionsQueryUpdated(t){e(d.searchContacts(t))},onCommentDraftCancel(){e(d.cancelAnnotating(i()))},onEditorFocused(){e(d.editorDidFocus(i())),e(d.warmContacts({})),null==a||a()},onClickAnnotation(e){null==l||l(e)},onSubscribe(){e(d.subscribeAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onUnsubscribe(){e(d.unsubscribeAction({arg:{stream:d.createStreamFromFileOrSharedLink(r(),o())}}))},onClickOlderInfo:n.noop,onEditorStateChange:n.noop,onApproverRespond(t){const n=o()||r();null==c||c.logger.logRespondClick(r(),t),e(m.setApprovalForm({[n]:{activeForm:"respond",threadId:t}}))},onEditApproval(t,n){const i=o()||r();"approver"==n.approvalMetadata.actor?(null==c||c.logger.logEditApprovalResponseClick(r(),t),e(m.setApprovalForm({[i]:{activeForm:"response_edit",threadId:t,editArgs:n}}))):"requester"==n.approvalMetadata.actor&&(null==c||c.logger.logEditApprovalRequestClick(r(),t),e(m.setApprovalForm({[i]:{activeForm:"request_edit",threadId:t,editArgs:n}})))},onDeleteApprovalComment(n,i,a){if(c)if(t){const s=o()||r(),l=()=>{e(d.deleteAndCommitComment(t,s,i,n))};c.showApprovalDeleteCommentModal(r(),n,a,l)}else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onAddApprovalSuccess(e,t){u(e,t)},onEditApprovalSuccess(n,i,a){if(t){const s=o()||r();e(d.editAndCommitComment(t,s,i,n,a)),e(m.setApprovalForm({[s]:{}}))}else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onResubmitApprovalFocus(t){const n=o()||r();null==c||c.logger.logResubmitRequestClick(r(),t),e(m.setApprovalForm({[n]:{activeForm:"request_resubmit",threadId:t}}))},onResubmitApprovalBlur(){const t=o()||r();e(m.setApprovalForm({[t]:{}}))},onResubmitApprovalRequest(e,t){if(!c)return;const n=r();c.resubmitApprovalRequest(n,e,t.text).then((()=>{c.logger.logResubmitRequestSuccess(n,e,t.text.length),u(t,e)}))},onRemoveApprovalThread(n){if(c)if(t){const i=o()||r(),a=()=>{e(d.deleteAndCommitThread(t,i,n))};c.showApprovalDeleteThreadModal(r(),n,a)}else{if(!s)throw new Error("showAuthModal or stream is not defined");s()}},onCommentActivated(t,n){const a=d.findCommentThread(n,t);a&&e(d.activateThread({fileId:r(),sharedLinkURL:o(),fileViewerId:i(),threadId:a.thread.id,isThirdParty:a.thread.isThirdParty}))}}}({dispatch:t,user:e,getFileId:()=>o,getUrl:()=>this.props.url,getCommentsBladeId:()=>r,onEditorFocused:()=>{!i||e||this.hasShownAuthModalOnFocus||(this.hasShownAuthModalOnFocus=!0,i())},seek:e=>{var t;"av"===(null===(t=this.props.navigation)||void 0===t?void 0:t.type)&&this.props.navigation.seek(e)},pause:()=>{var e;"av"===(null===(e=this.props.navigation)||void 0===e?void 0:e.type)&&this.props.navigation.pause()},approvalIOClient:a,onClickAnnotation:s,showAuthModal:i}),this.threadComparator=e=>(t,r)=>{const n=Ey(t)?t.annotation.time:0,o=Ey(r)?r.annotation.time:0;return n!==o?n-o:e?+r.timestamp-+t.timestamp:+t.timestamp-+r.timestamp},this.sortThreads=r.defaultMemoize(((e,t=!1)=>e?Object.values(e).sort(this.threadComparator(t)):[])),this.mentionsMatches=r.defaultMemoize(((e,t)=>({[e]:t}))),this.getMeatballMenu=()=>{const{fileId:e,url:r,config:n}=this.props;return t.reactExports.createElement(d.CommentsMeatball,{fileId:e,sharedLinkURL:r,className:d.classes.commentStreamMeatballIcon,approvalIOClient:n.approvalIOClient})},this.state={commentsActionAdapter:this.getCommentsActionsAdapter(this.props.user,this.props.dispatch,this.props.commentsBladeId,this.props.fileId,this.props.showAuthModal,this.props.approvalIOClient,this.props.onClickAnnotation)}}componentDidUpdate(){if(f.isRequestApproval()){const{url:e,fileId:t}=this.props,r=e||t;this.props.dispatch(m.setApprovalForm({[r]:{activeForm:"request",threadId:void 0}}))}if(this.state.commentsActionAdapter){const e=f.getApprovalCommentId();e&&this.state.commentsActionAdapter.onCommentActivated(e,Object.values(this.props.threads))}}componentDidMount(){this.props.boltInfo&&this.props.dispatch(d.boltSubscribe([this.props.boltInfo]))}componentWillUnmount(){this.props.boltInfo&&this.props.dispatch(d.boltUnsubscribe([this.props.boltInfo]))}UNSAFE_componentWillReceiveProps(e){e.dispatch===this.props.dispatch&&e.commentsBladeId===this.props.commentsBladeId&&e.fileId===this.props.fileId&&e.user===this.props.user&&e.showAuthModal===this.props.showAuthModal&&e.onClickAnnotation===this.props.onClickAnnotation||this.setState({commentsActionAdapter:this.getCommentsActionsAdapter(e.user,e.dispatch,e.commentsBladeId,e.fileId,e.showAuthModal,e.approvalIOClient,e.onClickAnnotation)}),e.boltInfo!==this.props.boltInfo&&(this.props.boltInfo&&e.dispatch(d.boltUnsubscribe([this.props.boltInfo])),e.boltInfo&&e.dispatch(d.boltSubscribe([e.boltInfo])))}render(){var e;const{activeThreadID:n,fileId:o,focusedThreadID:i,hoverThreadID:a,mentionsCurrentQuery:s,mentionsSearchResult:c,status:l,thirdPartySource:u,threads:p,intl:f,className:h,editorFactory:_,commentFactory:g,config:v,showResolvedComments:y,approvalFormStatus:b,approvalIOClient:E,commentsEnabled:x,url:S,stickerPacks:w,user:C}=this.props,{commentsActionAdapter:k}=this.state;if(void 0===l)return t.reactExports.createElement("div",{className:d.classes.commentsBladeLoadingSpinnerContainer},t.reactExports.createElement(r.Spinner,{className:"comments-blade-loading-spinner",size:"standard","aria-valuetext":f.formatMessage({id:"csFB2E",defaultMessage:"Loading"})}));const M=this.sortThreads(p),A=this.mentionsMatches(s,c),T=null!=C?C:{id:"dbid:guest_id",name:{display:"?",initials:"?",public:"?"}},O=f.formatMessage(Lx),I=l===d.Status.FullyEnabled?Cb:kb,D=null===(e=null==E?void 0:E.getUserExperiments())||void 0===e?void 0:e.flows_approval_flow_variant,R=(e,r)=>{if(!E||!b||!b.activeForm)return null;const i=S||o;if(e.indexOf(b.activeForm)<=-1)return null;const a={intl:this.props.intl,ioClient:E,onCancel:()=>{this.props.dispatch(m.setApprovalForm({[i]:{}}))},fileId:o,user:{initials:T.name.initials,photoUrl:T.photoUrl},inlineWithComments:r};return"request"===b.activeForm?t.reactExports.createElement(m.ApprovalRequestForm,Object.assign({},a,{approvalVariant:D,onRequestSuccess:k.onAddApprovalSuccess})):"request_edit"===b.activeForm&&b.threadId&&b.editArgs?b.threadId!==n?null:t.reactExports.createElement(m.ApprovalRequestForm,Object.assign({},a,{approvalVariant:D,onEditSuccess:k.onEditApprovalSuccess,editArgs:b.editArgs,threadId:b.threadId})):"respond"===b.activeForm&&b.threadId?b.threadId!==n?null:t.reactExports.createElement(m.ApprovalRespondForm,Object.assign({},a,{threadId:b.threadId,onRespondSuccess:k.onAddApprovalSuccess})):"response_edit"===b.activeForm&&b.threadId&&b.editArgs?b.threadId!==n?null:t.reactExports.createElement(m.ApprovalRespondForm,Object.assign({},a,{threadId:b.threadId,editArgs:b.editArgs,onEditSuccess:k.onEditApprovalSuccess})):null};if(!x)return t.reactExports.createElement("div",{className:r.cx({[d.classes.commentsBladeDisabledWrapperRedesign]:v.isRedesign})},t.reactExports.createElement(r.Text,{size:"small",color:"faint"},m.isApprovalEnabled(D)?f.formatMessage(qx):f.formatMessage(Ux)));const N=v.isRedesign?Kx:wb;return t.reactExports.createElement("div",{className:h},m.isApprovalEnabled(D)&&R(["request"],!1),t.reactExports.createElement(N,{actionsAdapter:k,enabled:!0,id:o,mentionsMatches:A,isMobile:!1,intl:f,settings:Object.assign(Object.assign({},I),{canShowEditorMeatball:!1}),showRevisionInfo:!1,threads:M,activeThreadID:n,user:T,hoverThreadID:a,focusedThreadID:i,editorFactory:_,commentFactory:g,thirdPartySource:u,showUnreadPill:!0,placeholderOverride:O,showResolvedComments:y,meatballMenu:this.getMeatballMenu(),renderApprovalForm:e=>R(e,!0),approvalFormStatus:b,showApproval:v.showApproval,approvalVariant:D,stickerPacks:w}))}}Wx.displayName="UnconnectedCommentsPane";const Hx=r.connect((function(e,t){var r,n,o,i;const{fileId:a,commentsBladeId:s,url:c}=t,l=a in e.boltInfo.fileIdentifierToBoltMap?a:null!=c?c:a;return{activeThreadID:e.activeThreadID[s],boltInfo:e.boltInfo.fileIdentifierToBoltMap[l],draftNumberedAnnotation:e.draftAnnotation[s],editorFocusRequested:Boolean(e.editorFocusRequest[s]),focusedThreadID:e.focusedThreadID[s],hoverThreadID:e.hoverThreadID[s],supportedEnhancements:e.supportedEnhancements[l],threads:e.threads[l],thirdPartySource:e.thirdPartySource[s],mentionsCurrentQuery:e.mentionsSearchResult.currentQuery,mentionsSearchResult:e.mentionsSearchResult.result,status:e.status[l],framePreciseCommentsEnabled:null!==(n=null===(r=e.mediaAddonFeatures)||void 0===r?void 0:r.frame_precise_comments)&&void 0!==n&&n,showResolvedComments:e.showResolvedComments,approvalFormStatus:e.approvalFormStatus[l],canEnableCommenting:null===(o=e.permissions[l])||void 0===o?void 0:o.can_enable_commenting,commentsEnabled:d.areCommentsEnabled(e,l),stickerPacks:null!==(i=e.stickerPacks)&&void 0!==i?i:void 0}}))(Wx);e.AccessibilityNames=C_,e.ActiveMacroChromeComponent=Rg,e.BaseLayer=Gh,e.Comment=fy,e.Comment$1=YE,e.CommentActionMenu=uy,e.CommentActionMenu$1=QE,e.CommentEditor=xv,e.CommentEditor$1=RE,e.CommentsBladePane=Hx,e.DefaultMentionShareFlowHandlers=gg,e.DeleteMode=dy,e.DeleteMode$1=JE,e.Draft=Ah,e.DraftComponent=Ig,e.DraftNames=Ih,e.EditorContainer=E_,e.FixedToolbarNames=x_,e.FolderOverviewNames=k_,e.GlobalStyleNames=w_,e.HyperlinkNames=Bh,e.InlineCommentEditorPostBar=iy,e.InlineCommentEditorPostBar$1=WE,e.InteractionLayer=Qh,e.LinkSpanComponent=O_,e.MacroNames=Rh,e.MentionShareFlowLayer=vg,e.MentionShareFlowNames=Fh,e.MentionSuggestionNames=Nh,e.MentionsEntityLayer=R_,e.MentionsMacroLayer=mg,e.NumberedComment=Ty,e.NumberedComment$1=lx,e.OlderInfo=ay,e.OlderInfo$1=HE,e.RightRailCommentInfo=sy,e.RightRailCommentInfo$1=VE,e.StyleLayer=p_,e.SuggestionLayer=hg,e.SuggestionSelectionNames=Ph,e.TaskNames=S_,e.TextLayer=Jh,e.TimeCodedComment=function(e){let r;const{active:n,annotation:o,framePreciseCommentsEnabled:i,frameRate:a}=e;if(o&&yy(o)){const{time:s}=o;if(0!==s){let c;Ay(o)&&(c=o.timeSec),r=t.reactExports.createElement(_y,{label:My(s,c,a,i),onClick:t=>e.actions.onClickAnnotation({annotationInfo:{type:"time",time:s},threadID:e.comment.threadId,e:t,active:n})})}}return t.reactExports.createElement(fy,Object.assign({},e),r)},e.TimeCodedComment$1=function(e){let r;const{active:n,annotation:o,framePreciseCommentsEnabled:i,frameRate:a}=e;if(o&&yy(o)){const{time:s}=o;if(0!==s){let c;ax(o)&&(c=o.timeSec),r=t.reactExports.createElement(_y,{label:ix(s,c,a,i),onClick:t=>e.actions.onClickAnnotation({annotationInfo:{type:"time",time:s},threadID:e.comment.threadId,e:t,active:n})})}}return t.reactExports.createElement(YE,Object.assign({},e),r)},e.UpdateLayer=Xh,e.calculateTimeCode=My,e.calculateTimeCode$1=ix,e.classes=Th,e.classes$1=I_,e.createDefaultStatus=function(e){return Vh(Object.assign(Object.assign({},Hh()),{hyperlink:{},globalStyle:{classNames:{}},folderOverview:{},task:{},mentionShareFlow:{},accessibility:{captureTab:!1},fixedToolbar:{activeFormatting:{}}}),e)},e.getOffsetParent=function(e,t){for(;e&&!e.classList.contains(t);)e=e.offsetParent;return e},e.getSelectedBlocksList=u_,e.getSelectionBlockTypes=function(e){const t=u_(e);let r=null;return t.forEach((e=>{if(e){const t=e.getType();if(null===r)r=t;else if(r!==t)return r=null,!1}return!0})),r||"unstyled"},e.getSelectionInlineStyle=function(e){const t={BOLD:!1,ITALIC:!1,UNDERLINE:!1,STRIKETHROUGH:!1},r=e.getSelection(),n=e.getCurrentContent(),o=r.getStartOffset(),i=n.getBlockForKey(r.getStartKey());return(r.isCollapsed()?e.getCurrentInlineStyle().toList().toJS():i.getInlineStyleAt(o).toArray()).forEach((e=>{e in t&&(t[e]=!0)})),t},e.intoFolderOverview=M_,e.isValidURL=T_,e.isVideoAnnotation=Ay,e.isVideoAnnotation$1=ax,e.mergeBlockDataByKey=(e,t,r,n=!1)=>{const o=e.getCurrentContent(),i=o.getBlockForKey(t).mergeIn(["data"],r),a=o.getBlockMap().merge({[t]:i}),s=e.getSelection(),c=Ah.EditorState.push(e,o.merge({blockMap:a}),"change-block-data");return n?c:Ah.EditorState.acceptSelection(c,s)},e.plug=Uh}));
//# sourceMappingURL=c_comments_component_pane.js-vfl-1YGNy.map

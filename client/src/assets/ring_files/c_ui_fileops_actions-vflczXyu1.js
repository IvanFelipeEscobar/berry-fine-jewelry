define(["exports","./c_tslib","./e_edison","./e_ui_page_files_router","./c_data_action_creators_index","./c_file_actions_strings","./c_files_view_file_actions_file_from_metadata","./c_action_bar_file_actions_logging","./c_sharing_async_share_modal_util","./c_core_i18n","./c_core_notify","./c_apex-metrics_src_types","./c_lodash-es_lodash","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","metaserver/static/js/modules/core/langpack"],(function(e,t,s,o,n,a,i,r,l,c,d,u,m,_,f,g,E,M,S,h,v,b,A,p,N,k,I,R,O,T,y,C,L,w,F,P,x,U,W,j,D){"use strict";const H={VIEW_ONLY_ACCESS_ERROR:"view_only_access_error",OFF_TEAM_OWNER_ERROR:"off_team_owner_error",OWNER_ONLY_MANAGE_MEMBERSHIP_ERROR:"owner_only_manage_membership_error",TEAM_SPACE_OWNER_ONLY_MANAGE_MEMBERSHIP_ERROR:"team_space_owner_only_manage_membership_error",TEAM_SPACE_ONLY_ON_TEAM_SHARING_ERROR:"team_space_only_on_team_sharing_error",NS_HAVE_MOUNTED_CHILDREN_NS_ERROR:"ns_have_mounted_children_ns_error"},Y={NESTED_SHARED_FOLDER_OWNERSHIP_SURRENDER:"action_nested_shared_folder_ownership_surrender",IMPLICIT_SHARE_ON_MOVE:"action_move_implicit_share"},V=(e,t)=>n=>s.React$1.createElement(o.Link,{hasNoUnderline:!0,inverse:!0,href:o.browse_uri_for_fq_path(e,t).toString()},s.React$1.createElement("strong",null,n));const B=({entries:e,loggingInfo:t,jobId:s,uid:n})=>{e.forEach((a=>{switch(a[".tag"]){case"failure":o.logFileAction({uid:n,action:t.failItemLogAction,num_files_selected:e.length,num_folders_selected:0,error_summary:a.failure[".tag"],error:a.failure[".tag"],jobId:s,extra:t.extra});break;case"other":o.logFileAction({uid:n,action:t.failItemLogAction,num_files_selected:e.length,num_folders_selected:0,error_summary:"other",error:"other",jobId:s,extra:t.extra});break;case"success":o.logFileAction({uid:n,action:t.successItemLogAction,num_files_selected:e.length,num_folders_selected:0,jobId:s,extra:t.extra,item_id:"file"===a.success[".tag"]||"folder"===a.success[".tag"]?a.success.id:void 0,item_size:"file"===a.success[".tag"]||"folder"===a.success[".tag"]?a.success.size:void 0,item_mime:"file"===a.success[".tag"]?a.success.mime_type:void 0})}}))};const z=c.intl.formatMessage({id:"zYM4td",defaultMessage:"Please unlock your Vault before attempting to add to this folder."}),Q=c.intl.formatMessage({id:"p2aC9a",defaultMessage:"Those files already exist in that folder."});const G=(e,t)=>{const s=[];return e.forEach((e=>{if("file"===e.success[".tag"]||"folder"===e.success[".tag"]){const o=e.success,n=t.find((e=>"file_id"in e?e.file_id===o.id:"id"in e&&e.id===o.id));if(n){const e=i.fileFromMetadata(n,o);s.push(e)}}})),s};function $(e,t,i,r,u){const m=o.Viewer.get_viewer().team_name;let _=!1;"is_cdm_member"in e&&e.is_cdm_member&&o.inSubDirectory(e.cdm_tmf_path,r)&&(_=!0);const f=function(e,t,n,i,r){const l=c.intl.formatMessage({id:"gVzSq7",defaultMessage:"You don’t have permission to move some of these items. Try moving items individually."});let d=null;const u=e=>0===e.length?"":a.getFilenameFromActionInfo(e[0]),m=u(i);t===H.OFF_TEAM_OWNER_ERROR?d=1===i.length?null==n?c.intl.formatMessage({id:"eqzXgU",defaultMessage:"The owner of <strong>{file_name}</strong> is a member of another team."},{file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):c.intl.formatMessage({id:"F7A+9f",defaultMessage:"The owner of <strong>{file_name}</strong> isn’t a member of {team_name}."},{team_name:n,file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):null==n?c.intl.formatMessage({id:"1mkOQ2",defaultMessage:"The owner of some of these shared folders is a member of another team."}):c.intl.formatMessage({id:"kXptr+",defaultMessage:"The owner of some of these shared folders isn’t a member of {team_name}."},{team_name:n}):t===H.OWNER_ONLY_MANAGE_MEMBERSHIP_ERROR?d=1===i.length?"is_cdm_member"in e&&e.is_cdm_member&&!r?c.intl.formatMessage({id:"rLKsQF",defaultMessage:"Only the owner of <strong>{file_name}</strong> can move it to the {team_name} team space."},{team_name:n,file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):c.intl.formatMessage({id:"Xkb8gG",defaultMessage:"Only the owner of <strong>{file_name}</strong> can move it to a team folder."},{file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):"is_cdm_member"in e&&e.is_cdm_member&&!r?c.intl.formatMessage({id:"Ic3QpQ",defaultMessage:"Only the owner can move some of these folders to the {team_name} team space."},{team_name:n}):c.intl.formatMessage({id:"AGXz3U",defaultMessage:"Only the owner can move some of these folders to a team folder."}):t===H.VIEW_ONLY_ACCESS_ERROR?d=1===i.length?c.intl.formatMessage({id:"4nfaRz",defaultMessage:"You can only view <strong>{file_name}</strong>. Ask an owner or editor of the folder for access to edit it."},{file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):c.intl.formatMessage({id:"vSscn6",defaultMessage:"You can’t edit some of these folders. Ask an owner or editor of the folders for access to edit them."}):t===H.TEAM_SPACE_OWNER_ONLY_MANAGE_MEMBERSHIP_ERROR||t===H.TEAM_SPACE_ONLY_ON_TEAM_SHARING_ERROR?d=1===i.length?c.intl.formatMessage({id:"xYXgy4",defaultMessage:"If you need to move <strong>{file_name}</strong>, ask your admin to move it for you."},{file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):l:t===H.NS_HAVE_MOUNTED_CHILDREN_NS_ERROR&&(d=1===i.length?c.intl.formatMessage({id:"sFivS0",defaultMessage:"<strong>{file_name}</strong> has other shared folders inside it. Try moving each shared folder individually."},{file_name:o.Emstring.em_snippet(m,o.SNIPPET_SIZES.FILENAME),strong:e=>s.React$1.createElement("strong",{style:{fontWeight:500}},e)}):l);return d}(e,t,m,i,_);if(null==f)return void(u&&u());d.Notify.clear();const g=t===H.TEAM_SPACE_OWNER_ONLY_MANAGE_MEMBERSHIP_ERROR||t===H.TEAM_SPACE_ONLY_ON_TEAM_SHARING_ERROR||t===H.NS_HAVE_MOUNTED_CHILDREN_NS_ERROR,E=function(e,t,s,n,a){if(t)return 1===n?c.intl.formatMessage({id:"MHxxzk",defaultMessage:"Can’t move out of the team space"}):c.intl.formatMessage({id:"XJI7dZ",defaultMessage:"Can’t move {num_of_files} items"},{num_of_files:n});return"is_cdm_member"in e&&e.is_cdm_member&&!a?c.intl.formatMessage({id:"S+fFwb",defaultMessage:"{count, plural, one{Can’t move shared folder to the {team_name} team space} other{Can’t move shared folders to the {team_name} team space}}"},{count:n,team_name:o.Emstring.em_snippet(s,o.SNIPPET_SIZES.DISPLAY_NAME)}):c.intl.formatMessage({id:"thmzHN",defaultMessage:"{count, plural, one{Can’t move shared folder to a team folder} other{Can’t move shared folders to a team folder}}"},{count:n})}(e,g,m,i.length,_);let M="";M=g?"/help/business/team-space-overview#moveout":"/help/business/team-space-overview#movein";const S=1===i.length,h=i[0]instanceof o.File&&S&&!g?c.intl.formatMessage({id:"tHNeW4",defaultMessage:"See owner"}):void 0;o.showMoveErrorModal({title:E,content:f,learnMoreLink:M,buttonString:h,onClick:()=>{i[0]instanceof o.File&&l.asyncShowShareModal(e.id,i[0],{origin:o.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS},(({path:e,qargs:t})=>o.getStoreForBrowse().dispatch(n.setUrl({path:e,qargs:t}))))}})}function q(e){return oe(e)&&"relocation_error"===e.failure[".tag"]&&"cant_nest_shared_folder"===e.failure.relocation_error[".tag"]}function Z(e,s,n,a){return!e.isError&&e.result.changeset_data&&e.result.changeset_data.length>0?()=>t.__awaiter(this,void 0,void 0,(function*(){o.Snackbar.close("browse-action"),o.logFileAction({uid:s.id,action:n.undoingLogAction,num_files_selected:e.result.entries.length,num_folders_selected:0,extra:n.extra}),r.rollback({changeset_data:e.result.changeset_data,userId:s.id,onSuccess:()=>{o.Snackbar.complete(n.undoSuccessSnackbarText,"browse-action"),o.logFileAction({uid:s.id,action:n.undoSuccessLogAction,num_files_selected:e.result.entries.length,num_folders_selected:0}),a&&a(!0)}})})):void 0}function X(){o.open_tab("https://help.dropbox.com/files-folders/share/shared-folder-differences#move_shared_folder")}const J={showPartialSuccess:(e,t)=>t?(o.setHandleUndo(t),o.Snackbar.show(s.React$1.createElement(o.Snackbar,{title:e,variant:"complete",actionButtonText:c.intl.formatMessage({id:"OfxyEk",defaultMessage:"Undo"}),onActionClick:t,closeButtonText:c.intl.formatMessage({id:"N4y79U",defaultMessage:"Learn More"}),onCloseClick:X,timeoutDelayMs:5e3,id:"browse-action"}))):o.Snackbar.show(s.React$1.createElement(o.Snackbar,{closeButtonText:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),actionButtonText:c.intl.formatMessage({id:"N4y79U",defaultMessage:"Learn More"}),onActionClick:X,timeoutDelayMs:5e3,title:e,variant:"complete",id:"browse-action"})),showFailure:e=>o.Snackbar.show(s.React$1.createElement(o.Snackbar,{closeButtonText:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),actionButtonText:c.intl.formatMessage({id:"N4y79U",defaultMessage:"Learn More"}),onActionClick:X,timeoutDelayMs:5e3,title:e,variant:"fail",id:"browse-action"}))},K=(e,t,s,n,a,i={})=>{if(t>0&&s>0){const s=n.getPartialSuccessSnackbarText(t,e,i);i.isNestedNamespaceError?J.showPartialSuccess(s,a):a?(o.setHandleUndo(a),o.Snackbar.completeWithUndo(s,a,"browse-action")):o.Snackbar.complete(s,"browse-action")}else if(t>0){const e=n.getSuccessSnackbarText(t);a?(o.setHandleUndo(a),o.Snackbar.completeWithUndo(e,a,"browse-action")):o.Snackbar.complete(e,"browse-action")}else{const e=n.getFailureSnackbarText(s,i);i.isNestedNamespaceError?J.showFailure(e):o.Snackbar.fail(e,"browse-action")}};function ee({folderLinkCta:e,folderName:t,fswIDs:s,successActions:o}){return(null==s?void 0:s.includes(Y.IMPLICIT_SHARE_ON_MOVE))?c.intl.formatMessage({id:"P6vPej",defaultMessage:"{count, plural, one{{count} item moved and can now be accessed by everyone with access to “{folderName}.”} other{{count} items moved and can now be accessed by everyone with access to “{folderName}.”}}"},{count:o,folderName:t,link:e}):c.intl.formatMessage({id:"315R6Z",defaultMessage:"{count, plural, one{Moved {count} item to <link>{folderName}</link>.} other{Moved {count} items to <link>{folderName}</link>.}}"},{count:o,folderName:t,link:e})}function te({folderLinkCta:e,folderName:t,fswIDs:s,isNestedNamespaceError:o,successActions:n,totalActions:a}){return(null==s?void 0:s.includes("action_move_implicit_share"))?c.intl.formatMessage({id:"FrPyCz",defaultMessage:"{successActions} of {totalActions} items moved and can now be accessed by everyone with access to “{folderName}.”"},{successActions:n,totalActions:a,folderName:t,link:e}):o?c.intl.formatMessage({id:"v6wzJx",defaultMessage:"{count, plural, one{Moved {succesfully_moved_files} out of {count} item to <link>{folderName}</link>.} other{Moved {succesfully_moved_files} out of {count} items to <link>{folderName}</link>.}} Shared folders can’t be moved to other shared folders."},{count:a,succesfully_moved_files:n,folderName:t,link:e}):c.intl.formatMessage({id:"VgRH6k",defaultMessage:"{count, plural, one{Moved {succesfully_moved_files} out of {count} item to <link>{folderName}</link>.} other{Moved {succesfully_moved_files} out of {count} items to <link>{folderName}</link>.}}"},{count:a,succesfully_moved_files:n,folderName:t,link:e})}function se(e){return"success"===e[".tag"]}function oe(e){return"failure"===e[".tag"]}function ne(e,t){const s=e.entries.filter(se),o=s.length,n=e.entries.filter(oe);return{numberOfSuccessfulActions:o,numberOfFailedActions:t.length-o,get updatedFiles(){return G(s,t)},get allErrorCounts(){return n.reduce(((e,t)=>{var s;return(e=null!=e?e:{})[t.failure[".tag"]]=(null!==(s=e[t.failure[".tag"]])&&void 0!==s?s:0)+1,e}),void 0)},get numberOfSuccessfulFiles(){return s.filter((e=>"file"===e.success[".tag"])).length},get numberOfSuccessfulFolders(){return s.filter((e=>"folder"===e.success[".tag"])).length},get firstErrorSummary(){var e,t;return null===(t=null===(e=null==n?void 0:n[0])||void 0===e?void 0:e.failure)||void 0===t?void 0:t[".tag"]}}}e.copyFiles_v2=function(e){return t.__awaiter(this,void 0,void 0,(function*(){const{files:t,newPath:s,onError:n,onUndo:i,onSuccess:r,user:l,isLockedVaultFolder:d,isPasteAction:u,actionId:m=""}=e;if(d)return o.Snackbar.fail(z,"browse-action"),void(null==n||n("client.cant_move_into_vault"));const _=o.filename(s),f=V(l,s),g=u?{sync:e=>c.intl.formatMessage({id:"xegVmx",defaultMessage:"{count, plural, one{Pasting {count} item...} other{Pasting {count} items...}}"},{count:e}),undo:c.intl.formatMessage({id:"xkxhEq",defaultMessage:"Undoing paste..."}),undoFail:c.intl.formatMessage({id:"biijKe",defaultMessage:"Couldn’t undo paste."}),undoComplete:c.intl.formatMessage({id:"gevTNB",defaultMessage:"Paste undone."}),failure:e=>c.intl.formatMessage({id:"fJ21+e",defaultMessage:"{count, plural, one{Couldn’t paste {count} item.} other{Couldn’t paste {count} items.}}"},{count:e}),partialSuccess:(e,t)=>c.intl.formatMessage({id:"o9R5u2",defaultMessage:"{count, plural, one{Pasted {succesfully_copied_files} out of {count} item.} other{Pasted {succesfully_copied_files} out of {count} items.}}"},{count:t,succesfully_copied_files:e}),success:e=>c.intl.formatMessage({id:"TIeF91",defaultMessage:"{count, plural, one{Pasted {count} item.} other{Pasted {count} items.}}"},{count:e})}:function(e,t){return{sync:e=>c.intl.formatMessage({id:"Xq8RFm",defaultMessage:"{count, plural, one{Copying {count} item...} other{Copying {count} items...}}"},{count:e}),undo:c.intl.formatMessage({id:"X8FnSw",defaultMessage:"Undoing copy..."}),undoFail:c.intl.formatMessage({id:"oYs0zq",defaultMessage:"Couldn’t undo copy."}),undoComplete:c.intl.formatMessage({id:"zgCNlD",defaultMessage:"Copy undone."}),failure:s=>c.intl.formatMessage({id:"0OnruC",defaultMessage:"{count, plural, one{Couldn’t copy {count} item to <link>{folderName}</link>.} other{Couldn’t copy {count} items to <link>{folderName}</link>.}}"},{count:s,folderName:e,link:t}),partialSuccess:(s,o)=>c.intl.formatMessage({id:"QA6Uk4",defaultMessage:"{count, plural, one{Copied {succesfully_copied_files} out of {count} item to <link>{folderName}</link>.} other{Copied {succesfully_copied_files} out of {count} items to <link>{folderName}</link>.}}"},{count:o,succesfully_copied_files:s,folderName:e,link:t}),success:s=>c.intl.formatMessage({id:"c5FpTz",defaultMessage:"{count, plural, one{Copied {count} item to <link>{folderName}</link>.} other{Copied {count} items to <link>{folderName}</link>.}}"},{count:s,folderName:e,link:t})}}(_,f);o.Snackbar.sync(g.sync(t.length),!0,"browse-action"),t.forEach((e=>{o.logFileAction({uid:l.id,action:o.WebUserActionLogEvent.COPY_ITEM_ATTEMPT,num_files_selected:t.length,num_folders_selected:0,item_id:e.file_id,extra:{action_id:m}})}));const E=yield a.copyFiles(t,s,l.id,{checkFSWs:!1}),M={attemptItemLogAction:o.WebUserActionLogEvent.COPY_ITEM_ATTEMPT,failItemLogAction:o.WebUserActionLogEvent.COPY_ITEM_FAIL,successItemLogAction:o.WebUserActionLogEvent.COPY_ITEM_SUCCESS,successLogAction:o.WebUserActionLogEvent.COPY_REQUEST_SUCCESS,failedLogAction:o.WebUserActionLogEvent.COPY_REQUEST_FAIL,undoingLogAction:o.WebUserActionLogEvent.COPY_UNDO,undoFailedLogAction:o.WebUserActionLogEvent.COPY_UNDO_REQUEST_FAIL,undoSuccessLogAction:o.WebUserActionLogEvent.COPY_UNDO_REQUEST_SUCCESS,undoingSnackbarText:g.undo,undoFailedSnackbarText:g.undoFail,undoSuccessSnackbarText:g.undoComplete,getFailureSnackbarText:g.failure,getPartialSuccessSnackbarText:g.partialSuccess,getSuccessSnackbarText:g.success};if(E.isError){o.Snackbar.close("browse-action"),null==n||n(E.error_summary);const e=()=>{o.Snackbar.fail(M.getFailureSnackbarText(t.length),"browse-action")};return $(l,E.error[".tag"],t,s,e),void o.logFileAction({uid:l.id,action:M.failedLogAction,num_files_selected:t.length,num_folders_selected:0,error_summary:E.error_summary,error:E.error[".tag"],jobId:null==E?void 0:E.jobId,extra:M.extra})}B({entries:E.result.entries,loggingInfo:M,jobId:E.jobId,uid:l.id});const S=ne(E.result,t),h=Z(E,l,M,i);K(t.length,S.numberOfSuccessfulActions,S.numberOfFailedActions,M,h,{isNestedNamespaceError:E.result.entries.some(q)}),null==r||r(S.updatedFiles,S.allErrorCounts),o.logFileAction({uid:l.id,action:M.successLogAction,num_files_selected:S.numberOfSuccessfulFiles,num_folders_selected:S.numberOfSuccessfulFolders,jobId:E.jobId,error_summary:S.firstErrorSummary,extra:M.extra})}))},e.getBatchUndoHandler=Z,e.getMovePartialSuccessSnackbarText=te,e.getMoveSuccessSnackbarText=ee,e.moveFiles=function e(s){var n,i;return t.__awaiter(this,void 0,void 0,(function*(){const{path:t,files:r,newPath:l,onError:d,onUndo:u,onSuccess:m,user:_,dataApiV2:f=a.ApiV2,checkFSWs:g,isLockedVaultFolder:E,extra:M,fswIDs:S=[],actionId:h=""}=s;if(E)return o.Snackbar.fail(z,"browse-action"),void(null==d||d("client.cant_move_into_vault"));if(o.paths_are_equal(t,l))return o.Snackbar.fail(Q,"browse-action"),void(null==d||d("client.disallowed_name"));const v=function(e,t,s){return{sync:e=>c.intl.formatMessage({id:"IE0PNM",defaultMessage:"{count, plural, one{Moving {count} item...} other{Moving {count} items...}}"},{count:e}),undo:c.intl.formatMessage({id:"XkY9GW",defaultMessage:"Undoing move..."}),undoFail:c.intl.formatMessage({id:"htZAqt",defaultMessage:"Couldn’t undo move."}),undoComplete:c.intl.formatMessage({id:"rrCngs",defaultMessage:"Move undone."}),failure:(s,{isNestedNamespaceError:o}={})=>o?c.intl.formatMessage({id:"U2agKj",defaultMessage:"{count, plural, one{Couldn’t move {count} item to <link>{folderName}</link>.} other{Couldn’t move {count} items to <link>{folderName}</link>.}} Shared folders can’t be moved to other shared folders."},{count:s,folderName:e,link:t}):c.intl.formatMessage({id:"aWWTan",defaultMessage:"{count, plural, one{Couldn’t move {count} item to <link>{folderName}</link>.} other{Couldn’t move {count} items to <link>{folderName}</link>.}}"},{count:s,folderName:e,link:t}),success:o=>ee({folderLinkCta:t,folderName:e,fswIDs:s,successActions:o}),partialSuccess:(o,n,{isNestedNamespaceError:a}={})=>te({folderLinkCta:t,folderName:e,fswIDs:s,isNestedNamespaceError:a,successActions:o,totalActions:n})}}(o.filename(l),V(_,l),S);o.Snackbar.sync(v.sync(r.length),!0,"browse-action"),r.forEach((e=>{o.logFileAction({uid:_.id,action:o.WebUserActionLogEvent.MOVE_ITEM_ATTEMPT,num_files_selected:r.length,num_folders_selected:0,item_id:e.file_id,extra:{action_id:h}})}));const b=yield f.moveFiles(r,l,_.id,{allowOwnershipTransfer:S.includes(Y.NESTED_SHARED_FOLDER_OWNERSHIP_SURRENDER),checkFSWs:g}),A={attemptItemLogAction:o.WebUserActionLogEvent.MOVE_ITEM_ATTEMPT,failItemLogAction:o.WebUserActionLogEvent.MOVE_ITEM_FAIL,successItemLogAction:o.WebUserActionLogEvent.MOVE_ITEM_SUCCESS,successLogAction:o.WebUserActionLogEvent.MOVE_REQUEST_SUCCESS,failedLogAction:o.WebUserActionLogEvent.MOVE_REQUEST_FAIL,undoingLogAction:o.WebUserActionLogEvent.MOVE_UNDO,undoFailedLogAction:o.WebUserActionLogEvent.MOVE_UNDO_REQUEST_FAIL,undoSuccessLogAction:o.WebUserActionLogEvent.MOVE_UNDO_REQUEST_SUCCESS,undoingSnackbarText:v.undo,undoFailedSnackbarText:v.undoFail,getPartialSuccessSnackbarText:v.partialSuccess,getSuccessSnackbarText:v.success,undoSuccessSnackbarText:v.undoComplete,getFailureSnackbarText:v.failure,extra:M};if(b.isError){if(o.Snackbar.close("browse-action"),null==d||d(b.error_summary),"to"===b.error[".tag"]&&"file_system_warnings"===b.error.to[".tag"]){const t=(null===(i=null===(n=b.error.to)||void 0===n?void 0:n.details)||void 0===i?void 0:i.map((({id:e})=>e)))||[],a=()=>e(Object.assign(Object.assign({},s),{checkFSWs:!1,fswIDs:t}));return void o.showFileSystemWarningsModal({fsws:b.error.to.details,onFinalAccept:a,confirmText:c.intl.formatMessage({id:"ds25UH",defaultMessage:"Move"})})}const t=()=>{o.Snackbar.fail(A.getFailureSnackbarText(r.length),"browse-action")};return $(_,b.error[".tag"],r,l,t),void o.logFileAction({uid:_.id,action:A.failedLogAction,num_files_selected:r.length,num_folders_selected:0,error_summary:b.error_summary,error:b.error[".tag"],jobId:null==b?void 0:b.jobId,extra:A.extra})}B({entries:b.result.entries,loggingInfo:A,jobId:b.jobId,uid:_.id});const p=ne(b.result,r),N=Z(b,_,A,u);K(r.length,p.numberOfSuccessfulActions,p.numberOfFailedActions,A,N,{isNestedNamespaceError:b.result.entries.some(q)}),null==m||m(p.updatedFiles,p.allErrorCounts),o.logFileAction({uid:_.id,action:A.successLogAction,num_files_selected:p.numberOfSuccessfulFiles,num_folders_selected:p.numberOfSuccessfulFolders,jobId:b.jobId,error_summary:p.firstErrorSummary,extra:A.extra})}))},e.nestedNamespaceSnackbars=J,e.showBatchCompletedSnackbar=K}));
//# sourceMappingURL=c_ui_fileops_actions.js-vflXQt4IJ.map

define(["require","exports","./c_tslib","./c_core_exception_info","./c_core_xhr","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","./c_csrf","./c_browser_cookies"],(function(e,t,r,o,i,n,c,s,a,d){"use strict";var _;!function(e){e.Reported="reported",e.ForceReported="force",e.Duplicate="duplicate",e.Ignored="ignored"}(_||(_={}));const f="js_exception";function u(t,o){return r.__awaiter(this,void 0,void 0,(function*(){try{const{getMetricsReporter:r}=yield new Promise((function(t,r){e(["./c_src_sink_index"],t,r)})).then((function(e){return e.index_esnext})),i={rollup_format:"amd"},n=r().child(i).createCounter({ns:f,name:"count"},{which:t,severity:o||"undefined",is_edison:(!!window.RUNNING_IN_EDISON).toString()});n.increment(),n.record()}catch(e){0}}))}let p,x=0;t._clearReportedException=function(){p=void 0},t.sendExceptionReport=function(e){if(window.EDISON_LOCALMODE)return;if(e.reported)return void u(_.Duplicate,e.severity);if(p&&!e.force&&!window._REPORT_ALL_JS_EXCEPTIONS_ENABLED)return void u(_.Ignored,e.severity);if(e.severity||(e.severity=o.SEVERITY.NONCRITICAL,e.tags=e.tags||[],e.tags.push("undefined_severity")),!e.stack_frames){const[t,r]=o.collectExceptionStack(e);e.stack_frames=t.reverse(),e.context_tb=r.reverse()}var t;e.tags=o.collectExceptionTags(e),e.excExtra=o.collectExceptionExtra(e),t=e.excExtra,x+=1,t.exception_number=x,window.DB_FRAME_BUST&&(e.severity=o.SEVERITY.USER_ERROR);const r={e:e.message,loc:window.location.href,ref:document.referrer,stack:JSON.stringify(e.stack_frames),context_tb:JSON.stringify(e.context_tb),tags:JSON.stringify(e.tags),exc_extra:JSON.stringify(e.excExtra||{}),sev:e.severity||""};i.sendXhr("/jse",r),p&&e.force?u(_.ForceReported,e.severity):u(_.Reported,e.severity),p=e.message,e.reported=!0}}));
//# sourceMappingURL=e_core_exception_reporter.js-vflnBcEJA.map

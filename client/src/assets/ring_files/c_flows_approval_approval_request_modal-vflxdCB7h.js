define(["exports","./e_edison","./c_core_i18n","./e_ui_page_files_router","./c_flows_approval_approval_io_client","./c_components_approval-forms_gating_utils","./c_components_approval-forms_url_utils","./c_components_approval-forms_approval_checkbox_in_share","./c_file_viewer_sdk_file_viewer_experiments"],(function(e,t,a,o,l,n,s,r,i){"use strict";const c="flows-approval-snackbar";const p=({file:e,user:s,onSuccess:r})=>{const{retryButtonText:p,closeButtonText:u}={closeButtonText:a.intl.formatMessage({id:"DksqCe",defaultMessage:"Close"}),retryButtonText:a.intl.formatMessage({id:"t5qBgj",defaultMessage:"Retry"})},[d,m]=t.reactExports.useState(!0);t.reactExports.useEffect((()=>{document.body.classList.contains("dig-Modal-body--open")&&document.body.classList.remove("dig-Modal-body--open")}));const _=t.reactExports.useCallback((()=>{m(!1)}),[]),f=t.reactExports.useCallback((e=>{o.Snackbar.update(t.React$1.createElement(o.Snackbar,{id:c,title:a.intl.formatMessage({id:"vzTxj6",defaultMessage:"Sending approval {numApprovers, plural, one {email} other {emails}}..."},{numApprovers:e}),variant:"sync"}))}),[]),v=t.reactExports.useCallback((e=>{o.Snackbar.update(t.React$1.createElement(o.Snackbar,{id:c,title:a.intl.formatMessage({id:"DlxyxT",defaultMessage:"Approval {numApprovers, plural, one {email} other {emails}} sent."},{numApprovers:e}),closeButtonText:u,variant:"complete"}))}),[u]),b=t.reactExports.useCallback(((e,l)=>{o.Snackbar.update(t.React$1.createElement(o.Snackbar,{id:c,title:a.intl.formatMessage({id:"1Mrdrn",defaultMessage:"Approval {numApprovers, plural, one {email} other {emails}} not sent."},{numApprovers:e}),closeButtonText:u,variant:"fail",onActionClick:()=>{f(e),l()},actionButtonText:p}))}),[u,p,f]);return t.React$1.createElement(n.ApprovalRequestModal,{file:{id:e.file_id,name:"fq_path"in e?o.filename(e.fq_path):e.filename,modifiedAt:(x=e.ts,null==x?"":o.format_date_timezone_offset(new Date(1e3*x),o.localized_datetime_format)),modifiedBy:"last_modified_name"in e?e.last_modified_name||void 0:null},onSubmit:e=>{_(),f(e)},onSubmitSuccess:e=>{v(e),null==r||r()},onSubmitFailure:(e,t)=>{b(e,t)},onRequestClose:_,ioClient:l.approvalIOClient(s.id),open:d,multiApprovers:"MULTI_APPROVER"===i.fileViewerFlowExperiments.approvalFlowVariantByUserId[s.id]});var x};e.launchApprovalRequestModal=function({file:e,user:l,onSuccess:n}){o.Modal$1.setAppElement(document.getElementById("embedded-app")||document.body),o.mountModal(t.React$1.createElement(a.Provider,{value:a.intl},t.React$1.createElement(p,Object.assign({},{file:e,user:l,onSuccess:n}))))}}));
//# sourceMappingURL=c_flows_approval_approval_request_modal.js-vflQX_2Kc.map

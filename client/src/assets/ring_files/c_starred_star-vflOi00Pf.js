define(["exports","./e_ui_page_files_router","./e_edison","./c_starred_constants","./c_core_i18n","./c_common_uuid"],(function(e,t,a,r,s,i){"use strict";const o=[r.StarredSource.HOME_STARRED,r.StarredSource.HOME_RECENTS];const n=new class{logClick(e,a,r,s,i,n){if("BROWSE"===i)return Promise.resolve();const l=[];if(o.includes(i)){const i=n?t.StarredLoggingTypes.CLICK_STAR:t.StarredLoggingTypes.CLICK_UNSTAR;l.push(t.logHomeActivity({eventName:i,role:e.role,extra:{resource_id:a,id_type:r,is_dir:s}}))}const c=n?t.WebUserActionLogEvent.STAR:t.WebUserActionLogEvent.REMOVE_STAR;return l.push(t.WebUserActionLog.log(e.id,c,{resource_id:a,id_type:r,is_dir:s,role:e.role,source:i})),Promise.all(l)}},l=({user:e,id:r,idType:o,isDir:l,source:c,itemName:d,onStarClick:u,tooltipPlacement:S,isReadOnly:g,isTabbing:_,tabIndex:m,starButtonClassName:p,alwaysShowUnstarred:f,ariaLabelledBy:R})=>{const b=t.useSelector((e=>t.getFileStarredData(e,r)));let C=!1,E=!0;(null==b?void 0:b.loadingState)===t.StarredLoadingStateEnum.LOAD_SUCCESS&&(C=b.isStarred,E=!1);const[y]=a.React$1.useState((()=>i.generateUUID("star-"))),A=t.useDispatch(),L=a.React$1.useMemo((()=>g?C?s.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:C?s.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):s.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})),[C,g]),T=a.React$1.useCallback((a=>{if(a.stopPropagation(),a.preventDefault(),!E){const a=!C;n.logClick(e,r,o,l,c,a),u&&u(a),A(t.updateStarredStatus({id:r,idType:o,newStatus:a,itemName:d,showSnackbar:!0}))}}),[E,C]);if(void 0===C)return null;if(g&&!C)return null;const v={star__toggle:!0,"star__toggle--starred":C,"star__toggle--unstarred":!C&&!_&&!f,"star__toggle--loading":E};return a.React$1.createElement(t.Tooltip,{title:L,placement:S||"top"},a.React$1.createElement("button",{className:t.cx(v,p),role:"button","aria-pressed":C,"aria-label":L,onClick:T,onDoubleClick:T,disabled:g,tabIndex:m,id:y,"aria-labelledby":t.cx(y,R)},a.React$1.createElement("span",{hidden:!0},L),a.React$1.createElement(t.UIIcon,{src:C?t.StarFill:t.StarLine})))};l.displayName="_Star";const c=t.requireCssWithComponent(l,["/static/metaserver/static/css/starred/star-vflRNeO9W.css"]);e.Star=c}));
//# sourceMappingURL=c_starred_star.js-vflNwZGBs.map

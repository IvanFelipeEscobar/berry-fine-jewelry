define(["exports","./c_flows_constants","./c_flows_redux_reducer","./e_ui_page_files_router","./c_src_common_constants","./c_tslib","./c_lodash-es_lodash","./c_flows_lib_api","./c_flows_logging_flows_loggers","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./e_edison","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/files_spa","./c_core_i18n","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_core_xhr","./c_csrf","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_core_notify","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/undo_strings"],(function(e,t,r,o,s,n,a,i,l,c,d,u,m,f,_,g,v,w,p,E,h,k,S,A,T,W,b,B,I,j,x,O,M,P,F,U,R,C){"use strict";const N=e=>e[o.AUTOMATIONS_NAMESPACE_KEY]||r.defaultAutomationsState,L=e=>{const{userAutomations:t}=N(e);return"completed"===t.status&&t.data?t.data.filter((e=>!r.isInherited(e))):[]},D=e=>{const{userExperiments:t}=N(e);return"completed"===t.status&&t.data?t.data:[]},q=e=>N(e).workflowBuilder,y=e=>{const t=q(e);return(null==t?void 0:t.actions)||[]},X=e=>{const{workflowStepsConfig:t}=N(e);return t},H=o.createSelector(X,y,((e,t)=>"completed"===e.status?0===t.length?e.allowedTriggers:1===t.length?Object.keys(e.triggerActionMaps).filter((r=>e.triggerActionMaps[r].includes(t[0].actionType))):e.allowedTriggers.filter((e=>"scheduled"!==e)):["file_add"])),K=e=>{var t;return(null===(t=q(e))||void 0===t?void 0:t.width)||s.MODAL_DEFAULT_WIDTH},V=o.createSelector(K,(e=>e===s.MODAL_FULL_WIDTH));const Y=e=>{var t;return null===(t=q(e))||void 0===t?void 0:t.savedWorkflowTemplateState},z=e=>{const r=D(e).find((e=>e.feature===t.UI_EXPERIMENTS.SUBFOLDER_INHERITANCE));return"ON"===(null==r?void 0:r.variant)},G=e=>t=>{const{inheritanceBlockingFqPaths:r}=N(t);return!!e&&r.has(e)};e.canWorkflowBuilderRenderPreview=V,e.getAllowedWorkflowActions=e=>{const{workflowStepsConfig:t}=N(e);return"completed"===t.status?t.allowedActions:[]},e.getAllowedWorkflowTriggers=H,e.getAutomationsState=N,e.getFlowsFolderRulesActionExperiments=e=>{const{workflowStepsConfig:t}=N(e);return"completed"===t.status&&t.actionExperiments||[]},e.getOptOutCheckboxState=e=>{const t=Y(e);return t&&t.optOut||!1},e.getSavedWorkflowTemplateCheckboxState=e=>{const t=Y(e);return t&&t.isChecked||!1},e.getSavedWorkflowTemplateExperiment=function(e){const{userExperiments:r}=N(e);let o;return"completed"===r.status&&r.data&&(o=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),o},e.getSavedWorkflowTemplateName=e=>{const t=Y(e);return void 0!==t&&t.name||""},e.getSavedWorkflowTemplateVariant=function(e){const{userExperiments:r}=N(e);let o;return"completed"===r.status&&r.data&&(o=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),(null==o?void 0:o.variant)||"OFF"},e.getSavedWorkflowTemplates=e=>{const{savedWorkflowTemplates:t}=N(e);return t||[]},e.getUserAutomation=e=>t=>{if(e)return L(t).find((({fqPath:t})=>t===e))},e.getUserAutomationWithInheritance=e=>t=>{const{userAutomations:r}=N(t);if(!e||"completed"!==r.status||!r.data)return;const s=new Map(r.data.map((e=>[e.fqPath,e])));if(s.has(e))return s.get(e);if(!z(t)||G(e)(t))return;let n=o.parent_dir(e);for(;"/"!==n;){const r=s.get(n);if(r)return r.inheritable?Object.assign(Object.assign({},r),{fqPath:e,inheritedFromFqPath:r.fqPath}):void 0;if(G(n)(t))return;n=o.parent_dir(n)}},e.getUserAutomations=L,e.getUserExperiments=D,e.getWorkflowBuilderActions=y,e.getWorkflowBuilderApplyToExisting=e=>{var t;return(null===(t=q(e))||void 0===t?void 0:t.applyToExistingFiles)||!1},e.getWorkflowBuilderDashboardActionSource=e=>{var t;return null===(t=q(e))||void 0===t?void 0:t.dashboardActionSource},e.getWorkflowBuilderEntryPoint=e=>{var t;return null===(t=N(e).workflowBuilder)||void 0===t?void 0:t.entryPoint},e.getWorkflowBuilderInheritable=e=>{var t;return(null===(t=q(e))||void 0===t?void 0:t.inheritable)||!1},e.getWorkflowBuilderIsEnabled=e=>{const t=q(e);return Boolean(null==t?void 0:t.isEnabled)},e.getWorkflowBuilderModalSessionId=e=>{var t;return(null===(t=N(e).workflowBuilder)||void 0===t?void 0:t.modalSessionId)||""},e.getWorkflowBuilderOperation=e=>{var t;return(null===(t=N(e).workflowBuilder)||void 0===t?void 0:t.operation)||"create"},e.getWorkflowBuilderStatus=e=>{var t;return null===(t=q(e))||void 0===t?void 0:t.isEnabled},e.getWorkflowBuilderSurface=e=>{var t;return null===(t=q(e))||void 0===t?void 0:t.surface},e.getWorkflowBuilderTrigger=e=>{const t=q(e);return null==t?void 0:t.trigger},e.getWorkflowBuilderWidth=K,e.getWorkflowStepsConfig=X,e.isInheritanceBlockingFqPath=G,e.shouldSeeSubfolderInheritance=z,e.shouldShowMultiStepWorkflowBuilder=e=>{const{userExperiments:r}=N(e);return!("completed"!==r.status||!r.data)&&r.data.some((e=>e.feature===t.UI_EXPERIMENTS.AUTOMATION_UI&&"M2"===e.variant))},e.shouldSubscribeToBolt=e=>N(e).shouldSubscribeToBolt}));
//# sourceMappingURL=c_flows_redux_selectors.js-vfl9805fg.map
